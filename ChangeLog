2010-12-22 17:13  martin

	* releases/opensc-0.12.0: Release 0.12.0

2010-12-22 17:12  martin

	* trunk/MacOSX/10.5/resources/ReadMe.html,
	  trunk/MacOSX/10.6/resources/ReadMe.html, trunk/NEWS,
	  trunk/configure.ac, trunk/win32/OpenSC.iss: Prepare for 0.12.0

2010-12-20 08:57  martin

	* trunk/src/libopensc/pkcs15-actalis.c: Fix r4977: C89 style to
	  support MS Visual Studio

2010-12-19 11:18  ep

	* trunk/src/libopensc/pkcs15-itacns.c: Wrong structure size
	  calculation in pkcs15-itacns.c; thanks to Matteo Nastasi for the
	  heads-up.
	* trunk/src/libopensc/pkcs15-actalis.c: Modified patch for Actalis
	  smart cards. Closes #235.

2010-12-18 00:44  andre

	* trunk/src/tools/pkcs11-tool.c: pkcs11-tool.c: Avoid compiler
	  warning 'may be used uninitialized in this function'.

2010-12-17 23:02  andre

	* trunk/src/tools/pkcs11-tool.c: pkcs11-tool.c: Simplifies
	  interface to show_key() and avoids more compiler warnings.

2010-12-17 19:09  andre

	* trunk/src/pkcs11/pkcs11-object.c: pkcs11-object.c: Add missing
	  initializers.

2010-12-17 18:47  andre

	* trunk/src/pkcs11/mechanism.c: mechanism.c: Removal of unused
	  variables.

2010-12-17 17:54  andre

	* trunk/src/pkcs11/framework-pkcs15.c: framework-pkcs15.c: Avoid
	  some warnings if the macro USE_PKCS15_INIT is undefined. That is
	  always the case if build without OpenSSL.

2010-12-17 17:12  dengert

	* trunk/src/pkcs11/framework-pkcs15.c: More ENABLE_OPENSSL changes
	  so sc_pkcs11_register_sign_and_hash_mechanism will not fail.

2010-12-17 16:30  andre

	* trunk/src/pkcs11/framework-pkcs15init.c: framework-pkcs15init.c:
	  Add missing initializers.

2010-12-17 10:15  martin

	* trunk/MacOSX/10.5/resources/ReadMe.html,
	  trunk/MacOSX/10.6/resources/ReadMe.html, trunk/configure.ac,
	  trunk/win32/OpenSC.iss: Build 0.12.0-rc2

2010-12-16 05:04  andre

	* trunk/src/libopensc/card-atrust-acos.c,
	  trunk/src/libopensc/card-cardos.c,
	  trunk/src/libopensc/card-entersafe.c,
	  trunk/src/libopensc/card-incrypto34.c,
	  trunk/src/libopensc/card-rutoken.c,
	  trunk/src/libopensc/card-starcos.c,
	  trunk/src/libopensc/errors.h, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/reader-openct.c: Rename of SC_NO_ERROR to
	  SC_SUCCESS.

2010-12-16 03:56  andre

	* trunk/src/pkcs11/framework-pkcs15.c: framework-pkcs15.c: More
	  specific log messages. Enables better tracking of errors.

2010-12-16 01:47  andre

	* trunk/src/pkcs15init/pkcs15-asepcos.c,
	  trunk/src/pkcs15init/pkcs15-cardos.c,
	  trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-incrypto34.c,
	  trunk/src/pkcs15init/pkcs15-jcop.c,
	  trunk/src/pkcs15init/pkcs15-miocos.c,
	  trunk/src/pkcs15init/pkcs15-muscle.c,
	  trunk/src/pkcs15init/pkcs15-myeid.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c,
	  trunk/src/pkcs15init/pkcs15-setcos.c,
	  trunk/src/pkcs15init/pkcs15-starcos.c,
	  trunk/src/pkcs15init/pkcs15-westcos.c: Add missing initializers.
	  Left over from r4508.

2010-12-15 13:47  andre

	* trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h:
	  pkcs15.h: Fixing type of parameter to avoid compiler warning:
	  'comparison between signed and unsigned'

2010-12-14 03:16  andre

	* trunk/etc/opensc.conf.in: opensc.conf: Better wording of
	  comments on max_x_size.

2010-12-14 03:11  andre

	* trunk/src/libopensc/pkcs15-algo.c: pkcs15-algo.c: Just making
	  the compiler happy.

2010-12-14 03:08  andre

	* trunk/src/libopensc/errors.c, trunk/src/libopensc/log.h,
	  trunk/src/pkcs11/misc.c: Textual output of SC_ERROR_* return
	  codes in debug messages.

2010-12-14 01:30  andre

	* trunk/etc/opensc.conf.in: opensc.conf: Lower the level of
	  emphasise on the max_x_size options. Users with USB devices
	  really shouldn't care about them.

2010-12-14 01:19  andre

	* trunk/src/libopensc/pkcs15-pubkey.c: pkcs11-pubkey.c: Minor
	  corrections related to r4874 and r4902.

2010-12-14 01:09  andre

	* trunk/src/libopensc/iso7816.c: iso7816.c: Fixes #301.

2010-12-13 14:14  martin

	* trunk/MacOSX/build: MacInstaller: add the build date to the DMG
	  label.

2010-12-13 06:28  andre

	* trunk/src/pkcs11/pkcs11-display.c: pkcs11-display: Fixing some
	  type mismatches that the compiler complains about.

2010-12-12 13:17  vtarasov

	* trunk/etc/Makefile.mak, trunk/src/Makefile.mak: win32: build of
	  MSI on checkouted trunk ... is possible after 'bootstrap' and
	  'configure'

2010-12-12 11:40  vtarasov

	* trunk/win32/OpenSC.iss: win32: default install dir 'Program
	  Files\OpenSC Project\OpenSC'

2010-12-12 10:30  vtarasov

	* trunk/src/cardmod/cardmod.c, trunk/src/libopensc/reader-pcsc.c,
	  trunk/src/pkcs11/pkcs11-spy.c: win32: change path to the OpenSC
	  registry keys Now it begins with "SOFTWARE\\OpenSC Project\\..."
	  .

2010-12-11 22:07  martin

	* trunk/src/libopensc/card-mcrd.c: EstonianEid: Add
	  SC_ALGORITHM_RSA_RAW to not make sc_pkcs15_compute_signature
	  remove the DigestInfo header.

2010-12-09 19:52  andre

	* trunk/src/libopensc/log.c: log.c: Fixes format string to match
	  actual type.

2010-12-09 19:49  andre

	* trunk/src/libopensc/pkcs15.c: pkcs15.c: Use size_t as type of
	  vector-index.

2010-12-09 09:38  vtarasov

	* trunk/win32/OpenSC.iss, trunk/win32/opensc-install.bat: win32:
	  path to OpenSC registry keys have been changed

2010-12-09 09:23  vtarasov

	* trunk/src/libopensc/ctx.c, trunk/src/pkcs15init/profile.c:
	  win32: change path to OpenSC windows registers

2010-12-09 09:21  vtarasov

	* trunk/src/Makefile.mak: win32: test 'BUILD_MSI' condition and
	  build MSI

2010-12-09 09:17  vtarasov

	* trunk/src/libopensc/pkcs15-pubkey.c: libopensc: avoid warning
	  'not all control paths return a value'

2010-12-09 09:16  vtarasov

	* trunk/win32/Make.rules.mak, trunk/win32/opensc-msi,
	  trunk/win32/opensc-msi/Make.rules.mak.works-for-vt,
	  trunk/win32/opensc-msi/Makefile.mak,
	  trunk/win32/opensc-msi/OpenSC.ico,
	  trunk/win32/opensc-msi/OpenSC.wxs,
	  trunk/win32/opensc-msi/README: win32: build MSI

2010-12-09 08:23  s

	* trunk/src/libopensc/card.c, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15-sec.c: fix: implicit depending on the
	  RSA algo_info for GOSTR3410 algo add sc_card_find_gostr3410_alg
	  function Thanks to Douglas E. Engert
	  http://www.opensc-project.org/pipermail/opensc-devel/2010-December/015408.html

2010-12-09 07:23  s

	* trunk/src/pkcs11/mechanism.c: add to r4904: fix calculating of
	  signature size for CKK_GOSTR3410

2010-12-08 08:56  martin

	* trunk/src/libopensc/pkcs15-esteid.c: Fix [4911]

2010-12-08 03:31  andre

	* trunk/src/pkcs11/framework-pkcs15.c: framework-pkcs15
	  [pkcs15_logout]: Better propagation of errors

2010-12-06 18:59  andre

	* trunk/src/libopensc/pkcs15-pin.c, trunk/src/libopensc/pkcs15.h:
	  sc_pkcs15_pincache_revalidate: Avoid compiler warning 'discards
	  qualifiers from pointer target type'

2010-12-06 18:51  andre

	* trunk/src/common/compat_strlcat.c: compat_strlcat: Avoid
	  compiler warning 'no newline at end of file'

2010-12-06 18:35  martin

	* trunk/src/common/simclist.h, trunk/win32/Make.rules.mak:
	  Complete change, SIMCLIST_DUMPRESTORE is by default off.

2010-12-06 18:33  andre

	* trunk/src/libopensc/pkcs15-pin.c: pkcs15-pin: If the usage
	  counter of a cached PIN is expired, then free that cached PIN
	  instead of freeing the objects content that is protected by the
	  PIN. If re-validation of a cached PIN fails, then free that
	  cached PIN to ensure that it isn't used again for re-validation.

2010-12-06 18:15  andre

	* trunk/src/libopensc/pkcs15.c: pkcs15.c: use int instead of bool
	  as type of configuration option pin_cache_counter

2010-12-06 16:28  andre

	* trunk/src/tools/pkcs11-tool.c: pkcs11-tool: replaced
	  OPENSSL_NO_EDSA with OPENSSL_NO_ECDSA

2010-12-06 15:49  vtarasov

	* trunk/win32/Make.rules.mak: win32: when cleaning delete also
	  manifest files

2010-12-06 15:47  vtarasov

	* trunk/src/Makefile.mak, trunk/win32/Make.rules.mak: win32:
	  control from Make.rules.mak the including of 'cardmod'

2010-12-06 15:20  vtarasov

	* trunk/src/tools/Makefile.mak, trunk/win32/Make.rules.mak: win32:
	  'netkey' and 'westcos' tools are OpenSSL dependents

2010-12-06 14:41  martin

	* trunk/src/tools/piv-tool.c, trunk/src/tools/pkcs11-tool.c:
	  tools: EC(DSA) requires OpenSSL >= 0.9.8. This fixes building
	  for OS X 10.5.

2010-12-06 14:18  martin

	* trunk/src/libopensc/card-piv.c: card-piv: remove unused
	  variables. card-piv.c: In function &#8216;piv_get_data&#8217;:
	  card-piv.c:879: warning: unused variable &#8216;filename&#8217;
	  card-piv.c:878: warning: unused variable &#8216;dataenvname&#8217;
	  card-piv.c:877: warning: unused variable &#8216;keyenvname&#8217;
	* trunk/src/libopensc/card-piv.c: PIV: amend [4908], Apple has
	  /usr/include/malloc/malloc.h

2010-12-06 12:52  martin

	* trunk/src/libopensc/card-entersafe.c: entersafe: don't list
	  supported exponents in the dirver. Native keys are generated
	  with exponent 65537, imported keys can now have any (?)
	  exponent. Tested with openssl genrsa -3/-f4 keys. Improves r4910
	  and closes #297
	* trunk/src/libopensc/pkcs15-esteid.c: EstonianEid: limit
	  authentication key usage bits.
	* trunk/src/libopensc/card-acos5.c,
	  trunk/src/libopensc/card-atrust-acos.c,
	  trunk/src/libopensc/card-starcos.c: libopensc: protect for
	  possible buffer overflows from rogue cards. Reported by Rafael
	  Dominguez Vega
	* trunk/src/libopensc/internal.h, trunk/src/libopensc/muscle.c:
	  libopensc: move MIN/MAX macros from muscle.c to internal.h

2010-12-06 12:51  martin

	* trunk/src/libopensc/pkcs15-esteid.c: EstonianEid: correctly free
	  the used OpenSSL structures. Thanks to Raul Metsma for the patch.

2010-12-06 09:37  ludovic.rousseau

	* trunk/src/libopensc/card-entersafe.c: entersafe_init(): add
	  support of RSA exponent 35 Closes: Ticket #297

2010-12-06 08:31  vtarasov

	* trunk/win32/winconfig.h.in: win32: _PATH_MAX not defined when
	  compiling with VS ... use instead the standard FILENAME_MAX

2010-12-06 08:30  vtarasov

	* trunk/src/libopensc/card-piv.c: card-piv: avoid warning 'differs
	  in levels of indirection from' ... when compiling with VS

2010-12-03 15:44  dengert

	* trunk/src/tools/piv-tool.c: Minor corrections to r4906

2010-12-03 15:15  dengert

	* trunk/src/tools/piv-tool.c, trunk/src/tools/pkcs11-tool.c: Test
	  for OPENSSL_NO_EC as some systems build OPENSSL without EC.

2010-12-02 08:59  martin

	* trunk/src/common/Makefile.am, trunk/src/common/simclist.c,
	  trunk/src/common/simclist.h: simclist: build with mingw32,
	  Visual Studio and gcc on Linux. By default dumprestore is OFF.

2010-12-01 20:08  dengert

	* trunk/src/libopensc/card-piv.c, trunk/src/libopensc/cardctl.h,
	  trunk/src/libopensc/libopensc.exports,
	  trunk/src/libopensc/padding.c,
	  trunk/src/libopensc/pkcs15-algo.c,
	  trunk/src/libopensc/pkcs15-piv.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-sec.c,
	  trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/mechanism.c, trunk/src/pkcs11/pkcs11-object.c,
	  trunk/src/tools/piv-tool.c, trunk/src/tools/pkcs11-tool.c:
	  Modifications to support EC and ECDSA for emulated cards. True
	  PKCS#15 cards with EC will need additional changes. Main changes
	  are in framework-pkcs15.c, mechanism.c, padding.c, pkcs15-algo.c
	  and pkcs15-sec.c where switch statements for key type, and
	  testing of flags was modified to make it easier to add
	  additional key types in the future. The code was tested using
	  RSA and ECDSA using a PIV card from pkcs11-tool, OpenSSL and
	  Thunderbird with modifications to NSS-3.12.7 to get ECDSA to
	  sign e-mail. Only named curves are supported for ECDSA, ECDH is
	  still needed. pkcs11-tool has only minimal changes need to work
	  with the -O option to list EC keys. One additional line was
	  added to pkcs15-sec.c which should get GOSTR sign to work.
	  libp11 and engine do not yet have EC support. --This line, and
	  those below, will be ignored-- M src/tools/piv-tool.c M
	  src/tools/pkcs11-tool.c M src/pkcs11/framework-pkcs15.c M
	  src/pkcs11/mechanism.c M src/pkcs11/pkcs11-object.c M
	  src/libopensc/pkcs15-prkey.c M src/libopensc/card-piv.c M
	  src/libopensc/padding.c M src/libopensc/cardctl.h M
	  src/libopensc/pkcs15-algo.c M src/libopensc/libopensc.exports M
	  src/libopensc/pkcs15-piv.c M src/libopensc/pkcs15-sec.c

2010-11-30 19:30  dengert

	* trunk/src/libopensc/card.c: Additional EC routines
	  _sc_card_add_ec_alg and sc_card_find_ec_alg

2010-11-30 19:13  dengert

	* trunk/src/libopensc/internal.h, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15-pubkey.c,
	  trunk/src/libopensc/pkcs15-syn.c, trunk/src/libopensc/pkcs15.h,
	  trunk/src/pkcs11/pkcs11.h: Support for ECC keys (part 1) header
	  files and support routines. Add definitions for EC keys,
	  parameters and extensions to structures. Add the
	  sc_card_find_ec_alg, sc_pkcs15_decode_pubkey_ec,
	  sc_pkcs15_encode_pubkey_ec, sc_pkcs15emu_add_ec_prkey,
	  sc_pkcs15emu_add_ec_pubkey routines. Only EC named curves are
	  currently supported.

2010-11-30 15:57  dengert

	* trunk/src/libopensc/pkcs15.h,
	  trunk/src/pkcs11/framework-pkcs15.c: Allow emulation routine to
	  setup an emulated object to be used instead of trying to read a
	  file. This will be used with the ECC code.

2010-11-30 15:32  dengert

	* trunk/src/pkcs11/debug.c: SPY does not process
	  CKA_ALWAYS_AUTHENTICATE

2010-11-30 12:33  martin

	* trunk/src/libopensc/card-mcrd.c: EstonianEid: Don't leak 1024bit
	  key to 2048b card properties
	* trunk/src/common/simclist.c: simclist: Visual studio does not
	  have unistd.h

2010-11-30 11:22  martin

	* trunk/src/common/simclist.c: libopensc: fix building new
	  simclist with mingw
	* trunk/src/libopensc/card-mcrd.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/reader-pcsc.c:
	  libopensc: make sc_reset() take an additional parameter
	  "do_cold_reset" which will unpower the card.

2010-11-29 14:22  martin

	* trunk/src/libopensc/iso7816.c: ISO 7816: if decrypting with 2048
	  keys, non-extended APDU cards require command chaining (Lc would
	  be 257, which is 2 bytes over 255 limit)
	* trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/mechanism.c: pkcs11: clean up mechanism
	  registration * check for out of memory conditions * register
	  SHA256 as well * key generation depends on onboard key
	  generation capabilities, not OpenSSL Further adjustments are
	  needed.
	* trunk/etc/opensc.conf.in, trunk/src/libopensc/card-mcrd.c,
	  trunk/src/libopensc/cards.h, trunk/src/libopensc/esteid.h,
	  trunk/src/libopensc/pkcs15-esteid.c,
	  trunk/src/libopensc/pkcs15-syn.c,
	  trunk/src/pkcs11/pkcs11-global.c, trunk/src/tools/eidenv.c:
	  EstEID: add support for v 3.0 cards with 2048b keys * Detect
	  different cards based on ATR-s and on card objects * Set the
	  card name from the ATR table * Conditionally add support for
	  2048b keys * Add workarounds for broken MULTOS and JavaCard
	  cards.

2010-11-29 13:56  martin

	* trunk/src/libopensc/reader-pcsc.c: Revert a protocol forcing
	  change from [4873] which was a mistake.
	* trunk/etc/opensc.conf.in, trunk/src/libopensc/reader-pcsc.c:
	  PC/SC: make (dis)connect actions configurable, SCardDisconnect,
	  SCardEndTransaction and SCardReconnect actions can now be
	  configured via opensc.conf in better detail.

2010-11-29 13:35  martin

	* trunk/src/libopensc/reader-pcsc.c: pcsc: a change in ATR will
	  not always mean a changed card, rely on PC/SC layer for card
	  change information. One of the few cards that has two different
	  ATR-s is the EstonianEid card. The changing ATR (especially if
	  it has different protocol information and historical bytes) can
	  cause confusion in many places, like Microsoft BaseCSP or
	  certain versions of pcsc-lite.

2010-11-29 13:34  martin

	* trunk/etc/opensc.conf.in: conf: correct comments about
	  OpenSC.tokend score meaning and default value.

2010-11-29 08:51  martin

	* trunk/src/libopensc/pkcs15-cert.c: typo: remove double semicolon
	  which prevents compilation with Visual Studio.
	* trunk/win32/OpenSC.iss: WindowsInstaller: overwrite files with
	  same version to allow nightly builds; replace and delete blocked
	  files on a reboot.

2010-11-29 00:58  andre

	* trunk/src/pkcs11/framework-pkcs15.c: framework-pkcs15: Do not
	  populate the unwrap capability, because the corresponding
	  function C_UnwrapKey isn't implemented.
	  http://www.opensc-project.org/opensc/browser/trunk/src/pkcs11/pkcs11-object.c?rev=4885#L969

2010-11-28 23:46  andre

	* trunk/src/tools/pkcs11-tool.c: pkcs11-tool: Completing the
	  output of "Mechanism Information Flags".

2010-11-28 22:16  andre

	* trunk/src/tools/pkcs11-tool.c: pkcs11-tool: Correcting the
	  behaviour in the case where C_SignUpdate fails. Quotation from
	  PKCS#11: "A call to C_SignUpdate which results in an error
	  terminates the current signature operation."

2010-11-28 18:09  andre

	* trunk/src/tools/pkcs11-tool.c: pkcs11-tool: Use attributes
	  MODULUS and PUBLIC_EXPONENT instead of VALUE to retrieve
	  RSA-Public-Key. The first two attributes are valid whereas the
	  latter is not.

2010-11-26 12:57  ludovic.rousseau

	* trunk/src/common/simclist.c, trunk/src/common/simclist.h: Update
	  from SimCList version 1.5
	  http://mij.oltrelinux.com/devel/simclist/

2010-11-25 00:20  andre

	* trunk/src/pkcs11/pkcs11-display.c: pkcs11-display.c: more
	  detailed less verbose output of CK_ATTRIBUTE lists
	  http://www.opensc-project.org/pipermail/opensc-devel/2010-November/015321.html

2010-11-24 20:28  dengert

	* trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/pkcs11-display.c,
	  trunk/src/pkcs11/pkcs11-session.c: Fix support for
	  CKU_ALWAYS_AUTHENTICATE and CKU_CONTEXT_SPECIFIC spy segfaulted
	  if CKU_CONTEXT_SPECIFIC was used, pkcs11-session was reseting
	  the userType before calling framework. Framework will now see
	  CKU_CONTEXT_SPECIFIC and use slot->login_user to determine which
	  PIN was used to create the original session, and will send the
	  PIN to the card. It does not treats CKU_CONTEXT_SPECIFIC as a
	  full login, only a reassertion of the PIN.

2010-11-20 09:30  ludovic.rousseau

	* trunk/src/libopensc/libopensc.exports:
	  sc_pkcs15emu_postponed_load is no more defined Compilation fails
	  on Mac OS X (but not on GNU/Linux): Undefined symbols:
	  "_sc_pkcs15emu_postponed_load", referenced from:
	  -exported_symbol[s_list] command line option ld: symbol(s) not
	  found

2010-11-19 18:09  andre

	* trunk/src/libopensc/card.c, trunk/src/libopensc/ctx.c: card.c:
	  Fixes the overriding of max_x_size limitations. In the result,
	  the limitations of cards are adjusted to fit the limitations
	  imposed by the configured reader. ctx.c: Lookup conf_block of
	  reader_driver by short_name Fixes #269

2010-11-18 23:31  andre

	* trunk/src/libopensc/pkcs15-syn.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/pkcs15.h,
	  trunk/src/pkcs11/framework-pkcs15.c: framework-pkcs15.c: new
	  logic to discover objects that were hidden before PIN
	  verification pkcs15.c: object search continues with normal
	  processing, even if enumeration of some files failed pkcs15.h:
	  obsolete prototype removed pkcs15-syn.c: now obsolete function
	  sc_pkcs15emu_postponed_load removed fixes: #266

2010-11-18 18:47  andre

	* trunk/src/libopensc/pkcs15.c: {{{more verbose messages for debug
	  in:__sc_pkcs15_search_objectssc_pkcs15_parse_dfsc_pkcs15_read_file}}}

2010-11-18 14:56  andre

	* trunk/src/tools/pkcs11-tool.c: In login() the flag
	  CKF_LOGIN_REQUIRED is now ignored. This makes the behaviour of
	  login() more predictable. If parameter --login is specified on
	  the command line, then C_Login() is always called.fixes #220

2010-11-08 17:05  dengert

	* trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-pubkey.c,
	  trunk/src/libopensc/pkcs15.h: Move decoding of subjectPubkeyInfo
	  from pkcs15-cert.c to pkcs15-pubkey.c and call the new
	  sc_pkcs15_pubkey_from_spki. Add
	  sc_pkcs15_pubkey_from_spki_filename to allow a file to contain
	  the subjectPubkeyInfo, which will be used the the PIV driver
	  when EC is implemented. The format of the file, is the same as
	  an X509 certificate subjectPublicKeyInfo and what OpenSSL calls
	  an EVP_PKEY, which includes the algorithm, any parameters and
	  the public key.

2010-11-08 12:37  martin

	* trunk/src/libopensc/card.c, trunk/src/libopensc/internal.h,
	  trunk/src/libopensc/reader-pcsc.c: PC/SC: move protocol
	  (T=0/T=1) selection to reader-pcsc.c, where it is used. Also,
	  check fot the required protocol before connecting to the card
	  and use the forced prtocol instead of re-connecting. See
	  http://lists.drizzle.com/pipermail/muscle/2010-November/008671.html

2010-11-08 12:29  martin

	* trunk/src/common/compat_getopt.h: Amend r4871: prevent mingw32
	  from including an incompatible getopt version.

2010-11-08 11:17  martin

	* trunk/configure.ac, trunk/src/common/Makefile.am,
	  trunk/src/common/compat_getopt.c,
	  trunk/src/common/compat_getopt.h: Trac #264: fix mingw32 build
	  with mingw32-runtime versions <= 3.13

2010-11-06 18:07  ludovic.rousseau

	* trunk/src/libopensc/pkcs15-itacns.c: Use 'const char *' instead
	  of 'char *' for static strings and avoids a lot of "discards
	  qualifiers from pointer target type" warnings

2010-11-06 18:05  ludovic.rousseau

	* trunk/src/libopensc/pkcs15-tcos.c: Use 'const char *' instead of
	  'char *' for static strings and avoids a lot of "discards
	  qualifiers from pointer target type" warnings

2010-11-06 17:07  ludovic.rousseau

	* trunk/src/libopensc/pkcs15-tcos.c: pkcs15-tcos.c: In function
	  &#8216;insert_pin&#8217;: pkcs15-tcos.c:216: warning: declaration of &#8216;r&#8217;
	  shadows a previous local pkcs15-tcos.c:194: warning: shadowed
	  declaration is here

2010-11-06 17:05  ludovic.rousseau

	* trunk/src/tools/pkcs15-tool.c: pkcs15-tool.c: In function
	  &#8216;verify_pin&#8217;: pkcs15-tool.c:976: warning: declaration of &#8216;r&#8217;
	  shadows a previous local pkcs15-tool.c:972: warning: shadowed
	  declaration is here

2010-11-06 17:04  ludovic.rousseau

	* trunk/src/tools/pkcs15-tool.c: pkcs15-tool.c:150: warning:
	  initialization discards qualifiers from pointer target type
	  pkcs15-tool.c:151: warning: initialization discards qualifiers
	  from pointer target type pkcs15-tool.c:152: warning:
	  initialization discards qualifiers from pointer target type
	  pkcs15-tool.c:153: warning: initialization discards qualifiers
	  from pointer target type pkcs15-tool.c:154: warning:
	  initialization discards qualifiers from pointer target type
	  pkcs15-tool.c:155: warning: initialization discards qualifiers
	  from pointer target type pkcs15-tool.c:156: warning:
	  initialization discards qualifiers from pointer target type
	  pkcs15-tool.c:157: warning: initialization discards qualifiers
	  from pointer target type pkcs15-tool.c:158: warning:
	  initialization discards qualifiers from pointer target type
	  pkcs15-tool.c:159: warning: initialization discards qualifiers
	  from pointer target type pkcs15-tool.c:160: warning:
	  initialization discards qualifiers from pointer target type

2010-11-06 17:01  ludovic.rousseau

	* trunk/src/tools/piv-tool.c: piv-tool.c: In function &#8216;gen_key&#8217;:
	  piv-tool.c:292: warning: declaration of &#8216;newkey&#8217; shadows a
	  global declaration piv-tool.c:97: warning: shadowed declaration
	  is here piv-tool.c: At top level: piv-tool.c:97: warning:
	  &#8216;newkey&#8217; defined but not used

2010-11-06 17:00  ludovic.rousseau

	* trunk/src/pkcs11/pkcs11-object.c: pkcs11-object.c: In function
	  &#8216;C_DigestInit&#8217;: pkcs11-object.c:455: warning: label &#8216;out&#8217;
	  defined but not used

2010-11-06 16:58  ludovic.rousseau

	* trunk/src/libopensc/pkcs15-pteid.c: pkcs15-pteid.c: In function
	  &#8216;sc_pkcs15emu_pteid_init&#8217;: pkcs15-pteid.c:56: warning: &#8216;buf&#8217; may
	  be used uninitialized in this function

2010-11-06 16:57  ludovic.rousseau

	* trunk/src/libopensc/ctx.c: ctx.c: In function
	  &#8216;sc_ctx_detect_readers&#8217;: ctx.c:548: warning: &#8216;r&#8217; may be used
	  uninitialized in this function

2010-11-06 16:54  ludovic.rousseau

	* trunk/src/libopensc/card-itacns.c: Declare internal functions as
	  static and fix compiler warnings card-itacns.c:90: warning: no
	  previous prototype for &#8216;itacns_match_cns_card&#8217;
	  card-itacns.c:125: warning: no previous prototype for
	  &#8216;itacns_match_cie_card&#8217; card-itacns.c:146: warning: no previous
	  prototype for &#8216;itacns_match_card&#8217;

2010-11-06 16:53  ludovic.rousseau

	* trunk/src/tools/opensc-explorer.c: opensc-explorer.c:89:
	  warning: function declaration isn&#8217;t a prototype

2010-11-06 16:50  ludovic.rousseau

	* trunk/src/libopensc/log.c: sc_do_log_va(): fix compiler warning
	  log.c:87: warning: format &#8216;%03ld&#8217; expects type &#8216;long int&#8217;, but
	  argument 8 has type &#8216;int&#8217;

2010-11-06 16:49  ludovic.rousseau

	* trunk/src/pkcs11/libpkcs11.c: C_LoadModule(): Fix compiler
	  warning libpkcs11.c:58: warning: format &#8216;%lx&#8217; expects type &#8216;long
	  unsigned int&#8217;, but argument 3 has type &#8216;int&#8217;

2010-11-06 13:03  ludovic.rousseau

	* trunk/src/pkcs15init/pkcs15-lib.c: Revert revision 4853 because
	  of a regression when initialing cards

2010-11-02 08:02  ludovic.rousseau

	* trunk/src/pkcs15init/pkcs15-lib.c: sc_pkcs15init_read_info(): do
	  not use affectation and test in the same line of code but use
	  two different lines so the code is easier to read.

2010-11-02 07:59  ludovic.rousseau

	* trunk/src/pkcs15init/pkcs15-lib.c: sc_pkcs15init_read_info(): do
	  not call sc_pkcs15init_parse_info() if sc_select_file() failed.
	  Thanks to Andre Zepezauer for the patch
	  http://www.opensc-project.org/pipermail/opensc-devel/2010-November/015216.html

2010-11-01 15:44  dengert

	* trunk/src/tools/piv-tool.c: Fix compile warning message.

2010-10-28 13:33  martin

	* trunk/src/pkcs11/pkcs11-global.c: PC/SC: temporarily disable
	  blocking C_WaitForSlotEvent until a checked version for
	  pcsc-lite 1.5.3-1.6.4 exists.

2010-10-28 13:11  martin

	* trunk/etc/opensc.conf.in, trunk/src/libopensc/card-mcrd.c:
	  EstonianEid: revert to old behavior and have the T=0 forcing.
	  Some cards have incorrect ATR-s and can cause troubles if
	  pcsc-lite by default tries to set T=1 by default.

2010-10-28 09:44  martin

	* trunk/src/pkcs11/pkcs11-global.c: FIXME: Don't issue SCardCancel
	  unless the environment is known not to hang (part 1)

2010-10-28 05:30  martin

	* trunk/etc/opensc.conf.in: EstonianEid: document more ATR-s in
	  opensc.conf

2010-10-25 20:58  dengert

	* trunk/src/cardmod/cardmod.c,
	  trunk/src/libopensc/pkcs15-pubkey.c,
	  trunk/src/libopensc/pkcs15-westcos.c,
	  trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/tools/pkcs15-tool.c: Additianl changes to r4805 which
	  made cert->pubkey a pointer to sc_pkcs15_pubkey_t Thanks to
	  Andre Zepezauer for pointing out most of these.

2010-10-23 06:54  s

	* trunk/src/tools/opensc-tool.c: fix: opensc-tool: invalid output
	  of access control for EF (add to r4509)

2010-10-22 15:48  martin

	* trunk/etc/opensc.conf.in, trunk/src/libopensc/card-mcrd.c:
	  EstonianEid: add a broken EstEID ATR to the Micardo driver.
	  Don't force a protocol for EstEID cards

2010-10-21 13:53  martin

	* trunk/configure.ac: build: detect xsl-stylesheet location for
	  latest opensuse.

2010-10-21 12:17  alonbl

	* trunk/configure.ac: detect man by xslstylesheetsdir too

2010-10-21 04:28  alonbl

	* trunk/configure.ac: bug#262 - force xsl-stylesheets when using
	  man/doc

2010-10-20 15:04  martin

	* trunk/src/libopensc/card-mcrd.c, trunk/src/libopensc/cards.h:
	  EstEID: remove incorrect ATR matching. A reset is required as
	  there is no way simpler way to identify a broken card.

2010-10-20 12:33  martin

	* trunk/src/tools/cardos-tool.c,
	  trunk/src/tools/cryptoflex-tool.c,
	  trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/opensc-tool.c: Missed these from r4818

2010-10-20 08:48  martin

	* trunk/src/libopensc/card-mcrd.c, trunk/src/libopensc/cards.h:
	  EstEID: add workarond for a buggy card.

2010-10-20 07:53  martin

	* trunk/src/tools/netkey-tool.c, trunk/src/tools/piv-tool.c,
	  trunk/src/tools/pkcs15-crypt.c, trunk/src/tools/pkcs15-tool.c,
	  trunk/src/tools/rutoken-tool.c, trunk/src/tools/westcos-tool.c:
	  tools: -v sets ctx->debug only if set more than once. -vv also
	  makes the debug go to stderr.

2010-10-19 11:25  martin

	* trunk/NEWS, trunk/configure.ac, trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak,
	  trunk/src/libopensc/pkcs15-esteid.c, trunk/win32/Make.rules.mak:
	  EstonianEid: remove the iconv dependency and use the common name
	  from the certificate as the card label. This makes it universal,
	  as some cards don't have the personal data file (Digi-ID) It
	  also makes it a bit ugly, as the common name is the name and
	  personal ID code concatenated like "FIRSTNAME,LASTNAME,123456789"

2010-10-15 14:29  martin

	* trunk/NEWS, trunk/README, trunk/doc/Makefile.am,
	  trunk/doc/README: Update documentation about about wiki and
	  package content.

2010-10-15 13:37  flc

	* trunk/src/cardmod/cardmod.c, trunk/src/libopensc/reader-pcsc.c:
	  fix sc_pkcs15_card_t struct change in cardmod.c and issue in
	  reader_pcsc.c for cardmod part too

2010-10-15 08:07  flc

	* trunk/etc/opensc.conf.in, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/reader-pcsc.c: Fix patch [4709] for cardmod
	  until build in one static dll

2010-10-14 19:55  dengert

	* trunk/src/libopensc/card-piv.c: Fix test code so will work with
	  card with real history object.

2010-10-14 14:59  dengert

	* trunk/src/libopensc/apdu.c: Fix 253 third fix for same problem.
	  The first fix r4761 added a test in the wrong place. Second fix
	  r4804 added the test in the correct place. This fix removes one
	  of the tests added by r4761

2010-10-12 15:26  dengert

	* trunk/src/libopensc/card-piv.c,
	  trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-gemsafeGPK.c,
	  trunk/src/libopensc/pkcs15-piv.c,
	  trunk/src/libopensc/pkcs15-pubkey.c,
	  trunk/src/libopensc/pkcs15.h,
	  trunk/src/pkcs11/framework-pkcs15.c: sc_pkcs15_pubkey_from_cert
	  now uses parse_x509_cert without OpenSSL. sc_pkcs15_cert now has
	  pointer to sc_pkcs15_pubkey, allowing it to be removed and used
	  separatly. sc_pkcs15_pubkey now has pointer to sc_algorithm_id
	  to faclitate addition of other key algorithms and their
	  parameters. Various code changes to free these structures and
	  references to the structures have been changed.

2010-10-08 14:53  dengert

	* trunk/src/libopensc/apdu.c: Fix #253 - Allow caller to read a
	  partial object by returning all that was read. Related to #257
	  which fixed a different path in apdu.c

2010-10-08 08:36  martin

	* trunk/src/tools/pkcs11-tool.c: pkcs11-tool: handle
	  non-recognized tokens gracefully.
	* trunk/src/tools/pkcs11-tool.c: pkcs11-tool: if no slot is
	  specified on the command line, try to locate a slot with a
	  token. A modified patch from Andre Zepezauer.

2010-10-07 15:12  vtarasov

	* trunk/src/libopensc/pkcs15-oberthur.c,
	  trunk/src/libopensc/pkcs15.h, trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c: oberthur: from the
	  common part remove the Oberthur specific tokenInfo flags Thanks
	  to Andre Zepezauer for the patch.

2010-10-07 13:43  martin

	* trunk/README: doc: Remove wiki links from README

2010-10-06 07:54  martin

	* trunk/src/libopensc/reader-pcsc.c: PC/SC: better detection of
	  card changing events.
	* trunk/configure.ac: Prepare for OpenSC 0.12.0-rc1

2010-10-06 07:53  martin

	* trunk/win32/installer_from_build.sh: WindowsInstaller: be
	  flexible with make dist result name.

2010-10-06 07:15  martin

	* trunk/src/pkcs11/sc-pkcs11.h: Fix leftover from r4646

2010-10-06 07:10  martin

	* trunk/win32/installer_from_build.sh: WindowsInstaller: simplify
	  the installer creation process
	* trunk/src/libopensc/internal-winscard.h: WindowsInstaller: Fix
	  Mingw32 Windows build

2010-10-05 20:37  alonbl

	* trunk, trunk/MacOSX, trunk/MacOSX/10.5,
	  trunk/MacOSX/10.5/resources, trunk/MacOSX/10.5/scripts,
	  trunk/MacOSX/10.6, trunk/MacOSX/10.6/resources,
	  trunk/MacOSX/10.6/scripts, trunk/doc, trunk/doc/tools,
	  trunk/etc, trunk/m4, trunk/solaris, trunk/src,
	  trunk/src/cardmod, trunk/src/common, trunk/src/libopensc,
	  trunk/src/pkcs11, trunk/src/pkcs15init, trunk/src/scconf,
	  trunk/src/tests, trunk/src/tests/regression, trunk/src/tools,
	  trunk/svnignore, trunk/win32: Update svn:ignore

2010-10-05 20:34  alonbl

	* trunk/Makefile.am, trunk/NEWS, trunk/configure.ac,
	  trunk/doc/Makefile.am, trunk/doc/api, trunk/doc/api.css,
	  trunk/doc/html.xsl, trunk/doc/man.xsl: Simplify build system,
	  remove the generated distributed files. Thread is at [1]. Build
	  with docs or man now requires xsltproc.
	  http://www.mail-archive.com/opensc-devel@lists.opensc-project.org/msg06750.html

2010-10-05 16:10  joao

	* trunk/src/libopensc/card-gemsafeV1.c: Add new ATR for the
	  Portuguese eID card.

2010-10-05 16:02  martin

	* trunk/src/libopensc/pkcs15-atrust-acos.c,
	  trunk/src/libopensc/pkcs15-esteid.c,
	  trunk/src/libopensc/pkcs15-gemsafeV1.c,
	  trunk/src/libopensc/pkcs15-itacns.c,
	  trunk/src/libopensc/pkcs15-openpgp.c,
	  trunk/src/libopensc/pkcs15-starcert.c,
	  trunk/src/libopensc/pkcs15-tccardos.c,
	  trunk/src/libopensc/pkcs15-westcos.c,
	  trunk/src/libopensc/pkcs15.c, trunk/src/pkcs15init/profile.c:
	  pkcs15: don't play with TokenInfo.version. 0 means PKCS#15 v1.1.
	  The flag is not used by OpenSC.

2010-10-05 15:44  martin

	* trunk/src/libopensc/pkcs15-actalis.c,
	  trunk/src/libopensc/pkcs15-atrust-acos.c,
	  trunk/src/libopensc/pkcs15-cache.c,
	  trunk/src/libopensc/pkcs15-esinit.c,
	  trunk/src/libopensc/pkcs15-esteid.c,
	  trunk/src/libopensc/pkcs15-gemsafeGPK.c,
	  trunk/src/libopensc/pkcs15-gemsafeV1.c,
	  trunk/src/libopensc/pkcs15-infocamere.c,
	  trunk/src/libopensc/pkcs15-itacns.c,
	  trunk/src/libopensc/pkcs15-oberthur.c,
	  trunk/src/libopensc/pkcs15-openpgp.c,
	  trunk/src/libopensc/pkcs15-piv.c,
	  trunk/src/libopensc/pkcs15-postecert.c,
	  trunk/src/libopensc/pkcs15-pteid.c,
	  trunk/src/libopensc/pkcs15-starcert.c,
	  trunk/src/libopensc/pkcs15-tccardos.c,
	  trunk/src/libopensc/pkcs15-tcos.c,
	  trunk/src/libopensc/pkcs15-westcos.c,
	  trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h,
	  trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c,
	  trunk/src/pkcs15init/profile.c, trunk/src/tests/print.c,
	  trunk/src/tools/pkcs15-crypt.c, trunk/src/tools/pkcs15-init.c,
	  trunk/src/tools/pkcs15-tool.c: libopensc: move TokenInfo fields
	  from sc_pkcs15_card_t to a separate structure. Thanks to Andre
	  Zepezauer for the patch. See
	  http://www.opensc-project.org/pipermail/opensc-devel/2010-September/015076.html

2010-10-05 15:12  martin

	* trunk/src/libopensc/reader-pcsc.c: Remove now unused variables.

2010-10-05 14:58  martin

	* trunk/src/libopensc/internal.h: libopensc: remove unused
	  SC_CTX_MAGIC define
	* trunk/src/libopensc/card.c, trunk/src/libopensc/internal.h,
	  trunk/src/libopensc/libopensc.exports,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15.c:
	  libopensc: remove meaningless sc_card_valid()
	* trunk/src/libopensc/reader-pcsc.c: PC/SC: simplify reader state
	  detection. This needs to be improved further, based on revision
	  5278 of pcsc-lite.
	* trunk/src/libopensc/reader-pcsc.c: PC/SC: move reader feature
	  detection to a separate function. Don't detect features of a
	  reader that is in exclusive mode.
	* trunk/src/tools/opensc-tool.c: opensc-tool: don't print reader
	  driver (only one is enabled by default), instead print the
	  presence of a card.

2010-10-05 14:42  martin

	* trunk/src/pkcs11/pkcs11-spy.c: pkcs11-spy: log matching objects
	  in hex. Patch from Andre Zepezauer

2010-10-04 15:58  dengert

	* trunk/src/libopensc/pkcs15-algo.c: Fix erros with freeing
	  algorithm parameters and last entry of the algorithm_table.

2010-09-28 13:12  martin

	* trunk/MacOSX/build: MacInstaller: prefer http over git.

2010-09-27 14:06  martin

	* trunk/MacOSX/build: MacInstaller: allow building a x86 only
	  version for 10.5

2010-09-27 07:50  viktor.tarasov

	* trunk/src/pkcs15init/myeid.profile,
	  trunk/src/pkcs15init/pkcs15-myeid.c: myeid: applied patch for
	  MyEID card profile provided by Tony (Aventra development),
	  thanks.

2010-09-26 21:30  alonbl

	* trunk/Makefile.am, trunk/configure.ac, trunk/doc/Makefile.am,
	  trunk/doc/nonpersistent, trunk/doc/svn2cl.xsl: Don't dump wiki
	  content into distribution package. As requested by Martin[1].
	  Before releasing a new formal version, run: $ make
	  Generate-ChangeLog It generates the ChangeLog out of svn and
	  autoreconf again for package inclusion. [1]
	  http://www.opensc-project.org/pipermail/opensc-devel/2010-September/015014.html

2010-09-25 20:35  viktor.tarasov

	* trunk/src/libopensc/ctx.c, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/padding.c,
	  trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15.c: libopensc: homogenise line ending
	  in the debug messages continuating r4759

2010-09-25 20:25  viktor.tarasov

	* trunk/src/libopensc/card-myeid.c: myeid: remove windows line
	  ending because it give the wrong LINE value in the debug
	  messages that follows

2010-09-24 20:37  dengert

	* trunk/src/libopensc/card-piv.c, trunk/src/libopensc/cardctl.h,
	  trunk/src/libopensc/ctx.c, trunk/src/libopensc/pkcs15-piv.c,
	  trunk/src/tools/piv-tool.c: PIV support for NIST 800-73-3
	  objects, PIV driver client can build and run without OpenSSL,
	  (admin functions and piv-tool still need OpenSSL) define PIV
	  specific ctrl codes and structures.

2010-09-24 18:34  dengert

	* trunk/src/libopensc/card-piv.c: Remove max_recv_size checks

2010-09-24 07:24  martin

	* trunk/src/tools/pkcs11-tool.c: pkcs11-tool: only do hotplug
	  testing before other activities. Thanks to Andre Zepezauer for
	  noticing.

2010-09-23 11:57  flc

	* trunk/src/cardmod/cardmod.c: Fix issue in log message in cardmod
	  with i386-mingw-gcc v 3.4.5

2010-09-22 20:57  dengert

	* trunk/src/libopensc/pkcs15-itacns.c: allow pkcs15-itacns.c
	  compile without OpenSSL

2010-09-22 15:12  dengert

	* trunk/src/libopensc/card-piv.c: Another max_recv_size fix

2010-09-22 14:55  dengert

	* trunk/src/libopensc/apdu.c: Fix #257 Reading partial objects
	  differs for T=0 vs T=1

2010-09-22 14:41  dengert

	* trunk/src/pkcs11/pkcs11-object.c, trunk/src/pkcs11/sc-pkcs11.h:
	  Allow c_FindObjectsInit to find unlimited objects - #258

2010-09-22 12:17  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-oberthur-awp.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c: pkcs15init: homogenise
	  line ending of debug messages

2010-09-22 12:06  martin

	* trunk/configure.ac: build: darwin specific customizations not
	  needed, need_dash_r for solaris not used.

2010-09-22 11:51  viktor.tarasov

	* trunk/src/libopensc/apdu.c: libopensc: remove 'max_xx_size' from
	  debug message after the 'max_xx_size' stuff has been reverted

2010-09-22 11:47  martin

	* trunk/MacOSX/build: MacInstaller: simplify configure arguments
	* trunk/configure.ac: build: remove ancient and unsupported
	  platform checks, added in [94]

2010-09-22 11:46  viktor.tarasov

	* trunk/src/tools/opensc-explorer.c: opensc-explorer: to use AID
	  of maximal allowed length in 'cd' command

2010-09-22 10:02  martin

	* trunk/NEWS: Update NEWS. Remove references to local wiki dumps
	  and an outdated online page.

2010-09-21 18:14  s

	* trunk/src/pkcs15init/pkcs15-rtecp.c,
	  trunk/src/pkcs15init/rutoken_ecp.profile: Fix: default count of
	  attempt (use profile) for new version firmware

2010-09-21 16:11  martin

	* trunk/src/tools/pkcs11-tool.c: pkcs11-tool: print the token
	  before asking for a PIN code; shorten CKU_CONTEXT_SPECIFIC prompt
	* trunk/src/tools/pkcs11-tool.c: pkcs11-tool: do --test even
	  without a slot, at least hotplug. print a proper error name for
	  C_GetSlotInfo
	* trunk/src/pkcs11/mechanism.c, trunk/src/pkcs11/pkcs11-global.c:
	  pkcs11: move around CKR_ARGUMENTS_BAD check
	* trunk/doc/tools/pkcs11-tool.xml, trunk/src/tools/pkcs11-tool.c:
	  pkcs11-tool: pkcs11-tool --verbose does not affect OpenSC
	  debugging. Document a workaround
	* trunk/src/tools/pkcs11-tool.c: pkcs11-tool: cleanup whitespace
	  and remove unused OpenSSL ERR_* calls.
	* trunk/src/tools/pkcs11-tool.c: pkcs11-tool: better separation
	  between opaqe slot IDs and slot list indexes. --slot will take
	  the actual CK_SLOT_ID --slot-label will use the token label to
	  find the correct slot --slot-index will use the N-th slot from
	  the list returned by C_GetSlotList

2010-09-21 09:48  ludovic.rousseau

	* trunk/src/common/compat_getopt_main.c: Use "const char *"
	  instead of "char *" where needed. Fix compiler warnings:
	  compat_getopt_main.c: In function &#8216;main&#8217;:
	  compat_getopt_main.c:145: warning: initialization discards
	  qualifiers from pointer target type compat_getopt_main.c:288:
	  warning: assignment discards qualifiers from pointer target type
	  compat_getopt_main.c:336: warning: assignment discards
	  qualifiers from pointer target type compat_getopt_main.c:366:
	  warning: passing argument 3 of &#8216;handle&#8217; discards qualifiers from
	  pointer target type compat_getopt_main.c:76: note: expected
	  &#8216;char *&#8217; but argument is of type &#8216;const char *&#8217;

2010-09-21 09:45  ludovic.rousseau

	* trunk/src/common/compat_getopt_main.c: Remove an ugly cast and
	  fix a compiler warning compat_getopt_main.c: In function
	  &#8216;handle&#8217;: compat_getopt_main.c:123: warning: format &#8216;%s&#8217; expects
	  type &#8216;char *&#8217;, but argument 3 has type &#8216;long unsigned int&#8217;

2010-09-21 09:42  ludovic.rousseau

	* trunk/src/common/compat_getopt_main.c: VERSION is already
	  defined ni config.h included by compat_getopt.h Redefine our own
	  version of VERSION

2010-09-21 09:39  ludovic.rousseau

	* trunk/src/common/compat_getopt_main.c: include compat_getopt.h
	  instead of getopt.h Thanks to Guillaume JEAN for the patch
	  http://www.opensc-project.org/pipermail/opensc-devel/2010-September/014948.html

2010-09-21 09:37  ludovic.rousseau

	* trunk/src/common/Makefile.am: build but do not install
	  compat_getopt_main This is just used for testing the
	  compat_getopt code in libcompat

2010-09-20 23:10  martin

	* trunk/src/tools/pkcs15-tool.c: pkcs15-tool: harmonize and align
	  the output of --dump
	* trunk/src/tools/pkcs15-tool.c: pkcs15-tool: only print Auth ID
	  if present
	* trunk/src/tools/pkcs15-tool.c: pkcs15-tool: pretty-print common
	  object flags.

2010-09-20 15:01  martin

	* trunk/MacOSX/10.5/libltdl.3.dylib,
	  trunk/MacOSX/10.5/scripts/postflight, trunk/MacOSX/build,
	  trunk/src/tools/Makefile.am: MacInstaller: statically link
	  libltdl for 10.5, as 10.5 PPC comes without the necessary .dylib
	  (i386 has it) Thanks to Kalev Lember for the original patch.

2010-09-15 14:15  ludovic.rousseau

	* trunk/src/cardmod/cardmod.c: Remove the traces of C99: declare
	  variables before any code. Thanks to Guillaume JEAN for the
	  patch
	  http://www.opensc-project.org/pipermail/opensc-devel/2010-September/014903.html

2010-09-15 12:00  martin

	* trunk/src/libopensc/pkcs15-openpgp.c,
	  trunk/src/libopensc/pkcs15-westcos.c,
	  trunk/src/libopensc/pkcs15.h, trunk/src/pkcs15init/pkcs15-lib.c:
	  libopensc: Don't touch TokenInfo.flags->loginRequired See
	  http://www.opensc-project.org/pipermail/opensc-devel/2010-September/014871.html

2010-09-15 11:09  martin

	* trunk/src/libopensc/card.c, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/muscle.h: libopensc: check for unset
	  max_recv/send_size in all places.

2010-09-14 09:27  martin

	* trunk/src/libopensc/card-mcrd.c: EstEID: buffer is 2 bytes
	  bigger than max Le.

2010-09-14 08:49  martin

	* trunk/MacOSX/build: MacInstaller: fix syntax error
	* trunk/MacOSX/build: MacInstaller: simplify ./configure calling,
	  disable assert-s

2010-09-14 08:17  martin

	* trunk/configure.ac: build: add --disable-assert (enabled by
	  default)

2010-09-13 08:08  viktor.tarasov

	* trunk/src/common/Makefile.mak,
	  trunk/src/tools/opensc-explorer.c: opensc tools: to be compiled
	  with Visual Studio

2010-09-13 07:55  viktor.tarasov

	* trunk/src/libopensc/card-myeid.c: MyEID: to be compiled with
	  Visual Studio

2010-09-13 07:40  martin

	* trunk/src/libopensc/ctx.c, trunk/src/libopensc/types.h: By
	  default the reader driver does not have receive/send limitations.

2010-09-13 07:27  martin

	* trunk/src/libopensc/card.c: Add missing piece from r4706.

2010-09-11 13:01  martin

	* trunk/src/libopensc/ctx.c: whitespace fix
	* trunk/src/libopensc/ctx.c: libopensc: fix "ctx.c:389: warning:
	  unused parameter &#8216;opts&#8217;"

2010-09-11 13:00  martin

	* trunk/src/libopensc/ctx.c, trunk/src/libopensc/types.h:
	  libopensc: remove unused SC_MAX_READER_DRIVERS
	* trunk/configure.ac, trunk/doc/tools/opensc-tool.xml,
	  trunk/etc/opensc.conf.in, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/libopensc/reader-openct.c,
	  trunk/src/libopensc/reader-pcsc.c,
	  trunk/src/tools/opensc-tool.c: Fix #216: initial go with
	  multiple reader subsystem removal. * One sc_context has only a
	  single reader driver. * remove dynamic reader driver loading
	  capabilities * remove opensc-tool -R command * change the
	  internal API, we don't need to pass around a "driver data"
	  pointer as it can be found directly from the context. * check in
	  ./configure for only a single enabled reader driver
	* trunk/src/libopensc/types.h: libopensc: remove SC_MAX_READERS
	  which is not used.
	* trunk/src/libopensc/card-belpic.c: Belpic: remove
	  BELPIC_SET_LANG and related code, as it is not used in OpenSC

2010-09-09 18:58  martin

	* trunk/src/libopensc/apdu.c, trunk/src/libopensc/card-akis.c,
	  trunk/src/libopensc/card-atrust-acos.c,
	  trunk/src/libopensc/card-entersafe.c,
	  trunk/src/libopensc/card-gpk.c, trunk/src/libopensc/card-mcrd.c,
	  trunk/src/libopensc/card-miocos.c,
	  trunk/src/libopensc/card-muscle.c,
	  trunk/src/libopensc/card-myeid.c,
	  trunk/src/libopensc/card-piv.c,
	  trunk/src/libopensc/card-starcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/pkcs15-gemsafeGPK.c: Revert r4668. Change
	  the way limitations on max send and receive sizes are set. See
	  http://www.opensc-project.org/pipermail/opensc-devel/2010-September/014836.html

2010-09-09 17:28  s

	* trunk/src/libopensc/card-rutoken.c,
	  trunk/src/pkcs15init/pkcs15-rutoken.c: remove software RSA
	  support for Rutoken S Migration OpenSC to "new scheme" (further
	  to r4646)
	  http://www.opensc-project.org/pipermail/opensc-devel/2010-September/014717.html

2010-09-09 09:43  martin

	* trunk/MacOSX/10.5/scripts/postflight: MacInstaller: Simplify
	  file detection

2010-09-09 09:18  jps

	* trunk/MacOSX/10.5/libltdl.3.dylib,
	  trunk/MacOSX/10.5/scripts/postflight, trunk/MacOSX/build: MacOSX
	  10.5: Install libltdl.3.dylib if needed

2010-09-08 21:23  ep

	* trunk/src/libopensc/card-itacns.c,
	  trunk/src/libopensc/pkcs15-itacns.c: Avoid mixed declarations
	  and code in ItaCNS files, per C90

2010-09-08 07:52  flc

	* trunk/src/cardmod/cardmod.c: Fix small log issue

2010-09-07 12:53  martin

	* trunk/src/libopensc/card-myeid.c: MyEID: force PIN padding
	  properties (already set by sc_pkcs15* but not present with
	  opensc-explorer)

2010-09-07 12:49  martin

	* trunk/src/libopensc/card-myeid.c: MyEID: use ISO7816 pin_cmd.
	  Fix card_state logic.

2010-09-07 08:07  jps

	* trunk/MacOSX/opensc-uninstall: On MacOSX, we need to delete the
	  receipts too, after deleting the application files.

2010-09-06 09:32  martin

	* trunk/src/libopensc/card-mcrd.c: EstEID: Fix #250. Force a
	  SELECT FILE by cheating on the internal micardo path cache.

2010-09-06 08:54  martin

	* trunk/src/libopensc/card-mcrd.c: Micardo: remove redundant
	  mcrd_decipher. Handled by ISO7816

2010-09-05 19:55  martin

	* trunk/src/libopensc/card-jcop.c: card-jcop: remove dummy stubs.

2010-09-05 19:22  martin

	* trunk/src/libopensc/card-myeid.c: MyEID: remove no-op ISO7816
	  wrappers and not implemented stubs.

2010-09-05 18:21  viktor.tarasov

	* trunk/src/libopensc/card-myeid.c: MyEID: make working
	  change/unblock PIN tested with pkcs15-tool on Linux and Windows

2010-09-05 16:53  martin

	* trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/pkcs11-global.c: pkcs11: #250: refresh PIN
	  counters and associated token flags on every call to
	  C_GetTokenInfo
	* trunk/src/tools/pkcs11-tool.c: pkcs11-tool: recognize user PIN
	  related token flags

2010-09-05 16:52  martin

	* trunk/src/libopensc/card-mcrd.c: Micardo: Add
	  SC_PIN_CMD_GET_INFO support, currently only for EstEID cards.
	* trunk/src/libopensc/pkcs15-esteid.c: EstEID: style: use sizeof()
	* trunk/src/libopensc/opensc.h: libopensc: add SC_PIN_CMD_GET_INFO
	  and related fields to sc_pin_cmd_pin
	* trunk/src/pkcs11/framework-pkcs15.c: pkcs11: Remove the comment
	  about max_tries==1 and CKF_USER_PIN_FINAL_TRY Assuming the
	  driver has correctly set max_tries to 1 then PKCS#11 is very
	  clear about it: """ True if supplying an incorrect user PIN will
	  it to become locked. """

2010-09-04 20:46  viktor.tarasov

	* trunk/src/libopensc/card-myeid.c,
	  trunk/src/pkcs15init/myeid.profile,
	  trunk/src/pkcs15init/pkcs15-myeid.c,
	  trunk/src/pkcs15init/profile.c: MyEID: For Aventra card applied
	  Toni's patch, enriched by Andre's proposal see:
	  http://www.opensc-project.org/pipermail/opensc-devel/2010-August/014662.html

2010-09-04 20:21  viktor.tarasov

	* trunk/src/libopensc/pkcs15.c: libopensc: pkcs15: more of debug
	  messages

2010-09-04 20:19  viktor.tarasov

	* trunk/src/libopensc/pkcs15-sec.c: libopensc: supplement to the
	  previous commit

2010-09-04 20:16  viktor.tarasov

	* trunk/src/libopensc/card.c, trunk/src/libopensc/internal.h,
	  trunk/src/libopensc/libopensc.exports,
	  trunk/src/libopensc/opensc.h: libopensc: export
	  'sc_card_find_rsa_alg' Following proposal of Andre Zepezauer,
	  see
	  http://www.opensc-project.org/pipermail/opensc-devel/2010-August/014699.html

2010-09-04 20:08  viktor.tarasov

	* trunk/src/libopensc/apdu.c, trunk/src/libopensc/iso7816.c:
	  libopensc: in a supplement to r4668 Use 'max_recv_size' when
	  building APDU for 'select file'

2010-09-02 22:58  ep

	* trunk/src/libopensc/pkcs15-itacns.c: Fix signedness issues in
	  pkcs15-itacns.c
	* trunk/src/libopensc/pkcs15-itacns.c: Remove unused variables and
	  constants from pkcs15-itacns.c
	* trunk/src/libopensc/card-itacns.c: Squelch warning about unused
	  se_num argument in itacns_set_security_env(), as the driver is
	  computing the right argument from the security environment data.
	* trunk/src/libopensc/card-itacns.c: Fix signedness warnings in
	  card-itacns.c
	* trunk/src/libopensc/iso7816.c, trunk/src/libopensc/opensc.h:
	  Remove unused give_random operation
	* trunk/src/tools/opensc-explorer.c: Pass SFI as an
	  appropriately-sized number

2010-09-02 18:23  martin

	* trunk/src/tools/pkcs15-tool.c: Fixup for #102: also in command
	  help.

2010-09-02 18:21  martin

	* trunk/doc/tools/pkcs15-tool.xml: manpages: #102: --change-pin
	  also works for a PUK code.

2010-09-02 13:39  martin

	* trunk/src/libopensc/pkcs15-itacns.c: Style: // -> /**/

2010-09-02 13:38  martin

	* trunk/src/pkcs11/libpkcs11.c: libpkcs11: Print error messages
	  from PKCS#11 module loading

2010-09-02 09:19  viktor.tarasov

	* trunk/src/pkcs11/framework-pkcs15.c: pkcs11: #250: update slot
	  PIN flags when verifying slot's auth object

2010-09-01 11:50  martin

	* trunk/src/libopensc/apdu.c, trunk/src/libopensc/opensc.h:
	  libopensc: improve max_send/recv_size related code comments.
	* trunk/etc/opensc.conf.in: opensc.conf: Better comment for
	  max_send/recv_size meaning and default values.
	* trunk/src/libopensc/apdu.c: Ticket #226: Initial changes as
	  noted by reporter

2010-09-01 11:46  martin

	* trunk/src/pkcs11/framework-pkcs15.c: Add a FIXME for keys>2048b
	* trunk/src/libopensc/card-mcrd.c: EstEID: small fixes for working
	  with a modified max_send/recv_size

2010-09-01 06:23  martin

	* trunk/src/libopensc/pkcs15-pin.c: libopensc: PIN usage counter
	  is decreased every time it is sent to the card, no matter what
	  the card replies (should probably reply with success)
	* trunk/src/libopensc/pkcs15.c: Whitespace fix
	* trunk/src/pkcs11/framework-pkcs15.c: Whitespace fix
	* trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/framework-pkcs15init.c,
	  trunk/src/pkcs11/pkcs11-object.c, trunk/src/pkcs11/sc-pkcs11.h:
	  pkcs11: C_SeedRandom is not implemented by OpenSC nor most smart
	  cards, nor does it fit well into PKCS#15 concept.
	* trunk/src/libopensc/pkcs15.c,
	  trunk/src/pkcs11/framework-pkcs15.c: pkcs15: don't override
	  TokenInfo PRNG flag. pkcs11: announce CKF_RNG if the card driver
	  supports it, bypassing PKCS#15. GET CHALLENGE and RNG don't
	  match 1:1 anyway. Thanks to Andre Zepezauer for noticing this.

2010-08-31 01:24  martin

	* trunk/doc/tools/pkcs15-init.xml: Debian #451155: Document
	  pkcs15-init --update-certificate/-U in man page.
	* trunk/src/libopensc/ctx.c: libopensc: remove the "etoken" alias
	  for "cardos" cards.

2010-08-30 16:37  viktor.tarasov

	* trunk/src/tools/pkcs15-tool.c: #73: pkcs15-tool: when changing
	  PIN, print message if no PIN value supplied

2010-08-27 09:39  martin

	* trunk/MacOSX/build, trunk/MacOSX/libtool-bundle: MacInstaller:
	  Add .bundle generation capability from SCA. Thanks to
	  Jean-Pierre Szikora for the reminder. Adobe Acrobat is one
	  program that requires the .bundle format.

2010-08-27 09:28  martin

	* trunk/src/tools/pkcs15-init.c: pkcs15-init: fix leftover from
	  [4646]

2010-08-27 08:24  martin

	* trunk/src/libopensc/card-cardos.c: Revert CardOS change from
	  Italian CNS patch [4627]. Limiting Le for CNS should be done in
	  pkcs15-itacns.c

2010-08-25 19:24  s

	* trunk/src/libopensc/card-rtecp.c: add ATR for Rutoken ECP (DS)
	  Thanks to Aktiv Co. Kirill Mescheryakov for the patch.

2010-08-25 12:57  martin

	* trunk/win32/OpenSC.iss, trunk/win32/README.rtf,
	  trunk/win32/installer_from_build.sh: build: add installer files
	  and a small script to build a win32 installer from build project
	  binaries.

2010-08-25 12:51  martin

	* trunk/src/pkcs15init/profile.c: pkcs15init: On Windows, get the
	  profile directory from registry instead of configuration file.
	  This allows the installation directory for non-dll files to be
	  anywhere on the system.

2010-08-25 09:09  martin

	* trunk/NEWS: Update NEWS for 0.12.0

2010-08-25 08:44  martin

	* trunk/MacOSX, trunk/MacOSX/10.5, trunk/MacOSX/10.5/resources,
	  trunk/MacOSX/10.5/resources/InstallationCheck.strings,
	  trunk/MacOSX/10.5/resources/License.html,
	  trunk/MacOSX/10.5/resources/ReadMe.html,
	  trunk/MacOSX/10.5/resources/background.jpg,
	  trunk/MacOSX/10.5/scripts,
	  trunk/MacOSX/10.5/scripts/InstallationCheck,
	  trunk/MacOSX/10.5/scripts/postflight, trunk/MacOSX/10.6,
	  trunk/MacOSX/10.6/resources,
	  trunk/MacOSX/10.6/resources/InstallationCheck.strings,
	  trunk/MacOSX/10.6/resources/License.html,
	  trunk/MacOSX/10.6/resources/ReadMe.html,
	  trunk/MacOSX/10.6/resources/background.jpg,
	  trunk/MacOSX/10.6/scripts,
	  trunk/MacOSX/10.6/scripts/InstallationCheck,
	  trunk/MacOSX/10.6/scripts/postflight, trunk/MacOSX/build,
	  trunk/MacOSX/opensc-uninstall: Add build script for Mac OS X.
	  Uses github copies of SVN for source. Includes: Add static
	  engine_pkcs11.so to the 10.6 installer (#246) Patch from Mart
	  Randala: add a nice background image and readme file and license
	  file. Patch from Joo Poupas: fix a typo and also work with
	  docbook-xsl from macports.

2010-08-25 08:40  martin

	* trunk/etc/opensc.conf.in: Update OpenSC.tokend related default
	  config file entries.

2010-08-25 08:32  martin

	* trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/libopensc/reader-pcsc.c: CT-API, PC/SC: truncating
	  atr_len makes no sense.

2010-08-23 14:47  martin

	* trunk/src/pkcs11/pkcs11-global.c,
	  trunk/src/pkcs11/pkcs11-object.c,
	  trunk/src/pkcs11/pkcs11-session.c: pkcs11: check PKCS#11
	  function parameters for obvious errors and return
	  CKR_ARGUMENTS_BAD early without locking the module.
	* trunk/doc/tools/pkcs15-init.xml, trunk/etc/opensc.conf.in,
	  trunk/src/pkcs11/Makefile.am, trunk/src/pkcs11/Makefile.mak,
	  trunk/src/pkcs11/framework-pkcs15.c, trunk/src/pkcs11/openssl.c,
	  trunk/src/pkcs11/pkcs11-object.c, trunk/src/pkcs11/secretkey.c,
	  trunk/src/tools/pkcs15-init.c: pkcs11/pkcs15-init: remove
	  automagic software key generation. Remove software based secret
	  key handling from PKCS#11. Support for importing cleartext keys
	  is left untouched, but all transparent key generation by either
	  opensc-pkcs11.so or pkcs15-init is removed, to make the
	  operation with cleartext keys visible to the user and his
	  explicit wish. OpenSC is a PKCS#11 library for accessing keys
	  protected by a smart card. Key material in software is not
	  protected by smart cards and can leave a false sense of security
	  to the user.
	  http://www.opensc-project.org/pipermail/opensc-devel/2010-April/013877.html

2010-08-23 10:32  martin

	* trunk/src/libopensc/errors.c, trunk/src/libopensc/errors.h,
	  trunk/src/libopensc/pkcs15-sec.c,
	  trunk/src/pkcs15init/pkcs15-lib.c: libopensc: Remove unused
	  internal SC_ERROR_EXTRACTABLE_KEY and correct relevant comments
	  (native != extractable)
	* trunk/src/libopensc/errors.c, trunk/src/libopensc/errors.h:
	  libopensc: Fix SC_ERROR defines and messages: remove unused
	  error defines, fix the internal value of some PKCS#15 related
	  errors.
	* trunk/configure.ac: build: don't check for unused functions and
	  headers.

2010-08-23 09:34  martin

	* trunk/src/libopensc/card-mcrd.c,
	  trunk/src/libopensc/pkcs15-esteid.c: EstEID: sc_format_path sets
	  SC_PATH_TYPE_PATH by default

2010-08-21 20:12  ep

	* trunk/doc/tools/opensc-explorer.xml,
	  trunk/src/tools/opensc-explorer.c: Support reading record files
	  by SFI
	* trunk/src/tools/opensc-explorer.c: Only free current_file if it
	  is set
	* trunk/src/libopensc/iso7816.c: If a FCI features tag 84h, then
	  the file is a DF

2010-08-20 22:51  ep

	* trunk/src/tools/opensc-explorer.c: Refactored the "select the
	  file referenced by current_path; die on error" idiom in
	  opensc-explorer. This version, additionally, skips this step
	  entirely if there is no current_path; this is useful when
	  starting with --mf "".
	* trunk/doc/tools/opensc-explorer.xml,
	  trunk/src/tools/opensc-explorer.c: Fix and document
	  opensc-explorer's new -m, --mf option

2010-08-18 15:08  ludovic.rousseau

	* trunk/src/libopensc/asn1.c,
	  trunk/src/libopensc/card-atrust-acos.c,
	  trunk/src/libopensc/card-belpic.c,
	  trunk/src/libopensc/card-entersafe.c,
	  trunk/src/libopensc/card-flex.c, trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/card-jcop.c,
	  trunk/src/libopensc/card-mcrd.c,
	  trunk/src/libopensc/card-oberthur.c,
	  trunk/src/libopensc/card-openpgp.c,
	  trunk/src/libopensc/card-piv.c,
	  trunk/src/libopensc/card-starcos.c,
	  trunk/src/libopensc/card-tcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/dir.c, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/muscle-filesystem.c,
	  trunk/src/libopensc/pkcs15-actalis.c,
	  trunk/src/libopensc/pkcs15-atrust-acos.c,
	  trunk/src/libopensc/pkcs15-cache.c,
	  trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-data.c,
	  trunk/src/libopensc/pkcs15-esinit.c,
	  trunk/src/libopensc/pkcs15-gemsafeGPK.c,
	  trunk/src/libopensc/pkcs15-infocamere.c,
	  trunk/src/libopensc/pkcs15-postecert.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-pubkey.c,
	  trunk/src/libopensc/pkcs15-starcert.c,
	  trunk/src/libopensc/pkcs15-syn.c,
	  trunk/src/libopensc/pkcs15-wrap.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/libopensc/reader-pcsc.c, trunk/src/libopensc/sc.c,
	  trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/libpkcs11.c, trunk/src/pkcs11/mechanism.c,
	  trunk/src/pkcs11/openssl.c, trunk/src/pkcs11/pkcs11-global.c,
	  trunk/src/pkcs11/pkcs11-object.c, trunk/src/pkcs11/pkcs11-spy.c,
	  trunk/src/pkcs11/secretkey.c,
	  trunk/src/pkcs15init/pkcs15-cardos.c,
	  trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-entersafe.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-incrypto34.c,
	  trunk/src/pkcs15init/pkcs15-jcop.c,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-myeid.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c,
	  trunk/src/pkcs15init/pkcs15-setcos.c,
	  trunk/src/pkcs15init/pkcs15-starcos.c,
	  trunk/src/pkcs15init/profile.c, trunk/src/scconf/parse.c,
	  trunk/src/scconf/scconf.c, trunk/src/scconf/sclex.c,
	  trunk/src/scconf/write.c, trunk/src/tests/p15dump.c,
	  trunk/src/tests/pintest.c, trunk/src/tools/cryptoflex-tool.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/piv-tool.c,
	  trunk/src/tools/pkcs11-tool.c, trunk/src/tools/pkcs15-init.c,
	  trunk/src/tools/pkcs15-tool.c, trunk/src/tools/westcos-tool.c:
	  Do not cast the return value of malloc(3) and calloc(3) From
	  http://en.wikipedia.org/wiki/Malloc#Casting_and_type_safety "
	  Casting and type safety malloc returns a void pointer (void *),
	  which indicates that it is a pointer to a region of unknown data
	  type. One may "cast" (see type conversion) this pointer to a
	  specific type, as in int *ptr = (int*)malloc(10 * sizeof (int));
	  When using C, this is considered bad practice; it is redundant
	  under the C standard. Moreover, putting in a cast may mask
	  failure to include the header stdlib.h, in which the prototype
	  for malloc is found. In the absence of a prototype for malloc,
	  the C compiler will assume that malloc returns an int, and will
	  issue a warning in a context such as the above, provided the
	  error is not masked by a cast. On certain architectures and data
	  models (such as LP64 on 64 bit systems, where long and pointers
	  are 64 bit and int is 32 bit), this error can actually result in
	  undefined behavior, as the implicitly declared malloc returns a
	  32 bit value whereas the actually defined function returns a 64
	  bit value. Depending on calling conventions and memory layout,
	  this may result in stack smashing. The returned pointer need not
	  be explicitly cast to a more specific pointer type, since ANSI C
	  defines an implicit conversion between the void pointer type and
	  other pointers to objects. An explicit cast of malloc's return
	  value is sometimes performed because malloc originally returned
	  a char *, but this cast is unnecessary in standard C code.[4][5]
	  Omitting the cast, however, creates an incompatibility with C++,
	  which does require it. The lack of a specific pointer type
	  returned from malloc is type-unsafe behaviour: malloc allocates
	  based on byte count but not on type. This distinguishes it from
	  the C++ new operator that returns a pointer whose type relies on
	  the operand. (see C Type Safety). " See also
	  http://www.opensc-project.org/pipermail/opensc-devel/2010-August/014586.html

2010-08-18 13:42  ep

	* trunk/src/libopensc/pkcs15-itacns.c: Use strlcpy(3), strlcat(3)
	  in pkcs15-itacns.c
	* trunk/configure.ac, trunk/src/common/Makefile.am,
	  trunk/src/common/compat_strlcat.c,
	  trunk/src/common/compat_strlcat.h,
	  trunk/src/tools/opensc-explorer.c: strlcat(3) implementation
	* trunk/src/libopensc/card-incrypto34.c: Prevent card-incrypto34.c
	  from catching the Italian CNS card's ATR
	* trunk/src/libopensc/pkcs15-itacns.c: Avert potential buffer
	  overflows in pkcs15-itacns.c

2010-08-16 09:33  ludovic.rousseau

	* trunk/src/libopensc/internal-winscard.h: Use (SCARD_READERSTATE
	  *) instead of LPSCARD_READERSTATE since LPSCARD_READERSTATE is
	  not define in old pcsc-lite (< 1.6.3) nor Mac OS X

2010-08-16 08:59  martin

	* trunk/etc/opensc.conf.in, trunk/src/pkcs11/slot.c: Fix and
	  change ignored readers feature introducsed in r4626 for Windows.
	  strcasestr is GNU specific extension.
	* trunk/src/libopensc/Makefile.am, trunk/src/libopensc/ctx.c:
	  itacns: add itacns.h to distribution targzip, fix card driver
	  ordering.
	* trunk/src/libopensc/internal-winscard.h: PC/SC: Fix building on
	  OS X and mingw32 after r4626

2010-08-16 00:56  ep

	* trunk/etc/opensc.conf.in, trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak,
	  trunk/src/libopensc/card-cardos.c,
	  trunk/src/libopensc/card-itacns.c, trunk/src/libopensc/cards.h,
	  trunk/src/libopensc/ctx.c, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/itacns.h, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15-itacns.c,
	  trunk/src/libopensc/pkcs15-syn.c: New card driver: Italian
	  CNS/CIE (eID)

2010-08-15 14:57  ludovic.rousseau

	* trunk/src/libopensc/internal-winscard.h,
	  trunk/src/libopensc/reader-pcsc.c: Use SCARD_READERSTATE instead
	  of SCARD_READERSTATE_A SCARD_READERSTATE_A is not used by
	  Microsoft API and is no more defined/used by pcsc-lite >= 1.6.2
	  Thanks to Josef Windorfer for the bug report
	  http://www.opensc-project.org/pipermail/opensc-user/2010-August/004235.html

2010-08-15 09:34  martin

	* trunk/src/pkcs11/misc.c: pkcs11: remove outdated config entry
	  parsing.

2010-08-15 09:33  martin

	* trunk/etc/opensc.conf.in, trunk/src/pkcs11/slot.c: Implement
	  simple reader ignoring, to exclude readers from OpenSC PKCS#11
	  module.

2010-08-14 12:18  martin

	* trunk/src/tools/opensc-explorer.c: opensc-tool: Fix ACL
	  reporting for EF-s. Patch by Emanuele Pucciarelli.

2010-08-13 09:27  martin

	* trunk/src/libopensc/internal-winscard.h: Add back MAX_ATR_SIZE
	  which was erroneously removed in r4611. Fixes mingw32 build.

2010-08-12 21:49  ludovic.rousseau

	* trunk/src/libopensc/card-belpic.c: Correctly use pin2 when
	  needed. Patch from OpenSUSE. Closes ticket #249.

2010-07-30 07:09  ludovic.rousseau

	* trunk/src/libopensc/internal-winscard.h: Use || instead of | in
	  a #if check

2010-07-27 08:05  martin

	* trunk/configure.ac: configure: Add possible docbook paths on OS
	  X (Fink, MacPorts)

2010-07-26 13:16  martin

	* trunk/src/libopensc/cardctl.h,
	  trunk/src/libopensc/internal-winscard.h,
	  trunk/src/libopensc/reader-pcsc.c: Trac #244: Fix structure
	  packing on Apple and SUN. Fix display detection by updating
	  structure definitions.

2010-07-26 11:18  martin

	* trunk/src/tools/cardos-tool.c: cardos-tool: fix handing of
	  --help/--verbose/--debug --debug was not documented and not used
	  by other tools; --help was not handled. Thanks to Ludolf
	  Holzheid for noticing this.

2010-07-26 11:17  martin

	* trunk/src/tools/pkcs15-init.c: pkcs15-init: fix help text
	  ordering (Ludolf Holzheid)
	* trunk/doc/tools/pkcs15-tool.xml: man: use --auth-id instead of
	  bogus --pin-id in pkcs15-tool man page. [Ludolf Holzheid]

2010-07-21 09:50  viktor.tarasov

	* trunk/src/tools/pkcs11-tool.c: pkcs11 tool: fix messages

2010-07-20 07:51  flc

	* trunk/src/cardmod/cardmod.c: minors log message corrections to
	  build successfully.

2010-07-08 08:09  viktor.tarasov

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/pkcs15-prkey.c:
	  #245: pkcs15 asn1: 'subjectName' in 'commonPrivateKeyAttributes'
	  is optional thanks to Jean-Michel

2010-07-06 12:40  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-entersafe.c: #229: pkcs15init
	  entersafe: 'sanity-check' includes the update of the User PIN's
	  'pinFlags'

2010-07-06 09:09  viktor.tarasov

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/pkcs15.h,
	  trunk/src/tools/pkcs15-tool.c: pkcs15: encode/decode
	  'AccessControlRules' in 'CommonObjectAttributes'

2010-07-05 17:54  martin

	* trunk/src/libopensc/card-muscle.c: Fix MuscleApplet version
	  detection

2010-07-05 14:43  viktor.tarasov

	* trunk/src/tools/pkcs11-tool.c: #60: pkcs11-tool: print key sizes
	  from CK_MECHANISM_INFO

2010-07-05 13:29  viktor.tarasov

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/asn1.h,
	  trunk/src/libopensc/pkcs15-oberthur.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-pubkey.c,
	  trunk/src/libopensc/pkcs15.h: pkcs15: encode/decode
	  'subjectName' in 'CommonPrivateKeyAttributes'

2010-07-05 12:57  viktor.tarasov

	* trunk/src/libopensc/types.h: pkcs15: correct the comments

2010-07-05 12:54  viktor.tarasov

	* trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/pkcs15.h, trunk/src/libopensc/types.h:
	  pkcs15: decode 'supportedAlgorithms' in 'TokenInfo'

2010-07-05 09:33  viktor.tarasov

	* trunk/src/libopensc/opensc.h, trunk/src/libopensc/types.h:
	  re-distribute 'define' macros between types.h and opensc.h move
	  'define' macros closer to the definition of the related data
	  types

2010-07-02 14:26  viktor.tarasov

	* trunk/src/libopensc/libopensc.exports,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/tools/pkcs15-init.c: pkcs15init: create frame to
	  implement card specific 'sanity check' procedure

2010-07-02 13:46  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c: pkcs15init: homogenize
	  argument order of pkcs15init operations

2010-07-01 12:31  viktor.tarasov

	* trunk/src/tools/opensc-explorer.c: tools opensc-explorer: for
	  'apdu' command accept space separated hexadecimal data

2010-06-30 17:27  martin

	* trunk/m4/libassuan.m4: Assuan is not used.

2010-06-21 10:49  viktor.tarasov

	* trunk/src/libopensc/pkcs15-cert.c: pkcs15/pkcs11: encoding of
	  certificate's attribute 'serialNumber' Applying patch of Andre
	  Zepezauer. Thanks.

2010-06-16 21:04  martin

	* trunk/src/tools/pkcs15-init.c: pkcs15-init: only override
	  --verbose to ctx->debug if it was set on command line.

2010-06-16 15:08  martin

	* trunk/src/tools/pkcs15-init.c: Revert "pkcs15-init tool: with
	  the new option 'use-default-debug-settings' the debug settings
	  from opensc.conf are used" This reverts commit
	  b7d492fbae6c57f6f5173ef857265efcee42cdf0.

2010-06-16 14:12  martin

	* trunk/src/libopensc/ctx.c: OSX: For Tokend, set the debug file
	  by default to /tmp/opensc-debug.log

2010-06-16 14:11  martin

	* trunk/src/tools/westcos-tool.c: westcos-tool: remove compiler
	  warnings westcos-tool.c: In function &#8216;main&#8217;: westcos-tool.c:375:
	  warning: unused variable &#8216;lecteur&#8217; westcos-tool.c:373: warning:
	  unused variable &#8216;card_presente&#8217; westcos-tool.c:372: warning:
	  unused variable &#8216;p&#8217; westcos-tool.c:371: warning: unused variable
	  &#8216;i&#8217; westcos-tool.c: At top level: westcos-tool.c:43: warning:
	  &#8216;version&#8217; defined but not used westcos-tool.c:45: warning:
	  &#8216;nom_card&#8217; defined but not used westcos-tool.c:103: warning:
	  &#8216;no_lecteur&#8217; defined but not used

2010-06-16 13:43  martin

	* trunk/src/pkcs11/pkcs11-global.c, trunk/src/pkcs11/slot.c:
	  pkcs11: move the slot list size check to slot creation.
	* trunk/src/pkcs11/slot.c: style: space -> tab

2010-06-16 13:42  martin

	* trunk/src/pkcs11/pkcs11-global.c: pkcs11: Patch from Andre
	  Zepezauer to remove max_virtual_slots allocation. See
	  http://www.opensc-project.org/pipermail/opensc-devel/2010-June/014356.html

2010-06-16 12:01  martin

	* trunk/src/libopensc/cardctl.h,
	  trunk/src/pkcs15init/pkcs15-oberthur.h: style: // -> /* */

2010-06-16 11:43  ludovic.rousseau

	* trunk/src/pkcs11/pkcs11-global.c,
	  trunk/src/pkcs11/pkcs11-object.c,
	  trunk/src/pkcs11/pkcs11-session.c: Use CK_RV (defined as
	  unsigned long) instead of int for the type the return code of
	  C_* functions Thanks to Martin Vogt for the patch
	  http://www.opensc-project.org/pipermail/opensc-devel/2010-June/014351.html

2010-06-16 11:32  ludovic.rousseau

	* trunk/src/pkcs11/pkcs11-global.c: pkcs11-global.c: In function
	  &#8216;C_WaitForSlotEvent&#8217;: pkcs11-global.c:624: warning: unused
	  variable &#8216;ii&#8217;

2010-06-11 07:36  martin

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak,
	  trunk/src/libopensc/p15emu-westcos.c,
	  trunk/src/libopensc/pkcs15-westcos.c: Rename p15emu-westcos.c to
	  pkcs15-westcos.c

2010-06-11 07:35  martin

	* trunk/src/cardmod/cardmod.c, trunk/src/libopensc/card-piv.c,
	  trunk/src/libopensc/card-westcos.c,
	  trunk/src/libopensc/p15emu-westcos.c,
	  trunk/src/libopensc/reader-pcsc.c,
	  trunk/src/pkcs11/pkcs11-session.c, trunk/src/pkcs11/slot.c,
	  trunk/src/tools/netkey-tool.c, trunk/src/tools/westcos-tool.c:
	  style: // -> /* */

2010-06-10 14:49  martin

	* trunk/src/libopensc/card-muscle.c, trunk/src/libopensc/cards.h:
	  MuscleApplet: Check for protocol version to be
	  forward-compatible. Remove some whitespace. Remove support for
	  <1024b keys.

2010-06-10 09:08  martin

	* trunk/src/libopensc/card-muscle.c: MuscleApplet: Don't set the
	  file ID as the name of the file. It is redundant and does not
	  look nice.

2010-06-09 13:53  martin

	* trunk/src/libopensc/card-entersafe.c,
	  trunk/src/libopensc/cardctl.h,
	  trunk/src/pkcs15init/pkcs15-entersafe.c: Entersafe: cache the
	  presented PIN on personalization, simplify the code a bit. See
	  http://www.opensc-project.org/pipermail/opensc-devel/2010-June/014312.html

2010-06-09 13:39  martin

	* trunk/doc/api/api.xml, trunk/doc/api/apps/chapter.xml,
	  trunk/doc/api/apps/sc_enum_apps.xml,
	  trunk/doc/api/apps/sc_find_app_by_aid.xml,
	  trunk/doc/api/apps/sc_find_pkcs15_app.xml,
	  trunk/doc/api/apps/sc_free_apps.xml,
	  trunk/doc/api/apps/sc_update_dir.xml,
	  trunk/doc/api/asn1/chapter.xml,
	  trunk/doc/api/asn1/sc_asn1_decode.xml,
	  trunk/doc/api/asn1/sc_asn1_encode.xml,
	  trunk/doc/api/asn1/sc_asn1_find_tag.xml,
	  trunk/doc/api/asn1/sc_asn1_print_tags.xml,
	  trunk/doc/api/asn1/sc_asn1_put_tag.xml,
	  trunk/doc/api/asn1/sc_asn1_read_tag.xml,
	  trunk/doc/api/asn1/sc_asn1_skip_tag.xml,
	  trunk/doc/api/asn1/sc_asn1_verify_tag.xml,
	  trunk/doc/api/asn1/sc_copy_asn1_entry.xml,
	  trunk/doc/api/asn1/sc_format_asn1_entry.xml,
	  trunk/doc/api/card/chapter.xml,
	  trunk/doc/api/card/sc_card_ctl.xml,
	  trunk/doc/api/card/sc_check_sw.xml,
	  trunk/doc/api/card/sc_format_apdu.xml,
	  trunk/doc/api/card/sc_get_challenge.xml,
	  trunk/doc/api/card/sc_get_data.xml,
	  trunk/doc/api/card/sc_lock.xml,
	  trunk/doc/api/card/sc_put_data.xml,
	  trunk/doc/api/card/sc_transmit_apdu.xml,
	  trunk/doc/api/card/sc_unlock.xml,
	  trunk/doc/api/card/sc_wait_for_event.xml,
	  trunk/doc/api/file/chapter.xml,
	  trunk/doc/api/file/sc_append_record.xml,
	  trunk/doc/api/file/sc_create_file.xml,
	  trunk/doc/api/file/sc_delete_file.xml,
	  trunk/doc/api/file/sc_delete_record.xml,
	  trunk/doc/api/file/sc_file_dup.xml,
	  trunk/doc/api/file/sc_file_free.xml,
	  trunk/doc/api/file/sc_file_new.xml,
	  trunk/doc/api/file/sc_list_files.xml,
	  trunk/doc/api/file/sc_read_binary.xml,
	  trunk/doc/api/file/sc_read_record.xml,
	  trunk/doc/api/file/sc_select_file.xml,
	  trunk/doc/api/file/sc_update_binary.xml,
	  trunk/doc/api/file/sc_update_record.xml,
	  trunk/doc/api/file/sc_write_binary.xml,
	  trunk/doc/api/file/sc_write_record.xml,
	  trunk/doc/api/init/chapter.xml,
	  trunk/doc/api/init/sc_card_valid.xml,
	  trunk/doc/api/init/sc_connect_card.xml,
	  trunk/doc/api/init/sc_detect_card_presence.xml,
	  trunk/doc/api/init/sc_disconnect_card.xml,
	  trunk/doc/api/init/sc_establish_context.xml,
	  trunk/doc/api/init/sc_get_cache_dir.xml,
	  trunk/doc/api/init/sc_make_cache_dir.xml,
	  trunk/doc/api/init/sc_release_context.xml,
	  trunk/doc/api/init/sc_set_card_driver.xml,
	  trunk/doc/api/misc/chapter.xml, trunk/doc/api/types/chapter.xml,
	  trunk/doc/api/types/sc_app_info_t.xml,
	  trunk/doc/api/types/sc_asn1_entry.xml,
	  trunk/doc/api/types/sc_card_t.xml,
	  trunk/doc/api/types/sc_file_t.xml,
	  trunk/doc/api/types/sc_path_t.xml,
	  trunk/doc/api/util/chapter.xml,
	  trunk/doc/api/util/sc_base64_decode.xml,
	  trunk/doc/api/util/sc_base64_encode.xml,
	  trunk/doc/api/util/sc_der_clear.xml,
	  trunk/doc/api/util/sc_der_copy.xml,
	  trunk/doc/api/util/sc_strerror.xml: Documentation: there is no
	  external API, remove the manpage generation.

2010-06-09 11:18  martin

	* trunk/src/pkcs15init/entersafe.profile: Entersafe: the default
	  profile should have local PIN-s See
	  http://www.opensc-project.org/pipermail/opensc-devel/2010-June/014310.html

2010-06-09 10:06  martin

	* trunk/src/pkcs15init/pkcs15-oberthur.c: Fix compilation without
	  OpenSSL

2010-06-08 14:41  jps

	* trunk/src/tools/cardos-tool.c: cardos-tool.c can be now compiled
	  with OpenSSL 0.9.7 (SHA256 checksum verification is replaced by
	  SHA1)

2010-06-08 10:45  martin

	* trunk/src/tools/cardos-tool.c: tools: Mac OS X 10.5 uses OpenSSL
	  0.9.7 which does not include SHA256 support. Fix building for
	  10.5.

2010-06-05 08:51  s

	* trunk/src/pkcs11/openssl.c: fix: openssl (lock_dbg_cb): already
	  locked (mode=9, type=30) at eng_list.c:360 openssl
	  (lock_dbg_cb): not locked (mode=10, type=30) at eng_table.c:186\
	  Thanks to Jan Just Keijser for development and patch
	  http://www.opensc-project.org/pipermail/opensc-devel/2010-June/014314.html

2010-06-04 22:23  s

	* trunk/src/pkcs11/openssl.c: fix: 'openssl: double free or
	  corruption' (load gost engine before loading engine_pkcs11
	  (which loading gost engine))

2010-06-01 12:28  martin

	* trunk/src/libopensc/ctbcs.c: Fix #223: implement
	  ctbcs_build_modify_verification_apdu.
	* trunk/src/libopensc/reader-ctapi.c: CT-API: Fix the mess left
	  from broken [3931] and some pieces from [4118].

2010-05-31 16:49  martin

	* trunk/src/libopensc/asn1.c: Fix a segfault leftover from r4118
	  Thanks to Andre Zepezauer for the report and patch.

2010-05-30 13:54  s

	* trunk/src/pkcs15init/rutoken.profile: Rutoken S: add 'aid' to
	  profile (for '-init --create-pkcs15 --so-pin 87654321 --so-puk
	  -p rutoken+small')

2010-05-30 13:52  s

	* trunk/src/libopensc/dir.c: fix: SIGSEGV Program received signal
	  SIGSEGV, Segmentation fault. 0x00007f7d6f29fd55 in free () from
	  /lib64/libc.so.6 (gdb) bt #0 0x00007f7d6f29fd55 in free () from
	  /lib64/libc.so.6 #1 0x00007f7d703a4128 in sc_update_dir
	  (card=0x17463a0, app=<value optimized out>) at dir.c:306 #2
	  0x00007f7d7040cb58 in sc_pkcs15init_add_app (card=<value
	  optimized out>, profile=0x1754840, args=<value optimized out>)
	  at pkcs15-lib.c:2354

2010-05-30 07:56  s

	* trunk/src/pkcs11/slot.c: fix: memory leak (but see FIXME)
	  ==21111== 1,360 (120 direct, 1,240 indirect) bytes in 1 blocks
	  are definitely lost in loss record 107 of 109 ==21111== at
	  0x4C24F0D: realloc (vg_replace_malloc.c:476) ==21111== by
	  0x409D23: sc_pkcs11_register_mechanism (mechanism.c:44)
	  ==21111== by 0x410595: pkcs15_bind (framework-pkcs15.c:3160)
	  ==21111== by 0x4085DD: card_detect (slot.c:214) ==21111== by
	  0x408887: initialize_reader (slot.c:114) ==21111== by 0x404C50:
	  C_Initialize (pkcs11-global.c:247) ==21111== by 0x4034C9: main
	  ==21111== ==21111== LEAK SUMMARY: ==21111== definitely lost: 120
	  bytes in 1 blocks

2010-05-30 07:52  s

	* trunk/src/pkcs11/slot.c: fix: memory leak - next object missed
	  out to release

2010-05-30 07:31  s

	* trunk/src/pkcs11/pkcs11-global.c: fix: memory leak example: int
	  main() { C_Initialize(NULL); C_Finalize(NULL); return 0; }
	  ==4625== 592 (504 direct, 88 indirect) bytes in 1 blocks are
	  definitely lost in loss record 9 of 10 ==4625== at 0x4C24137:
	  calloc (vg_replace_malloc.c:418) ==4625== by 0x407FD9:
	  create_slot (slot.c:80) ==4625== by 0x40452C: C_Initialize
	  (pkcs11-global.c:243) ==4625== by 0x40342A: main ==4625==
	  ==4625== 4,736 (4,032 direct, 704 indirect) bytes in 8 blocks
	  are definitely lost in loss record 10 of 10 ==4625== at
	  0x4C24137: calloc (vg_replace_malloc.c:418) ==4625== by
	  0x407FD9: create_slot (slot.c:80) ==4625== by 0x408102:
	  initialize_reader (slot.c:108) ==4625== by 0x4044E0:
	  C_Initialize (pkcs11-global.c:247) ==4625== by 0x40342A: main
	  ==4625== ==4625== LEAK SUMMARY: ==4625== definitely lost: 4,536
	  bytes in 9 blocks

2010-05-27 08:12  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c: pkcs15init: fix undeclared
	  variable Noted by Jean-Michel, thanks.

2010-05-26 14:33  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c: pkcs15init: do not reuse
	  existing file when storing object data or updating certificate
	  merged with r4380:4380 of
	  https://www.opensc-project.org/svn/opensc/branches/vtarasov/opensc-sm.trunk

2010-05-25 08:06  viktor.tarasov

	* trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/tools/pkcs15-tool.c: pkcs11: DER encoded value for
	  CKA_SERIAL_NUMBER discussed in
	  http://www.opensc-project.org/pipermail/opensc-devel/2010-May/014264.html

2010-05-19 19:49  s

	* trunk/src/pkcs15init/rutoken.profile: fix: Rutoken S: no need to
	  reserve 5000 bytes for AppDF (pkcs15.profile: size = 5000)

2010-05-19 09:18  viktor.tarasov

	* trunk/src/libopensc/ctx.c, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/reader-pcsc.c,
	  trunk/src/pkcs11/pkcs11-global.c, trunk/src/tools/util.c:
	  pkcs11: resolve 'endless polling' in C_WaitForSlotEvent()
	  http://www.opensc-project.org/pipermail/opensc-devel/2010-April/013947.html
	  Tested with Firefox 3.6.3 in WinXP SP3 .

2010-05-19 08:37  viktor.tarasov

	* trunk/src/libopensc/pkcs15-pin.c: libopensc: in
	  sc_pkcs15_verify_pin() if no PIN provided try to use pin pad
	  It's a complement to the r4361.

2010-05-19 08:26  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c: pkcs15init: when verifying
	  PIN, if no value supplied, try to use pin pad

2010-05-19 08:18  viktor.tarasov

	* trunk/src/libopensc/card.c: libopensc: do not invalidate card
	  cache in sc_unlock()

2010-05-19 08:17  viktor.tarasov

	* trunk/etc/opensc.conf.in, trunk/src/pkcs11/misc.c: pkcs11: by
	  default do not lock login

2010-05-14 13:37  martin

	* trunk/src/libopensc/card-muscle.c, trunk/src/libopensc/muscle.c:
	  MuscleApplet: Detect MuscleApplet specific SW-s; re-organize the
	  source a little.

2010-05-14 07:40  martin

	* trunk/src/libopensc/card-muscle.c: Muscle: use MuscleApplet as
	  the name of the card as well as driver

2010-05-14 07:39  martin

	* trunk/src/libopensc/card-muscle.c: MuscleApplet: remove useless
	  card detection flagging, don't call the default driver init
	  operation.

2010-05-13 21:57  s

	* trunk/src/pkcs11/openssl.c: fix: loading openssl engine with
	  GOST algorithms Thanks to Jan Just Keijser, Martin Paljak,
	  Andreas Jellinghaus, Robert Relyea, Dimitrios Siganos see:
	  http://www.opensc-project.org/pipermail/opensc-devel/2010-April/013956.html
	  http://www.opensc-project.org/pipermail/opensc-devel/2010-April/013966.html

2010-05-13 17:47  viktor.tarasov

	* trunk/src/pkcs11/misc.c: plcs11: set default value for
	  'lock_login' to 'true' as it' stated by the commets in
	  opensc.con.in At the origin there were problem of signing with
	  Feitian card, noted by Ludovic.
	  http://www.opensc-project.org/pipermail/opensc-devel/2010-May/014180.html

2010-05-13 17:45  viktor.tarasov

	* trunk/src/pkcs15init/entersafe.profile: in feitian profile set
	  'local' flag for the User PIN so that Feitian card profile will
	  reflect the real card initialisation. At the origin there were
	  problem of signing with Feitian card, noted by Ludovic.
	  http://www.opensc-project.org/pipermail/opensc-devel/2010-May/014180.html

2010-05-11 14:40  flc

	* trunk/src/tools/Makefile.am: wetcos-tools: add util.c to compile.

2010-05-11 14:35  flc

	* trunk/doc/tools/westcos-tool.xml: update westcos-tools
	  documentation with new options

2010-05-11 14:34  flc

	* trunk/src/tools/westcos-tool.c: clean some code and use more
	  opensc standard

2010-05-11 14:30  flc

	* trunk/src/tools/opensc-explorer.c: --wait option don't need
	  argument

2010-05-10 14:35  ludovic.rousseau

	* trunk/src/pkcs15init/pkcs15-lib.c: replace spaces by tab

2010-05-10 09:18  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c: add TODO comments

2010-05-07 12:49  flc

	* trunk/src/libopensc/p15emu-westcos.c: westcos pkcs15 emulate
	  certificat or public key not both

2010-05-05 09:31  flc

	* trunk/src/libopensc/reader-pcsc.c: Add cardmod pcsc protocol
	  detection

2010-05-03 15:44  viktor.tarasov

	* trunk/src/libopensc/card.c: liopensc: fix debug message

2010-05-01 12:15  viktor.tarasov

	* trunk/src/common/Makefile.mak, trunk/src/libopensc/Makefile.mak,
	  trunk/src/pkcs11/Makefile.mak,
	  trunk/src/pkcs15init/Makefile.mak,
	  trunk/src/pkcs15init/pkcs15-oberthur.h,
	  trunk/src/scconf/Makefile.mak, trunk/src/tests/Makefile.mak,
	  trunk/src/tools/Makefile.mak, trunk/src/tools/cardos-tool.c,
	  trunk/win32/Make.rules.mak, trunk/win32/Makefile.mak: win32:
	  merge the branches/vtarasov/opensc-sm.trunk update win32
	  compilation; Unix style line ending in
	  src/pkcs15init/pkcs15-oberthur.h; variables declaration issue in
	  src/tools/cardos-tool.c.

2010-04-28 09:20  viktor.tarasov

	* trunk/src/tools/pkcs15-init.c: pkcs15-init tool: remove blank
	  line after PIN was prompted Noted by Martin.
	* trunk/configure.ac, trunk/src/tools/util.c: tools: in local
	  'getpass' procedure getline() is not used any more Without GNU C
	  extention 'getline()' the same code of the local 'getpass'
	  procedure is used for Mac OS and Linux.
	* trunk/src/pkcs15init/pkcs15-lib.c: pkcs15init: in
	  sc_pkcs15init_update_file() take care about file selection
	  errors Noted by Ludovic. In sc_pkcs15init_update_file()
	  procedure the file selection errors other then
	  SC_ERROR_FILE_NOT_FOUND were not treated.

2010-04-28 09:16  ludovic.rousseau

	* trunk/src/libopensc/pkcs15-sec.c: Change in r4269 is not correct
	  since sc_pkcs1_strip_02_padding() returns an int and not a
	  size_t The new code is also simpler

2010-04-27 13:25  jps

	* trunk/src/libopensc/pkcs15-sec.c: r4208 breaks key unwrap.
	  pkcs11-tool -tl gives an error and mail can not be anymore
	  decrypted (tested with Thunderbird).

2010-04-27 07:30  viktor.tarasov

	* trunk/src/tools/util.c: tools: thanks to Andreas; for win32 'get
	  password' procedure uses _getch() instead of getchar()

2010-04-26 12:29  viktor.tarasov

	* trunk/src/tools/pkcs15-tool.c: pkcd15-tool: use local 'getpass'
	  procedure
	* trunk/configure.ac, trunk/src/tools/util.c: tools: thanks to
	  Ludovic; check for getline() in configure.ac and use
	  'HAVE_GETLINE' macro in get password procedure.

2010-04-24 17:37  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c: pkcs15init: when updating
	  certificate and when there are no ACLs in FCI of selected file
	  use default ACLs from the card profile Some cards do not include
	  security attributes into the FCI returned by 'SELECT' command.
	  For such cards, when updating certificate, to authenticate
	  'UPDATE' operation use the 'sc_file' with default ACLs
	  instantiated from the card profile.

2010-04-21 14:38  jps

	* trunk/src/libopensc/card-cardos.c, trunk/src/libopensc/cards.h,
	  trunk/src/pkcs15init/pkcs15-cardos.c,
	  trunk/src/tools/cardos-tool.c: Support for CardOS 4.4

2010-04-21 11:57  ludovic.rousseau

	* trunk/src/pkcs11/misc.c: sc_to_cryptoki_error(): check for the
	  validity of ctx outside of the for loop to make the code more
	  natural

2010-04-21 10:51  viktor.tarasov

	* trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/framework-pkcs15init.c,
	  trunk/src/pkcs11/misc.c, trunk/src/pkcs11/pkcs11-global.c,
	  trunk/src/pkcs11/pkcs11-object.c, trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/pkcs11/slot.c: pkcs11: make possible context dependent
	  'sc' to 'cryptoki' error conversion

2010-04-20 17:09  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c: pkcs15init: fix #96: more
	  details for the load profiles error

2010-04-20 15:43  viktor.tarasov

	* trunk/src/tools/opensc-tool.c: fix #118: thanks to Andreas: list
	  algorithms in opensc-tool

2010-04-20 15:11  viktor.tarasov

	* trunk/src/pkcs11/framework-pkcs15.c: fix 201: thanks to
	  Christian Hohnstaedt: delete objects in pkcs11

2010-04-19 12:13  viktor.tarasov

	* trunk/src/tools/pkcs15-init.c: pkcs15-init tool: with the new
	  option 'use-default-debug-settings' the debug settings from
	  opensc.conf are used

2010-04-19 12:10  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-cflex.c: cflex pkcs15init: use
	  temporary PINs that satisfy default pin policy

2010-04-19 08:31  viktor.tarasov

	* trunk/doc/tools/opensc-explorer.xml: doc: little fix of
	  opensc-explorer.xml

2010-04-18 16:38  viktor.tarasov

	* trunk/src/libopensc/pkcs15-oberthur.c,
	  trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h:
	  emulator fix #125: thanks to Thomas Harning: emulator specific
	  'clear' handler

2010-04-18 16:01  viktor.tarasov

	* trunk/src/tools/pkcs15-init.c: pkcs15-init: #101: use PIN
	  object's label in the PIN prompt

2010-04-18 14:51  viktor.tarasov

	* trunk/src/libopensc/pkcs15-oberthur.c,
	  trunk/src/pkcs15init/oberthur.profile,
	  trunk/src/pkcs15init/pkcs15-oberthur-awp.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.h: oberthur: add in
	  emulator and create in pkcs15init the private data object

2010-04-18 09:45  viktor.tarasov

	* trunk/src/tools/pkcs11-tool.c, trunk/src/tools/pkcs15-init.c:
	  pkcs15-init tool: use Ctrl-C sensible 'getpass'

2010-04-18 08:32  viktor.tarasov

	* trunk/src/tools/pkcs11-tool.c: pkcs11-tool: #120: use 'getpass'
	  sensible to Ctrl-C, thanks to Andreas

2010-04-18 08:24  pk

	* trunk/src/libopensc/pkcs15-tcos.c: fixed incorrect IDs of
	  SigG-PINs from 6,7 to 5,6

2010-04-18 07:47  viktor.tarasov

	* trunk/src/tools/util.c, trunk/src/tools/util.h: tools: #120:
	  'getpass' sensible to Ctrl-C, thanks to Andreas

2010-04-18 07:30  viktor.tarasov

	* trunk/src/tools/pkcs11-tool.c: pkcs11-tool: useless assignment

2010-04-17 19:59  viktor.tarasov

	* trunk/src/tools/pkcs11-tool.c: pkcs11-tool: fix #124; thanks to
	  Thomas Harnings: for the signature tests cannot be used private
	  key without corresponding public key or certificate

2010-04-17 19:03  viktor.tarasov

	* trunk/doc/tools/opensc-explorer.xml: doc: update
	  'opensc-explorer' documentation

2010-04-17 18:51  ludovic.rousseau

	* trunk/src/pkcs11/framework-pkcs15.c: set_cka_label(): remove a
	  possibly invalid memory access See
	  http://www.opensc-project.org/pipermail/opensc-devel/2010-April/013990.html

2010-04-16 19:34  viktor.tarasov

	* trunk/src/libopensc/apdu.c: libopensc: fix #209 In APDU consider
	  Le=0 as Le=256 Thanks to FrankMpunkt, Martin, ludovic.

2010-04-15 15:37  viktor.tarasov

	* trunk/src/pkcs11/framework-pkcs15.c: pkcs11: Christian
	  Hohnstaedt's patch: convert CKA_LABEL to the null-terminated
	  pkcs15 label

2010-04-14 11:52  viktor.tarasov

	* trunk/src/libopensc/libopensc.exports,
	  trunk/src/libopensc/log.c, trunk/src/libopensc/log.h: libopensc
	  for win32: get working logging when compiled with Visual Studio

2010-04-14 11:41  viktor.tarasov

	* trunk/src/libopensc/card-entersafe.c: libopensc for win32: to be
	  compiled

2010-04-14 11:40  viktor.tarasov

	* trunk/src/common/simclist.c: common for win32: to be compiled

2010-04-14 11:37  viktor.tarasov

	* trunk/src/common/Makefile.mak: common for win32: add simclist

2010-04-14 11:36  viktor.tarasov

	* trunk/src/libopensc/card-myeid.c, trunk/src/pkcs11/openssl.c,
	  trunk/src/pkcs15init/pkcs15-setcos.c: pkcs11, libopensc,
	  pkkcs15init: not use C99 designated initializers

2010-04-14 11:34  viktor.tarasov

	* trunk/src/pkcs11/Makefile.mak: pkcs11 for win32: add source for
	  display functions

2010-04-13 11:30  martin

	* trunk/src/libopensc/card-jcop.c, trunk/src/libopensc/cardctl.h:
	  JCOP/BlueZ: remove unused code

2010-04-13 11:29  martin

	* trunk/src/libopensc/card-incrypto34.c: card-incrypto34: Remove
	  dead code
	* trunk/src/tools/Makefile.am, trunk/src/tools/Makefile.mak,
	  trunk/src/tools/cardos-info, trunk/src/tools/cardos-info.bat:
	  Remove cardos-info (renamed to cardos-tool in 2008)
	* trunk/src/tools/pkcs15-init.c: pkcs15-init: remove dead code
	* trunk/src/tools/piv-tool.c: piv-tool: remove dead code.
	* trunk/doc/tools/cardos-tool.xml: docs: the correct name is
	  cardos-tool
	* trunk/src/tools/westcos-tool.c: westcos-tool: fix header, the
	  file is .c not .exe
	* trunk/src/tools/cryptoflex-tool.c: cryptoflex-tool: remove dead
	  code from 2002
	* trunk/src/tools/cryptoflex-tool.c: cryptoflex-tool: remove dead
	  code.
	* trunk/src/tools/netkey-tool.c: netkey-tool: The tool is included
	  in OpenSC, no need to have a compilation tip in the file header.
	* trunk/src/tools/pkcs15-tool.c: pkcs15-tool: fix help text,
	  reader must no be a number
	* trunk/src/tools/cryptoflex-tool.c: cryptoflex-tool: use the code
	  in util.c to connect to the card.
	* trunk/src/tools/pkcs15-crypt.c: pkcs15-crypt: remove useless #if
	  1
	* trunk/src/tools/eidenv.c: eidenv: remove a redundant sc_lock
	  call, already done in util.c

2010-04-13 11:28  martin

	* trunk/src/tools/pkcs15-tool.c: pkcs15-tool: Remove a redundant
	  sc_lock/sc_unlock pair

2010-04-13 09:12  viktor.tarasov

	* trunk/src/libopensc/Makefile.mak: compile for win32: fix

2010-04-12 13:48  viktor.tarasov

	* trunk/src/libopensc/Makefile.mak: libopensc in win32: no more
	  ui.h

2010-04-12 13:42  viktor.tarasov

	* trunk/src/libopensc/Makefile.mak: libopensc in win32: no more
	  ui.h

2010-04-12 13:41  viktor.tarasov

	* trunk/src/pkcs15init/Makefile.mak: pkcs15init: no more
	  'keycache' sources

2010-04-12 13:37  viktor.tarasov

	* trunk/src/pkcs15init/Makefile.mak: pkcs15init: no more
	  'keycache' sources

2010-04-12 08:46  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c: pkcs15init: corrent debug
	  messages

2010-04-12 08:44  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c: pkcs15init: for the newly
	  generated key object set public key as it's content

2010-04-11 17:44  viktor.tarasov

	* trunk/src/tools/pkcs11-tool.c: pkcs11-tool: #75: key for
	  signature can be selected by object_id

2010-04-02 14:08  ludovic.rousseau

	* trunk/src/libopensc/card-myeid.c: Use explict field names in the
	  static initialisation to make it more robust to code change Fix
	  card-myeid.c:44: warning: missing initializer card-myeid.c:44:
	  warning: (near initialization for &#8216;myeid_drv.atr_map&#8217;)

2010-04-02 13:57  ludovic.rousseau

	* trunk/src/libopensc/card-entersafe.c: Do not use a type of
	  possibly different size. Would fail on PowerPC in 64-bits for
	  example. Fix card-entersafe.c: In function
	  &#8216;entersafe_cipher_apdu&#8217;: card-entersafe.c:197: warning: passing
	  argument 3 of &#8216;EVP_EncryptUpdate&#8217; from incompatible pointer type
	  card-entersafe.c: In function &#8216;entersafe_mac_apdu&#8217;:
	  card-entersafe.c:270: warning: passing argument 3 of
	  &#8216;EVP_EncryptUpdate&#8217; from incompatible pointer type
	  card-entersafe.c:278: warning: passing argument 3 of
	  &#8216;EVP_EncryptUpdate&#8217; from incompatible pointer type
	  card-entersafe.c:286: warning: passing argument 3 of
	  &#8216;EVP_EncryptUpdate&#8217; from incompatible pointer type

2010-04-02 13:51  ludovic.rousseau

	* trunk/src/libopensc/reader-pcsc.c: Use (const char *) for static
	  C-strings Fix reader-pcsc.c: In function &#8216;pcsc_detect_readers&#8217;:
	  reader-pcsc.c:856: warning: initialization discards qualifiers
	  from pointer target type reader-pcsc.c:884: warning:
	  initialization discards qualifiers from pointer target type
	  reader-pcsc.c:894: warning: initialization discards qualifiers
	  from pointer target type

2010-04-02 13:49  ludovic.rousseau

	* trunk/src/libopensc/muscle.c: Rename variables and parameters
	  Fix muscle.c: In function &#8216;msc_create_object&#8217;: muscle.c:144:
	  warning: declaration of &#8216;read&#8217; shadows a global declaration
	  /usr/include/unistd.h:477: warning: shadowed declaration is here
	  muscle.c:144: warning: declaration of &#8216;write&#8217; shadows a global
	  declaration /usr/include/unistd.h:513: warning: shadowed
	  declaration is here muscle.c: In function &#8216;msc_import_key&#8217;:
	  muscle.c:941: warning: declaration of &#8216;read&#8217; shadows a global
	  declaration /usr/include/unistd.h:477: warning: shadowed
	  declaration is here muscle.c:942: warning: declaration of
	  &#8216;write&#8217; shadows a global declaration /usr/include/unistd.h:513:
	  warning: shadowed declaration is here

2010-04-02 13:45  ludovic.rousseau

	* trunk/src/libopensc/pkcs15-wrap.c: Do not cast a pointer to a
	  type of possibly different size. Would fail on PowerPC in
	  64-bits for example. pkcs15-wrap.c: In function &#8216;do_cipher&#8217;:
	  pkcs15-wrap.c:152: warning: dereferencing type-punned pointer
	  will break strict-aliasing rules pkcs15-wrap.c:159: warning:
	  dereferencing type-punned pointer will break strict-aliasing
	  rules

2010-04-02 13:33  ludovic.rousseau

	* trunk/src/libopensc/pkcs15-sec.c: Do not cast a pointer to a
	  type of possibly different size. Would fail on PowerPC in
	  64-bits for example. pkcs15-sec.c: In function
	  &#8216;sc_pkcs15_decipher&#8217;: pkcs15-sec.c:136: warning: dereferencing
	  type-punned pointer will break strict-aliasing rules

2010-04-02 13:12  ludovic.rousseau

	* trunk/src/libopensc/asn1.c: Remove 2 ugly casts and fix warnings
	  asn1.c: In function &#8216;asn1_decode_entry&#8217;: asn1.c:979: warning:
	  dereferencing type-punned pointer will break strict-aliasing
	  rules asn1.c: In function &#8216;asn1_encode_entry&#8217;: asn1.c:1263:
	  warning: dereferencing type-punned pointer will break
	  strict-aliasing rules

2010-04-02 13:11  martin

	* trunk/src/tools/pkcs15-init.c, trunk/src/tools/pkcs15-tool.c:
	  Revert r4191 "Fix logic in pkcs15-tool/pkcs15-init -v" This
	  reverts commit a61f61929647ed70f0258b2bcf1657fc5fef0fe1.

2010-04-02 12:23  ludovic.rousseau

	* trunk/src/pkcs15init/pkcs15-oberthur-awp.c: Fix
	  pkcs15-oberthur-awp.c: In function &#8216;awp_encode_data_info&#8217;:
	  pkcs15-oberthur-awp.c:1211: warning: implicit declaration of
	  function &#8216;sc_asn1_encode_object_id&#8217;

2010-04-02 12:21  ludovic.rousseau

	* trunk/src/pkcs15init/pkcs15-oberthur-awp.c: Rename variable rand
	  in rand_buf pkcs15-oberthur-awp.c: In function
	  &#8216;awp_new_container_entry&#8217;: pkcs15-oberthur-awp.c:241: warning:
	  declaration of &#8216;rand&#8217; shadows a global declaration
	  /usr/include/stdlib.h:176: warning: shadowed declaration is here

2010-04-02 12:19  ludovic.rousseau

	* trunk/src/pkcs15init/pkcs15-oberthur.c: Use size_t instead of
	  int to fix a compiler warning pkcs15-oberthur.c: In function
	  &#8216;cosm_write_tokeninfo&#8217;: pkcs15-oberthur.c:100: warning:
	  comparison between signed and unsigned

2010-04-02 12:15  ludovic.rousseau

	* trunk/src/pkcs15init/pkcs15-myeid.c: Use size_t instead of int
	  to fix a compiler warning pkcs15-myeid.c: In function
	  &#8216;myeid_generate_key&#8217;: pkcs15-myeid.c:687: warning: comparison
	  between signed and unsigned

2010-04-02 12:13  ludovic.rousseau

	* trunk/src/pkcs15init/pkcs15-myeid.c: Fix pkcs15-myeid.c: In
	  function &#8216;myeid_new_file&#8217;: pkcs15-myeid.c:321: warning:
	  assignment discards qualifiers from pointer target type
	  pkcs15-myeid.c:323: warning: assignment discards qualifiers from
	  pointer target type pkcs15-myeid.c:325: warning: assignment
	  discards qualifiers from pointer target type pkcs15-myeid.c:327:
	  warning: assignment discards qualifiers from pointer target type

2010-04-02 12:12  ludovic.rousseau

	* trunk/src/pkcs15init/pkcs15-entersafe.c: Fix
	  pkcs15-entersafe.c:200: warning: initialization discards
	  qualifiers from pointer target type pkcs15-entersafe.c:201:
	  warning: initialization discards qualifiers from pointer target
	  type pkcs15-entersafe.c:202: warning: initialization discards
	  qualifiers from pointer target type pkcs15-entersafe.c:203:
	  warning: initialization discards qualifiers from pointer target
	  type pkcs15-entersafe.c:204: warning: initialization discards
	  qualifiers from pointer target type pkcs15-entersafe.c:205:
	  warning: initialization discards qualifiers from pointer target
	  type pkcs15-entersafe.c:206: warning: initialization discards
	  qualifiers from pointer target type pkcs15-entersafe.c:207:
	  warning: initialization discards qualifiers from pointer target
	  type

2010-04-02 12:10  ludovic.rousseau

	* trunk/src/pkcs15init/pkcs15-setcos.c: setcos_generate_key(): use
	  size_t instead of int to fix a compiler warning
	  pkcs15-setcos.c:488: warning: comparison between signed and
	  unsigned

2010-04-02 12:05  ludovic.rousseau

	* trunk/src/pkcs15init/pkcs15-setcos.c: Use explict field names in
	  the static initialisation to make it more robust to code change
	  pkcs15-setcos.c:588: warning: missing initializer
	  pkcs15-setcos.c:588: warning: (near initialization for
	  &#8216;sc_pkcs15init_setcos_operations.emu_update_dir&#8217;)

2010-04-02 11:58  ludovic.rousseau

	* trunk/src/pkcs15init/pkcs15-setcos.c: declare a variable (const
	  char *) to fix compiler warnings pkcs15-setcos.c: In function
	  &#8216;setcos_new_file&#8217;: pkcs15-setcos.c:263: warning: assignment
	  discards qualifiers from pointer target type
	  pkcs15-setcos.c:265: warning: assignment discards qualifiers
	  from pointer target type pkcs15-setcos.c:267: warning:
	  assignment discards qualifiers from pointer target type
	  pkcs15-setcos.c:269: warning: assignment discards qualifiers
	  from pointer target type

2010-04-02 11:55  ludovic.rousseau

	* trunk/src/pkcs15init/pkcs15-lib.c: use (const char *) as return
	  type to avoid compilation warnings: pkcs15-lib.c: In function
	  &#8216;get_template_name_from_object&#8217;: pkcs15-lib.c:2152: warning:
	  return discards qualifiers from pointer target type
	  pkcs15-lib.c:2154: warning: return discards qualifiers from
	  pointer target type pkcs15-lib.c:2156: warning: return discards
	  qualifiers from pointer target type pkcs15-lib.c:2159: warning:
	  return discards qualifiers from pointer target type
	  pkcs15-lib.c:2161: warning: return discards qualifiers from
	  pointer target type pkcs15-lib.c: In function
	  &#8216;get_pin_ident_name&#8217;: pkcs15-lib.c:2815: warning: return
	  discards qualifiers from pointer target type pkcs15-lib.c:2817:
	  warning: return discards qualifiers from pointer target type
	  pkcs15-lib.c:2819: warning: return discards qualifiers from
	  pointer target type pkcs15-lib.c:2823: warning: return discards
	  qualifiers from pointer target type pkcs15-lib.c:2825: warning:
	  return discards qualifiers from pointer target type
	  pkcs15-lib.c:2827: warning: return discards qualifiers from
	  pointer target type pkcs15-lib.c:2829: warning: return discards
	  qualifiers from pointer target type pkcs15-lib.c:2832: warning:
	  return discards qualifiers from pointer target type

2010-04-02 11:43  ludovic.rousseau

	* trunk/src/pkcs11/openssl.c: use explict field names in the
	  static initialisation to make it more robust to code change

2010-04-01 14:37  martin

	* trunk/src/pkcs11/pkcs11-session.c: Fix a line ordering error.
	  Thanks to Roland Schwarz

2010-04-01 14:16  martin

	* trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/tools/pkcs15-init.c: Fix #198: set correct access
	  flags to private keys
	* trunk/src/tools/pkcs15-init.c: Don't use sc_debug in
	  src/tools/*, use fprintf(stderr) instead.

2010-04-01 13:44  martin

	* trunk/src/tools/pkcs15-init.c, trunk/src/tools/pkcs15-tool.c:
	  Fix logic in pkcs15-tool/pkcs15-init -v Only override ctx->debug
	  if -v given.

2010-04-01 11:21  ludovic.rousseau

	* trunk/src/tools/cardos-tool.c: Use an argument to
	  cardos_format() Thanks to Andreas Jellinghaus for the patch
	  http://www.opensc-project.org/pipermail/opensc-devel/2010-March/013849.html

2010-04-01 10:14  martin

	* trunk/src/tools/pkcs15-init.c: Remove leftover from r4113, allow
	  easy side-by-side comparison

2010-03-31 12:41  viktor.tarasov

	* trunk/src/pkcs15init/muscle.profile: muscle profile: keep
	  default ACLs for the 'DIR' file

2010-03-30 06:35  alonbl

	* trunk/src/pkcs11/Makefile.am: Fix r4182, LIBS must never go into
	  LDFLAGS

2010-03-29 14:34  ludovic.rousseau

	* trunk/src/pkcs11/openssl.c: Use the correct integer type. Fix
	  openssl.c:182: warning: passing argument 3 of &#8216;EVP_DigestFinal&#8217;
	  from incompatible pointer type

2010-03-29 14:30  ludovic.rousseau

	* trunk/src/pkcs11/openssl.c: Add missing (optional) initializer
	  Fix openssl.c:42: warning: missing initializer openssl.c:42:
	  warning: (near initialization for &#8216;openssl_sha1_mech.sign_init&#8217;)
	  openssl.c:53: warning: missing initializer openssl.c:53:
	  warning: (near initialization for
	  &#8216;openssl_sha256_mech.sign_init&#8217;) openssl.c:63: warning: missing
	  initializer openssl.c:63: warning: (near initialization for
	  &#8216;openssl_sha384_mech.sign_init&#8217;) openssl.c:73: warning: missing
	  initializer openssl.c:73: warning: (near initialization for
	  &#8216;openssl_sha512_mech.sign_init&#8217;) openssl.c:96: warning: missing
	  initializer openssl.c:96: warning: (near initialization for
	  &#8216;openssl_md5_mech.sign_init&#8217;) openssl.c:106: warning: missing
	  initializer openssl.c:106: warning: (near initialization for
	  &#8216;openssl_ripemd160_mech.sign_init&#8217;)

2010-03-29 14:19  ludovic.rousseau

	* trunk/src/pkcs11/pkcs11-display.c: Use a temporary pointer to
	  avoid a pointer cast. Fix pkcs11-display.c:137: warning:
	  dereferencing type-punned pointer will break strict-aliasing
	  rules

2010-03-29 14:10  ludovic.rousseau

	* trunk/src/tools/pkcs15-crypt.c: Do not cast a pointer to a type
	  of possibly different size. Would fail on PowerPC in 64-bits for
	  example. pkcs15-crypt.c: In function &#8216;sign_ext&#8217;:
	  pkcs15-crypt.c:293: warning: dereferencing type-punned pointer
	  will break strict-aliasing rules pkcs15-crypt.c:299: warning:
	  dereferencing type-punned pointer will break strict-aliasing
	  rules

2010-03-29 13:30  ludovic.rousseau

	* trunk/src/pkcs11/Makefile.am: Link libpkcs11 to $(LTLIB_LIBS)
	  since the lib uses ld_dlopen(), etc. Fix a compilation error for
	  src/tools/pkcs11-tool: /usr/bin/ld:
	  ../../src/pkcs11/.libs/libpkcs11.a(libpkcs11.o): in function
	  C_UnloadModule:libpkcs11.c:78: error: undefined reference to
	  `lt_dlclose' /usr/bin/ld:
	  ../../src/pkcs11/.libs/libpkcs11.a(libpkcs11.o): in function
	  C_LoadModule:libpkcs11.c:36: error: undefined reference to
	  `lt_dlinit' /usr/bin/ld:
	  ../../src/pkcs11/.libs/libpkcs11.a(libpkcs11.o): in function
	  C_LoadModule:libpkcs11.c:43: error: undefined reference to
	  `lt_dlopen' /usr/bin/ld:
	  ../../src/pkcs11/.libs/libpkcs11.a(libpkcs11.o): in function
	  C_LoadModule:libpkcs11.c:52: error: undefined reference to
	  `lt_dlsym'

2010-03-29 12:55  ludovic.rousseau

	* trunk/src/tools/cardos-tool.c: Use the correct type
	  (const_DES_cblock *) instead of (const_DES_cblock) for
	  DES_ecb_encrypt() input and output parameters. I have no idea
	  how it could have worked. Fix cardos-tool.c: In function
	  &#8216;cardos_sm4h&#8217;: cardos-tool.c:421: warning: passing argument 1 of
	  &#8216;DES_ecb_encrypt&#8217; from incompatible pointer type
	  cardos-tool.c:421: warning: passing argument 2 of
	  &#8216;DES_ecb_encrypt&#8217; from incompatible pointer type
	  cardos-tool.c:426: warning: passing argument 1 of
	  &#8216;DES_ecb_encrypt&#8217; from incompatible pointer type
	  cardos-tool.c:426: warning: passing argument 2 of
	  &#8216;DES_ecb_encrypt&#8217; from incompatible pointer type
	  cardos-tool.c:432: warning: passing argument 1 of
	  &#8216;DES_ecb_encrypt&#8217; from incompatible pointer type
	  cardos-tool.c:432: warning: passing argument 2 of
	  &#8216;DES_ecb_encrypt&#8217; from incompatible pointer type
	  cardos-tool.c:434: warning: passing argument 1 of
	  &#8216;DES_ecb_encrypt&#8217; from incompatible pointer type
	  cardos-tool.c:434: warning: passing argument 2 of
	  &#8216;DES_ecb_encrypt&#8217; from incompatible pointer type
	  cardos-tool.c:472: warning: passing argument 1 of
	  &#8216;DES_ecb3_encrypt&#8217; from incompatible pointer type
	  cardos-tool.c:472: warning: passing argument 2 of
	  &#8216;DES_ecb3_encrypt&#8217; from incompatible pointer type
	  cardos-tool.c:483: warning: passing argument 1 of
	  &#8216;DES_ecb3_encrypt&#8217; from incompatible pointer type
	  cardos-tool.c:483: warning: passing argument 2 of
	  &#8216;DES_ecb3_encrypt&#8217; from incompatible pointer type

2010-03-29 08:23  ludovic.rousseau

	* trunk/src/tools/util.c: Rename parameter wait in do_wait
	  util.c:11: warning: declaration of &#8216;wait&#8217; shadows a global
	  declaration /usr/include/sys/wait.h:255: warning: shadowed
	  declaration is here

2010-03-29 08:20  ludovic.rousseau

	* trunk/src/tools/util.c, trunk/src/tools/util.h: use a (const
	  char *) for the reader_id and fix 2 warnings
	  opensc-explorer.c:1606: warning: passing argument 3 of
	  &#8216;util_connect_card&#8217; discards qualifiers from pointer target type
	  rutoken-tool.c:492: warning: passing argument 3 of
	  &#8216;util_connect_card&#8217; discards qualifiers from pointer target type

2010-03-29 08:13  ludovic.rousseau

	* trunk/src/tools/piv-tool.c: Fix piv-tool.c: In function
	  &#8216;load_object&#8217;: piv-tool.c:130: warning: implicit declaration of
	  function &#8216;sc_asn1_find_tag&#8217; piv-tool.c:130: warning: nested
	  extern declaration of &#8216;sc_asn1_find_tag&#8217; piv-tool.c:130:
	  warning: cast from function call of type &#8216;int&#8217; to non-matching
	  type &#8216;u8 *&#8217; piv-tool.c:130: warning: cast to pointer from
	  integer of different size

2010-03-29 08:11  ludovic.rousseau

	* trunk/src/tools/piv-tool.c: Fix piv-tool.c:216: warning: suggest
	  parentheses around comparison in operand of |

2010-03-28 21:02  ludovic.rousseau

	* trunk/src/libopensc/ctx.c: Use a "const char *" to store a const
	  C-string ptr. Fix a lot (31) of warning: initialization discards
	  qualifiers from pointer target type Also cast from now (const
	  char *) to (void *) for free()

2010-03-28 21:00  ludovic.rousseau

	* trunk/src/libopensc/card.c, trunk/src/libopensc/internal.h: Use
	  a "const char *" to store a const C-string ptr. Fix a lot (162)
	  of warning: initialization discards qualifiers from pointer
	  target type Also cast from now (const char *) to (void *) for
	  free()

2010-03-28 20:40  ludovic.rousseau

	* trunk/src/tools/pkcs11-tool.c: Do not cast to a possibly
	  different type size. Would fail on PowerPC in 64-bits for
	  example. Fix pkcs11-tool.c:2954: warning: dereferencing
	  type-punned pointer will break strict-aliasing rules

2010-03-28 20:30  ludovic.rousseau

	* trunk/src/tools/pkcs11-tool.c: Use a "const char *" to store a
	  const C-string ptr. Fix pkcs11-tool.c:1899: warning: assignment
	  discards qualifiers from pointer target type pkcs11-tool.c:1902:
	  warning: assignment discards qualifiers from pointer target type
	  pkcs11-tool.c:1906: warning: assignment discards qualifiers from
	  pointer target type pkcs11-tool.c:1910: warning: assignment
	  discards qualifiers from pointer target type pkcs11-tool.c:1914:
	  warning: assignment discards qualifiers from pointer target type
	  pkcs11-tool.c:1918: warning: assignment discards qualifiers from
	  pointer target type pkcs11-tool.c:1922: warning: assignment
	  discards qualifiers from pointer target type

2010-03-28 20:16  ludovic.rousseau

	* trunk/src/pkcs11/framework-pkcs15init.c: Fix
	  framework-pkcs15init.c:175: warning: initialization from
	  incompatible pointer type

2010-03-28 20:09  ludovic.rousseau

	* trunk/src/pkcs11/slot.c: Fix slot.c:151: warning: &#8216;p11card&#8217; may
	  be used uninitialized in this function

2010-03-28 20:08  ludovic.rousseau

	* trunk/src/pkcs11/slot.c: Fix slot.c:234: warning: function
	  declaration isn&#8217;t a prototype

2010-03-28 20:06  ludovic.rousseau

	* trunk/src/pkcs11/sc-pkcs11.h: Fix sc-pkcs11.h:328: warning:
	  function declaration isn&#8217;t a prototype

2010-03-28 19:57  ludovic.rousseau

	* trunk/src/tools/westcos-tool.c: Use a "const char *" to store a
	  const C-string ptr. Fix westcos-tool.c:41: warning:
	  initialization discards qualifiers from pointer target type
	  westcos-tool.c:43: warning: initialization discards qualifiers
	  from pointer target type

2010-03-28 19:55  ludovic.rousseau

	* trunk/src/tools/netkey-tool.c: Use a "const char *" to store a
	  const C-string ptr. Fix netkey-tool.c:43: warning:
	  initialization discards qualifiers from pointer target type
	  netkey-tool.c:63: warning: initialization discards qualifiers
	  from pointer target type

2010-03-28 16:15  ludovic.rousseau

	* trunk/src/tools/westcos-tool.c: Use a temporary variable to not
	  lose negative values (errors) Fix westcos-tool.c:591: warning:
	  comparison of unsigned expression < 0 is always false
	  westcos-tool.c:615: warning: comparison of unsigned expression <
	  0 is always false

2010-03-28 15:04  ludovic.rousseau

	* trunk/src/pkcs15init/pkcs15-westcos.c:
	  westcos_pkcs15_create_pin(): use a temporary variable to not
	  lose negative values (errors) Fix pkcs15-westcos.c:135: warning:
	  comparison of unsigned expression < 0 is always false
	  pkcs15-westcos.c:159: warning: comparison of unsigned expression
	  < 0 is always false

2010-03-28 14:18  ludovic.rousseau

	* trunk/src/scconf/parse.c: Remove useless key argument from
	  scconf_item_find() Fix parse.c: In function &#8216;scconf_item_find&#8217;:
	  parse.c:80: warning: unused parameter &#8216;key&#8217;

2010-03-28 14:13  ludovic.rousseau

	* trunk/src/scconf/parse.c, trunk/src/scconf/test-conf.c: revert
	  changes 4154 and 4155 as suggested by Martin Paljak
	  http://www.opensc-project.org/pipermail/opensc-devel/2010-March/013827.html

2010-03-28 12:01  ludovic.rousseau

	* trunk/src/libopensc/card-piv.c: Use a "const char *" to store a
	  const C-string ptr. Fix card-piv.c: In function &#8216;piv_get_data&#8217;:
	  card-piv.c:612: warning: assignment discards qualifiers from
	  pointer target type card-piv.c:615: warning: assignment discards
	  qualifiers from pointer target type card-piv.c:618: warning:
	  assignment discards qualifiers from pointer target type
	  card-piv.c:621: warning: assignment discards qualifiers from
	  pointer target type

2010-03-28 11:53  ludovic.rousseau

	* trunk/src/pkcs15init/pkcs15-oberthur-awp.c: Use a "const char *"
	  to store a const C-string ptr. Fix pkcs15-oberthur-awp.c:97:
	  warning: assignment discards qualifiers from pointer target type
	  pkcs15-oberthur-awp.c:98: warning: assignment discards
	  qualifiers from pointer target type pkcs15-oberthur-awp.c:99:
	  warning: assignment discards qualifiers from pointer target type
	  [etc...]

2010-03-28 11:50  ludovic.rousseau

	* trunk/src/pkcs15init/pkcs15-oberthur.c: Fix pkcs15-oberthur.c:
	  In function &#8216;cosm_write_tokeninfo&#8217;: pkcs15-oberthur.c:94:
	  warning: format not a string literal and no format arguments
	  pkcs15-oberthur.c:96: warning: format not a string literal and
	  no format arguments

2010-03-28 11:46  ludovic.rousseau

	* trunk/src/pkcs15init/pkcs15-oberthur.c: Fix
	  pkcs15-oberthur.c:61: warning: redundant redeclaration of
	  &#8216;cosm_delete_file&#8217; pkcs15-oberthur.h:93: warning: previous
	  declaration of &#8216;cosm_delete_file&#8217; was here

2010-03-28 11:44  ludovic.rousseau

	* trunk/src/pkcs15init/pkcs15-westcos.c: Fix pkcs15-westcos.c:41:
	  warning: redundant redeclaration of &#8216;sc_check_sw&#8217;
	  ../../src/libopensc/opensc.h:674: warning: previous declaration
	  of &#8216;sc_check_sw&#8217; was here

2010-03-28 11:43  ludovic.rousseau

	* trunk/src/libopensc/card-piv.c,
	  trunk/src/libopensc/card-westcos.c,
	  trunk/src/pkcs15init/pkcs15-westcos.c,
	  trunk/src/tools/pkcs11-tool.c, trunk/src/tools/pkcs15-init.c:
	  Remove unused variables. Fix warning: unused variable

2010-03-28 11:37  ludovic.rousseau

	* trunk/src/pkcs15init/pkcs15-asepcos.c,
	  trunk/src/pkcs15init/pkcs15-cardos.c,
	  trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-entersafe.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-incrypto34.c,
	  trunk/src/pkcs15init/pkcs15-jcop.c,
	  trunk/src/pkcs15init/pkcs15-miocos.c,
	  trunk/src/pkcs15init/pkcs15-muscle.c,
	  trunk/src/pkcs15init/pkcs15-myeid.c,
	  trunk/src/pkcs15init/pkcs15-rtecp.c,
	  trunk/src/pkcs15init/pkcs15-rutoken.c,
	  trunk/src/pkcs15init/pkcs15-starcos.c,
	  trunk/src/pkcs15init/pkcs15-westcos.c: Fix warning: missing
	  initializer

2010-03-28 11:25  ludovic.rousseau

	* trunk/src/scconf/parse.c: Fix parse.c: In function
	  &#8216;scconf_item_find&#8217;: parse.c:80: warning: unused parameter &#8216;key&#8217;

2010-03-28 11:24  ludovic.rousseau

	* trunk/src/scconf/test-conf.c: Fix test-conf.c: In function
	  &#8216;ldap_cb&#8217;: test-conf.c:32: warning: unused parameter &#8216;depth&#8217;
	  test-conf.c: In function &#8216;card_cb&#8217;: test-conf.c:60: warning:
	  unused parameter &#8216;entry&#8217; test-conf.c:60: warning: unused
	  parameter &#8216;depth&#8217; test-conf.c: In function &#8216;write_cb&#8217;:
	  test-conf.c:81: warning: unused parameter &#8216;depth&#8217;

2010-03-28 11:22  ludovic.rousseau

	* trunk/src/common/simclist.c: Fix simclist.c: In function
	  &#8216;list_meter_int8_t&#8217;: simclist.c:1337: warning: unused parameter
	  &#8216;el&#8217; simclist.c: In function &#8216;list_meter_int16_t&#8217;:
	  simclist.c:1338: warning: unused parameter &#8216;el&#8217; simclist.c: In
	  function &#8216;list_meter_int32_t&#8217;: simclist.c:1339: warning: unused
	  parameter &#8216;el&#8217; simclist.c: In function &#8216;list_meter_int64_t&#8217;:
	  simclist.c:1340: warning: unused parameter &#8216;el&#8217; simclist.c: In
	  function &#8216;list_meter_uint8_t&#8217;: simclist.c:1342: warning: unused
	  parameter &#8216;el&#8217; simclist.c: In function &#8216;list_meter_uint16_t&#8217;:
	  simclist.c:1343: warning: unused parameter &#8216;el&#8217; simclist.c: In
	  function &#8216;list_meter_uint32_t&#8217;: simclist.c:1344: warning: unused
	  parameter &#8216;el&#8217; simclist.c: In function &#8216;list_meter_uint64_t&#8217;:
	  simclist.c:1345: warning: unused parameter &#8216;el&#8217; simclist.c: In
	  function &#8216;list_meter_float&#8217;: simclist.c:1347: warning: unused
	  parameter &#8216;el&#8217; simclist.c: In function &#8216;list_meter_double&#8217;:
	  simclist.c:1348: warning: unused parameter &#8216;el&#8217;

2010-03-28 09:45  ludovic.rousseau

	* trunk/src/pkcs15init/pkcs15-lib.c: Fix pkcs15-lib.c:799:
	  warning: no previous prototype for &#8216;sc_pkcs15init_store_puk&#8217;
	  pkcs15-lib.c:2814: warning: no previous prototype for
	  &#8216;get_pin_ident_name&#8217;

2010-03-28 09:44  ludovic.rousseau

	* trunk/src/pkcs15init/pkcs15-oberthur-awp.c: Fix
	  pkcs15-oberthur-awp.c:729: warning: no previous prototype for
	  &#8216;awp_update_object_list&#8217;

2010-03-28 09:43  ludovic.rousseau

	* trunk/src/pkcs15init/pkcs15-oberthur-awp.c: Fix
	  pkcs15-oberthur-awp.c:1246: warning: no previous prototype for
	  &#8216;awp_set_data_info&#8217;

2010-03-28 09:41  ludovic.rousseau

	* trunk/src/libopensc/pkcs15.h: Fix pkcs15-pubkey.c:445: warning:
	  no previous prototype for &#8216;sc_pkcs15_decode_pubkey_gostr3410&#8217;
	  pkcs15-pubkey.c:462: warning: no previous prototype for
	  &#8216;sc_pkcs15_encode_pubkey_gostr3410&#8217;

2010-03-28 08:41  ludovic.rousseau

	* trunk/src/libopensc/pkcs15-esinit.c: Fix pkcs15-esinit.c:77:
	  warning: no previous prototype for
	  &#8216;sc_pkcs15emu_entersafe_init_ex&#8217;

2010-03-28 08:40  ludovic.rousseau

	* trunk/src/libopensc/p15emu-westcos.c: Fix p15emu-westcos.c:248:
	  warning: no previous prototype for &#8216;sc_pkcs15emu_westcos_init_ex&#8217;

2010-03-28 08:33  ludovic.rousseau

	* trunk/src/tools/westcos-tool.c: Fix westcos-tool.c:322: warning:
	  no previous prototype for &#8216;usage&#8217;

2010-03-23 10:03  viktor.tarasov

	* trunk/src/pkcs15init/Makefile.mak: oberthur pkcs15init: sorry,
	  fix

2010-03-23 10:02  viktor.tarasov

	* trunk/src/pkcs15init/Makefile.am,
	  trunk/src/pkcs15init/Makefile.mak: oberthur pkcs15init:
	  non-install header; join pkcs15-oberthur-awp.obj to object list
	  for win32

2010-03-22 14:17  viktor.tarasov

	* trunk/src/pkcs15init/oberthur.profile,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-oberthur-awp.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.h: oberthur pkcs15init:
	  support for creation of the 'public' DATA objects

2010-03-22 14:14  viktor.tarasov

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/asn1.h,
	  trunk/src/libopensc/libopensc.exports,
	  trunk/src/libopensc/pkcs15-oberthur.c: libopensc: export
	  'sc_asn1_encode_object_id'

2010-03-19 09:41  viktor.tarasov

	* trunk/doc/tools/pkcs15-init.xml: doc: in pkcs15-init.xml add
	  usage case for '--verify-pin' option

2010-03-19 09:19  viktor.tarasov

	* trunk/doc/tools/pkcs15-tool.xml: man: in pkcs15-tool man page
	  add 'list-data', 'read-data' actions and update 'list' private
	  objects

2010-03-18 17:51  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-oberthur-awp.c: oberthur pkcs15init:
	  use macro for debug level

2010-03-18 17:21  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-oberthur.h: oberthur: forgotten
	  header file

2010-03-18 12:30  viktor.tarasov

	* trunk/src/libopensc/pkcs15-oberthur.c,
	  trunk/src/pkcs15init/Makefile.am,
	  trunk/src/pkcs15init/pkcs15-oberthur-awp.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c: oberthur: pkcs15init
	  emulator Now the native Oberthur card format is supported for
	  emulation of pkcs15 and pkcs15init. It means that card
	  personalized with OpenSC and the obejcts created with OpenSC
	  will be usable with the native Oberthur's middleware and
	  vice-versa.

2010-03-18 10:49  viktor.tarasov

	* trunk/src/tools/pkcs11-tool.c: pkcs11-tool: to be compiled
	  without OpenSSL

2010-03-18 10:25  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c: pkcs15init: free cert object
	  if 'link object' failed

2010-03-18 10:15  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c: pkcs15init: use encoded
	  public key as the 'content' of private and public key pkcs15
	  objects

2010-03-18 09:49  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-init.h: pkcs15init: in pkcs15-init.h
	  don't use parameters name in the function declarations

2010-03-18 09:46  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-init.h: pkcs15init: fix pkcs15-init.h

2010-03-18 09:39  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-init.h: pkcs15init: in
	  pkcs15-init.h, for the function prototypes, homogenize using
	  'struct *' vs. '*_t'; do not use paramters name

2010-03-18 09:27  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c: pkcs15init: pkcs15 card flags
	  Set 'TOKEN INITIALIZED' after an application has been added, set
	  'USER PIN INITIALIZED' and 'LOGIN REQUIRED' after User PIN
	  object has been created.

2010-03-18 09:20  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c: pkcs15init emulation: use
	  emu_update_tokeninfo() if available

2010-03-18 09:10  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/tools/pkcs15-init.c: pkcs15init: emulation API Four
	  method are added to the 'sc_pkcs15init_operations':
	  emu_update_dir -- create or not the DIR file; emu_update_any_df
	  -- update the non-pkcs15 descriptors that are equivalents to
	  pkcs15 xDF files; emu_update_tokeninfo -- update analog of
	  tokenInfo; emu_write_info -- to not create OPENSC-INFO file;

2010-03-17 18:24  viktor.tarasov

	* trunk/src/tools/pkcs15-tool.c: pkcs15-tool: 'verify-pin' is not
	  an action

2010-03-17 18:16  viktor.tarasov

	* trunk/src/tools/pkcs15-init.c: pkcs15-init tool: make possible
	  pin verification immidiately after card was binded It's
	  implemented for the card with emulated pkcs#15 and protected
	  private object attributes. Update to man pages is comming soon.

2010-03-17 16:45  viktor.tarasov

	* trunk/src/pkcs15init/oberthur.profile: oberthur: in profile do
	  not use 'combined' pins in ACLs

2010-03-17 16:40  viktor.tarasov

	* trunk/src/pkcs15init/oberthur.profile: oberthur: in card profile
	  set 'do-last-update' to 'false'

2010-03-17 16:26  viktor.tarasov

	* trunk/src/libopensc/libopensc.exports,
	  trunk/src/pkcs15init/pkcs15-cardos.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c: pkcs15init: simplify internal
	  API ; do not pad PIN in pkcs15init. It's already done in
	  libopensc/pkcs15-pin; ; the 'do_verify_pin()',
	  'sc_pkcs15init_verify_key()' and 'do_get_and_verify_secret()'
	  are replaced by unique 'sc_pkcs15init_verify_secret()'; edit
	  debug messages;

2010-03-16 14:59  aj

	* trunk/src/tools/pkcs11-tool.c: don't complain about missing
	  "--slot" parameter, when you don't need it (if you only
	  "--list-slots").

2010-03-16 14:11  aj

	* trunk/src/tools/pkcs11-tool.c: Add code to write pubkey objects
	  to pkcs11-tool. By: Jaroslav Benkovsk
	  <jaroslav.benkovsky@nic.cz> Slightly modified by me.

2010-03-16 13:51  aj

	* trunk/NEWS, trunk/configure.ac: Start documenting changes and
	  increse libary version (we are no longer compatible with 0.11.*
	  line).

2010-03-15 17:58  viktor.tarasov

	* trunk/src/tools/pkcs15-tool.c: fix #202: pkcs15-tool: print
	  message when there is PIN verify error

2010-03-15 12:17  aj

	* trunk/src/cardmod/cardmod.c, trunk/src/libopensc/apdu.c,
	  trunk/src/libopensc/asn1.c, trunk/src/libopensc/card-acos5.c,
	  trunk/src/libopensc/card-akis.c,
	  trunk/src/libopensc/card-asepcos.c,
	  trunk/src/libopensc/card-atrust-acos.c,
	  trunk/src/libopensc/card-belpic.c,
	  trunk/src/libopensc/card-cardos.c,
	  trunk/src/libopensc/card-default.c,
	  trunk/src/libopensc/card-entersafe.c,
	  trunk/src/libopensc/card-flex.c,
	  trunk/src/libopensc/card-gemsafeV1.c,
	  trunk/src/libopensc/card-gpk.c, trunk/src/libopensc/card-ias.c,
	  trunk/src/libopensc/card-incrypto34.c,
	  trunk/src/libopensc/card-jcop.c,
	  trunk/src/libopensc/card-mcrd.c,
	  trunk/src/libopensc/card-miocos.c,
	  trunk/src/libopensc/card-muscle.c,
	  trunk/src/libopensc/card-myeid.c,
	  trunk/src/libopensc/card-oberthur.c,
	  trunk/src/libopensc/card-openpgp.c,
	  trunk/src/libopensc/card-piv.c,
	  trunk/src/libopensc/card-rtecp.c,
	  trunk/src/libopensc/card-rutoken.c,
	  trunk/src/libopensc/card-setcos.c,
	  trunk/src/libopensc/card-starcos.c,
	  trunk/src/libopensc/card-tcos.c,
	  trunk/src/libopensc/card-westcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/ctbcs.c, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/dir.c, trunk/src/libopensc/internal.h,
	  trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/libopensc.exports,
	  trunk/src/libopensc/log.c, trunk/src/libopensc/log.h,
	  trunk/src/libopensc/muscle.c,
	  trunk/src/libopensc/p15card-helper.c,
	  trunk/src/libopensc/p15emu-westcos.c,
	  trunk/src/libopensc/padding.c,
	  trunk/src/libopensc/pkcs15-algo.c,
	  trunk/src/libopensc/pkcs15-cache.c,
	  trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-data.c,
	  trunk/src/libopensc/pkcs15-esinit.c,
	  trunk/src/libopensc/pkcs15-esteid.c,
	  trunk/src/libopensc/pkcs15-gemsafeGPK.c,
	  trunk/src/libopensc/pkcs15-gemsafeV1.c,
	  trunk/src/libopensc/pkcs15-infocamere.c,
	  trunk/src/libopensc/pkcs15-oberthur.c,
	  trunk/src/libopensc/pkcs15-openpgp.c,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-piv.c,
	  trunk/src/libopensc/pkcs15-postecert.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-pteid.c,
	  trunk/src/libopensc/pkcs15-pubkey.c,
	  trunk/src/libopensc/pkcs15-sec.c,
	  trunk/src/libopensc/pkcs15-syn.c,
	  trunk/src/libopensc/pkcs15-tccardos.c,
	  trunk/src/libopensc/pkcs15-tcos.c,
	  trunk/src/libopensc/pkcs15-wrap.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/libopensc/reader-openct.c,
	  trunk/src/libopensc/reader-pcsc.c, trunk/src/libopensc/sc.c,
	  trunk/src/libopensc/sec.c, trunk/src/pkcs11/debug.c,
	  trunk/src/pkcs11/framework-pkcs15.c, trunk/src/pkcs11/misc.c,
	  trunk/src/pkcs11/openssl.c, trunk/src/pkcs11/pkcs11-global.c,
	  trunk/src/pkcs11/pkcs11-object.c,
	  trunk/src/pkcs11/pkcs11-session.c, trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/pkcs11/slot.c, trunk/src/pkcs15init/pkcs15-asepcos.c,
	  trunk/src/pkcs15init/pkcs15-cardos.c,
	  trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-entersafe.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-incrypto34.c,
	  trunk/src/pkcs15init/pkcs15-jcop.c,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-miocos.c,
	  trunk/src/pkcs15init/pkcs15-muscle.c,
	  trunk/src/pkcs15init/pkcs15-myeid.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c,
	  trunk/src/pkcs15init/pkcs15-rtecp.c,
	  trunk/src/pkcs15init/pkcs15-rutoken.c,
	  trunk/src/pkcs15init/pkcs15-setcos.c,
	  trunk/src/pkcs15init/pkcs15-starcos.c,
	  trunk/src/pkcs15init/profile.c,
	  trunk/src/tools/cryptoflex-tool.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/piv-tool.c,
	  trunk/src/tools/pkcs15-crypt.c, trunk/src/tools/pkcs15-init.c,
	  trunk/src/tools/pkcs15-tool.c, trunk/src/tools/rutoken-tool.c,
	  trunk/src/tools/westcos-tool.c: cleanup of the debug code: *
	  reduce to a few, supported functions. * change all functions to
	  take the debug level as parameter. * use symbolic names for the
	  debug levels. * fix tools to pass "verbose"/"opt_debug" as
	  ctx->debug.

2010-03-15 10:34  aj

	* trunk/src/tools/pkcs15-crypt.c, trunk/src/tools/pkcs15-init.c,
	  trunk/src/tools/pkcs15-tool.c: On blank, but otherwise perfectly
	  supported card, we get an error here (with "Unsupported card").
	  This needs to be improved. This patch changes the
	  "initialization" to "binding", so we at least can tell people:
	  you need to initialized an empty card first. Needs to be
	  improved of course.

2010-03-15 08:36  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c: fix second part of #199:
	  pkcs15init: when freeing pkcs15 object remove it from list

2010-03-15 07:23  flc

	* trunk/src/libopensc/libopensc.exports: clean libopensc.exports
	  (2 functions removed)

2010-03-13 23:35  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c: fix #199: to authenticate
	  'update' in sc_pkcs15init_update_file() use the file
	  instantiated from profile, rather then selected one This bug
	  concerned the card drivers for which the file ACLs cannot be
	  obtained from the FCI of the selected file.

2010-03-13 22:52  aj

	* trunk/etc/opensc.conf.in, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15-sec.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/pkcs15.h,
	  trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs15init/pkcs15-cardos.c,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/tests/regression/README,
	  trunk/src/tests/regression/functions,
	  trunk/src/tests/regression/init0001,
	  trunk/src/tests/regression/init0002,
	  trunk/src/tests/regression/init0005,
	  trunk/src/tests/regression/init0007,
	  trunk/src/tests/regression/init0008,
	  trunk/src/tests/regression/init0012,
	  trunk/src/tools/pkcs15-init.c: remove "split-key" option and
	  emulat sign for sign,decrypt keys with padding and decrypt() for
	  cardos.

2010-03-13 22:47  aj

	* trunk/src/tools/pkcs15-tool.c: Redirect output to file given by
	  "--output" / "-o" option. Closes bug #200.

2010-03-13 22:26  aj

	* trunk/src/tools/Makefile.am: compile tools with PTHREAD so we
	  can debug them in GDB.

2010-03-13 19:54  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c: pkcs15init:
	  sc_pkcs15_add_df() has no more 'handler' parameter

2010-03-13 19:48  viktor.tarasov

	* trunk/src/libopensc/pkcs15-gemsafeV1.c,
	  trunk/src/libopensc/pkcs15-oberthur.c,
	  trunk/src/libopensc/pkcs15-syn.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/pkcs15.h: libopensc emu: more general
	  implementation of the postponed DF parsing In previous version
	  the card specific 'parse_df' handler was a part of
	  'sc_pkcs15_df'. Now the placehold ('sc_pkcs15_operations')
	  created for the all card emulator specific operations .

2010-03-11 13:29  viktor.tarasov

	* trunk/src/libopensc/pkcs15-oberthur.c: oberthur emu: create
	  pkcs15 object for SOPIN; accept non-initialized token; use
	  'define' macros for the native file paths

2010-03-11 13:00  viktor.tarasov

	* trunk/src/tools/pkcs15-tool.c: pkcs15-tool: 'pkcs15_pin_info'
	  parameter replaced by 'pkcs15_object'

2010-03-11 11:23  martin

	* trunk/src/tools/pkcs15-init.c: pkcs15-init: sign key usage
	  shortcut does not expand to non-repudiation.

2010-03-11 06:41  flc

	* trunk/src/libopensc/card-westcos.c: westcos card small fix

2010-03-10 15:03  viktor.tarasov

	* trunk/src/pkcs11/framework-pkcs15.c: framework-pkcs15: fix

2010-03-10 09:23  viktor.tarasov

	* trunk/src/cardmod/cardmod.c,
	  trunk/src/libopensc/pkcs15-oberthur.c,
	  trunk/src/libopensc/pkcs15-pin.c, trunk/src/libopensc/pkcs15.h,
	  trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-lib.c, trunk/src/tests/pintest.c,
	  trunk/src/tools/pkcs15-crypt.c, trunk/src/tools/pkcs15-tool.c:
	  libopensc: in pkcs15 PIN commands 'pin_info' parameter replaced
	  by 'pin_object'

2010-03-10 07:07  martin

	* trunk/src/libopensc/pkcs15-oberthur.c: there is no ui.h any more.

2010-03-09 17:43  viktor.tarasov

	* trunk/src/libopensc/Makefile.mak: libopensc: add oberthur pkcs15
	  emulator to Makefile.mak

2010-03-09 17:40  viktor.tarasov

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/pkcs15-oberthur.c,
	  trunk/src/libopensc/pkcs15-syn.c: oberthur: pkcs15 emulator for
	  the native cards

2010-03-09 17:38  viktor.tarasov

	* trunk/src/pkcs11/framework-pkcs15.c: pkcs11 framework-pkc15: at
	  user login try to do the postponed private keys load

2010-03-09 17:11  viktor.tarasov

	* trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h:
	  libopensc emu: sorry, fix

2010-03-09 16:57  viktor.tarasov

	* trunk/etc/opensc.conf.in: pkcs11: configuration option to report
	  as zero the CKA_ID of CA certificates In fact, the middleware of
	  the manufacturer of the gemalto (axalto, gemplus) cards reports
	  the CKA_ID of CA certificates as '0'. But it's not true for the
	  others middlewares (Oberthur), NSS (afais) and PKCS#11 standard.

2010-03-09 16:49  viktor.tarasov

	* trunk/src/libopensc/libopensc.exports,
	  trunk/src/libopensc/pkcs15-gemsafeV1.c,
	  trunk/src/libopensc/pkcs15-syn.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/pkcs15.h, trunk/src/pkcs15init/pkcs15-lib.c:
	  libopensc emu: postponed object loading Some non-pkcs15 cards
	  protect the reading of the private objects attributes. For the
	  emulated pkcs15 cards, the 'init' emu-handler was the only place
	  where pkcs15 objects could be loaded. This handler is called
	  before the card is binded, and so, for an application there was
	  no 'normal' way to verify PIN and load the objects with
	  protected attributes. Actually it's possible to complete list of
	  the pkcs15 objects after the emulated pkcs15 card has been
	  binded.

2010-03-09 15:43  viktor.tarasov

	* trunk/src/pkcs11/framework-pkcs15.c, trunk/src/pkcs11/misc.c,
	  trunk/src/pkcs11/sc-pkcs11.h: pkcs11: configuration option to
	  report as zero the CKA_ID of CA certificates In fact, the
	  middleware of the manufacturer of the gemalto (axalto, gemplus)
	  cards reports the CKA_ID of CA certificates as '0'. But it's not
	  true for the others middlewares (Oberthur), NSS (afais) and
	  PKCS#11 standard.

2010-03-09 15:05  viktor.tarasov

	* trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/framework-pkcs15init.c,
	  trunk/src/pkcs11/pkcs11-session.c, trunk/src/pkcs11/sc-pkcs11.h:
	  pkcs11 framework: change prototype of the 'login' method It
	  gives the access to the 'slot' object inside the framework
	  method 'login'.

2010-03-09 14:51  viktor.tarasov

	* trunk/src/tools/pkcs15-tool.c: pkcs15-tool: add 'verify-pin'
	  option" src/tools/pkcs15-tool.c Implemented to have the
	  possibility to verify PIN after binding of the pkcs15 card and
	  before any 'substantial' operation.

2010-03-09 13:39  flc

	* trunk/src/libopensc/ctx.c: add windows.h include to ctx.c to
	  satisfy dependencies and move internal.h include at end of
	  includes

2010-03-09 07:41  flc

	* trunk/src/cardmod/cardmod.c, trunk/src/libopensc/ctx.c:
	  internal.h must be before winreg.h include, and change path for
	  include log.h in cardmod.c

2010-03-08 12:32  viktor.tarasov

	* trunk/src/libopensc/pkcs15.c,
	  trunk/src/pkcs11/framework-pkcs15.c: libopensc: homogenize name
	  of 'struct sc_pkcs15_card' parameters and variables

2010-03-05 19:31  martin

	* trunk/win32/Makefile.am: win32/Makefile.am:1: whitespace
	  following trailing backslash

2010-03-05 10:37  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-asepcos.c,
	  trunk/src/pkcs15init/pkcs15-cardos.c,
	  trunk/src/pkcs15init/pkcs15-incrypto34.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-starcos.c,
	  trunk/src/pkcs15init/profile.c, trunk/src/pkcs15init/profile.h:
	  pkcs15init: homegenize pin reference type in a different
	  structures; remove unused parameters in the internal procedures;

2010-03-04 16:19  viktor.tarasov

	* trunk/src/libopensc/pkcs15.h: libopensc: add structure name to
	  the 'typedef structure' definitions

2010-03-04 16:14  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c: pkcs15init: dummy object is
	  not needed for the sc_pkcs15_find_XX() procedures; coding style
	  issues

2010-03-04 13:37  viktor.tarasov

	* trunk/src/pkcs15init/flex.profile,
	  trunk/src/pkcs15init/pkcs15-cflex.c: pkcs15init cflex: fix
	  protected initialisation In the 'flex' card profile the ACLs of
	  the public objects are set to 'NONE'. As the pkcs15init core
	  currently implemented, the AuthID attribute is not used for the
	  public objects. Without AuthID the destination 'pin-domain' DF
	  cannot be determined in a simple and sure manner. That's why
	  'pin-domain' works only for private key, private data and the
	  public objects are placed into the application DF. ; take 'flex'
	  CHV files settings from the card profile;

2010-03-04 13:05  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c: pkcs15init: prepare
	  instantiation of the pin-domain templates When binding profile
	  and p15card (in sc_pkcs15init_set_p15card()), add to the profile
	  EF list the named DF for the path of the all existing AUTH. ;
	  variables name and coding style issues; ; debug messages;

2010-03-04 12:55  viktor.tarasov

	* trunk/src/pkcs15init/profile.c: pkcs15init profile: fix indexed
	  instantiation of pin/key domain; more of debug messages

2010-03-04 12:49  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-asepcos.c: pkcs15init asepcos:
	  unused variables

2010-03-04 08:14  aj

	* trunk/Makefile.mak, trunk/configure.ac, trunk/src/Makefile.am,
	  trunk/src/Makefile.mak, trunk/src/cardmod/Makefile.am,
	  trunk/src/cardmod/cardmod.c, trunk/src/common/Makefile.am,
	  trunk/src/common/compat_getopt.c,
	  trunk/src/common/compat_getpass.c,
	  trunk/src/common/compat_strlcpy.c, trunk/src/include,
	  trunk/src/libopensc/Makefile.am, trunk/src/libopensc/apdu.c,
	  trunk/src/libopensc/asn1.c, trunk/src/libopensc/asn1.h,
	  trunk/src/libopensc/base64.c, trunk/src/libopensc/card-acos5.c,
	  trunk/src/libopensc/card-akis.c,
	  trunk/src/libopensc/card-asepcos.c,
	  trunk/src/libopensc/card-atrust-acos.c,
	  trunk/src/libopensc/card-belpic.c,
	  trunk/src/libopensc/card-cardos.c,
	  trunk/src/libopensc/card-default.c,
	  trunk/src/libopensc/card-entersafe.c,
	  trunk/src/libopensc/card-flex.c,
	  trunk/src/libopensc/card-gemsafeV1.c,
	  trunk/src/libopensc/card-gpk.c, trunk/src/libopensc/card-ias.c,
	  trunk/src/libopensc/card-incrypto34.c,
	  trunk/src/libopensc/card-jcop.c,
	  trunk/src/libopensc/card-mcrd.c,
	  trunk/src/libopensc/card-miocos.c,
	  trunk/src/libopensc/card-muscle.c,
	  trunk/src/libopensc/card-myeid.c,
	  trunk/src/libopensc/card-oberthur.c,
	  trunk/src/libopensc/card-openpgp.c,
	  trunk/src/libopensc/card-piv.c,
	  trunk/src/libopensc/card-rtecp.c,
	  trunk/src/libopensc/card-rutoken.c,
	  trunk/src/libopensc/card-setcos.c,
	  trunk/src/libopensc/card-starcos.c,
	  trunk/src/libopensc/card-tcos.c,
	  trunk/src/libopensc/card-westcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/cardctl.h, trunk/src/libopensc/cards.h,
	  trunk/src/libopensc/compression.c,
	  trunk/src/libopensc/compression.h, trunk/src/libopensc/ctbcs.c,
	  trunk/src/libopensc/ctx.c, trunk/src/libopensc/dir.c,
	  trunk/src/libopensc/errors.c, trunk/src/libopensc/internal.h,
	  trunk/src/libopensc/iso7816.c, trunk/src/libopensc/log.c,
	  trunk/src/libopensc/log.h,
	  trunk/src/libopensc/muscle-filesystem.c,
	  trunk/src/libopensc/muscle-filesystem.h,
	  trunk/src/libopensc/muscle.c, trunk/src/libopensc/muscle.h,
	  trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/p15card-helper.c,
	  trunk/src/libopensc/p15card-helper.h,
	  trunk/src/libopensc/p15emu-westcos.c,
	  trunk/src/libopensc/padding.c,
	  trunk/src/libopensc/pkcs15-actalis.c,
	  trunk/src/libopensc/pkcs15-algo.c,
	  trunk/src/libopensc/pkcs15-atrust-acos.c,
	  trunk/src/libopensc/pkcs15-cache.c,
	  trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-data.c,
	  trunk/src/libopensc/pkcs15-esinit.c,
	  trunk/src/libopensc/pkcs15-esteid.c,
	  trunk/src/libopensc/pkcs15-gemsafeGPK.c,
	  trunk/src/libopensc/pkcs15-gemsafeV1.c,
	  trunk/src/libopensc/pkcs15-infocamere.c,
	  trunk/src/libopensc/pkcs15-openpgp.c,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-piv.c,
	  trunk/src/libopensc/pkcs15-postecert.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-pteid.c,
	  trunk/src/libopensc/pkcs15-pubkey.c,
	  trunk/src/libopensc/pkcs15-sec.c,
	  trunk/src/libopensc/pkcs15-starcert.c,
	  trunk/src/libopensc/pkcs15-syn.c,
	  trunk/src/libopensc/pkcs15-tccardos.c,
	  trunk/src/libopensc/pkcs15-tcos.c,
	  trunk/src/libopensc/pkcs15-wrap.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/pkcs15.h,
	  trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/libopensc/reader-openct.c,
	  trunk/src/libopensc/reader-pcsc.c, trunk/src/libopensc/sc.c,
	  trunk/src/libopensc/sec.c, trunk/src/pkcs11/Makefile.am,
	  trunk/src/pkcs11/debug.c, trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/framework-pkcs15init.c,
	  trunk/src/pkcs11/libpkcs11.c, trunk/src/pkcs11/mechanism.c,
	  trunk/src/pkcs11/misc.c, trunk/src/pkcs11/openssl.c,
	  trunk/src/pkcs11/pkcs11-display.c,
	  trunk/src/pkcs11/pkcs11-global.c,
	  trunk/src/pkcs11/pkcs11-object.c,
	  trunk/src/pkcs11/pkcs11-session.c,
	  trunk/src/pkcs11/pkcs11-spy.c, trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/pkcs11/secretkey.c, trunk/src/pkcs11/slot.c,
	  trunk/src/pkcs15init/Makefile.am,
	  trunk/src/pkcs15init/pkcs15-asepcos.c,
	  trunk/src/pkcs15init/pkcs15-cardos.c,
	  trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-entersafe.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-incrypto34.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-jcop.c,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-miocos.c,
	  trunk/src/pkcs15init/pkcs15-muscle.c,
	  trunk/src/pkcs15init/pkcs15-myeid.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c,
	  trunk/src/pkcs15init/pkcs15-rtecp.c,
	  trunk/src/pkcs15init/pkcs15-rutoken.c,
	  trunk/src/pkcs15init/pkcs15-setcos.c,
	  trunk/src/pkcs15init/pkcs15-starcos.c,
	  trunk/src/pkcs15init/pkcs15-westcos.c,
	  trunk/src/pkcs15init/profile.c, trunk/src/pkcs15init/profile.h,
	  trunk/src/scconf/Makefile.am, trunk/src/scconf/parse.c,
	  trunk/src/scconf/scconf.c, trunk/src/scconf/sclex.c,
	  trunk/src/scconf/test-conf.c, trunk/src/scconf/write.c,
	  trunk/src/tests/Makefile.am, trunk/src/tests/base64.c,
	  trunk/src/tests/lottery.c, trunk/src/tests/p15dump.c,
	  trunk/src/tests/pintest.c, trunk/src/tests/print.c,
	  trunk/src/tests/prngtest.c, trunk/src/tests/sc-test.c,
	  trunk/src/tests/sc-test.h, trunk/src/tools/Makefile.am,
	  trunk/src/tools/cardos-tool.c,
	  trunk/src/tools/cryptoflex-tool.c, trunk/src/tools/eidenv.c,
	  trunk/src/tools/netkey-tool.c,
	  trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/piv-tool.c,
	  trunk/src/tools/pkcs11-tool.c, trunk/src/tools/pkcs15-crypt.c,
	  trunk/src/tools/pkcs15-init.c, trunk/src/tools/pkcs15-tool.c,
	  trunk/src/tools/rutoken-tool.c, trunk/src/tools/util.c,
	  trunk/src/tools/util.h, trunk/src/tools/westcos-tool.c,
	  trunk/win32/Makefile.am, trunk/win32/Makefile.mak,
	  trunk/win32/winconfig.h.in: Header file cleanup.

2010-03-03 17:22  viktor.tarasov

	* trunk/src/pkcs15init/profile.c: pkcs15init profile: syntax error
	  can provoke segmentation fault

2010-03-02 17:03  viktor.tarasov

	* trunk/src/include/opensc/Makefile.am,
	  trunk/src/libopensc/libopensc.exports,
	  trunk/src/pkcs15init/Makefile.am,
	  trunk/src/pkcs15init/keycache.c,
	  trunk/src/pkcs15init/keycache.h, trunk/src/pkcs15init/profile.h:
	  pkcs15init: no more need for static keycache

2010-03-02 16:22  viktor.tarasov

	* trunk/src/libopensc/card-asepcos.c,
	  trunk/src/libopensc/pkcs15.h,
	  trunk/src/pkcs15init/pkcs15-asepcos.c,
	  trunk/src/pkcs15init/pkcs15-lib.c: asepcos: 'trasport PIN'
	  (global PIN with reference '0') is presented as 'AUT' key ; no
	  more need of athena dedicated PIN flag 'TRANSPORT KEY';

2010-03-02 09:50  viktor.tarasov

	* trunk/src/libopensc/pkcs15.h,
	  trunk/src/pkcs15init/pkcs15-asepcos.c,
	  trunk/src/pkcs15init/pkcs15-lib.c: pkcs15init asepcos: fixup
	  initialisation with protected profile ; new, athena dedicated,
	  PIN pkcs15 flag 'TRANSPORT_KEY': in the Athena initialization
	  procedure the 'trasport' SOPIN object is used. This object
	  references to the pre-existing global SOPIN and is different
	  from the final SOPIN of the card. This object should be ignored
	  when fixing up the ACLs of the newly created file; ; the pkcs15
	  refereces of the new private keys are derived from the file-id;
	  ; remove duplicated code; ; some log messages in pkcs15-lib.c;

2010-03-01 15:29  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c: pkcs15init: in
	  sc_pkcs15init_add_object() if DF update fails, remove object
	  from the list before return

2010-03-01 14:01  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/profile.c, trunk/src/pkcs15init/profile.h:
	  profile: 'cbs' member of 'struct sc_profile' is not used

2010-03-01 13:51  viktor.tarasov

	* trunk/src/include/opensc/Makefile.am: include: do not create
	  link to the non-existing ui.h

2010-03-01 13:36  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-oberthur.c: pkcs15init oberthur: no
	  extractable key; for generated key set reference from the key's
	  path

2010-02-25 15:16  flc

	* trunk/src/libopensc/card-westcos.c,
	  trunk/src/tools/westcos-tool.c: add support for westcos card
	  with crypto component and minor renames to westcos-tool

2010-02-24 14:06  martin

	* trunk/src/pkcs11/pkcs11-object.c: #47: C_SignRecover is not
	  implemented at the moment, don't give any promises with
	  C_SignRecoverInit either.

2010-02-24 12:20  martin

	* trunk/configure.ac, trunk/doc/tools/opensc-config.xml,
	  trunk/doc/tools/tools.xml, trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/opensc-config.in: #185: drop opensc-config.
	  If required, pkg-config and libopensc.pc can be used instead.

2010-02-24 10:42  martin

	* trunk/src/libopensc/pkcs15.c: #148: clear PIN cache in
	  sc_pkcs15_unbind()

2010-02-24 08:57  s

	* trunk/src/pkcs15init/pkcs15-rutoken.c: fix mistake in r4065

2010-02-24 08:28  viktor.tarasov

	* trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h:
	  libopensc: re-design 'sc_pkcs15_allocate_object_content' for the
	  case when the 'new' and 'old' data pointers are the same ;change
	  the prototype of 'sc_pkcs15_find_pin_by_type_and_reference' to
	  eliminate the compilation warnings;

2010-02-24 08:25  aj

	* trunk/configure.ac, trunk/src/Makefile.am, trunk/src/openssh:
	  Remove openssh/ directory and our patch for openssh, as they
	  removed the opensc code in favor or new pkcs#11 code. This new
	  code works out of the box with opensc-pkcs11.so, so we don't
	  need the patch any more.

2010-02-24 08:22  s

	* trunk/src/pkcs15init/pkcs15-rtecp.c,
	  trunk/src/pkcs15init/pkcs15-rutoken.c: add check params; fix:
	  pkcs15-rutoken.c:208: warning: unused parameter 'puk'

2010-02-24 07:48  flc

	* trunk/src/libopensc/pkcs15-syn.c: set default auth_method
	  SC_AC_CHV for emulated cards thanks to Martin Paljak patch

2010-02-21 20:46  viktor.tarasov

	* trunk/src/libopensc/card-oberthur.c,
	  trunk/src/libopensc/pkcs15-pin.c, trunk/src/libopensc/pkcs15.c:
	  libopensc: remove unused variables

2010-02-21 20:33  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-asepcos.c,
	  trunk/src/pkcs15init/pkcs15-cardos.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-lib.c: pkcs15init: 'defined bu not
	  used'

2010-02-21 19:54  martin

	* trunk/src/libopensc/pkcs15-pin.c: pincache: pkcs15-pin.c:515:
	  warning: unused variable &#8216;i&#8217;

2010-02-21 19:53  martin

	* trunk/src/libopensc/pkcs15-pin.c: pincache: correct message for
	  user consent PINs (it is a matter of policy not software support)

2010-02-21 19:47  martin

	* trunk/src/libopensc/libopensc.exports: Fix exports file: {{{
	  Undefined symbols: "_sc_pkcs15init_fixup_acls", referenced from:
	  -exported_symbols_list command line option
	  "_sc_pkcs15init_set_pin_data", referenced from:
	  -exported_symbols_list command line option
	  "_sc_pkcs15init_set_secret", referenced from:
	  -exported_symbols_list command line option }}}

2010-02-21 18:24  viktor.tarasov

	* trunk/src/pkcs15init/myeid.profile,
	  trunk/src/pkcs15init/pkcs15-asepcos.c,
	  trunk/src/pkcs15init/pkcs15-cardos.c,
	  trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-incrypto34.c,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-setcos.c,
	  trunk/src/pkcs15init/pkcs15-starcos.c,
	  trunk/src/tools/pkcs15-init.c: pkcs15init: instead of static
	  keycache use the pincache as a content of the pkcs15 AUTH object
	  Tested with cards: CardOS v4.3B; SetCOS 4.4.1B; Oberthur;
	  Cryptoflex 16k, 32k e-gate, 32k e-gate token; GPK 8K; Athena;
	  Aventra; Fetian; Rainbow 3000 (STARCOS SPK 2.3)

2010-02-21 16:21  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-asepcos.c,
	  trunk/src/pkcs15init/pkcs15-cardos.c,
	  trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-entersafe.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-incrypto34.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-jcop.c,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-miocos.c,
	  trunk/src/pkcs15init/pkcs15-muscle.c,
	  trunk/src/pkcs15init/pkcs15-myeid.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c,
	  trunk/src/pkcs15init/pkcs15-rtecp.c,
	  trunk/src/pkcs15init/pkcs15-rutoken.c,
	  trunk/src/pkcs15init/pkcs15-setcos.c,
	  trunk/src/pkcs15init/pkcs15-starcos.c,
	  trunk/src/pkcs15init/pkcs15-westcos.c,
	  trunk/src/pkcs15init/profile.c: pkcs15init: in the prototypes of
	  the internal procedures the 'struct sc_card' argument replaced
	  with the 'struct sc_pkcs15_card' one This patch is not largely
	  tested and it will be followed (hope in a few hours) with
	  another one that will replace the using of the static pincache
	  with the pincache as the content of the AUTH pkcs15 object. In
	  the intervention into the card specific part I tried to respect
	  its creator's coding style. Sorry, if it's not always the case.

2010-02-21 11:10  martin

	* trunk/configure.ac: Missing piece from [4055]

2010-02-21 11:02  martin

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/libpkcs15init.pc.in,
	  trunk/src/libopensc/libscconf.pc.in: libopensc: only one
	  pkgconfig file is required.

2010-02-21 09:13  martin

	* trunk/doc/Makefile.am: manpages: don't install sc_* API
	  documentation.

2010-02-21 09:09  martin

	* trunk/src/tools/pkcs15-init.c: pkcs15-init: don't suggest using
	  --erase-card with --create-pkcs15 in help message.

2010-02-21 09:08  martin

	* trunk/doc/tools/pkcs15-init.xml: manpages: Clarify pkcs15-init
	  --erase-card usage. Fix XML structure from [4012]

2010-02-20 23:20  viktor.tarasov

	* trunk/src/pkcs15init/cyberflex.profile: cyberflex: no more
	  'protect-certificates' profile option

2010-02-20 23:14  viktor.tarasov

	* trunk/src/pkcs15init/flex.profile,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/profile.c, trunk/src/pkcs15init/profile.h:
	  pkcs15init: 'protect-certificates' profile option not used
	  Profile option 'protect-certifcates' was activated by default
	  for all the cards, was mentioned and commented out only in
	  'flex' profile, and finaly is not working 'by design' of
	  pkcs15-lib.c So, no need to keep this option, untill the valid
	  arguments to restore it back. Anyway, the access to certificates
	  is controlled by the file's ACLs defined in profile. ;in profile
	  use the 'define' macros to define the pin encoding type;

2010-02-20 22:16  viktor.tarasov

	* trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/pkcs11-session.c: pkcs11: no pincache concept
	  at the pkcs11 level -- it's implemented at the pkcs15 one

2010-02-20 22:04  viktor.tarasov

	* trunk/src/libopensc/pkcs15-pin.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/pkcs15.h, trunk/src/pkcs15init/profile.c,
	  trunk/src/pkcs15init/profile.h: pincache: implement pincache as
	  the content of the AUTH pkcs15 object ; in 'sc_pkcs15_pin_info'
	  structure add 'auth_method' member to keep the PIN
	  authentication method: CHV, AUT or SM; ; in pkcs15init profile
	  add function to search PIN template by auth method and
	  reference; ; in 'sc_pkcs15_remove_object' return silently if
	  object to delete is NULL; ; in 'sc_pkcs15_object' structure add
	  'usage_counter' member; ; new
	  'sc_pkcs15_find_pin_by_type_and_reference' procedure to search
	  PIN pkcs15 object by auth method and reference;

2010-02-20 20:09  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c: pkcs15init: when updating
	  'OpenSC Info' file, cleanup its non-used tail part -- thanks to
	  Xiaoshuo

2010-02-20 10:09  viktor.tarasov

	* trunk/src/libopensc/card-entersafe.c: entersafe: fix import key
	  RSA 2048 bits

2010-02-20 08:34  martin

	* trunk/src/libopensc/pkcs15.c: PKCS15: set the PRNG flag on
	  PKCS#15 card object even if it was not set in TokenFlags if RNG
	  capability is reported by the low level card driver.

2010-02-20 08:31  martin

	* trunk/src/libopensc/card-entersafe.c: entersafe: don't mix
	  hexadecimal and decimal in code and comments

2010-02-19 16:52  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-entersafe.c: entersafe: sorry, fix

2010-02-19 16:41  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-entersafe.c: entersafe: unify cards
	  behavior - don't throw error when erasing empty card

2010-02-19 10:41  flc

	* trunk/src/libopensc/ctx.c: Use cardmod if explicitly request on
	  config only

2010-02-18 17:08  viktor.tarasov

	* trunk/src/libopensc/card-myeid.c: MyEID: fix 'Activate Applet'
	  apdu case

2010-02-18 10:26  viktor.tarasov

	* trunk/src/libopensc/card-myeid.c: MyEID: 'read until the end'
	  not supported -- set maximal receiving size to 255

2010-02-18 10:08  viktor.tarasov

	* trunk/src/libopensc/card-myeid.c: MyEID: fix

2010-02-17 17:19  s

	* trunk/src/pkcs15init/pkcs15-rtecp.c: fix: mis-usage of 'type'
	  (PIN encoding style) Thanks to Viktor TARASOV
	  http://www.opensc-project.org/pipermail/opensc-devel/2010-February/013454.html

2010-02-17 07:51  flc

	* trunk/etc/opensc.conf.in, trunk/src/cardmod/cardmod.c,
	  trunk/src/libopensc/reader-pcsc.c: cardmod updates: - Add
	  comment to opensc.conf - Use opensc log in cardmod - Minor
	  corrections on cardmod pcsc driver

2010-02-16 07:10  aj

	* trunk/Makefile.am, trunk/configure.ac: automake gets packge name
	  and version from AC_INIT. the old AM_INIT_AUTOMAKE syntax is
	  deprecated now, switch to the new one.

2010-02-15 20:55  s

	* trunk/src/pkcs11/framework-pkcs15.c: fix SIGABRT (r4028) ***
	  glibc detected *** invalid pointer: 0x00007fff9e9f7670 ***
	  Program received signal SIGABRT, Aborted. 0x00007f971d0a8ea5 in
	  raise () from /lib64/libc.so.6 (gdb) bt #0 0x00007f971d0a8ea5 in
	  raise () from /lib64/libc.so.6 #1 0x00007f971d0aaab3 in abort ()
	  from /lib64/libc.so.6 #2 0x00007f971d0e7d58 in __libc_message ()
	  from /lib64/libc.so.6 #3 0x00007f971d0ed7e8 in malloc_printerr
	  () from /lib64/libc.so.6 #4 0x00007f971d0efda6 in free () from
	  /lib64/libc.so.6 #5 0x0000000000410f5c in pkcs15_gen_keypair
	  (p11card=0x72aec0, slot=<value optimized out>, pMechanism=<value
	  optimized out>, pPubTpl=<value optimized out>, ulPubCnt=<value
	  optimized out>, pPrivTpl=<value optimized out>, ulPrivCnt=6,
	  phPubKey=0x7fff9e9f7e50, phPrivKey=0x7fff9e9f7e58) at
	  framework-pkcs15.c:1763 /* see opensc-0.11.13 */ #6
	  0x0000000000409a6e in C_GenerateKeyPair

2010-02-15 17:47  viktor.tarasov

	* trunk/src/pkcs15init/profile.c: pkcs15init profile: accept the
	  minimal file-ids difference from GPK profile

2010-02-12 17:23  s

	* trunk/src/pkcs11/framework-pkcs15.c: fix memory leaks

2010-02-12 16:53  s

	* trunk/src/libopensc/pkcs15-prkey.c: fix memory leak

2010-02-11 14:50  martin

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak,
	  trunk/src/libopensc/card-emv.c, trunk/src/libopensc/cards.h,
	  trunk/src/libopensc/ctx.c, trunk/src/libopensc/opensc.h: Remove
	  the dummy EMV driver.

2010-02-11 14:47  viktor.tarasov

	* trunk/src/libopensc/ctx.c: libopensc: 'javacard' driver has to
	  be the last one before 'default' -- thanks to Andreas

2010-02-11 14:15  viktor.tarasov

	* trunk/src/libopensc/ctx.c: libopensc: in

2010-02-11 12:14  viktor.tarasov

	* trunk/src/tools/pkcs15-init.c: pkcs15-init tool: simplify
	  'pristine' test - it's ok if MF, DIR or PKCS15-AppDF is not
	  selectable

2010-02-11 08:46  flc

	* trunk/src/libopensc/libopensc.exports: remove useless symbol
	  from libopensc.exports

2010-02-10 07:59  aj

	* trunk/doc/tools/pkcs15-init.xml: Debian bug report 505396: -P is
	  not --store-public-key, but --store-pin. I simply remove the
	  short form "-P" for now (didn't find a good place to add it).

2010-02-10 07:44  aj

	* trunk/doc/tools/pkcs15-init.xml: AFAIK the default format is
	  PEM, not DER.

2010-02-10 07:40  aj

	* trunk/src/libopensc/card-belpic.c: patch from debian bug report
	  470637 by Philippe Teuwen: update_binary() was not foreseen by
	  the middleware creators of BELPIC so I added it, which allows to
	  write some data in the MF/ID/EF(Preferences) of the card.

2010-02-09 15:15  viktor.tarasov

	* trunk/src/libopensc/errors.c: libopensc: error message for
	  success

2010-02-09 14:45  viktor.tarasov

	* trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h:
	  libopensc: in sc_pkcs15_object introduce the 'content' member
	  Replace not-used 'der' structure member by the 'content' one.
	  'Der' member was introduced to keep the ASN1 encoded object
	  attributes. Actually it's not used. 'Content' is intended to
	  keep the object value (AUTH object - pin cache value; CERT
	  object - der value, ...)

2010-02-09 14:05  viktor.tarasov

	* trunk/src/libopensc/pkcs15.c, trunk/src/pkcs15init/pkcs15-lib.c:
	  libopensc: separate 'remove' and 'free' pkcs15 object

2010-02-09 13:53  viktor.tarasov

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/pkcs15.h:
	  libopensc: remove not used function

2010-02-06 12:59  aj

	* trunk/src/libopensc/ctx.c: Add a comment to keep javacard driver
	  2nd last.

2010-02-06 10:56  martin

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak,
	  trunk/src/libopensc/card-javacard.c,
	  trunk/src/libopensc/cards.h, trunk/src/libopensc/ctx.c: Add a
	  catch-all for (possibly) blank JavaCards. This way known blank
	  JavaCards without a supported applet get recognized by
	  opensc-tool -n.

2010-02-05 21:39  alonbl

	* trunk/configure.ac, trunk/src/cardmod/Makefile.am,
	  trunk/src/cardmod/cardmod.c, trunk/src/cardmod/cardmod.exports,
	  trunk/src/cardmod/cardmod.inf, trunk/src/cardmod/cardmod.inf.in,
	  trunk/src/libopensc/ctx.c, trunk/src/libopensc/reader-pcsc.c:
	  cardmod - build fixups and mingw stuff 1. Add --enable-cardmod
	  to autoconf to enable feature explicitly. 2. Modify
	  opensc-cardmod.dll to always have bitness suffix eg
	  opensc-cardmod32.dll 3. Remove complex cardmod.h detection,
	  could not find any reason for this. 4. Make cardmod.inf a
	  template and inject opensc version into its version string. 5.
	  More minor autoconf/automake cleanups. 6. Remove
	  internal-winscard.h usage in cardmod.c as cardmod.h already
	  includes winscard.h 7. DllMain is not exportable. Notes: 1. I
	  may caused other build not to work, will happy to work it out.
	  2. Cannot find reason why cardmod.inf cardmod-westcos.reg should
	  reside in bin directory.

2010-02-05 13:56  aj

	* trunk/src/cardmod/Makefile.in: Files generated by automake &
	  friends are not placed in svn.

2010-02-05 13:05  flc

	* trunk/configure.ac, trunk/etc/opensc.conf.in,
	  trunk/src/Makefile.am, trunk/src/Makefile.mak,
	  trunk/src/cardmod, trunk/src/cardmod/Makefile.am,
	  trunk/src/cardmod/Makefile.in, trunk/src/cardmod/Makefile.mak,
	  trunk/src/cardmod/cardmod-westcos.reg,
	  trunk/src/cardmod/cardmod.c, trunk/src/cardmod/cardmod.exports,
	  trunk/src/cardmod/cardmod.inf, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/internal-winscard.h,
	  trunk/src/libopensc/internal.h,
	  trunk/src/libopensc/reader-pcsc.c: add cardmod a minidrivers for
	  windows

2010-02-05 11:21  aj

	* trunk/src/libopensc/log.c: fix pthread include for win32/mingw
	  compilation.

2010-02-05 06:20  aj

	* trunk/src/libopensc/sc.c: Fix bebytes2ushort function, reported
	  by Roland Schwarz.

2010-02-05 06:16  aj

	* trunk/src/libopensc/card-piv.c, trunk/src/tools/piv-tool.c:
	  Updated piv driver by Douglas E. Engert: the PIV driver no
	  longer need to set the card max_*_size parameters to get around
	  emulating read_binary and write_binary. It can now handle
	  partial reads and writes. The assumptions for write_binary are
	  that the first chuck will have idx = 0, and the last chunk will
	  write the last byte. The flags parameter will contain the total
	  length. The only write_binary operations are done when
	  initializing a card, and this is only done from piv-tool.c which
	  was modified to pass in the length and other flags. Piv-tool
	  continues to be a primative test tool for inializing test cards.
	  But it has been expanded to be able to write other objects on
	  test cards. The serial number of a PIV card is obtained from the
	  CHUID object if present which has a FASC-N which is an ID number
	  created by the issuer. Normally PIV cards are issued the U.S.
	  Federal government But there are ways to use the same cards with
	  a non government CA. This is then be referred to as PIV
	  Compatible. In this case, the FASC-N should start with an agency
	  code = 9999 and an RFC 4122 GUID should be present in the CHUID.
	  If this is the case, the GUID is used as the serial number.
	  Windows 7 comes with a PIV card card driver, but to get it use
	  one of these card the CHUID is required. (piv-tool can now write
	  one.

2010-02-05 06:14  aj

	* trunk/src/libopensc/apdu.c: Improved chaining for large APDU
	  commands, by Mats Andersson and Douglas E. Engert.

2010-02-04 12:18  s

	* trunk/src/pkcs15init/pkcs15-rtecp.c,
	  trunk/src/pkcs15init/rutoken_ecp.profile: rutoken (ECP): add 4
	  DF (reserved for internal use)

2010-02-04 10:39  s

	* trunk/src/pkcs15init/pkcs15-rtecp.c,
	  trunk/src/pkcs15init/pkcs15-rutoken.c: rutoken (S and ECP):
	  never unblock SO PIN

2010-02-04 06:33  aj

	* trunk/src/tools/Makefile.am, trunk/src/tools/pkcs15-init.c,
	  trunk/src/tools/ui.c, trunk/src/tools/ui.h: fold ui.c/h into
	  pkcs15-init.

2010-02-04 06:22  aj

	* trunk/src/libopensc/log.c: remove log output coloring.

2010-02-04 06:19  aj

	* trunk/src/libopensc/Makefile.am, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/internal.h,
	  trunk/src/libopensc/libopensc.exports,
	  trunk/src/libopensc/log.c, trunk/src/libopensc/ui.c,
	  trunk/src/libopensc/ui.h, trunk/src/tools/Makefile.am,
	  trunk/src/tools/pkcs15-init.c, trunk/src/tools/ui.c,
	  trunk/src/tools/ui.h: remove ui code from library.

2010-02-03 15:46  martin

	* trunk/src/libopensc/reader-pcsc.c: [PC/SC / MacOSX] Try to
	  connect to the card twice. On OS X, when you insert a card,
	  securityd sequentially starts all found Tokend-s to see if a
	  card can be handled with one. If a non-tokend application waits
	  for a card insertion with sc_wait_for_event and tries to connect
	  to the card right after the system sees it, it will fail with
	  "The reader is in use by another application" 95% of the time.
	  With this hack connecting to the card succeeds 95% of the time
	  with the probable penalty of an extra second on initialization
	  for non-tokend clients. This should only affect applications
	  that wait for card insertion events.

2010-02-03 12:10  s

	* trunk/src/pkcs15init/pkcs15-rtecp.c,
	  trunk/src/pkcs15init/pkcs15-rutoken.c,
	  trunk/src/pkcs15init/rutoken.profile,
	  trunk/src/pkcs15init/rutoken_ecp.profile: rutoken (S and ECP):
	  both PINs are globals (and addition to changeset 3960, 3946)

2010-02-03 10:10  martin

	* trunk/src/pkcs11/pkcs11-global.c: [PKCS#11] use combined
	  constants for events

2010-02-03 09:58  martin

	* trunk/src/tools/util.c: [tools] If started with --wait, also
	  wait for a reader if necessary.

2010-02-03 09:54  martin

	* trunk/src/libopensc/reader-pcsc.c: [PC/SC] detect other events
	  besides card insertion/removal * remove whitespace. * don't use
	  SC_MAX_READERS and allocate memory dynamically.

2010-02-02 18:15  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c: pkcs15init: useless if/else
	  construction

2010-02-02 17:29  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c: pkcs15init: remove
	  commented-out code

2010-02-02 17:20  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c: pkcs15init: little fix

2010-02-02 17:18  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c: pkcs15init: remove the old
	  commented-out code

2010-02-02 16:45  viktor.tarasov

	* trunk/src/pkcs15init/oberthur.profile,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/profile.c, trunk/src/pkcs15init/profile.h:
	  pkcs15init: remove profile option 'keep-public-key' that was
	  used only by oberthur

2010-02-02 14:50  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-asepcos.c,
	  trunk/src/pkcs15init/pkcs15-cardos.c,
	  trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-entersafe.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-incrypto34.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-jcop.c,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-miocos.c,
	  trunk/src/pkcs15init/pkcs15-muscle.c,
	  trunk/src/pkcs15init/pkcs15-myeid.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c,
	  trunk/src/pkcs15init/pkcs15-rtecp.c,
	  trunk/src/pkcs15init/pkcs15-rutoken.c,
	  trunk/src/pkcs15init/pkcs15-setcos.c,
	  trunk/src/pkcs15init/pkcs15-starcos.c,
	  trunk/src/pkcs15init/pkcs15-westcos.c: pkcs15init: abandon Old
	  API tested with Oberthur, CardOS and SetCOS.

2010-02-02 14:50  alonbl

	* trunk/configure.ac, trunk/src/libopensc/Makefile.am,
	  trunk/src/pkcs11/Makefile.am, trunk/src/pkcs15init/Makefile.am,
	  trunk/src/tests/Makefile.am, trunk/src/tools/Makefile.am,
	  trunk/win32/versioninfo.rc.in, trunk/win32/versioninfo.rc.in.in:
	  [WINDOWS] Remove tool specific file description support resource
	  file The implementation was based on the previous MSC build,
	  each tool had its own description in version resource. This
	  change sets a single version resource to all files, and produces
	  much simpler build.

2010-02-02 14:31  viktor.tarasov

	* trunk/src/libopensc/card-oberthur.c: oberthur: clean 'global'
	  PIN reference flag when getting byte from ACL

2010-02-02 12:53  martin

	* trunk/src/common/Makefile.am,
	  trunk/src/include/opensc/Makefile.am,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/types.h:
	  Include simclist.h to opensc includes to be able to build
	  OpenSC.tokend

2010-02-02 12:01  martin

	* trunk/src/libopensc/reader-pcsc.c: PC/SC: Do not try to watch 0
	  readers on OS X

2010-02-02 09:46  viktor.tarasov

	* trunk/src/libopensc/cardctl.h: pkcs15init: migrate MyEID to the
	  New API Migrated without testing, but normally should work --
	  the pkcs15init part of MyEID and SetCOS are sufficiently close.

2010-02-02 09:44  viktor.tarasov

	* trunk/src/libopensc/card-myeid.c,
	  trunk/src/pkcs15init/pkcs15-myeid.c: pkcs15init: migrate MyEID
	  to the New API Migrated without testing, but normally should
	  work -- the pkcs15init part of MyEID and SetCOS are sufficiently
	  close.

2010-02-02 09:33  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-miocos.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c,
	  trunk/src/pkcs15init/pkcs15-setcos.c: pkcs15init: unused
	  variables

2010-02-01 15:22  aj

	* trunk/src/libopensc/Makefile.mak,
	  trunk/src/pkcs15init/Makefile.mak, trunk/src/tools/Makefile.mak:
	  update windows makefiles: only create one dll.

2010-02-01 15:20  aj

	* trunk/src/pkcs15init/pkcs15init.exports,
	  trunk/src/scconf/scconf.exports: remove no longer used export
	  files.

2010-02-01 15:12  aj

	* trunk/src/Makefile.am, trunk/src/Makefile.mak,
	  trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/libopensc.exports,
	  trunk/src/pkcs11/Makefile.am, trunk/src/pkcs15init/Makefile.am,
	  trunk/src/scconf/Makefile.am, trunk/src/tools/Makefile.am: build
	  only one shared library instead of many.

2010-02-01 10:14  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c: pkcs15init: sc_verify() has
	  been deprecated (thanks to Martin)

2010-02-01 09:04  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-miocos.c: pkcs15init miocos: remove
	  obsolete code

2010-01-31 20:29  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-setcos.c: pkcs15init: migrate setcos
	  to the New API

2010-01-31 20:26  viktor.tarasov

	* trunk/src/pkcs15init/cardos.profile,
	  trunk/src/pkcs15init/pkcs15-cardos.c: pkcs15init cardos: fix
	  update keys When creating application DF ('PKCS15-AppDF'), User
	  PIN is not yet created, and AC type 'SC_AC_SYMBOLIC' cannot be
	  resolved. So, in the card profile, the macro '$PIN' cannot be
	  used to define the ACLs of the application DF.

2010-01-30 19:25  aj

	* trunk/src/tools/pkcs15-init.c: make erase incompatible with all
	  other actions. thus we don't need to worry about if the
	  pin/so-pin was passed for the old structures (before erase) or
	  the new ones (if used with create).

2010-01-29 17:41  viktor.tarasov

	* trunk/src/pkcs15init/setcos.profile: sertcos: both PINs are
	  globals

2010-01-29 17:40  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c: pkcs15init: fix putting xPINs
	  in cache ;when putting SOPIN into the global cache, use the path
	  from the object info; ;sc_pkcs15init_create_pin() can be called
	  to create PUK object;

2010-01-29 17:12  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c: pkcs15init: one more fix

2010-01-29 17:08  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c: pkcs15init: fix

2010-01-29 10:54  viktor.tarasov

	* trunk/src/libopensc/iso7816.c: libopensc: in iso7816
	  process_fci() decode Life Cycle Status byte (ISO 7816-4 2005,
	  5.3.3, tag '8A')

2010-01-28 16:44  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-miocos.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c,
	  trunk/src/pkcs15init/pkcs15-rutoken.c,
	  trunk/src/pkcs15init/pkcs15-setcos.c: pkcs15init: card specific
	  pkcs15init has to be ready for pin_reference = -1 Starting from
	  r3946, the reference of PIN, instantiated from profile, is not
	  overwritten by 0 in sc_pkcs15init_create_pin().
	  http://www.opensc-project.org/opensc/browser/trunk/src/pkcs15init/pkcs15-lib.c?rev=3946#L1064
	  So, card specific pkcs15init has to be ready for the
	  pin_reference = -1.

2010-01-28 14:53  aj

	* trunk/etc/opensc.conf.in: fix text a bit.

2010-01-28 14:29  martin

	* trunk/src/libopensc/opensc.h: Add more event type defines, add
	  declaration of sc_ctx_get_reader_by_id().

2010-01-28 14:15  viktor.tarasov

	* trunk/etc/opensc.conf.in, trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/misc.c, trunk/src/pkcs11/sc-pkcs11.h: pkcs11:
	  by default do not create slot for the User PUK (thanks to
	  Andreas)

2010-01-28 12:46  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-miocos.c: miocos: migration to New
	  API Miocos card owners are heartly invited to test this revision.

2010-01-28 12:42  viktor.tarasov

	* trunk/src/pkcs11/framework-pkcs15.c: remove debug message

2010-01-28 12:17  viktor.tarasov

	* trunk/etc/opensc.conf.in: opensc.conf: in pkcs11 section a new
	  option to disable slot for User PUK

2010-01-28 12:14  viktor.tarasov

	* trunk/src/pkcs11/framework-pkcs15.c, trunk/src/pkcs11/misc.c,
	  trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/pkcs15init/pkcs15-oberthur.c: pkcs11: parametrize
	  disabling of the slot for PUK

2010-01-28 08:28  viktor.tarasov

	* trunk/src/pkcs11/framework-pkcs15.c: pkcs11: do not create slot
	  for PUK Ignore PUK for the 'normal' pkcs11 also, not only for
	  'one-pin-pkcs11'.

2010-01-27 18:18  viktor.tarasov

	* trunk/src/pkcs15init/profile.c: profile: for PIN flags use
	  rather 'define' macro

2010-01-27 18:07  viktor.tarasov

	* trunk/src/libopensc/card-oberthur.c,
	  trunk/src/pkcs15init/oberthur.profile,
	  trunk/src/pkcs15init/pkcs15-oberthur.c: oberthur: finalize
	  migration to the NEW API no more 'init_app'. - Oberthur unblock
	  style is the only one (local SOPIN is used as PUK); - user PIN
	  and PUK should be everywhere defined as local; - SOPIN is always
	  global.

2010-01-27 17:53  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c: pkcs15init: pkcs15 PinObject
	  for PUK When creating PIN, if 'puk_id' is defined in 'struct
	  sc_pkcs15init_pinargs', the pkcs15 PinObject for PUK will be
	  created. For a moment, PinObject is not created for SO PUK.

2010-01-27 17:38  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/tools/pkcs15-init.c: pkcs15-init tool: don't ask for
	  PUK value when creating PIN with 'unblock-disabled' in flags -
	  prepare pkcs15-init tool for creating a pkcs15 PinObject for PUK.

2010-01-27 17:08  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c: sorry, fix

2010-01-27 17:03  viktor.tarasov

	* trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/pkcs15init/pkcs15-lib.c: libopensc pkcs15: path is
	  optional for PinAttributes of PinObject - for 'global' PINs path
	  in not encoded into the AODF; - when selecting pin_reference,
	  start from value defined in profile.

2010-01-27 16:04  s

	* trunk/src/pkcs11/pkcs11-object.c: cleanup and correct style

2010-01-27 14:50  s

	* trunk/src/pkcs11/framework-pkcs15.c: fix: use of uninitialised
	  value - return parameter (phObject) from C_CreateObject and
	  C_GenerateKeyPair (In function 'pkcs15_add_object': warning:
	  unused parameter 'pHandle') Example (C_CreateObject): Breakpoint
	  3, C_CreateObject (hSession=134587040, pTemplate=0x8049160,
	  ulCount=5, phObject=0xbff55560) at pkcs11-object.c:57 57 rv =
	  sc_pkcs11_lock(); (gdb) x/x phObject 0xbff55560: 0xffffffff
	  (gdb) finish 0xb7f5c6c0 17:15:09.969 [opensc-pkcs11]
	  framework-pkcs15.c:657:pkcs15_add_object: Setting object handle
	  of 0x0 to 0x805ab80 Run till exit from #0 C_CreateObject
	  (hSession=134587040, pTemplate=0x8049160, ulCount=5,
	  phObject=0xbff55560) at pkcs11-object.c:57 0x080487a4 in main ()
	  Value returned is $1 = 0 (gdb) x/x 0xbff55560 0xbff55560:
	  0xffffffff (gdb) c Continuing. Breakpoint 4, C_DestroyObject
	  (hSession=134587040, hObject=4294967295) at pkcs11-object.c:106
	  106 rv = sc_pkcs11_lock(); (gdb) p/x hObject $2 = 0xffffffff
	  (gdb) finish Run till exit from #0 C_DestroyObject
	  (hSession=134587040, hObject=4294967295) at pkcs11-object.c:106
	  0xb7f5c6c0 17:15:56.581 [opensc-pkcs11]
	  pkcs11-object.c:110:C_DestroyObject:
	  C_DestroyObject(hSession=0x805a2a0, hObject=0xffffffff)
	  0x080487cb in main () Value returned is $3 = 130

2010-01-27 12:22  s

	* trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/pkcs11-object.c: fix SIGSEGV: $ pkcs11-tool
	  --slot 5 --login --pin "12345678" --label 1 --type data
	  --private --write-object tmp.txt Generated Data Object: Data
	  object 0 ... $ pkcs11-tool --slot 5 -O --login --pin "12345678"
	  Data object 135436368 label: '1' application: '1' app_id: -1
	  flags: modifiable private ... (gdb) run Starting program:
	  /usr/local/bin/pkcs11-tool --slot 5 --login --pin "12345678"
	  --label 1 --type data --delete-object Program received signal
	  SIGSEGV, Segmentation fault. [Switching to Thread -1210333504
	  (LWP 7193)] 0xb7cc8181 in slot_token_removed (id=5) at
	  slot.c:319 319 if (object->ops->release) (gdb) bt #0 0xb7cc8181
	  in slot_token_removed (id=5) at slot.c:319 #1 0xb7cc82dd in
	  card_removed (reader=0x811bdf0) at slot.c:132 #2 0xb7cc43e7 in
	  C_Finalize (pReserved=0x0) at pkcs11-global.c:298 #3 0x08050fc0
	  in main (argc=11, argv=0xbf98d6f4) at pkcs11-tool.c:677

2010-01-26 12:59  viktor.tarasov

	* trunk/src/libopensc/pkcs15.c, trunk/src/pkcs15init/pkcs15-lib.c:
	  libopensc: search pkcs15 objects: accept NULL value for the
	  output argument So that, the dummy object for the 'search pkcs15
	  object' calls is not neccessary.

2010-01-26 10:40  s

	* trunk/src/libopensc/reader-openct.c: fix: reader-openct.c: In
	  function 'openct_reader_connect': reader-openct.c:204: error:
	  'reder' undeclared (first use in this function)

2010-01-25 16:42  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c: pkcs15init: in
	  select_object_path() look for the template also outside the
	  'key-domain'. To use New API with the cards that do not have
	  'key-domain' in their profile, when setting object data path,
	  the object template has to be also looked for outside the
	  'key-domain'. ;migrate Oberthur to the New API; ;use macros
	  SC_CALLED, SC_TEST_.., SC_RETURN in pkcs15-lib.c

2010-01-25 16:10  viktor.tarasov

	* trunk/src/libopensc/card-oberthur.c,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/types.h:
	  libopensc: new operations for access control

2010-01-25 15:53  viktor.tarasov

	* trunk/src/tools/pkcs15-init.c: pkcs15-init tool: when importing
	  bunch of certificates, break after the first error

2010-01-25 15:30  viktor.tarasov

	* trunk/src/libopensc/card-oberthur.c,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/types.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c,
	  trunk/src/tools/pkcs15-init.c: sorry, commit by error; reverting
	  back to r3935

2010-01-25 15:11  viktor.tarasov

	* trunk/src/libopensc/card-oberthur.c,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/types.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c,
	  trunk/src/tools/pkcs15-init.c: pkcs15-init tool: when importing
	  bunch of certificate, break after the first
	  errorsrc/tools/pkcs15-init.c

2010-01-24 20:45  martin

	* trunk/src/pkcs11/Makefile.am,
	  trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/framework-pkcs15init.c,
	  trunk/src/pkcs11/mechanism.c, trunk/src/pkcs11/misc.c,
	  trunk/src/pkcs11/pkcs11-global.c,
	  trunk/src/pkcs11/pkcs11-object.c,
	  trunk/src/pkcs11/pkcs11-session.c, trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/pkcs11/slot.c: pkcs11: - slots, sessions and objects
	  are kept as lists. - change the way slots, cards and readers are
	  managed. - re-implement C_WaitForSlotEvent(/C_Finalize) as
	  written in PCKS#11 v2.20, canceling pending blocking calls. -
	  implement a "virtual hotplug slot" with a floating slot id to
	  keep NSS working with C_WaitForSlotEvent with a new reader. NSS
	  does not call C_GetSlotList(NULL) to re-fetch the list of
	  available slots if C_WaitForSlotEvent returns an event in an
	  already known slot ID. By changing the ID of a slot whenever a
	  reader attached NSS/Firefox can be tricked into recognizing new
	  readers when waiting for events with C_WaitForSlotEvent. -
	  change (possibly break something) sc_to_cryptoki_error() to not
	  have side-effects - Implement CKU_CONTEXT_SPECIFIC in C_Login to
	  implement CKA_ALWAYS_AUTHENTICATE (keys with user consent)

2010-01-24 15:40  martin

	* trunk/src/tests/pintest.c, trunk/src/tests/sc-test.c: tests:
	  remove slots and sc_disconnect_card API as in r3931

2010-01-24 15:29  martin

	* trunk/src/tools/Makefile.am, trunk/src/tools/cardos-tool.c,
	  trunk/src/tools/cryptoflex-tool.c, trunk/src/tools/eidenv.c,
	  trunk/src/tools/netkey-tool.c,
	  trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/piv-tool.c,
	  trunk/src/tools/pkcs15-crypt.c, trunk/src/tools/pkcs15-init.c,
	  trunk/src/tools/pkcs15-tool.c, trunk/src/tools/rutoken-tool.c,
	  trunk/src/tools/util.c, trunk/src/tools/util.h,
	  trunk/src/tools/westcos-tool.c: tools: remove slots; implement
	  change in sc_disconnect_card(); convert
	  util_connect_card()/--wait to support the changes in r3931

2010-01-24 15:26  martin

	* trunk/src/pkcs15init/pkcs15-lib.c: pkcs15init: remove slots,
	  according to r3931

2010-01-24 15:25  martin

	* trunk/src/libopensc/apdu.c, trunk/src/libopensc/card-belpic.c,
	  trunk/src/libopensc/card-gemsafeV1.c,
	  trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/card-setcos.c,
	  trunk/src/libopensc/card-westcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/ctbcs.c, trunk/src/libopensc/ctbcs.h,
	  trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/internal-winscard.h,
	  trunk/src/libopensc/internal.h, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/libopensc.exports,
	  trunk/src/libopensc/log.c, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/libopensc/reader-openct.c,
	  trunk/src/libopensc/reader-pcsc.c, trunk/src/libopensc/sc.c,
	  trunk/src/libopensc/types.h: libopensc: - Remove slot
	  abstraction from internal API and all reader drivers. CT-API
	  (from where it all comes from) readers with multiple slots (if
	  still found) can be presented as separate readers, OpenCT should
	  remove the slot abstraction, PC/SC never knew about it. None of
	  the tools knew how to use slots. - Add sc_cancel (translates to
	  SCardCancel) - Re-implement sc_wait_for_event; support a
	  blocking call. - Replace the "int reader" API with "*
	  sc_reader_t" style; add "Get reader by name" functionality. -
	  Remove "action" parameter from sc_disconnect_card() (was not
	  used)

2010-01-24 15:14  martin

	* trunk/src/libopensc/card-mcrd.c: Use a constant buffer instead
	  of malloc.

2010-01-24 15:05  martin

	* trunk/src/common/Makefile.am, trunk/src/common/simclist.c,
	  trunk/src/common/simclist.h: Add simclist, also used by
	  pcsc-lite, for list operations.

2010-01-24 12:50  martin

	* trunk/src/libopensc/reader-pcsc.c: Missing piece from r3912

2010-01-24 12:38  martin

	* trunk/src/libopensc/apdu.c,
	  trunk/src/libopensc/card-entersafe.c,
	  trunk/src/libopensc/compression.c,
	  trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/libopensc/reader-openct.c,
	  trunk/src/libopensc/reader-pcsc.c, trunk/src/pkcs11/misc.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c: SC_ERROR_MEMORY_FAILURE
	  signals EEPROM failures on card. Failures to allocate memory on
	  host result in SC_ERROR_OUT_OF_MEMORY.

2010-01-23 19:12  martin

	* trunk/src/libopensc/errors.c, trunk/src/libopensc/errors.h,
	  trunk/src/libopensc/iso7816.c, trunk/src/pkcs11/misc.c:
	  Introduce SC_ERROR_NOT_ENOUGH_MEMORY <=> CKR_DEVICE_MEMORY. When
	  trying to import a too large keyfile as a data object, TrueCrypt
	  received a CKR_GENERAL_ERROR before this.

2010-01-23 06:28  martin

	* trunk/src/libopensc/sc.c: OpenSSL 1.0.0-beta series crash when
	  assembler implementations underflow with 0 byte length call to
	  OPENSSL_cleanse() and overwrite memory. Avoid it by nut trying
	  to eraze zero memory.

2010-01-22 12:11  martin

	* trunk/src/tools/Makefile.am: tools: cardos-tool uses OpenSSL,
	  link against it.

2010-01-22 12:01  s

	* trunk/src/pkcs15init/pkcs15-lib.c: fix: CK_MECHANISM rsa_mech =
	  { CKM_RSA_PKCS_KEY_PAIR_GEN, NULL, 0 }; C_GenerateKeyPair(...,
	  &rsa_mech, ..., ..., ..., ..., ..., ...); -> ... ->
	  sc_pkcs15init_store_public_key -> sc_pkcs15init_store_data ->
	  select_object_path -> sc_pkcs15_get_objects: return 0 -> CKR_OK
	  ($ pkcs15-tool --list-public-keys: Public RSA Key [Public Key]
	  ... Path : 3f0050000200 ) CK_MECHANISM gost_mech = {
	  CKM_GOSTR3410_KEY_PAIR_GEN, NULL, 0 }; C_GenerateKeyPair(...,
	  &gost_mech, ..., ..., ..., ..., ..., ...); -> ... ->
	  sc_pkcs15init_store_public_key -> sc_pkcs15init_store_data ->
	  select_object_path -> sc_pkcs15_get_objects: return 0 -> CKR_OK
	  ($ pkcs15-tool --list-public-keys: Public RSA Key [Public Key]
	  ... Path : 3f0050000200 Public GOSTR3410 Key [Public Key] ...
	  Path : 3f0050000200 )

2010-01-21 19:58  martin

	* trunk/src/libopensc/card-flex.c: Fix #193: cryptoflex driver did
	  not set minimum PIN length.

2010-01-21 10:58  s

	* trunk/NEWS: update on NEWS

2010-01-21 10:07  viktor.tarasov

	* trunk/src/pkcs15init/entersafe.profile,
	  trunk/src/pkcs15init/incrypto34.profile,
	  trunk/src/pkcs15init/muscle.profile,
	  trunk/src/pkcs15init/pkcs15-entersafe.c,
	  trunk/src/pkcs15init/pkcs15-incrypto34.c,
	  trunk/src/pkcs15init/pkcs15-muscle.c,
	  trunk/src/pkcs15init/pkcs15-starcos.c,
	  trunk/src/pkcs15init/pkcs15.profile,
	  trunk/src/pkcs15init/starcos.profile: pkcs15init profile:
	  'private key' as BSO is differenciated from the one as EF

2010-01-21 09:41  viktor.tarasov

	* trunk/src/libopensc/opensc.h,
	  trunk/src/pkcs15init/cardos.profile,
	  trunk/src/pkcs15init/oberthur.profile,
	  trunk/src/pkcs15init/pkcs15-cardos.c,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/profile.c, trunk/src/pkcs15init/profile.h:
	  pkcs15init: new profile type BSO at the profile level the
	  difference between EF and BSO is: - BSO path is always the path
	  of the host DF and do not indexated when template is
	  instanciated; - EF path is always ending with file-id that is
	  always indexated when template is instanciated. New non-static
	  'sc_profile_get_file_instance' procedure to instanciate
	  non-template entries. In profile.c get_uint() accepts
	  hexadecimals. In CardOS profile (I venture to) increase the xDF
	  sizes and change ACL to permit the key re-importing.

2010-01-19 13:11  martin

	* trunk/src/libopensc/card-gemsafeV1.c: Add GemSafeXpresso 32K
	  ATR. The card is available from
	  http://www.smartcardfocus.com/shop/ilp/id~246/p/index.shtml

2010-01-17 21:08  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/tools/pkcs15-init.c: pkcs15init: use pinpad

2010-01-16 21:52  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c: pkcs15init: dissociate object
	  file-id and object ID; ;use macros SC_CALLED, SC_RETURN and
	  SC_TEST_RET; ;change debug level in debug macros; For a new
	  pkcs15 object of a given type the file index is chosen as a
	  first value in the range from 'file-id' to 'max-id', excluding
	  the values that are already assigned to the file indexes of the
	  existing pkcs15 objects of the same type. 'file-id' is defined
	  in the template ('key-domain') of the card profile ; 'max-id' is
	  'file-id' + hard coded value 0xFE .

2010-01-16 20:55  viktor.tarasov

	* trunk/src/pkcs15init/profile.c: profile sanity check: in
	  template check for minimal difference between file-ids

2010-01-15 15:29  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c: pkcs15init: possible error of
	  'find_object_by_id' should not be ignored

2010-01-15 14:08  viktor.tarasov

	* trunk/src/pkcs15init/oberthur.profile,
	  trunk/src/pkcs15init/pkcs15.profile: oberthur: increase sizes of
	  xDF files; source tabified

2010-01-15 09:45  martin

	* trunk/src/libopensc/errors.c, trunk/src/libopensc/errors.h: Add
	  comments about unused errors and add an error for locked readers.

2010-01-15 09:36  martin

	* trunk/src/tools/pkcs11-tool.c: pkcs11-tool: test hotplug partial
	  commit fix + make a slot ID mandatory and parse it as an
	  unsigned long, not int.

2010-01-15 09:33  martin

	* trunk/src/tools/pkcs11-tool.c: pkcs11-tool: test hotplugging and
	  events (C_GetSlotList/C_WaitForSlotEvent) before others tests
	  and only if --hotplug is given

2010-01-15 09:27  martin

	* trunk/src/tools/pkcs11-tool.c: pkcs11-tool: Check for
	  CKA_ALWAYS_AUTHENTICATE and CKU_CONTEXT_SPECIFIC login for
	  --test operations.

2010-01-15 09:22  martin

	* trunk/src/tools/pkcs11-tool.c: pkcs11-tool: Call C_Finalize when
	  a fatal error happens. (Otherwise OSX pcsc locks up)

2010-01-13 16:39  viktor.tarasov

	* trunk/src/libopensc/card-oberthur.c: oberthur: accept token 'OCS
	  ID-One Cosmo Card'; ignore warning status 'end of file reached
	  ...'

2010-01-13 12:27  aj

	* trunk/src/libopensc/card-entersafe.c: Xiaoshuo Wu: removes the
	  assert line and some unused code, solves a problem with
	  ePass3000.

2010-01-10 21:58  martin

	* trunk/src/pkcs11/pkcs11.h: Remove strange characters.

2010-01-10 20:33  viktor.tarasov

	* trunk/src/pkcs15init/pkcs15-lib.c: no more 'reuse pkcs15 object'

2010-01-10 18:44  martin

	* trunk/src/libopensc/internal-winscard.h: PC/SC: Add SCardCancel
	  to please mingw

2010-01-08 15:51  viktor.tarasov

	* trunk/src/tests/regression/functions: regression tests:
	  pkcs11-tool API has been changed

2010-01-08 15:41  viktor.tarasov

	* trunk/etc/opensc.conf.in, trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/misc.c, trunk/src/pkcs11/pkcs11-session.c,
	  trunk/src/pkcs11/sc-pkcs11.h, trunk/src/tools/pkcs11-tool.c:
	  Unlock User PIN with PKCS#11: One of the three unblock methods
	  can be activated from the 'opensc-pkcs11' section of
	  opensc.conf: - C_SetPin() in the unlogged sesssion; - C_SetPin()
	  in the CKU_SPECIFIC_CONTEXT session; - C_InitPin() in CKU_SO
	  session (inspired by Pierre Ossman). -- This last one works, for
	  a while, only for the pkcs15 cards without SOPIN auth object.
	  For the pkcs15 cards with SOPIN, this method will be useful for
	  the cards that do not have then modes '00' and '01' of ISO
	  command 'RESET RETRY COUNTER'. Test commands: # pkcs11-tool
	  --module ./opensc-pkcs11.so --slot 0 --unlock-pin --puk "123456"
	  --new-pin "9999" # pkcs11-tool --module ./opensc-pkcs11.so
	  --slot 0 --unlock-pin -l --login-type context-specific --puk
	  "123456" --new-pin "9999" # pkcs11-tool --module
	  ./opensc-pkcs11.so --slot 0 --init-pin -l --new-pin "9999"

2010-01-03 18:26  viktor.tarasov

	* trunk/src/tools/pkcs15-init.c: pkcs15-init tool: delete both key
	  parts when deleting splitted key Splitted key is stored as the
	  two private keys with the same ID. (It's not conform to PKCS#15,
	  but tolerated by OpenSC.) Previously used
	  'sc_pkcs15_find_prkey_by_id()' is not appropriated to the case
	  of splitted key.

2009-12-18 13:33  aj

	* trunk/NEWS, trunk/etc/opensc.conf.in,
	  trunk/src/libopensc/asn1.c, trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-pubkey.c,
	  trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h,
	  trunk/src/pkcs15init/entersafe.profile,
	  trunk/src/pkcs15init/pkcs15-lib.c: merge changes 0.11.11 ->
	  0.11.12

2009-12-10 14:50  s

	* trunk/src/pkcs11/pkcs11-object.c: Fix: any of these calls
	  C_CreateObject(hSession, NULL_PTR, 1, NULL_PTR);
	  C_GetAttributeValue(hSession, hObject, NULL_PTR, 1);
	  C_SetAttributeValue(hSession, hObject, NULL_PTR, 1);
	  C_FindObjectsInit(hSession, NULL_PTR, 1);
	  C_FindObjects(hSession, NULL_PTR, 0, NULL_PTR);
	  C_FindObjects(hSession, NULL_PTR, 1, NULL_PTR);
	  C_FindObjects(hSession, NULL_PTR, 1, pulObjectCount);
	  C_DigestInit(hSession, NULL_PTR); C_SignInit(hSession, NULL_PTR,
	  hKey); C_SignRecoverInit(hSession, NULL_PTR, hKey);
	  C_DecryptInit(hSession, NULL_PTR, hKey); C_VerifyInit(hSession,
	  NULL_PTR, hKey); C_GenerateKeyPair(hSession, NULL_PTR,
	  pubKeyTmpl, arraysize(pubKeyTmpl), prvKeyTmpl,
	  arraysize(prvKeyTmpl), &hPubKey, &hPrvKey);
	  C_GenerateKeyPair(hSession, pMechanism, pubKeyTmpl,
	  arraysize(pubKeyTmpl), NULL_PTR, 1, &hPubKey, &hPrvKey);
	  C_GenerateKeyPair(hSession, pMechanism, NULL_PTR, 1, prvKeyTmpl,
	  arraysize(prvKeyTmpl), &hPubKey, &hPrvKey); => Segmentation
	  fault Remark: Allow calls: C_FindObjectsInit(hSession, NULL_PTR,
	  0) C_GenerateKeyPair(hSession, pMechanism, NULL_PTR, 0,
	  NULL_PTR, 0, phPublicKey, phPrivateKey) C_UnwrapKey(hSession,
	  pMechanism, hUnwrappingKey, pWrappedKey, ulWrappedKeyLen,
	  NULL_PTR, 0, phKey)

2009-12-10 12:34  s

	* trunk/src/pkcs11/pkcs11-session.c: fix: return CKR_ARGUMENTS_BAD
	  from C_Login, C_InitPIN, C_SetPIN, if pPin == NULL_PTR and
	  PinLen > 0 PKCS#11: "To log into a token with a protected
	  authentication path, the pPin parameter to C_Login should be
	  NULL_PTR." "To initialize the normal user?s PIN on a token with
	  such a protected authentication path, the pPin parameter to
	  C_InitPIN should be NULL_PTR." "To modify the current user?s PIN
	  on a token with such a protected authentication path, the
	  pOldPin and pNewPin parameters to C_SetPIN should be NULL_PTR."

2009-12-09 13:59  s

	* trunk/src/pkcs15init/pkcs15-lib.c: fix: return
	  CKR_USER_NOT_LOGGED_IN (now CKR_GENERAL_ERROR) from
	  C_GenerateKeyPair for the case where there was no call C_Login

2009-12-08 18:34  s

	* trunk/src/pkcs11/framework-pkcs15.c: add to changeset 3887

2009-12-08 18:28  s

	* trunk/src/pkcs11/framework-pkcs15.c: fix: CK_MECHANISM gostMech
	  = { CKM_GOSTR3410_KEY_PAIR_GEN, NULL, 0 }; ...
	  C_GenerateKeyPair(hSession, &gostMech, NULL_PTR, 0, NULL_PTR, 0,
	  &hPubKey, &hPrvKey); -> CKR_OK and Generate RSA Key Pair

2009-12-08 14:29  s

	* trunk/src/pkcs11/pkcs11-object.c,
	  trunk/src/pkcs11/pkcs11-session.c: Fix: return
	  CKR_SESSION_READ_ONLY from C_InitPIN, C_SetPIN, C_CreateObject,
	  C_CopyObject, C_DestroyObject, C_SetAttributeValue,
	  C_GenerateKey, C_GenerateKeyPair, C_UnwrapKey, C_DeriveKey if
	  session is read-only. PKCS#11: "C_InitPIN can only be called in
	  the 'R/W SO Functions' state." "C_SetPIN can only be called in
	  the 'R/W Public Session' state, 'R/W SO Functions' state, or
	  'R/W User Functions' state. An attempt to call it from a session
	  in any other state fails with error CKR_SESSION_READ_ONLY."
	  "Only session objects can be created/destroyed/modified
	  (C_CreateObject/C_DestroyObject/C_SetAttributeValue) during a
	  read-only session."

2009-12-07 12:50  s

	* trunk/src/pkcs11/pkcs11-object.c: PKCS#11: Spec does not allow
	  CKR_OBJECT_HANDLE_INVALID from C_EncryptInit, C_DecryptInit,
	  C_DigestKey, C_SignInit, C_SignRecoverInit, C_VerifyInit,
	  C_VerifyRecoverInit, C_WrapKey, C_DeriveKey, C_UnwrapKey

2009-12-03 13:11  viktor.tarasov

	* trunk/src/tools/pkcs15-tool.c: pkcs15-tool: unblock PIN with
	  pinpad

2009-12-03 12:51  viktor.tarasov

	* trunk/src/libopensc/card-oberthur.c,
	  trunk/src/libopensc/pkcs15-pin.c, trunk/src/tools/pkcs15-tool.c:
	  pkcs15-tool: change PIN with pinpad

2009-12-03 11:59  viktor.tarasov

	* trunk/src/tools/opensc-explorer.c: opensc-explorer: remove debug
	  messages

2009-12-03 11:13  aj

	* trunk/src/tools/opensc-tool.c: Thomas Uhle: Just this morning I
	  realised that there is a minor mistake in my patch for
	  opensc_info(). For the Sun Studio 12.1 compiler (__SUNPRO_C ==
	  0x5100) and later versions also, it must be (__SUNPRO_C >> 4) &
	  0xFF to split the micro and mask the major version number.

2009-12-03 11:11  viktor.tarasov

	* trunk/src/libopensc/card-oberthur.c,
	  trunk/src/tools/opensc-explorer.c: pinpad support of PIN
	  changing and unlocking Oberthur and opensc-explorer

2009-12-03 10:47  viktor.tarasov

	* trunk/src/libopensc/reader-pcsc.c: after Martin's suggestion:
	  for pcsc do not use '0' protocol when detecting readers

2009-12-03 07:18  aj

	* trunk/src/libopensc/p15emu-westcos.c: Update westcos emulation
	  by Franois Leblanc.

2009-12-03 07:10  aj

	* trunk/src/pkcs15init/pkcs15-westcos.c,
	  trunk/src/pkcs15init/westcos.profile: Updated westcos driver by
	  Franois Leblanc

2009-12-03 07:05  aj

	* trunk/solaris/Makefile: Thomas Uhle: modify Makefile so
	  configure finds the include files of PC/SC lite.

2009-12-03 07:03  aj

	* trunk/src/tools/opensc-tool.c: Thomas Uhle: Add information
	  about sun compiler to opensc-tool.

2009-12-02 11:10  aj

	* trunk/src/tools/cardos-tool.c: Describe now option for --help.

2009-12-02 11:07  aj

	* trunk/src/tools/cardos-tool.c: remove dead code for now - easy
	  to recreate later.

2009-12-02 09:52  aj

	* trunk/src/tools/cardos-tool.c: fixed and tested by Viktor
	  TARASOV. Thanks!

2009-12-01 21:10  aj

	* trunk/src/tools/cardos-tool.c: basic command to change startkey,
	  so far untested.

2009-12-01 11:47  viktor.tarasov

	* trunk/src/tools/cardos-tool.c: cardos-tool: invalid parsing of
	  the 'common system keys' info

2009-11-27 11:15  s

	* trunk/src/tools/pkcs11-tool.c: add to pkcs11-tool: GOST
	  mechanisms and GOSTR3410 key to show objects on token

2009-11-27 11:07  s

	* trunk/src/pkcs11/framework-pkcs15.c: add get
	  CKA_GOSTR3410_PARAMS attribute for GOST private key

2009-11-25 18:01  martin

	* trunk/src/tools/pkcs11-tool.c: Always print the slot description
	  (reader name in case of OpenSC)

2009-11-24 13:43  martin

	* trunk/src/libopensc/card-ias.c: Patch by Joo Poupino for
	  Portugese eID card.

2009-11-23 16:38  s

	* trunk/src/libopensc/card-rutoken.c,
	  trunk/src/libopensc/cardctl.h,
	  trunk/src/pkcs15init/pkcs15-rutoken.c,
	  trunk/src/tools/rutoken-tool.c: Modification Rutoken S binary
	  interfaces by Aktiv Co. (OpenSC+Rutoken S driver for Windows
	  works now)

2009-11-23 13:40  viktor.tarasov

	* trunk/src/libopensc/card-oberthur.c: Oberthur: verify PIN with
	  pinpad

2009-11-23 11:41  s

	* trunk/src/libopensc/card-rtecp.c,
	  trunk/src/libopensc/card-rutoken.c,
	  trunk/src/libopensc/cardctl.h,
	  trunk/src/pkcs15init/pkcs15-rutoken.c: correct SEC_ATTR_SIZE
	  name (add prefix)

2009-11-20 15:23  s

	* trunk/src/pkcs11/pkcs11-session.c: CKR_USER_ALREADY_LOGGED_IN:
	  It indicates that the specified user cannot be logged into the
	  session, because it is already logged into the session.
	  CKR_USER_ANOTHER_ALREADY_LOGGED_IN: It indicates that the
	  specified user cannot be logged into the session, because
	  another user is already logged into the session.

2009-11-20 13:15  s

	* trunk/src/libopensc/card-rtecp.c: use generic
	  iso7816_select_file code, remove duplicate code

2009-11-20 12:26  s

	* trunk/src/libopensc/card-rtecp.c,
	  trunk/src/libopensc/card-westcos.c: remove dead code (in
	  compliance with
	  http://www.opensc-project.org/opensc/changeset/3839#file8)

2009-11-19 15:41  s

	* trunk/src/libopensc/card-rtecp.c, trunk/src/libopensc/cardctl.h,
	  trunk/src/libopensc/pkcs15-algo.c,
	  trunk/src/libopensc/pkcs15-pubkey.c,
	  trunk/src/libopensc/pkcs15.h, trunk/src/pkcs11/openssl.c,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-rtecp.c,
	  trunk/src/tools/pkcs15-init.c: Corrected GOSTR3410 public key
	  structure Working now with GOST R 34.10: $ pkcs15-init
	  --store-private-key key --key-usage sign,decrypt --auth-id 2
	  --id 1 --pin "12345678" $ pkcs15-init --store-certificate
	  my_cert --id 1 --pin "12345678" But have problem: no
	  CKA_GOSTR3410_PARAMS by retrieve pub_key from certificate, if
	  pub_key object was removed (see parse_x509_cert,
	  asn1_decode_gostr3410_params)

2009-11-17 13:27  viktor.tarasov

	* trunk/src/libopensc/log.c: logs: time stamp with 1msec
	  resolution in unix. Thanks to Ludovic Rousseau.

2009-11-17 12:12  viktor.tarasov

	* trunk/src/libopensc/reader-pcsc.c: reader-pcsc::pcsc_transmit()
	  add log message with the reader's name

2009-11-17 11:11  viktor.tarasov

	* trunk/src/libopensc/libopensc.exports,
	  trunk/src/libopensc/log.c, trunk/src/libopensc/log.h: logs: time
	  stamp; dump_hex() with the static output buffer - time stamp in
	  the log messages: for Windows 1msec resolution, otherwise 1sec;
	  - one more dump hex function, to be easily inserted into the
	  formatted message.

2009-11-16 21:41  martin

	* trunk/src/libopensc/pkcs15-pteid.c: Fix C coding style to please
	  visual studio. By Joo Poupino.

2009-11-16 20:45  martin

	* trunk/src/libopensc/Makefile.mak: Fix windows build

2009-11-16 20:35  martin

	* trunk/src/libopensc/card-gemsafeV1.c: Fix C coding style

2009-11-16 07:32  alonbl

	* trunk/configure.ac: Remove plugindir as plugin was removed

2009-11-15 18:08  martin

	* trunk/src/libopensc/pkcs15-esteid.c: Estonian eID: fix charset

2009-11-15 18:03  martin

	* trunk/configure.ac, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/reader-ctapi.c: Allow to turn off CT-API
	  support

2009-11-14 21:55  viktor.tarasov

	* trunk/src/tools/opensc-explorer.c: opensc-explorer::do_apdu()
	  number of bytes in printed message 'Sending'

2009-11-13 19:28  martin

	* branches/martin/0.12, trunk: Move branches/martin/0.12 to trunk

2009-11-13 19:01  martin

	* branches/martin/0.12/src/libopensc/card-default.c,
	  branches/martin/0.12/src/libopensc/errors.c,
	  branches/martin/0.12/src/libopensc/errors.h,
	  branches/martin/0.12/src/pkcs11/framework-pkcs15.c,
	  branches/martin/0.12/src/tools/pkcs15-init.c: merge
	  [3823:3844/trunk]

2009-11-13 14:51  martin

	* branches/martin/0.12/doc/tools/opensc-explorer.xml,
	  branches/martin/0.12/doc/tools/opensc-tool.xml,
	  branches/martin/0.12/src/tools/opensc-explorer.c: * Update
	  opensc-tool and opensc-explorer man pages * Remove not
	  implemented pksign/pkdecrypt commands from opensc-explorer. Use
	  pkcs15-crypt instead.

2009-11-13 12:25  martin

	* branches/martin/0.12/doc/tools/pkcs15-init.xml,
	  branches/martin/0.12/src/tools/pkcs15-init.c: Fix #58: properly
	  document "pkcs15-init -T"

2009-11-13 11:48  martin

	* branches/martin/0.12/configure.ac,
	  branches/martin/0.12/src/Makefile.am,
	  branches/martin/0.12/src/signer: Remove signer and related
	  configure elements

2009-11-13 11:32  martin

	* branches/martin/0.12/src/libopensc/card-acos5.c,
	  branches/martin/0.12/src/libopensc/card-asepcos.c,
	  branches/martin/0.12/src/libopensc/card-cardos.c,
	  branches/martin/0.12/src/libopensc/card-default.c,
	  branches/martin/0.12/src/libopensc/card-ias.c,
	  branches/martin/0.12/src/libopensc/card-incrypto34.c,
	  branches/martin/0.12/src/libopensc/card-miocos.c,
	  branches/martin/0.12/src/libopensc/card-myeid.c,
	  branches/martin/0.12/src/libopensc/card-rtecp.c,
	  branches/martin/0.12/src/libopensc/card-setcos.c: Remove
	  card->finish() functions that do nothing

2009-11-13 11:23  martin

	* branches/martin/0.12/src/pkcs11/sc-pkcs11.h: Fix a compiler
	  warning

2009-11-13 11:21  martin

	* branches/martin/0.12/src/tools/westcos-tool.c: Fix compiler
	  warnings
	* branches/martin/0.12/src/tools/eidenv.c: Fix compiler warning
	* branches/martin/0.12/src/tools/cardos-tool.c: Fix compiler
	  warnings and a typo

2009-11-13 11:19  martin

	* branches/martin/0.12/src/pkcs15init/pkcs15-myeid.c: Remove
	  unused variables & fix line endings.

2009-11-13 11:15  martin

	* branches/martin/0.12/src/pkcs15init/pkcs15-oberthur.c: Remove
	  unused variables

2009-11-13 11:14  martin

	* branches/martin/0.12/src/pkcs11/framework-pkcs15.c: Remove
	  unused variables

2009-11-13 11:13  martin

	* branches/martin/0.12/src/libopensc/pkcs15.c: Remove unusued
	  variables
	* branches/martin/0.12/src/libopensc/p15emu-westcos.c: Remove
	  unused variables
	* branches/martin/0.12/src/libopensc/log.c: Remove unused variables

2009-11-13 11:12  martin

	* branches/martin/0.12/src/libopensc/card-piv.c: Remove unused
	  variables
	* branches/martin/0.12/src/libopensc/card-ias.c: Remove unused
	  variables

2009-11-13 11:10  martin

	* branches/martin/0.12/src/libopensc/card-myeid.c: Convert
	  newlines to unix style, remove compiler warnings.

2009-11-13 09:45  martin

	* branches/martin/0.12/src/libopensc/card-oberthur.c,
	  branches/martin/0.12/src/libopensc/card-rutoken.c,
	  branches/martin/0.12/src/libopensc/libopensc.exports,
	  branches/martin/0.12/src/libopensc/opensc.h,
	  branches/martin/0.12/src/libopensc/pkcs15-pubkey.c,
	  branches/martin/0.12/src/libopensc/pkcs15-syn.c,
	  branches/martin/0.12/src/libopensc/pkcs15.c,
	  branches/martin/0.12/src/libopensc/pkcs15.h,
	  branches/martin/0.12/src/pkcs11/framework-pkcs15.c,
	  branches/martin/0.12/src/pkcs15init/oberthur.profile,
	  branches/martin/0.12/src/pkcs15init/pkcs15-init.h,
	  branches/martin/0.12/src/pkcs15init/pkcs15-lib.c,
	  branches/martin/0.12/src/pkcs15init/pkcs15-oberthur.c,
	  branches/martin/0.12/src/pkcs15init/pkcs15.profile,
	  branches/martin/0.12/src/pkcs15init/profile.c,
	  branches/martin/0.12/src/pkcs15init/profile.h,
	  branches/martin/0.12/src/tools/pkcs15-tool.c: Merge
	  [3804:3822/trunk]

2009-11-10 10:05  martin

	* branches/martin/0.12/src/libopensc/reader-pcsc.c: Do not
	  duplicate reader name in private structure.

2009-11-05 18:27  martin

	* branches/martin/0.12/configure.ac,
	  branches/martin/0.12/src/libopensc/card-oberthur.c,
	  branches/martin/0.12/src/pkcs11/framework-pkcs15.c,
	  branches/martin/0.12/src/pkcs11/openssl.c,
	  branches/martin/0.12/src/pkcs15init/pkcs15-oberthur.c: Merge
	  [3794:3803/trunk]

2009-10-25 20:22  martin

	* branches/martin/0.12/src/libopensc/card-myeid.c,
	  branches/martin/0.12/src/libopensc/card-westcos.c,
	  branches/martin/0.12/src/libopensc/cardctl.h,
	  branches/martin/0.12/src/libopensc/p15emu-westcos.c,
	  branches/martin/0.12/src/pkcs11/openssl.c,
	  branches/martin/0.12/src/pkcs15init/myeid.profile,
	  branches/martin/0.12/src/pkcs15init/pkcs15-myeid.c,
	  branches/martin/0.12/src/pkcs15init/pkcs15-westcos.c,
	  branches/martin/0.12/src/tools/westcos-tool.c: Merged
	  [3783:3794/trunk]

2009-10-22 09:18  martin

	* branches/martin/0.12/src/libopensc/Makefile.mak,
	  branches/martin/0.12/src/libopensc/card-entersafe.c,
	  branches/martin/0.12/src/libopensc/card-myeid.c,
	  branches/martin/0.12/src/libopensc/card-piv.c,
	  branches/martin/0.12/src/libopensc/card-rutoken.c,
	  branches/martin/0.12/src/libopensc/card-tcos.c,
	  branches/martin/0.12/src/libopensc/card-westcos.c,
	  branches/martin/0.12/src/libopensc/cardctl.h,
	  branches/martin/0.12/src/libopensc/muscle.c,
	  branches/martin/0.12/src/libopensc/muscle.h,
	  branches/martin/0.12/src/libopensc/opensc.h,
	  branches/martin/0.12/src/libopensc/pkcs15-esinit.c,
	  branches/martin/0.12/src/libopensc/reader-pcsc.c,
	  branches/martin/0.12/src/pkcs11/framework-pkcs15.c,
	  branches/martin/0.12/src/pkcs11/pkcs11-global.c,
	  branches/martin/0.12/src/pkcs11/pkcs11-opensc.h,
	  branches/martin/0.12/src/pkcs15init/keycache.c,
	  branches/martin/0.12/src/pkcs15init/pkcs15-cardos.c,
	  branches/martin/0.12/src/pkcs15init/pkcs15-myeid.c,
	  branches/martin/0.12/src/pkcs15init/pkcs15-westcos.c,
	  branches/martin/0.12/src/pkcs15init/rutoken.profile,
	  branches/martin/0.12/src/tools/opensc-explorer.c,
	  branches/martin/0.12/src/tools/pkcs11-tool.c,
	  branches/martin/0.12/src/tools/util.c,
	  branches/martin/0.12/src/tools/westcos-tool.c: Merge
	  [3758:3783/trunk]

2009-10-22 08:59  martin

	* branches/martin/0.12/configure.ac,
	  branches/martin/0.12/etc/opensc.conf.in,
	  branches/martin/0.12/src/libopensc/libopensc.exports,
	  branches/martin/0.12/src/libopensc/opensc.h,
	  branches/martin/0.12/src/libopensc/pkcs15-actalis.c,
	  branches/martin/0.12/src/libopensc/pkcs15-infocamere.c,
	  branches/martin/0.12/src/libopensc/pkcs15-pin.c,
	  branches/martin/0.12/src/libopensc/pkcs15-sec.c,
	  branches/martin/0.12/src/libopensc/pkcs15.c,
	  branches/martin/0.12/src/libopensc/pkcs15.h,
	  branches/martin/0.12/src/libopensc/sc.c,
	  branches/martin/0.12/src/pkcs11/framework-pkcs15.c,
	  branches/martin/0.12/src/pkcs11/misc.c,
	  branches/martin/0.12/src/pkcs11/sc-pkcs11.h,
	  branches/martin/0.12/src/tools/pkcs15-tool.c: Re-implement PIN
	  cache on PKCS#15 layer; remove it from PKCS#11. Re-name and log
	  PKCS#15 options to better reflect the purpose. Data objects and
	  PKCS#15 init are left broken currently.

2009-10-13 08:29  martin

	* branches/martin/0.12/src/libopensc/reader-pcsc.c: PC/SC: Log
	  enabled options.

2009-10-12 09:26  martin

	* branches/martin/0.12/src/libopensc/apdu.c: Revert [3752]

2009-10-05 20:10  martin

	* branches/martin/0.12/src/libopensc/card-rtecp.c,
	  branches/martin/0.12/src/libopensc/cardctl.h,
	  branches/martin/0.12/src/libopensc/libopensc.exports,
	  branches/martin/0.12/src/libopensc/opensc.h,
	  branches/martin/0.12/src/libopensc/pkcs15-algo.c,
	  branches/martin/0.12/src/libopensc/pkcs15-prkey.c,
	  branches/martin/0.12/src/libopensc/pkcs15-pubkey.c,
	  branches/martin/0.12/src/libopensc/pkcs15.c,
	  branches/martin/0.12/src/libopensc/pkcs15.h,
	  branches/martin/0.12/src/pkcs11/framework-pkcs15.c,
	  branches/martin/0.12/src/pkcs11/mechanism.c,
	  branches/martin/0.12/src/pkcs11/openssl.c,
	  branches/martin/0.12/src/pkcs11/pkcs11.h,
	  branches/martin/0.12/src/pkcs11/sc-pkcs11.h,
	  branches/martin/0.12/src/pkcs15init/pkcs15-init.h,
	  branches/martin/0.12/src/pkcs15init/pkcs15-lib.c,
	  branches/martin/0.12/src/pkcs15init/pkcs15-rtecp.c: Merged
	  r3749:3758 from trunk

2009-10-05 19:59  martin

	* branches/martin/0.12/src/libopensc/reader-pcsc.c: PC/SC: better
	  separation between OpenSC and PC/SC types.

2009-10-03 17:04  martin

	* branches/martin/0.12/src/libopensc/pkcs15-pteid.c: Accidental
	  sc_error removed.

2009-10-03 14:41  martin

	* branches/martin/0.12/src/libopensc/Makefile.am,
	  branches/martin/0.12/src/libopensc/Makefile.mak,
	  branches/martin/0.12/src/libopensc/card-gemsafeV1.c,
	  branches/martin/0.12/src/libopensc/card-ias.c,
	  branches/martin/0.12/src/libopensc/cards.h,
	  branches/martin/0.12/src/libopensc/ctx.c,
	  branches/martin/0.12/src/libopensc/dir.c,
	  branches/martin/0.12/src/libopensc/pkcs15-pteid.c,
	  branches/martin/0.12/src/libopensc/pkcs15-syn.c: Add support for
	  Portugese eID on IAS and Gemsafe cards, by Joo Poupino.

2009-10-03 10:13  martin

	* branches/martin/0.12/src/libopensc/card-cardos.c,
	  branches/martin/0.12/src/libopensc/cards.h: Cardos security env
	  patch for Italian CNI card. By Emanuele Pucciarelli,
	  http://itacns.corp.it/hg/itacns/file/adc0b2ceec86/patches/115-cardos-secenv.patch

2009-10-03 10:07  martin

	* branches/martin/0.12/src/libopensc/apdu.c: Fix spelling

2009-10-03 10:06  martin

	* branches/martin/0.12/src/libopensc/apdu.c: Fix APDU sanity
	  check. By Emanuele Pucciarelli,
	  http://itacns.corp.it/hg/itacns/file/adc0b2ceec86/patches/010-apdu.patch

2009-10-03 09:31  martin

	* branches/martin/0.12/src/libopensc/card-akis.c,
	  branches/martin/0.12/src/libopensc/card-asepcos.c,
	  branches/martin/0.12/src/libopensc/card-atrust-acos.c,
	  branches/martin/0.12/src/libopensc/card-cardos.c,
	  branches/martin/0.12/src/libopensc/card-entersafe.c,
	  branches/martin/0.12/src/libopensc/card-flex.c,
	  branches/martin/0.12/src/libopensc/card-gemsafeV1.c,
	  branches/martin/0.12/src/libopensc/card-gpk.c,
	  branches/martin/0.12/src/libopensc/card-incrypto34.c,
	  branches/martin/0.12/src/libopensc/card-jcop.c,
	  branches/martin/0.12/src/libopensc/card-mcrd.c,
	  branches/martin/0.12/src/libopensc/card-myeid.c,
	  branches/martin/0.12/src/libopensc/card-oberthur.c,
	  branches/martin/0.12/src/libopensc/card-rtecp.c,
	  branches/martin/0.12/src/libopensc/card-starcos.c,
	  branches/martin/0.12/src/libopensc/card-westcos.c,
	  branches/martin/0.12/src/libopensc/iso7816.c,
	  branches/martin/0.12/src/libopensc/types.h: apdu.sensitive is
	  not in use since [2868]

2009-10-03 07:48  martin

	* branches/martin/0.12/src/libopensc/Makefile.am,
	  branches/martin/0.12/src/libopensc/Makefile.mak,
	  branches/martin/0.12/src/libopensc/card-entersafe.c,
	  branches/martin/0.12/src/libopensc/card-myeid.c,
	  branches/martin/0.12/src/libopensc/card-rtecp.c,
	  branches/martin/0.12/src/libopensc/cardctl.h,
	  branches/martin/0.12/src/libopensc/cards.h,
	  branches/martin/0.12/src/libopensc/ctx.c,
	  branches/martin/0.12/src/pkcs15init/Makefile.am,
	  branches/martin/0.12/src/pkcs15init/Makefile.mak,
	  branches/martin/0.12/src/pkcs15init/keycache.c,
	  branches/martin/0.12/src/pkcs15init/myeid.profile,
	  branches/martin/0.12/src/pkcs15init/pkcs15-init.h,
	  branches/martin/0.12/src/pkcs15init/pkcs15-lib.c,
	  branches/martin/0.12/src/pkcs15init/pkcs15-myeid.c,
	  branches/martin/0.12/src/scconf/README.scconf: Merged r3719:3749
	  from trunk

2009-09-25 19:29  martin

	* branches/martin/0.12/src/libopensc/opensc.h,
	  branches/martin/0.12/src/libopensc/reader-pcsc.c: Implement
	  pinpad support as used by Portugal eID, by Joo Poupino

2009-09-20 10:57  martin

	* branches/martin/0.12/configure.ac: Bump the version number

2009-09-15 12:33  martin

	* branches/martin/0.12/src/libopensc/reader-pcsc.c: PC/SC: Fix
	  display detection and clean up

2009-09-15 12:29  martin

	* branches/martin/0.12/src/libopensc/ctx.c: Fix debug file closing.

2009-09-15 07:59  martin

	* branches/martin/0.12/src/libopensc/pkcs15-esteid.c: EstEID: Fix
	  compiler warnings, add support for PIN retries related PKCS#11
	  token flags, add a version number for debugging.

2009-09-15 07:51  martin

	* branches/martin/0.12/src/libopensc/card-default.c,
	  branches/martin/0.12/src/libopensc/card-emv.c: Improve EMV and
	  default driver

2009-09-15 07:50  martin

	* branches/martin/0.12/src/libopensc/log.h: Fix "log.h:64:4:
	  warning: backslash and newline separated by space"

2009-09-14 12:04  martin

	* branches/martin/0.12/src/libopensc/log.h: Add back needed debug
	  level check. Thanks to Aleksey Samsonov

2009-09-14 10:12  martin

	* branches/martin/0.12/src/pkcs11/mechanism.c: PKCS#11: Fix a
	  crash in C_GetMechanismList if pulCount is NULL

2009-09-14 10:05  martin

	* branches/martin/0.12/src/libopensc/pkcs15.h,
	  branches/martin/0.12/src/pkcs11/framework-pkcs15.c: PKCS#11:
	  Implement more token flags that describe available PIN retries.

2009-09-14 09:48  martin

	* branches/martin/0.12/etc/opensc.conf.in,
	  branches/martin/0.12/src/libopensc/card.c,
	  branches/martin/0.12/src/libopensc/internal-winscard.h,
	  branches/martin/0.12/src/libopensc/reader-pcsc.c,
	  branches/martin/0.12/src/tools/opensc-tool.c: PC/SC: Improve
	  core and pinpad code * Make opensc-tool -l display pinpad
	  capabilities, if available * Detect reader capabilities when a
	  reader is found, not when a connection to a card is opened * Fix
	  unpadded PIN block parameters to not be rejected by the latest
	  free CCID driver * When locking the card and it has been reset
	  by some other application (or re-attached), clear cache and lock
	  again * Enable pinpad detection by default

2009-09-14 09:35  martin

	* branches/martin/0.12/src/libopensc/log.h: sc_error removal
	  missing bits

2009-09-14 09:15  martin

	* branches/martin/0.12/solaris/proto,
	  branches/martin/0.12/src/include/opensc/Makefile.am,
	  branches/martin/0.12/src/libopensc/Makefile.am,
	  branches/martin/0.12/src/libopensc/Makefile.mak,
	  branches/martin/0.12/src/libopensc/emv.c,
	  branches/martin/0.12/src/libopensc/emv.h: Remove empty files:
	  emv.c, emv.h

2009-09-14 09:08  martin

	* branches/martin/0.12/src/libopensc/pkcs15-syn.c: PKCS#15-emu:
	  remove dead code

2009-09-14 09:03  martin

	* branches/martin/0.12/src/libopensc/internal-winscard.h,
	  branches/martin/0.12/src/libopensc/reader-pcsc.c: PC/SC: More
	  return codes are handled.

2009-09-14 08:59  martin

	* branches/martin/0.12/src/pkcs11/pkcs11-global.c: PKCS#11: Spec
	  does not allow CKR_DEVICE_ERROR from C_Initialize

2009-09-14 08:56  martin

	* branches/martin/0.12/src/pkcs11/misc.c: PKCS#11: translate
	  SC_ERROR_CARD_UNRESPONSIVE

2009-09-14 08:53  martin

	* branches/martin/0.12/src/libopensc/pkcs15-esteid.c: Fix iconv
	  handle leak

2009-09-14 08:51  martin

	* branches/martin/0.12/src/pkcs11/framework-pkcs15.c,
	  branches/martin/0.12/src/pkcs11/pkcs11-display.c,
	  branches/martin/0.12/src/tools/pkcs11-tool.c: Implement
	  CKA_ALWAYS_AUTHENTICATE

2009-09-14 08:46  martin

	* branches/martin/0.12/etc/opensc.conf.in,
	  branches/martin/0.12/src/libopensc/apdu.c,
	  branches/martin/0.12/src/libopensc/asn1.c,
	  branches/martin/0.12/src/libopensc/card-akis.c,
	  branches/martin/0.12/src/libopensc/card-asepcos.c,
	  branches/martin/0.12/src/libopensc/card-atrust-acos.c,
	  branches/martin/0.12/src/libopensc/card-belpic.c,
	  branches/martin/0.12/src/libopensc/card-cardos.c,
	  branches/martin/0.12/src/libopensc/card-default.c,
	  branches/martin/0.12/src/libopensc/card-entersafe.c,
	  branches/martin/0.12/src/libopensc/card-flex.c,
	  branches/martin/0.12/src/libopensc/card-gemsafeV1.c,
	  branches/martin/0.12/src/libopensc/card-gpk.c,
	  branches/martin/0.12/src/libopensc/card-incrypto34.c,
	  branches/martin/0.12/src/libopensc/card-jcop.c,
	  branches/martin/0.12/src/libopensc/card-mcrd.c,
	  branches/martin/0.12/src/libopensc/card-miocos.c,
	  branches/martin/0.12/src/libopensc/card-muscle.c,
	  branches/martin/0.12/src/libopensc/card-oberthur.c,
	  branches/martin/0.12/src/libopensc/card-openpgp.c,
	  branches/martin/0.12/src/libopensc/card-piv.c,
	  branches/martin/0.12/src/libopensc/card-rtecp.c,
	  branches/martin/0.12/src/libopensc/card-rutoken.c,
	  branches/martin/0.12/src/libopensc/card-setcos.c,
	  branches/martin/0.12/src/libopensc/card-starcos.c,
	  branches/martin/0.12/src/libopensc/card-tcos.c,
	  branches/martin/0.12/src/libopensc/card-westcos.c,
	  branches/martin/0.12/src/libopensc/card.c,
	  branches/martin/0.12/src/libopensc/ctbcs.c,
	  branches/martin/0.12/src/libopensc/ctx.c,
	  branches/martin/0.12/src/libopensc/dir.c,
	  branches/martin/0.12/src/libopensc/iso7816.c,
	  branches/martin/0.12/src/libopensc/libopensc.exports,
	  branches/martin/0.12/src/libopensc/log.c,
	  branches/martin/0.12/src/libopensc/log.h,
	  branches/martin/0.12/src/libopensc/muscle.c,
	  branches/martin/0.12/src/libopensc/opensc.h,
	  branches/martin/0.12/src/libopensc/p15card-helper.c,
	  branches/martin/0.12/src/libopensc/p15emu-westcos.c,
	  branches/martin/0.12/src/libopensc/padding.c,
	  branches/martin/0.12/src/libopensc/pkcs15-algo.c,
	  branches/martin/0.12/src/libopensc/pkcs15-atrust-acos.c,
	  branches/martin/0.12/src/libopensc/pkcs15-cache.c,
	  branches/martin/0.12/src/libopensc/pkcs15-cert.c,
	  branches/martin/0.12/src/libopensc/pkcs15-gemsafeGPK.c,
	  branches/martin/0.12/src/libopensc/pkcs15-gemsafeV1.c,
	  branches/martin/0.12/src/libopensc/pkcs15-infocamere.c,
	  branches/martin/0.12/src/libopensc/pkcs15-openpgp.c,
	  branches/martin/0.12/src/libopensc/pkcs15-piv.c,
	  branches/martin/0.12/src/libopensc/pkcs15-postecert.c,
	  branches/martin/0.12/src/libopensc/pkcs15-prkey.c,
	  branches/martin/0.12/src/libopensc/pkcs15-pubkey.c,
	  branches/martin/0.12/src/libopensc/pkcs15-sec.c,
	  branches/martin/0.12/src/libopensc/pkcs15-starcert.c,
	  branches/martin/0.12/src/libopensc/pkcs15-syn.c,
	  branches/martin/0.12/src/libopensc/pkcs15-tcos.c,
	  branches/martin/0.12/src/libopensc/pkcs15-wrap.c,
	  branches/martin/0.12/src/libopensc/pkcs15.c,
	  branches/martin/0.12/src/libopensc/reader-ctapi.c,
	  branches/martin/0.12/src/libopensc/reader-openct.c,
	  branches/martin/0.12/src/libopensc/reader-pcsc.c,
	  branches/martin/0.12/src/libopensc/sc.c,
	  branches/martin/0.12/src/libopensc/sec.c,
	  branches/martin/0.12/src/libopensc/ui.c,
	  branches/martin/0.12/src/pkcs11/framework-pkcs15init.c,
	  branches/martin/0.12/src/pkcs11/pkcs11-global.c,
	  branches/martin/0.12/src/pkcs15init/pkcs15-asepcos.c,
	  branches/martin/0.12/src/pkcs15init/pkcs15-cardos.c,
	  branches/martin/0.12/src/pkcs15init/pkcs15-cflex.c,
	  branches/martin/0.12/src/pkcs15init/pkcs15-entersafe.c,
	  branches/martin/0.12/src/pkcs15init/pkcs15-gpk.c,
	  branches/martin/0.12/src/pkcs15init/pkcs15-incrypto34.c,
	  branches/martin/0.12/src/pkcs15init/pkcs15-jcop.c,
	  branches/martin/0.12/src/pkcs15init/pkcs15-lib.c,
	  branches/martin/0.12/src/pkcs15init/pkcs15-miocos.c,
	  branches/martin/0.12/src/pkcs15init/pkcs15-muscle.c,
	  branches/martin/0.12/src/pkcs15init/pkcs15-oberthur.c,
	  branches/martin/0.12/src/pkcs15init/pkcs15-rtecp.c,
	  branches/martin/0.12/src/pkcs15init/pkcs15-rutoken.c,
	  branches/martin/0.12/src/pkcs15init/pkcs15-setcos.c,
	  branches/martin/0.12/src/pkcs15init/pkcs15-starcos.c,
	  branches/martin/0.12/src/pkcs15init/profile.c,
	  branches/martin/0.12/src/tests/p15dump.c,
	  branches/martin/0.12/src/tools/cryptoflex-tool.c,
	  branches/martin/0.12/src/tools/opensc-explorer.c,
	  branches/martin/0.12/src/tools/pkcs15-init.c,
	  branches/martin/0.12/src/tools/westcos-tool.c: Remove sc_error
	  and sc_ctx_suppress_errors_* in favor of sc_debug/fprintf

2009-09-12 11:46  martin

	* branches/martin/0.12/NEWS,
	  branches/martin/0.12/doc/tools/tools.xml,
	  branches/martin/0.12/doc/tools/westcos-tool.xml,
	  branches/martin/0.12/src/libopensc/Makefile.am,
	  branches/martin/0.12/src/libopensc/Makefile.mak,
	  branches/martin/0.12/src/libopensc/card-westcos.c,
	  branches/martin/0.12/src/libopensc/cardctl.h,
	  branches/martin/0.12/src/libopensc/cards.h,
	  branches/martin/0.12/src/libopensc/ctx.c,
	  branches/martin/0.12/src/libopensc/p15emu-westcos.c,
	  branches/martin/0.12/src/libopensc/pkcs15-syn.c,
	  branches/martin/0.12/src/pkcs15init/Makefile.am,
	  branches/martin/0.12/src/pkcs15init/Makefile.mak,
	  branches/martin/0.12/src/pkcs15init/pkcs15-init.h,
	  branches/martin/0.12/src/pkcs15init/pkcs15-lib.c,
	  branches/martin/0.12/src/pkcs15init/pkcs15-westcos.c,
	  branches/martin/0.12/src/pkcs15init/westcos.profile,
	  branches/martin/0.12/src/tools/Makefile.am,
	  branches/martin/0.12/src/tools/Makefile.mak,
	  branches/martin/0.12/src/tools/westcos-tool.c: r3717:3719 from
	  trunk

2009-09-06 15:56  martin

	* branches/martin, branches/martin/0.12: Branch for next major
	  release changes.

2009-07-29 07:03  aj

	* trunk/configure.ac: trunk is now post release.

2009-07-29 07:02  aj

	* trunk/NEWS, trunk/configure.ac: Prepare for new release

2009-07-23 08:56  aj

	* trunk/src/pkcs15init/pkcs15-entersafe.c: Weitao Sun: no one can
	  create more than 15 files under 5015 df. I increase it from 15
	  to 48, and all are OK.

2009-07-23 08:30  aj

	* trunk/src/pkcs11/pkcs11.h: Latest version from scute svn with
	  this change: Stef Walter: Make all constants UL that should be.

2009-07-22 12:24  aj

	* trunk/src/pkcs15init/pkcs15-rtecp.c,
	  trunk/src/pkcs15init/pkcs15-rutoken.c: Aktiv Co./Aleksey
	  Samsonov: fix a bug in rutoken driver.

2009-07-22 10:09  aj

	* trunk/src/libopensc/card-piv.c,
	  trunk/src/libopensc/pkcs15-piv.c: Douglas E. Engert: major
	  update for the PIV smartcard. The major issue is with getting
	  the length of an object or the cert contained in an object. The
	  PIV card does not have a directory on the card, So the previous
	  version tried to put off as long as possible the reading of
	  objects for performance so as to avoid having to read objects
	  that would not be used. The first standard, NIST 800-73, set
	  maximum sizes for objects. 800-73-2 removed this for
	  certificates. A certificate object can contain a certificate
	  which might be compressed. The only way to get the length of the
	  compressed certificate is to decompress it. Thus the
	  decompressed certificate could be larger then the container
	  object, so even if the PIV card had a directory, one would still
	  need to decompress the certificate to find its length. OpenSC
	  sc_read_binary will use the length obtained by using
	  sc_select_file(...,&file_out), and thus the lengths must be
	  determined in sc_select_file. Change are to card-piv.c and
	  pkcs15-piv.c and include: * The old cache code which was not
	  working was removed. * New cache code was added which caches all
	  object read from the card * If an object has a cert, the cert is
	  decompressed and also cached. * As part of reading an object the
	  first 8 bytes are read and this is then used to allocate a large
	  buffer to read in the object. * If pkcs15 or pkcs11 asks about a
	  certificate, the cert object will be read, and the cert
	  decompressed, to get the actual length. * If piv_select_file is
	  called with the file_out != NULL the object will be read to get
	  the length If called with NULL it will not be read. * The
	  enumeration of the objects now starts with 0. *
	  sc_ctx_suppress_errors_on and off are used to avoid file not
	  found messages which are are a by product of not having a
	  directory. * "Unsigned Card Holder Unique Identifier" object in
	  card-piv and pkcs15-piv.c had conflicting paths, as NIST
	  800-72-1 had two tables with different paths. The enumtag for it
	  in card-piv.c was also wrong.

2009-07-22 10:06  aj

	* trunk/src/libopensc/pkcs15-gemsafeV1.c: Douglas E. Engert: The
	  pkcs15-gemsafeV1.c does not detect of the card present is in
	  fact a gemsafeV1 card, and thus it can end up issuing commands
	  to the wrong cards.

2009-07-02 13:59  jps

	* trunk/src/libopensc/card-muscle.c, trunk/src/libopensc/cards.h:
	  Add support for JCOP31 v2.4.1 with the modified muscle
	  applet[1]. This add support for 2048bit key and extended APDU.
	  [1]
	  http://www.opensc-project.org/pipermail/opensc-user/2009-June/003147.html

2009-06-28 10:08  aj

	* trunk/src/pkcs11/Makefile.mak: Kalev Lember: fix
	  onepin-opensc-pkcs11.dll manifest embedding with Microsoft
	  compilers.

2009-06-28 07:26  aj

	* trunk/src/libopensc/card-rtecp.c: Aktiv Co. / Aleksey Samsonov:
	  use generic code instead of identical funciton (now that the
	  generic code was fixed).

2009-06-28 07:25  aj

	* trunk/src/libopensc/card-gemsafeV1.c: Aktiv Co. / Aleksey
	  Samsonov: use generic set_security_env code, remove duplicate
	  code.

2009-06-28 07:23  aj

	* trunk/src/libopensc/iso7816.c: Aktiv Co. / Aleksey Samsonov:
	  Remove dead code.

2009-06-28 07:22  aj

	* trunk/src/libopensc/iso7816.c: Aktiv Co. / Aleksey Samsonov: Add
	  assert() calls to check constant buffer size.

2009-06-28 07:20  aj

	* trunk/src/libopensc/iso7816.c: Aktiv Co. / Aleksey Samsonov:
	  Check buffer length (*outlen)

2009-06-28 07:19  aj

	* trunk/src/libopensc/iso7816.c: Aktiv Co. / Aleksey Samsonov: Fix
	  for the case when "apdu.resplen < 2" and checked buffer length.

2009-06-28 07:17  aj

	* trunk/src/libopensc/iso7816.c: Aktiv Co. / Aleksey Samsonov: fix
	  case depending on length. also no need to null resplen or le
	  (done by sc_format_apdu).

2009-06-28 07:11  aj

	* trunk/src/libopensc/ctx.c: Move emv driver to the end.

2009-06-25 08:45  ludovic.rousseau

	* trunk/src/libopensc/iso7816.c: iso7816_set_security_env():
	  correctly set P1 parameter in case of SC_SEC_OPERATION_DECIPHER
	  Thanks to Aleksey Samsonov for the patch
	  http://www.opensc-project.org/pipermail/opensc-devel/2009-June/012263.html

2009-06-24 15:29  aj

	* trunk/NEWS: add a NEWS entry too.

2009-06-24 15:26  aj

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak,
	  trunk/src/libopensc/card-rtecp.c, trunk/src/libopensc/cardctl.h,
	  trunk/src/libopensc/cards.h, trunk/src/libopensc/ctx.c,
	  trunk/src/pkcs15init/Makefile.am,
	  trunk/src/pkcs15init/Makefile.mak,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-rtecp.c,
	  trunk/src/pkcs15init/pkcs15init.exports,
	  trunk/src/pkcs15init/rutoken_ecp.profile: Add new rutoken_ecp
	  driver by Aktiv Co. / Aleksey Samsonov

2009-06-16 09:17  ludovic.rousseau

	* trunk/src/tools/opensc-tool.c: print_file(): inverse "write" and
	  "erase" Thanks to Aleksey Samsonov for the patch
	  http://www.opensc-project.org/pipermail/opensc-devel/2009-June/012212.html

2009-05-12 14:35  ludovic.rousseau

	* trunk/src/tools/cardos-tool.c: cardos_sm4h(): fix memory leaks.
	  Thanks to cppckeck(1)

2009-05-12 14:29  ludovic.rousseau

	* trunk/src/libopensc/pkcs15-gemsafeV1.c:
	  sc_pkcs15emu_add_object(): fix a memory leak. thanks to
	  cppcheck(1) [pkcs15-gemsafeV1.c:419]: (error) Memory leak: obj

2009-05-12 14:27  ludovic.rousseau

	* trunk/src/libopensc/pkcs15-gemsafeV1.c: do not cast calloc()
	  return value

2009-05-07 13:09  aj

	* trunk/configure.ac: prep next release.

2009-05-07 10:57  aj

	* trunk/NEWS, trunk/src/tools/pkcs11-tool.c: Fix security issue.

2009-05-06 16:25  ludovic.rousseau

	* trunk/src/tools/cardos-tool.c: avoid a compilation failure with
	  --disable-openssl

2009-04-23 18:02  alonbl

	* trunk/doc/Makefile.am: Fix --disable-man install from svn
	  checkout, by Ludovic Rousseau

2009-04-23 18:00  alonbl

	* trunk/doc/Makefile.am: Fix --disable-man install from svn
	  checkout, by Ludovic Rousseau

2009-04-21 16:43  alonbl

	* trunk/configure.ac: Fix GNU libiconv detection By Kalev Lember
	  The attached patch fixes GNU libiconv detection by adding an
	  additional libiconv symbol check to autoconf -liconv link test.
	  Right now some iconv implementations have only iconv* symbols
	  (GNU libc), some have only libiconv* (GNU libiconv), and some
	  have both defined (Mac OS X's iconv), so it's necessary to check
	  for both variants.

2009-04-17 07:19  martin

	* trunk/src/libopensc/reader-pcsc.c: Fix SCardDisconnect reset
	  parameter.

2009-04-15 07:52  martin

	* trunk/src/libopensc/internal.h, trunk/src/libopensc/opensc.h:
	  Move sc_check_sw to opensc.h

2009-04-15 06:18  martin

	* trunk/src/libopensc/libopensc.exports: Export sc_check_sw,
	  required by external drivers and utilities. Thanks to Marc Rios
	  Valls.

2009-04-14 15:21  aj

	* trunk/NEWS: Update news file too.

2009-04-08 10:31  martin

	* trunk/src/libopensc/reader-pcsc.c: * Correctly set offsets for
	  PINs for PIN modification operations with pinpads. Thanks to
	  Robert Konklewski. * Only set messages if the reader has display
	  capabilities. * Detect rejected pinpad commands * Whitespace
	  fixes

2009-04-08 09:40  martin

	* trunk/src/tools/pkcs11-tool.c: Engine API is not used. Thanks to
	  Robert Konklewski for noticing this.

2009-04-03 19:54  alonbl

	* trunk/src/libopensc/reader-pcsc.c: Actually print SCardControl
	  result, thanks to martin

2009-04-03 19:17  alonbl

	* trunk/src/libopensc/reader-pcsc.c: reader-pcsc - minor cleanups
	  in reader features 1. Indent fix. 2. Reorder conditions. 3. Do
	  not print error if SCardControl fails.

2009-04-02 10:33  aj

	* trunk/NEWS: Document latest change.

2009-04-02 10:32  aj

	* trunk/src/libopensc/card-entersafe.c,
	  trunk/src/libopensc/cardctl.h, trunk/src/libopensc/cards.h,
	  trunk/src/pkcs15init/entersafe.profile,
	  trunk/src/pkcs15init/pkcs15-entersafe.c: Entersafe changes by
	  Weitao Sun: 1.Card type FTCOS/PK-01C added. (new) 2.Limit pin
	  length in range [4,16). (bug fix) 3.Can not unblock PIN. (bug
	  fix)

2009-03-25 14:31  ludovic.rousseau

	* trunk/src/libopensc/muscle.c: Do not use msc_crypt_process
	  (OP_PROCESS). This operation is used to do multipart encryption
	  when, for example, the data is too big to fit in one APDU. It
	  basically calls the Cipher.update() method until all data has
	  been processed. However, the Java Card API documentation advises
	  against using update(): "This method requires temporary storage
	  of intermediate results. In addition, if the input data length
	  is not block aligned (multiple of block size) then additional
	  internal storage may be allocated at this time to store a
	  partial input data block. This may result in additional resource
	  consumption and/or slow performance. This method should only be
	  used if all the input data required for the cipher is not
	  available in one byte array. If all the input data required for
	  the cipher is located in a single byte array, use of the
	  doFinal() method to process all of the input data is
	  recommended." As the card's JVM was returning an internal
	  exception when using OP_PROCESS, it was decided to implement an
	  msc_crypt_final_object() function in OpenSC that uses the
	  msc_object_*() functions to read/write all the data from the
	  card. This way, it is possible to transmit/receive "arbitrarily"
	  large data chunks to/from the card and use doFinal(). This is
	  the fallback method when, for example, using 2048 bit keys and
	  the card doesn't support extended APDUs. Thanks to Joao Poupino
	  for the patch
	  http://www.opensc-project.org/pipermail/opensc-devel/2009-March/011978.html

2009-03-25 14:22  ludovic.rousseau

	* trunk/src/libopensc/reader-pcsc.c: pcsc_internal_transmit(): do
	  not limit the size of the reception buffer to 258. This check is
	  no more needed now that pcsc-lite can handle extended APDU.
	  Thanks to Joao Poupino for the patch
	  http://www.opensc-project.org/pipermail/opensc-devel/2009-March/011978.html

2009-03-25 13:55  ludovic.rousseau

	* trunk/src/libopensc/card-muscle.c, trunk/src/libopensc/cards.h:
	  Detect the eToken 72K and activate RSA 2048 and extended APDU
	  for it. Thanks to Joao Poupino for the patch
	  http://www.opensc-project.org/pipermail/opensc-devel/2009-March/011978.html

2009-03-25 13:50  ludovic.rousseau

	* trunk/src/libopensc/muscle.h: Change MSC_MAX_APDU to make some
	  buffers larger to support extended APDUs. The change was only
	  from 256 to 512 bytes since it is more than enough for 2048 bit
	  keys; Thanks to Joao Poupino for the patch
	  http://www.opensc-project.org/pipermail/opensc-devel/2009-March/011978.html

2009-03-25 13:47  ludovic.rousseau

	* trunk/src/libopensc/muscle.c: msc_get_challenge(): return
	  SC_SUCCESS instead of dataLength in case of success Thanks to
	  Joao Poupino for the patch
	  http://www.opensc-project.org/pipermail/opensc-devel/2009-March/011978.html

2009-03-25 13:42  ludovic.rousseau

	* trunk/src/libopensc/muscle.c: msc_get_challenge(): use 0x62
	  instead of 0x72 for GET CHALLENGE as it is the value used by the
	  Muscle applet (INS_GET_CHALLENGE) Thanks to Joo Poupino for the
	  patch
	  http://www.opensc-project.org/pipermail/opensc-devel/2009-March/011978.html

2009-03-21 11:17  martin

	* trunk/src/libopensc/reader-ctapi.c: Fix typo

2009-03-21 11:09  martin

	* trunk/src/libopensc/internal-winscard.h,
	  trunk/src/libopensc/reader-pcsc.c: Add support for LCD detection
	  on pinpad devices. * Update IOCTL definitions to PC/SC part 10
	  v2.02.05 * Return SC_SUCCESS instead of 0 if returning SC_
	  codes. * Detect the presence of a display with
	  FEATURE_IFD_PIN_PROPERTIES Tested with patched CCID driver on OS
	  X, with SPR532 (no display) and OK3821 (with display) Known CCID
	  reader with a display: ATMEL_AT91SO.txt: wLcdLayout: 0x0210
	  CardMan3821.txt: wLcdLayout: 0x0210 Kobil_EMV_CAP.txt:
	  wLcdLayout: 0x0210 Xiring_XI-SIGN.txt: wLcdLayout: 0x020C
	  Xiring_XI-SIGN_6000.txt: wLcdLayout: 0x020C

2009-03-19 17:54  martin

	* trunk/src/libopensc/reader-pcsc.c: * Display the default CCID
	  message for PIN verification if the reader has a display * Part
	  10 -> PC/SC v2

2009-03-18 10:18  martin

	* trunk/src/libopensc/reader-pcsc.c: Fix Global Platform PINs with
	  CCID pinpads. Thanks to Franois Leblanc for the report:
	  http://www.opensc-project.org/pipermail/opensc-devel/2009-March/011947.html

2009-03-12 08:33  ludovic.rousseau

	* trunk/src/tools/pkcs11-tool.c: store the generated public key on
	  the token. Thanks to Rickard Bondesson for the patch
	  http://www.opensc-project.org/pipermail/opensc-devel/2009-February/011884.html

2009-03-07 21:55  alonbl

	* trunk/src/libopensc/internal-winscard.h: Fix Windows PINPAD
	  mingw issue Thanks to Franois Leblanc
	  http://www.opensc-project.org/pipermail/opensc-devel/2009-March/011932.html

2009-03-06 09:30  aj

	* trunk/src/pkcs15init/pkcs15-lib.c: check if len or p is 0/NULL
	  and return.

2009-03-06 09:26  aj

	* trunk/src/pkcs15init/pkcs15-lib.c: fix typo.

2009-03-05 18:37  aj

	* trunk/src/pkcs15init/pkcs15-lib.c: Improve this function even
	  more.

2009-03-05 15:28  aj

	* trunk/src/pkcs15init/pkcs15-lib.c: resolve an "undefined code"
	  situation. the old code was undefined, but ok (variables where
	  never used again in the "goto error" case). but the new code
	  should be clearer on this.

2009-03-05 15:15  aj

	* trunk/src/pkcs15init/gpk.profile: change base id so it does not
	  overlap with the next one.

2009-02-26 08:58  aj

	* trunk/NEWS: created final release.

2009-02-25 09:13  ludovic.rousseau

	* trunk/src/pkcs11/misc.c: removed unused variable misc.c:317:
	  warning: unused variable 'i'

2009-02-25 09:10  ludovic.rousseau

	* trunk/src/pkcs11/misc.c: iattr_extract(): use
	  sizeof(CK_CERTIFICATE_TYPE) for a CKA_CERTIFICATE_TYPE thanks to
	  Wan-Teh Chang for the better patch
	  http://www.opensc-project.org/pipermail/opensc-devel/2009-February/011892.html

2009-02-24 17:15  ludovic.rousseau

	* trunk/src/pkcs11/misc.c: attr_extract(): use sizeof(CK_ULONG)
	  instead of sizeof(CKA_CERTIFICATE_TYPE) Thanks to Marc Rios
	  Valles for the patch
	  http://www.opensc-project.org/pipermail/opensc-devel/2009-February/011890.html

2009-02-03 20:11  alonbl

	* trunk/configure.ac: Default PCSC CFLAGS from pkg-config

2009-02-01 08:26  aj

	* trunk/NEWS: update NEWS file from 0.11.7 branch.

2009-02-01 08:19  aj

	* trunk/configure.ac: trunk code is now working towards 0.11.8

2009-01-30 11:59  martin

	* trunk/src/pkcs11/framework-pkcs15.c: typo fix

2009-01-29 11:50  martin

	* trunk/src/pkcs11/framework-pkcs15.c: hide_empty_tokens should
	  not affect emulated cards (always on)

2009-01-29 11:47  martin

	* trunk/src/include/winconfig.h.in,
	  trunk/src/libopensc/Makefile.mak, trunk/win32/Make.rules.mak:
	  Fix native windows build, add iconv support

2009-01-28 12:43  alonbl

	* trunk/src/libopensc/reader-pcsc.c: Optionally load
	  SCardControl132 on apple

2009-01-28 12:28  martin

	* trunk/src/libopensc/reader-pcsc.c: Fix pinpads on OS X

2009-01-28 12:10  alonbl

	* trunk/etc/opensc.conf.in, trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak,
	  trunk/src/libopensc/card-rutoken.c,
	  trunk/src/libopensc/pkcs15-rutoken.c,
	  trunk/src/libopensc/pkcs15-syn.c,
	  trunk/src/pkcs15init/pkcs15-rutoken.c,
	  trunk/src/pkcs15init/rutoken.profile: Rutoken updates By Aktiv
	  Co. Aleksey Samsonov - use PKCS#15 (not builtin PKCS#15
	  emulator) - rutoken.profile (add privdata) - correct using ACL -
	  correct erase procedure

2009-01-23 09:30  alonbl

	* trunk/etc/opensc.conf.in, trunk/src/pkcs11/misc.c: Set default
	  of hide_empty_tokens to true

2009-01-23 09:27  alonbl

	* trunk/src/libopensc/Makefile.am: Typo

2009-01-23 09:14  alonbl

	* trunk/etc/opensc.conf.in, trunk/src/pkcs11/misc.c,
	  trunk/src/pkcs11/pkcs11-global.c, trunk/src/pkcs11/sc-pkcs11.h:
	  Rename PKCS#11 v2_20_mode option to plug_and_play As it is the
	  only feature it controls. Also, change the default to true.

2009-01-23 09:00  alonbl

	* trunk/configure.ac, trunk/src/libopensc/Makefile.am: Finally
	  remove eval stuff from autoconf

2009-01-22 14:29  alonbl

	* trunk/configure.ac: Remove unused OPENSC_ETC_PATH

2009-01-21 13:19  alonbl

	* trunk/src/libopensc/cards.h, trunk/src/libopensc/internal.h,
	  trunk/src/libopensc/opensc.h: Move all private factories into
	  private headers, the iso7816 factory is the only one which is
	  actually exposed

2009-01-21 13:01  alonbl

	* trunk/src/libopensc/libopensc.exports: Add sc_get_iso7816_driver
	  as it is required for external drivers

2009-01-20 08:45  alonbl

	* trunk/src/libopensc/internal-winscard.h: Add SCARD_E_NO_SERVICE
	  to internal-winscard.h

2009-01-20 08:42  alonbl

	* trunk/src/libopensc/internal-winscard.h,
	  trunk/src/pkcs11/pkcs11-global.c: Revert 3630

2009-01-19 19:43  alonbl

	* trunk/src/libopensc/internal-winscard.h,
	  trunk/src/pkcs11/pkcs11-global.c: Add SCARD_E_NO_SERVICE to
	  internal-winscard.h

2009-01-19 13:39  alonbl

	* trunk/configure.ac: Add PACKAGE_SUFFIX

2009-01-19 13:32  alonbl

	* trunk/configure.ac: Expose version components into config.h

2009-01-19 12:06  martin

	* trunk/etc/opensc.conf.in, trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/framework-pkcs15init.c,
	  trunk/src/pkcs11/misc.c, trunk/src/pkcs11/pkcs11-global.c,
	  trunk/src/pkcs11/sc-pkcs11.h: Configurable for PKCS#11 v2.20
	  related changes. - Correctly report Cryptoki version if v2.20 is
	  used. - Consistently report no version for hardware/software we
	  know no version information about.

2009-01-19 11:57  martin

	* trunk/src/libopensc/reader-pcsc.c: Correct PC/SC -> OpenSC error
	  code translation.

2009-01-18 23:16  martin

	* trunk/src/libopensc/reader-pcsc.c: Recognize SCARD_E_NO_SERIVCE:
	  {{{ $ /Library/OpenSC/bin/opensc-tool -a [opensc-tool]
	  reader-pcsc.c:881:pcsc_detect_readers: SCardEstablishContext
	  failed: 0x8010001d [opensc-tool]
	  reader-pcsc.c:990:pcsc_detect_readers: returning with: Unknown
	  error No smart card readers found. }}}

2009-01-16 21:27  alonbl

	* trunk/etc/opensc.conf.in, trunk/src/pkcs15init/profile.c: Set
	  hardcoded default for profile_dir

2009-01-16 20:52  alonbl

	* trunk/configure.ac: More iconv build fixes

2009-01-16 20:21  alonbl

	* trunk/configure.ac: Fix external iconv override

2009-01-16 17:48  alonbl

	* trunk/configure.ac, trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/pkcs15-esteid.c: Correct iconv support

2009-01-16 17:13  alonbl

	* trunk/configure.ac: Revert r3612, the autoconf warning is
	  correct and be the default in future

2009-01-16 16:44  martin

	* trunk/etc/opensc.conf.in, trunk/src/pkcs11/misc.c,
	  trunk/src/pkcs11/pkcs11-global.c, trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/pkcs11/slot.c: Make PKCS#11 module default slot
	  configuration more sensible: * Increase default slot count to
	  16, which equals 4 concurrent readers by default * 2 OpenCT + 2
	  PC/SC on Linux for example * Rename num_slots to slots_per_card
	  * Rename internal PKCS#11 variables, remove unneeded defines.

2009-01-16 16:12  martin

	* trunk/etc/opensc.conf.in, trunk/src/libopensc/reader-openct.c:
	  Limit virtual OpenCT readers to a sane default of 2
	  readers/tokens by default. Most users don't use more than one or
	  two tokens concurrently. This way default configuration (or with
	  no configuration file) works even after you insert a PC/SC
	  reader as OpenCT does not "eat up" all PKCS#11 slots with 5
	  virtual readers.

2009-01-15 23:55  martin

	* trunk/configure.ac: link with iconv on Mac OS X, to support
	  [3616]

2009-01-15 23:20  martin

	* trunk/configure.ac, trunk/src/libopensc/pkcs15-esteid.c: Linux
	  compatible PKCS#11-friendly changes to EstEID PKCS#15 emulation
	  driver to display the name of the cardholder in token label
	  field.

2009-01-15 21:40  martin

	* trunk/src/libopensc/reader-pcsc.c: PC/SC readers have always
	  only one slot per reader.

2009-01-15 21:23  martin

	* trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/libopensc/reader-pcsc.c: Remove some
	  unused/prehistoric defines.

2009-01-15 21:08  martin

	* trunk/etc/opensc.conf.in, trunk/src/libopensc/pkcs15-syn.c,
	  trunk/src/libopensc/pkcs15.h: Fix PKCS#15 emulation handling: *
	  Work as expected without a configuration file * "Normalize" the
	  configuration file: show the used default and give examples with
	  opposite values. * DWIM: * If there is no config file: try all
	  builtin drivers * If there is a configuration file, allow to
	  turn emulation off * If there is a configuration file, allow to
	  filter the list of internal drivers * Introduce a PKCS#15 layer
	  card flag for emulated cards

2009-01-15 20:05  martin

	* trunk/configure.ac: Get rid of configure warnings: {{{
	  configure: WARNING: winscard.h: accepted by the compiler,
	  rejected by the preprocessor! configure: WARNING: winscard.h:
	  proceeding with the compiler's result }}}

2009-01-15 20:01  martin

	* trunk/configure.ac: Provide default system PCSC_CFLAGS on Mac OS
	  X
	* trunk/src/libopensc/card.c: Mac OS X 10.5.6 fixes the ATR
	  padding bug.

2009-01-01 20:55  alonbl

	* trunk/doc/Makefile.am, trunk/doc/nonpersistent/Makefile.am: Fix
	  doc build issues 1. VPATH issue. 2. Parallel build issue,
	  suggested by Ludovic Rousseau.

2008-12-28 21:28  alonbl

	* trunk/src/libopensc/libopensc.exports,
	  trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h,
	  trunk/src/tools/pkcs15-init.c: Allow delete data objects by
	  specifying application-name and label

2008-12-28 18:45  alonbl

	* trunk/etc/opensc.conf.in: Add PKCS#11 specification limitation
	  note

2008-12-28 18:37  alonbl

	* trunk/etc/opensc.conf.in: Typeo

2008-12-28 16:07  aj

	* trunk/src/pkcs15init/asepcos.profile,
	  trunk/src/pkcs15init/cardos.profile,
	  trunk/src/pkcs15init/cyberflex.profile,
	  trunk/src/pkcs15init/entersafe.profile,
	  trunk/src/pkcs15init/flex.profile,
	  trunk/src/pkcs15init/gpk.profile,
	  trunk/src/pkcs15init/incrypto34.profile,
	  trunk/src/pkcs15init/jcop.profile,
	  trunk/src/pkcs15init/muscle.profile,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/starcos.profile: Create new type "privdata"
	  in all profiles with different ACL settings, and check
	  C_CreateObject parameter CKA_PRIVATE aka pkcs15_create_data
	  args.auth_id variable, aka sc_pkcs15init_new_object
	  object->flags & SC_PKCS15_CO_FLAG_PRIVATE to decide if "data" or
	  "privdata" profile needs to be used. Tested with cryptoflex 32k
	  and opensc-explorer, now I no longer can "get" the data object
	  file stored with "--private".

2008-12-28 16:01  aj

	* trunk/etc/opensc.conf.in, trunk/src/pkcs11/misc.c: Enable
	  lock_login by default for security. Disable soft_keygen by
	  default for security. Make defaults code more readable.

2008-12-11 09:18  ludovic.rousseau

	* trunk/src/libopensc/internal-winscard.h: #include <wintypes.h>
	  on __APPLE__ to define DWORD, LONG, etc. Windows types

2008-12-06 20:04  martin

	* trunk/src/tools/pkcs11-tool.c: Upgrade to safe and sane values
	  of late 2008

2008-12-06 18:49  alonbl

	* trunk/src/libopensc/opensc-config.in: Fix bug #86, thanks to
	  ville.skytta

2008-12-06 11:41  martin

	* trunk/src/tools/opensc-tool.c, trunk/src/tools/util.c: Fixes #109

2008-12-05 15:57  martin

	* trunk/src/pkcs11/pkcs11-object.c: Cosmetic fix for [3595]

2008-12-05 15:53  martin

	* trunk/src/pkcs11/pkcs11-display.c: Remove ancient unused code

2008-12-05 15:48  martin

	* trunk/src/tools/util.c: DWIM: If you don't specify a reader on
	  the command line and you have more than one reader (for example,
	  OpenCT virtual readers and one existing PC/SC reader) the tools
	  will skip to the first reader that has a card in it.

2008-11-27 10:44  ludovic.rousseau

	* trunk/src/pkcs11/pkcs11-display.c: add CKM_SHA256* and
	  CKM_SHA384* logs

2008-11-24 22:06  martin

	* trunk/src/libopensc/iso7816.c, trunk/src/pkcs11/pkcs11-object.c,
	  trunk/src/pkcs11/pkcs11-spy.c, trunk/src/tools/pkcs11-tool.c: *
	  Fix issues with pkcs11-tool testing of
	  C_GenerateRandom/C_SeedRandom and OpenSC PKCS#11 implementation
	  of those functions. Thanks goes to Rickard Bondesson who noticed
	  the issues.
	  http://www.opensc-project.org/pipermail/opensc-devel/2008-November/011436.html

2008-11-24 21:55  martin

	* trunk/src/libopensc/card-entersafe.c: typos

2008-11-24 21:53  martin

	* trunk/src/pkcs11/pkcs11-display.c,
	  trunk/src/pkcs11/pkcs11-spy.c: Missing SHAs

2008-11-21 22:34  martin

	* trunk/src/tools/pkcs11-tool.c: Add --list-token-slots / -T to
	  pkcs11-tool to list only slots with tokens.

2008-10-27 19:17  alonbl

	* trunk/configure.ac: mingw32->mingw*

2008-10-27 19:16  alonbl

	* trunk/configure.ac, trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/internal-winscard.h: Re-add pcsc-lite
	  compile-time dependency Win64 changed the SCARDCONTEXT from LONG
	  to ULONG_PTR, pcsc-lite did not follow this on 64bit platforms.
	  This breaks the pcsc module. To solve this we use installed
	  winscard.h in order to get proper declerations. As mingw32 does
	  not have winscard.h we keep current types. mingw64 and pcsc-lite
	  system have winscard.h.

2008-10-26 19:13  alonbl

	* trunk/src/libopensc/reader-pcsc.c: Add some more debug
	  information to pcsc

2008-10-26 14:48  alonbl

	* trunk/src/libopensc/internal-winscard.h: Resolve some conflict
	  with win64

2008-10-20 15:04  ludovic.rousseau

	* trunk/src/libopensc/reader-pcsc.c: use 0x%08lx instead of
	  0x08%lx Thanks to Alon Bar-Lev for the patch

2008-10-20 07:46  ludovic.rousseau

	* trunk/src/libopensc/reader-pcsc.c: display PC/SC error codes as
	  0x08%lx instead of %lx to make it explicit they are hex values

2008-10-20 07:27  ludovic.rousseau

	* trunk/src/libopensc/reader-pcsc.c: use SCARD_S_SUCCESS instead
	  of 0

2008-10-10 09:42  ludovic.rousseau

	* trunk/etc/opensc.conf.in: Add documentation: #
	  (max_virtual_slots/num_slots) limits the number of readers #
	  that can be used on the system. Default is then 8/4=2 readers.

2008-10-10 09:39  ludovic.rousseau

	* trunk/src/pkcs11/slot.c: slot_get_token(): return
	  CKR_TOKEN_NOT_PRESENT if CKF_TOKEN_PRESENT is not set. Thanks to
	  Douglas E. Engert for the patch
	  http://www.opensc-project.org/pipermail/opensc-devel/2008-October/011361.html

2008-10-09 13:05  ludovic.rousseau

	* trunk/src/pkcs11/slot.c: card_removed(): warning: comparison
	  between signed and unsigned

2008-10-09 12:59  ludovic.rousseau

	* trunk/src/pkcs11/slot.c: card_initialize(): correctly associate
	  a reader to each virtual slot. Thanks to Douglas E. Engert for
	  the patch
	  http://www.opensc-project.org/pipermail/opensc-devel/2008-October/011359.html

2008-10-09 09:02  ludovic.rousseau

	* trunk/doc/Makefile.am: make the * targets depend on only one
	  dependency to avoid problems on concurrent make (-j)

2008-10-09 08:35  ludovic.rousseau

	* trunk/doc/Makefile.am: remove html.out and man.out before
	  filling them to avoid problems when/if they already contain a
	  html.tmp or man.tmp file (on the 3rd execution of make)

2008-10-09 08:32  ludovic.rousseau

	* trunk/doc/tools/tools.xml: cardos-info is now cardos-tool

2008-10-04 19:52  alonbl

	* trunk/src/tools/cardos-info, trunk/src/tools/cardos-info.bat:
	  Handle spaces correctly

2008-10-04 19:35  alonbl

	* trunk/src/tools/cardos-info.bat: Make src/tools/cardos-info.bat
	  DOS format

2008-10-04 19:33  alonbl

	* trunk/src/tools/cardos-info.bat: Make src/tools/cardos-info.bat
	  DOS format

2008-10-04 19:32  alonbl

	* trunk/src/tools/Makefile.am, trunk/src/tools/cardos-info,
	  trunk/src/tools/cardos-info.bat: Fixup cardos-info scripts 1.
	  They are not binaries. 2. No need for resources. 3. Put in
	  separate files. Anyway, do we actually need these? why not just
	  document that cardos-tool should be used instead?

2008-09-22 14:36  aj

	* trunk/src/tools/cardos-tool.c: fix apdu length check: 0..3 is
	  wrong (too short). 4 is ok. 5 is not (length byte for data, but
	  no data?). 6 or more is ok (length byte and data). checking for
	  "5" is not important.

2008-09-22 14:21  jps

	* trunk/src/tools/cardos-tool.c: An erased CardOS with a StartKey
	  version 0xFF can now be directly formatted. Verbose output
	  contains now some useful data.

2008-09-22 10:38  jps

	* trunk/src/tools/cardos-tool.c: fix some bad crash on Mac

2008-09-22 09:47  jps

	* trunk/src/tools/cardos-tool.c: CardOS 4.2C is working too after
	  changing Default StartKey to 16 * 0xFF

2008-09-22 08:35  jps

	* trunk/src/tools/cardos-tool.c: fixing typo

2008-09-22 07:01  aj

	* trunk/src/tools/cardos-tool.c: Fix a comment and allow cardos
	  4.3B too. Thanks to JP for testing.

2008-09-19 10:21  aj

	* trunk/src/tools/cardos-tool.c, trunk/src/tools/pkcs15-tool.c:
	  fix a few missing \n

2008-09-18 17:44  aj

	* trunk/doc/tools/cardos-tool.xml, trunk/src/tools/Makefile.am,
	  trunk/src/tools/cardos-tool.c: commit changes: cardos-info is
	  now cardos-tool. and it knows to format, at least some
	  cards/tokens with cardos.

2008-09-18 17:43  aj

	* trunk/doc/tools/cardos-info.xml,
	  trunk/doc/tools/cardos-tool.xml, trunk/src/tools/cardos-info.c,
	  trunk/src/tools/cardos-tool.c: rename files only.

2008-09-11 11:39  aj

	* trunk/doc/Makefile.am: the "-" for make must be in the first
	  line of a multi column command, not somewhere in the middle.
	  this code makes shell look for "-rm" command which does not
	  exist. fixing. "-" is not required in these cases, as "rm -f"
	  always returns 0.

2008-09-10 12:44  alonbl

	* trunk/src/libopensc/card-entersafe.c,
	  trunk/src/libopensc/card-gemsafeV1.c: Fix for two apparent C
	  code bugs By Stanislav Brabec entersafe_init_pin_info() was
	  declared as int, but defined and used as void, resulting in a
	  function returning an unused pseudo-random value.
	  card-gemsafeV1.c uses comparison 'type == "DF"', which is always
	  false, as it compares pointer to a string with pointer to the
	  string "DF" in the code.

2008-09-08 14:04  alonbl

	* trunk/doc/Makefile.am, trunk/doc/nonpersistent/Makefile.am:
	  Don't removed generated external files during distclean

2008-08-27 06:19  aj

	* trunk/NEWS, trunk/configure.ac: Update trunk for new release.

2008-08-20 15:20  aj

	* trunk/NEWS: Document recent changes.

2008-08-20 15:17  aj

	* trunk/src/libopensc/pkcs15-gemsafeV1.c: Douglas E. Engert: The
	  pkcs15-gemsafeV1.c code assumes that the key_ref is always 3.
	  But that is not always the case. In our case it is 4. The patch
	  tries to determine the key_ref by looking at what appears to be
	  a table of allocated keys, and picking the first allocated key.
	  In case this is not always true, the patch will also allow for
	  the the opensc.conf card flag = n to specify the key_ref as the
	  low order 4 bits of the flag.

2008-08-20 05:41  aj

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak,
	  trunk/src/libopensc/card-entersafe.c,
	  trunk/src/libopensc/cardctl.h, trunk/src/libopensc/cards.h,
	  trunk/src/libopensc/ctx.c, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15-esinit.c,
	  trunk/src/libopensc/pkcs15-syn.c,
	  trunk/src/pkcs15init/Makefile.am,
	  trunk/src/pkcs15init/Makefile.mak,
	  trunk/src/pkcs15init/entersafe.profile,
	  trunk/src/pkcs15init/pkcs15-entersafe.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c: Add new entersafe driver for
	  ePass 3000 tokens.

2008-08-12 14:48  aj

	* trunk/src/tools/pkcs15-tool.c: remove check for label - if you
	  set one with "pkcs15-init -C -l your-label" this check doesn't
	  work correctly.

2008-08-12 09:51  ludovic.rousseau

	* trunk/src/pkcs11/pkcs11-display.c: print_mech_info(): replace
	  printf by fprintf to correctly redirect the log

2008-07-31 13:25  aj

	* trunk/NEWS, trunk/src/libopensc/card-cardos.c,
	  trunk/src/tools/pkcs15-tool.c: Apply security fix.

2008-07-31 12:43  aj

	* trunk/doc/nonpersistent/export-wiki.sh: update export script.

2008-07-31 12:18  aj

	* trunk/NEWS: and update the date.

2008-07-31 12:17  aj

	* trunk/NEWS: document this change.
	* trunk/etc/opensc.conf.in, trunk/src/libopensc/pkcs15.c: make the
	  sign_with_decrypt hack configureable.

2008-07-31 12:13  aj

	* trunk/src/libopensc/pkcs15.c: move checks to pkcs15_bind, where
	  we can look at the config.

2008-07-30 14:00  alonbl

	* trunk/NEWS: Update NEWS

2008-07-30 11:57  aj

	* trunk/NEWS, trunk/configure.ac: update configure and NEWS file.

2008-07-27 15:50  cg2v

	* trunk/src/libopensc/card-cardos.c: export a GET DATA operation
	  for cardos so opensc-explorer's do_get works

2008-07-27 15:18  cg2v

	* trunk/src/tools/pkcs15-tool.c: Don't free uninitialized memory
	  if pem_encode fails.

2008-07-21 14:39  aj

	* trunk/src/tools/opensc-explorer.c: Chaskiel Grundman: I found
	  the following patch to opensc-explorer handy when cleaning up
	  after some failed keygens (but not all, since you can't delete
	  private key objects). It switches the card to the admin
	  lifecycle at startup:

2008-07-21 14:35  aj

	* trunk/src/pkcs15init/pkcs15-cardos.c: Chaskiel Grundman: Nowhere
	  in pkcs15init/pkcs15-cardos.c is the user pin ever requested or
	  presented to the card. Since the update acl for the key object
	  uses the user pin, the GENERATE KEY operation fails when it
	  isn't logged in.

2008-07-02 10:15  martin

	* trunk/win32/Make.rules.mak: Do not delete .exports files on make
	  clean

2008-07-02 09:55  alonbl

	* trunk/src/libopensc/reader-pcsc.c: Make PC/SC work on Windows
	  again

2008-06-11 10:14  alonbl

	* trunk/configure.ac: Detect libtool-1 or libtool-2 at runtime

2008-06-09 08:32  alonbl

	* trunk/src/libopensc/Makefile.am: Revert pic changeset

2008-06-09 08:31  alonbl

	* trunk/Makefile.am, trunk/src/libopensc/Makefile.am: More
	  aclocal->m4

2008-06-09 08:10  ludovic.rousseau

	* trunk/m4/acx_pthread.m4: upgrade from
	  http://autoconf-archive.cryp.to/acx_pthread.html

2008-06-05 20:21  alonbl

	* trunk/configure.ac: Revert autoconf version prereq

2008-06-05 17:06  alonbl

	* trunk/Makefile.am, trunk/aclocal, trunk/configure.ac, trunk/m4,
	  trunk/m4/acx_pthread.m4, trunk/m4/libassuan.m4: Rename
	  aclocal->m4 to be more standard

2008-06-05 17:03  alonbl

	* trunk/Makefile.am, trunk/aclocal, trunk/aclocal/Makefile.am,
	  trunk/configure.ac, trunk/src/pkcs11/Makefile.am,
	  trunk/svnignore: Prepare for libtool-2

2008-05-26 11:35  alonbl

	* trunk/etc/opensc.conf.in: No point to maintain static list of
	  available drivers in configuration file, user can always use
	  opensc-tool to see available drivers

2008-05-26 10:46  alonbl

	* trunk/src/tools/opensc-explorer.c: opensc-explorer double free
	  and cleanups $ opensc-explorer OpenSC Explorer version
	  0.11.4-svn OpenSC [3F00]> cat only working EFs may be read
	  OpenSC [3F00]> cat only working EFs may be read opensc-explorer:
	  sc.c:492: sc_file_free: Assertion `sc_file_valid(file)' failed.
	  Aborted $ opensc-explorer OpenSC Explorer version 0.11.4-svn
	  OpenSC [3F00]> cd ff00 OpenSC [3F00/FF00]> cat only working EFs
	  may be read OpenSC [3F00/FF00]> cd .. opensc-explorer: sc.c:492:
	  sc_file_free: Assertion `sc_file_valid(file)' failed. Aborted By
	  Aktiv Co. Aleksey Samsonov And some more Cleanups

2008-05-26 08:30  ludovic.rousseau

	* trunk/src/pkcs11/pkcs11-display.c: print_generic() &
	  print_print(): size is a CK_ULONG (unsigned) so compare using
	  "!= (CK_LONG)(-1)" instead of "> 0"

2008-05-22 12:37  ludovic.rousseau

	* trunk/src/pkcs11/secretkey.c: completely initialize
	  pkcs11_secret_key_ops structure with NULL pointers
	  secretkey.c:225: warning: missing initializer secretkey.c:225:
	  warning: (near initialization for
	  'pkcs11_secret_key_ops.destroy_object')

2008-05-22 12:30  ludovic.rousseau

	* trunk/src/libopensc/pkcs15-rutoken.c: add missing prototype for
	  sc_pkcs15emu_rutoken_init_ex()
	* trunk/src/libopensc/pkcs15-tcos.c: add missing prototype for
	  sc_pkcs15emu_tcos_init_ex()

2008-05-22 12:26  ludovic.rousseau

	* trunk/src/libopensc/card-akis.c: do not use system as a variable
	  name. system() is also a function card-akis.c:400: warning:
	  declaration of 'system' shadows a global declaration
	  /usr/include/stdlib.h:730: warning: shadowed declaration is here

2008-05-22 12:23  ludovic.rousseau

	* trunk/src/libopensc/reader-pcsc.c: remove two unused variables
	  reader-pcsc.c:739: warning: unused variable 'rv'
	  reader-pcsc.c:862: warning: unused variable 'again'

2008-05-22 12:22  ludovic.rousseau

	* trunk/src/libopensc/reader-pcsc.c: Avoid variable name space
	  collision reader-pcsc.c:396: warning: declaration of 'priv'
	  shadows a previous local reader-pcsc.c:367: warning: shadowed
	  declaration is here reader-pcsc.c:909: warning: declaration of
	  'reader' shadows a previous local reader-pcsc.c:901: warning:
	  shadowed declaration is here

2008-05-22 12:14  ludovic.rousseau

	* trunk/src/common/compat_dummy.c: add a prototype for
	  compat_dummy() compat_dummy.c:2: warning: no previous prototype
	  for 'compat_dummy'

2008-05-22 12:13  ludovic.rousseau

	* trunk/src/pkcs15init/pkcs15-cardos.c: use #ifdef instead of #if
	  pkcs15-cardos.c:547:5: warning: "SET_SM_BYTES" is not defined
	  pkcs15-cardos.c:585:5: warning: "SET_SM_BYTES" is not defined

2008-05-20 09:47  ludovic.rousseau

	* trunk/src/pkcs11/pkcs11-spy.c: print_ptr_in(): change log format

2008-05-20 09:41  ludovic.rousseau

	* trunk/src/pkcs11/pkcs11-spy.c: C_Initialize(): log the value of
	  the pInitArgs argument

2008-05-14 18:34  alonbl

	* trunk/configure.ac: Fixup configure help strings

2008-05-12 09:41  ludovic.rousseau

	* trunk/src/pkcs11/pkcs11-spy.c: C_Finalize(): do not unload the
	  module since the application may try to make PKCS#11 calls again

2008-05-10 09:55  alonbl

	* trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/reader-openct.c: Better handle openct reader
	  replug, revert last change in pkcs11-pin

2008-05-09 22:22  alonbl

	* trunk/src/libopensc/pkcs15-pin.c: Fix sc_pkcs15_verify_pin() to
	  handle OpenCT hotplug correctly

2008-05-05 13:00  ludovic.rousseau

	* trunk/src/libopensc/muscle-filesystem.h,
	  trunk/src/libopensc/muscle.c,
	  trunk/src/pkcs11/framework-pkcs15.c, trunk/src/pkcs11/openssl.c,
	  trunk/src/pkcs11/pkcs11-display.c, trunk/src/scconf/parse.c,
	  trunk/src/scconf/sclex.c, trunk/src/signer/dialog.c,
	  trunk/src/signer/opensc-crypto.h, trunk/src/tests/print.c,
	  trunk/src/tests/sc-test.h, trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/piv-tool.c, trunk/src/tools/pkcs15-init.c: Use
	  size_t instead of int when needed, plus some other minor changes
	  Patch bug.1 included in Ticket #176

2008-05-05 09:51  ludovic.rousseau

	* trunk/src/tools/pkcs15-tool.c: use type size_t instead of int
	  since the 3rd argument of sc_format_asn1_entry() is void * using
	  int will fail on a 64-bits platform Closes Ticket #176

2008-05-02 17:56  alonbl

	* trunk/src/libopensc/pkcs15-pin.c: Verify PIN support Plug&Play
	  If card was reset or reader reconnected, verify can restart
	  transaction, as upper level will not cache PIN in this case.

2008-04-29 17:01  alonbl

	* trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/internal-winscard.h,
	  trunk/src/libopensc/libopensc.exports,
	  trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/libopensc/reader-openct.c,
	  trunk/src/libopensc/reader-pcsc.c,
	  trunk/src/pkcs11/pkcs11-global.c, trunk/src/pkcs11/slot.c,
	  trunk/src/tools/opensc-tool.c: Plug&Play support This is not the
	  best solution, but focus on smallest code change. Changes: 1.
	  Add detect_readers() to reader opts, this adds new readers to
	  the end of the readers list until list is full. 2. Add
	  sc_ctx_detect_readers() that calls readers' detect_readers(). 3.
	  Fixup pcsc_lock() so that it reconnect to the card and report
	  proper error so caller may be notified if session was lost. 4.
	  Allow context to be created without readers. 5. Call
	  sc_ctx_detect_readers() from PKCS#11 C_GetSlotList with
	  NULL_PTR. 6. Allow no reader at detect_card, as reader my be
	  removed. 7. Since I broke ABI, I updated the external module
	  version requirement to match OpenSC version. In the future a
	  separate version should be maintained for each interface, this
	  should be unrelated to the package version. Alon --- svn merge
	  -r 3480:3505
	  https://www.opensc-project.org/svn/opensc/branches/alonbl/pnp M
	  src/tools/opensc-tool.c M src/pkcs11/pkcs11-global.c M
	  src/pkcs11/slot.c M src/libopensc/reader-pcsc.c M
	  src/libopensc/internal-winscard.h M src/libopensc/ctx.c M
	  src/libopensc/reader-ctapi.c M src/libopensc/libopensc.exports M
	  src/libopensc/reader-openct.c M src/libopensc/opensc.h

2008-04-29 06:11  alonbl

	* trunk/src/libopensc/asn1.c: SIGSEGV print_tags_recursive - fix
	  Patch opensc-0.11.4.trunk-r3502-fix-segv_print_tags_asn1.diff
	  (for trunk trunk revision 3502) is draft. Example 1 (SIGSEGV):
	  OpenSC Explorer version 0.11.4-svn OpenSC [3F00]> cd ff00 OpenSC
	  [3F00/FF00]> asn1 0001 Printing tags for buffer of length 512
	  [Switching to Thread -1211906368 (LWP 25131)] By Aktiv Co.
	  Aleksey Samsonov

2008-04-29 06:09  alonbl

	* trunk/src/libopensc/Makefile.mak, trunk/src/pkcs11/Makefile.mak,
	  trunk/src/pkcs15init/Makefile.mak, trunk/src/tests/Makefile.am,
	  trunk/src/tests/Makefile.mak, trunk/src/tools/Makefile.mak,
	  trunk/win32/Make.rules.mak, trunk/win32/versioninfo.rc.in.in:
	  More MSVC fixups by Douglas E. Engert

2008-04-28 07:57  ludovic.rousseau

	* trunk/src/libopensc/card-akis.c,
	  trunk/src/libopensc/card-asepcos.c,
	  trunk/src/libopensc/card-atrust-acos.c,
	  trunk/src/libopensc/card-incrypto34.c,
	  trunk/src/libopensc/card-muscle.c,
	  trunk/src/libopensc/card-oberthur.c,
	  trunk/src/libopensc/card-piv.c, trunk/src/libopensc/card-tcos.c,
	  trunk/src/libopensc/p15card-helper.c,
	  trunk/src/libopensc/pkcs15-gemsafeV1.c,
	  trunk/src/libopensc/pkcs15-tcos.c,
	  trunk/src/libopensc/reader-pcsc.c: convert C++ in C comment

2008-04-28 07:45  ludovic.rousseau

	* trunk/src/pkcs15init/pkcs15-oberthur.c: convert C++ comment in C
	  comment

2008-04-28 07:44  ludovic.rousseau

	* trunk/src/pkcs15init/pkcs15-muscle.c: convert a C++ comment in C
	  comment

2008-04-28 07:42  ludovic.rousseau

	* trunk/src/pkcs15init/pkcs15-rutoken.c: rutoken_new_file():
	  initialize sec_attr pkcs15-rutoken.c:372: warning: 'sec_attr'
	  may be used uninitialized in this function

2008-04-28 07:36  ludovic.rousseau

	* trunk/src/pkcs11/framework-pkcs15init.c: completely initialize
	  the sc_pkcs11_framework_ops structure (using NULL for undefined
	  callbacks)

2008-04-28 07:33  ludovic.rousseau

	* trunk/src/pkcs11/debug.c: completely initialize the struct fmap
	  fields

2008-04-28 07:24  ludovic.rousseau

	* trunk/src/libopensc/card.c: card.c:756: warning: unused variable
	  'j'

2008-04-28 07:23  ludovic.rousseau

	* trunk/src/libopensc/ctx.c: convert C++ comment in C comment (ISO
	  C90)

2008-04-25 12:49  alonbl

	* trunk/src/tools/rutoken-tool.c: Use O_BINARY at rutoken

2008-04-25 11:51  alonbl

	* trunk/src/tools/pkcs11-tool.c: Cleanup some Windows issues with
	  open

2008-04-24 16:34  alonbl

	* trunk/src/libopensc/card-rutoken.c: rutoken: Some MSVC fixups,
	  by Aktiv Co. Aleksey Samsonov

2008-04-24 06:32  alonbl

	* trunk/win32/opensc-install.bat: Add PATH comment for Windows
	  users

2008-04-18 20:37  alonbl

	* trunk/bootstrap: Add --force to autoreconf

2008-04-18 14:08  alonbl

	* trunk/src/include/opensc/Makefile.am,
	  trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak,
	  trunk/src/libopensc/card-rutoken.c,
	  trunk/src/libopensc/libopensc.exports,
	  trunk/src/libopensc/pkcs15-prkey-rutoken.c,
	  trunk/src/libopensc/pkcs15-rutoken.c,
	  trunk/src/libopensc/rutoken.h, trunk/src/pkcs15init/Makefile.am,
	  trunk/src/pkcs15init/pkcs15-rutoken.c,
	  trunk/src/pkcs15init/rutoken.profile,
	  trunk/src/tools/rutoken-tool.c: ruToken fixups
	  http://www.opensc-project.org/pipermail/opensc-devel/2008-April/011057.html
	  By Aktiv Co. Aleksey Samsonov

2008-04-17 10:05  alonbl

	* trunk/etc/Makefile.am: Make sure we generate opensc.conf every
	  time There is no dependency for autoconf variables, and we
	  provide the opensc.conf for Windows MSCVER build.

2008-04-16 04:42  alonbl

	* trunk/src/common/Makefile.am,
	  trunk/src/common/compat_getopt_main.c, trunk/src/common/main.c:
	  common/main.c is part of getopt package

2008-04-16 04:32  alonbl

	* trunk/src/libopensc/sc.c: Fix last reference to VERSION and not
	  PACKAGE_VERSION

2008-04-13 17:57  alonbl

	* trunk/win32/opensc-install.bat: Add PKCS11-Spy to installer

2008-04-13 17:51  alonbl

	* trunk/win32/Makefile.am, trunk/win32/opensc-install.bat: Add
	  simple Windows installer script for OpenSC As nobody want to
	  maintain UI installer, at least provide an installation script.
	  The opensc-install.bat should be run from the installed location.

2008-04-12 21:54  alonbl

	* trunk/src/tools/opensc-tool.c: Add --get-conf-entry,
	  --set-conf-entry to opensc-tool Although not perfect, will
	  enable installer/users to perform some simple tasks against
	  configuration file.

2008-04-11 12:52  alonbl

	* trunk/doc/Makefile.am, trunk/src/include/Makefile.am,
	  trunk/src/libopensc/Makefile.am, trunk/src/pkcs11/Makefile.am,
	  trunk/src/pkcs15init/Makefile.am, trunk/src/scconf/Makefile.am,
	  trunk/src/tools/Makefile.am: More fixups to maintainer-clean

2008-04-10 12:21  alonbl

	* trunk/win32/versioninfo.rc.in.in: afxres.h is not needed

2008-04-08 19:16  alonbl

	* trunk/win32/Makefile.am: No need for Makefile.mak in win32
	  anymore

2008-04-08 18:36  alonbl

	* trunk/Makefile.am, trunk/Makefile.mak, trunk/configure.ac,
	  trunk/src/include/Makefile.am, trunk/src/include/winconfig.h,
	  trunk/src/include/winconfig.h.in,
	  trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak, trunk/src/pkcs11/Makefile.am,
	  trunk/src/pkcs11/Makefile.mak, trunk/src/pkcs15init/Makefile.am,
	  trunk/src/scconf/Makefile.am, trunk/src/tests/Makefile.mak,
	  trunk/src/tools/Makefile.am, trunk/src/tools/Makefile.mak,
	  trunk/win32/Make.rules.mak, trunk/win32/Makefile.am,
	  trunk/win32/Makefile.mak, trunk/win32/version.rc,
	  trunk/win32/versioninfo.rc.in, trunk/win32/versioninfo.rc.in.in:
	  Distribute autoconf generated files for MSVC build Construct
	  resource files and winconfig.h using autoconf substitutions.

2008-04-08 17:56  alonbl

	* trunk/doc/Makefile.am: Typeo

2008-04-07 21:35  alonbl

	* trunk/src/pkcs11/Makefile.mak, trunk/src/scconf/Makefile.mak,
	  trunk/win32/Make.rules.mak: More MSVC build additions (1) use
	  the exports for opensc-pkcs11.dll, onepin-opensc-pkcs11.dll, and
	  pkcs11-spy.dll (2) don't link common.lib with scconf.lib, to
	  avoid duplicate messages later. (3) add piv-tool to
	  openssl_programs. By Douglas E. Engert

2008-04-07 21:28  alonbl

	* trunk/src/include/winconfig.h, trunk/win32/Make.rules.mak:
	  Support OPENSC_FEATURES for MSC build

2008-04-07 19:42  alonbl

	* trunk/src/common/Makefile.mak, trunk/src/include/winconfig.h,
	  trunk/src/libopensc/Makefile.mak, trunk/src/pkcs11/Makefile.mak,
	  trunk/src/pkcs15init/Makefile.mak,
	  trunk/src/scconf/Makefile.mak, trunk/src/tools/Makefile.mak,
	  trunk/src/tools/eidenv.c, trunk/win32/Make.rules.mak,
	  trunk/win32/Makefile.am, trunk/win32/makedef.pl: Attached are
	  the latest mode to OpenSC svn 3462 to use the Makefile.mak files
	  to build on Windows. I got rutoken to compile, and took out the
	  #ifdef's I had in last week. The rutoken programmer declared
	  some variables in the middle of a block rather then having all
	  the declare statements at the beginning of a block as is
	  normally done in C. The Microsoft compile treats this as an
	  error. (Actual many errors.) The makedef.pl is no longer needed,
	  as the exports files can be used. Note that in the original
	  Makefile.mak files only opensc.def and pkcs15init.def were
	  created. winconfig.h has a number of changes. As discussed last
	  week this could be created by autoconf. I also noted that the
	  Active State Perl that was required for the makedef.pl has a
	  psed command that could be used like sed to update winconfig.h.
	  I did not attempt to do this. win32/Make.rules.mak - Use
	  ENABLE_OPENSSL and ENABLE_ZLIB src/tools/Makefile.mak - add the
	  rutoken.tool.exe src/tools/eidenv.c - use PACKAGE_VERSION
	  src/pkcs11/Makefile.mak - reorder the objest to match the list
	  in the Makefile.am. Makes it easier to read.
	  src/include/winconfig.h - The windows version of the config.h
	  Changes based on discussions on the list last week.
	  src/common/Makefile.mak - renamed modules.
	  src/pkcs15init/Makefile.mak - reordered, and added back the
	  rutoken modules replaced the use of makdef.pl to sue the exports
	  file. src/scconf/Makefile.mak - reordered objects.
	  src/libopensc/card-rutoken.c - error. Moved the declares to the
	  beginning of blocks. src/libopensc/Makefile.mak - reorder names,
	  and add rutoken. Use the libopensc.exports file.
	  src/libopensc/pkcs15-prkey-rutoken.c - more moving of declare
	  statements. By Douglas E. Engert
	  http://www.opensc-project.org/pipermail/opensc-devel/2008-April/011011.html

2008-04-07 19:25  alonbl

	* trunk/src/libopensc/card-rutoken.c,
	  trunk/src/libopensc/pkcs15-prkey-rutoken.c: ruToken C fixups
	  http://www.opensc-project.org/pipermail/opensc-devel/2008-April/011011.html
	  By Douglas E. Engert

2008-04-04 20:38  alonbl

	* trunk/src/libopensc/Makefile.am, trunk/src/pkcs11/Makefile.am,
	  trunk/src/pkcs15init/Makefile.am, trunk/src/scconf/Makefile.am,
	  trunk/src/signer/Makefile.am, trunk/win32/ltrc.inc: Some more
	  build cleanups

2008-04-04 19:21  alonbl

	* trunk/doc/Makefile.am, trunk/doc/nonpersistent/Makefile.am: Fix
	  future issue with distcheck

2008-04-04 16:46  alonbl

	* trunk/src/libopensc/internal-winscard.h: Fix some duplicate
	  symbols with Windows header files. Thanks to Douglas E. Engert.

2008-04-04 16:21  alonbl

	* trunk/src/pkcs11/pkcs11-global.c: Fix MSVC compiler error
	  http://www.opensc-project.org/pipermail/opensc-devel/2008-April/010997.html
	  Thanks to Douglas E. Engert

2008-04-04 06:05  alonbl

	* trunk/src/libopensc/internal-winscard.h: Fixup WINAPI location
	  By: Douglas E. Engert (2) Change the typdefs for the SC_*_t
	  routines. The WINAPI had to be moved. For example from: typedef
	  PCSC_API LONG (*SCardEstablishContext_t)... to: typedef LONG
	  (PCSC_API *SCardEstablishContext_t)...

2008-04-04 05:39  alonbl

	* trunk/src/libopensc/pkcs15-prkey-rutoken.c: Solve some Windows
	  conflicts

2008-04-02 19:48  alonbl

	* trunk/configure.ac: Fix default PC/SC provider for darwin,
	  thanks to Martin Paljak

2008-04-02 05:44  alonbl

	* trunk/configure.ac, trunk/etc/Makefile.am,
	  trunk/etc/opensc.conf.in, trunk/src/libopensc/reader-pcsc.c:
	  Rename PC/SC library into PC/SC provider. Sync symbols between
	  configuration and source. Put default provider in opensc.conf,
	  opensc-tool.

2008-04-01 20:41  alonbl

	* trunk/Makefile.am: Ignore -svn component so distcheck will pass
	  for svn versions

2008-04-01 20:32  alonbl

	* trunk/configure.ac: Readd -svn version suffix, removed at
	  revision 3446

2008-04-01 20:10  alonbl

	* trunk/configure.ac: Add --with-pcsc-module to configure

2008-04-01 19:58  alonbl

	* trunk/Makefile.am, trunk/doc/Makefile.am,
	  trunk/doc/nonpersistent/Makefile.am: More separate srcdir
	  fixups, make distcheck work

2008-04-01 19:04  alonbl

	* trunk/Makefile.am, trunk/aclocal/Makefile.am,
	  trunk/configure.ac, trunk/doc/Makefile.am,
	  trunk/doc/nonpersistent/Makefile.am, trunk/etc/Makefile.am,
	  trunk/src/Makefile.am, trunk/src/common/Makefile.am,
	  trunk/src/include/Makefile.am,
	  trunk/src/include/opensc/Makefile.am,
	  trunk/src/libopensc/Makefile.am, trunk/src/openssh/Makefile.am,
	  trunk/src/pkcs11/Makefile.am, trunk/src/pkcs15init/Makefile.am,
	  trunk/src/scconf/Makefile.am, trunk/src/signer/Makefile.am,
	  trunk/src/signer/npinclude/Makefile.am,
	  trunk/src/tests/Makefile.am,
	  trunk/src/tests/regression/Makefile.am,
	  trunk/src/tools/Makefile.am, trunk/win32/Makefile.am: More
	  separate srcdir fixups

2008-04-01 17:08  alonbl

	* trunk/src/libopensc/Makefile.am, trunk/src/pkcs11/Makefile.am,
	  trunk/src/pkcs15init/Makefile.am, trunk/src/scconf/Makefile.am,
	  trunk/src/tools/Makefile.am: More separate srcdir fixups

2008-04-01 16:55  alonbl

	* trunk/doc/Makefile.am, trunk/doc/nonpersistent/Makefile.am,
	  trunk/etc/Makefile.am: More separate srcdir fixups

2008-04-01 13:04  ludovic.rousseau

	* trunk/doc/Makefile.am: do not use api/*/*.xml but explicitely
	  expand the first * to avoid catching
	  api/xsl-stylesheets/catalog.xml

2008-04-01 13:01  ludovic.rousseau

	* trunk/configure.ac, trunk/doc/Makefile.am: use $(srcdir) for
	  dist_noinst_DATA

2008-04-01 12:43  ludovic.rousseau

	* trunk/doc/nonpersistent/Makefile.am,
	  trunk/src/libopensc/Makefile.am, trunk/src/pkcs11/Makefile.am,
	  trunk/src/pkcs15init/Makefile.am, trunk/src/scconf/Makefile.am,
	  trunk/src/signer/Makefile.am, trunk/src/tests/Makefile.am,
	  trunk/src/tools/Makefile.am: use $(srcdir) when needed to be
	  able to build in separate build directories using: cd foobar ;
	  ../configure srcdir=.. Thanks to Douglas E. Engert for the patch
	  http://www.opensc-project.org/pipermail/opensc-devel/2008-March/010959.html

2008-04-01 12:35  ludovic.rousseau

	* trunk/src/libopensc/pkcs15-piv.c,
	  trunk/src/libopensc/pkcs15-prkey-rutoken.c,
	  trunk/src/libopensc/pkcs15-rutoken.c: use "pkcs15.h" instead of
	  <opensc/pkcs15.h> (and similar) Thanks to Douglas E. Engert for
	  the patch
	  http://www.opensc-project.org/pipermail/opensc-devel/2008-March/010959.html

2008-04-01 09:32  ludovic.rousseau

	* trunk/src/tools/rutoken-tool.c: #include <opensc/pkcs15.h> to
	  avoid a compilation warning rutoken.h:4: warning: 'struct
	  sc_pkcs15_prkey' declared inside parameter list rutoken.h:4:
	  warning: its scope is only this definition or declaration, which
	  is probably not what you want

2008-03-29 20:34  alonbl

	* trunk/configure.ac: Trivial

2008-03-27 14:13  alonbl

	* trunk/src/pkcs11/Makefile.am: Install PKCS#11 providers at bin
	  for Windows This will place file in more expected location, and
	  reduce runtime dependencies as dependency DLL will be located at
	  the same directory.

2008-03-26 06:24  alonbl

	* trunk/src/include/opensc/Makefile.am,
	  trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/card-rutoken.c,
	  trunk/src/libopensc/libopensc.exports,
	  trunk/src/libopensc/pkcs15-prkey-rutoken.c,
	  trunk/src/libopensc/rutoken.h, trunk/src/pkcs11/Makefile.am,
	  trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/pkcs11-opensc.h, trunk/src/pkcs11/pkcs11.h,
	  trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/pkcs15init/pkcs15-rutoken.c,
	  trunk/src/tools/pkcs11-tool.c, trunk/src/tools/rutoken-tool.c:
	  ruToken cleanups Move constants out of standard files. Create
	  ruToken specific interface. Update symbols. Thread at:
	  http://www.opensc-project.org/pipermail/opensc-devel/2008-March/010917.html
	  Cleanup of:
	  http://www.opensc-project.org/pipermail/opensc-devel/2007-December/010617.html

2008-03-24 16:05  alonbl

	* trunk/configure.ac: Cleanup conventions to meet other OpenSC
	  projects

2008-03-20 13:36  alonbl

	* trunk/configure.ac: Revert last

2008-03-20 13:06  alonbl

	* trunk/configure.ac: Need AC_LIBTOOL_DLOPEN for PKCS#11 module

2008-03-19 21:23  alonbl

	* trunk/src/pkcs11/Makefile.am, trunk/src/pkcs11/sc-pkcs11.h:
	  Cygwin should load .dll version of PKCS#11

2008-03-19 20:30  alonbl

	* trunk/src/libopensc/internal-winscard.h: Fixup compile under
	  cygwin

2008-03-17 15:17  ludovic.rousseau

	* trunk/src/libopensc/pkcs15-gemsafeV1.c: pkcs15-gemsafeV1.c:478:
	  warning: 'sc_pkcs15emu_add_pubkey' defined but not used

2008-03-17 15:09  ludovic.rousseau

	* trunk/src/libopensc/pkcs15-gemsafeV1.c: change type from int to
	  unsigned int to avoid 2 compiler warnings:
	  pkcs15-gemsafeV1.c:150: warning: comparison between signed and
	  unsigned pkcs15-gemsafeV1.c:331: warning: comparison between
	  signed and unsigned
	* trunk/src/libopensc/pkcs15-gemsafeV1.c: rename index ->
	  index_local to avoid a compiler warning pkcs15-gemsafeV1.c:126:
	  warning: declaration of 'index' shadows a global declaration
	  /usr/include/string.h:304: warning: shadowed declaration is here
	* trunk/src/libopensc/pkcs15-gemsafeV1.c: use sc_debug/sc_error
	  instead of fprintf(stderr, ...)

2008-03-17 15:03  ludovic.rousseau

	* trunk/src/libopensc/card-gemsafeV1.c: add ATR for the
	  GemSafeXpresso 16k R3.2

2008-03-15 19:58  alonbl

	* trunk/etc/Makefile.am: Fix opensc.conf dist again

2008-03-15 18:12  alonbl

	* trunk/etc/Makefile.am: Don't distribute opensc.conf

2008-03-15 13:24  alonbl

	* trunk/configure.ac: Fix typo
	* trunk/configure.ac: Fixup autoconf detection

2008-03-15 11:05  alonbl

	* trunk/configure.ac, trunk/src/libopensc/Makefile.am,
	  trunk/src/pkcs15init/Makefile.am: Fix libtool versioning issues

2008-03-14 21:26  alonbl

	* trunk/configure.ac: Fixup autoconf help

2008-03-14 07:44  alonbl

	* trunk/configure.ac: Minor cleanups

2008-03-10 18:17  alonbl

	* trunk/configure.ac: Support >=autoconf-2.60

2008-03-10 16:38  aj

	* trunk/Makefile.am, trunk/doc/Makefile.am: use new MKDIR_P macro,
	  but depend on automake >= 1.10.

2008-03-10 07:10  alonbl

	* trunk/configure.ac: Remove emptyline

2008-03-10 06:45  aj

	* trunk/doc/Makefile.am: automake&co define mkdir_p, not MKDIR_P.

2008-03-09 21:24  alonbl

	* trunk/Makefile.am, trunk/aclocal/Makefile.am,
	  trunk/doc/Makefile.am, trunk/doc/nonpersistent/Makefile.am,
	  trunk/etc/Makefile.am, trunk/src/Makefile.am,
	  trunk/src/common/Makefile.am, trunk/src/include/Makefile.am,
	  trunk/src/include/opensc/Makefile.am,
	  trunk/src/libopensc/Makefile.am, trunk/src/openssh/Makefile.am,
	  trunk/src/pkcs11/Makefile.am, trunk/src/pkcs15init/Makefile.am,
	  trunk/src/scconf/Makefile.am, trunk/src/signer/Makefile.am,
	  trunk/src/signer/npinclude/Makefile.am,
	  trunk/src/tests/Makefile.am,
	  trunk/src/tests/regression/Makefile.am,
	  trunk/src/tools/Makefile.am, trunk/win32/Makefile.am: Remove
	  useless comments

2008-03-09 19:44  alonbl

	* trunk/configure.ac: Some build cleanups

2008-03-09 15:34  alonbl

	* trunk/doc/nonpersistent/Makefile.am,
	  trunk/doc/nonpersistent/export-wiki.sh: Make export-wiki.sh
	  static across projects

2008-03-09 15:13  alonbl

	* trunk/doc/nonpersistent/export-wiki.xsl: export-wiki.xsl now
	  works with new trac

2008-03-09 12:01  alonbl

	* trunk/configure.ac, trunk/src/libopensc/Makefile.am,
	  trunk/src/pkcs15init/Makefile.am: Windows DLL suffix is actually
	  delta

2008-03-09 11:48  alonbl

	* trunk/configure.ac: Add some missing AC_PROG

2008-03-08 15:36  alonbl

	* trunk/Makefile.am: We don't need version constraint

2008-03-06 16:06  alonbl

	* trunk, trunk/Makefile.am, trunk/aclocal,
	  trunk/aclocal/Makefile.am, trunk/configure.ac,
	  trunk/configure.in, trunk/doc, trunk/doc/Makefile.am,
	  trunk/doc/api, trunk/doc/api/apps, trunk/doc/api/asn1,
	  trunk/doc/api/card, trunk/doc/api/file, trunk/doc/api/html.xsl,
	  trunk/doc/api/init, trunk/doc/api/man.xsl, trunk/doc/api/misc,
	  trunk/doc/api/types, trunk/doc/api/util, trunk/doc/changelog.sh,
	  trunk/doc/export-wiki.sh, trunk/doc/export-wiki.xsl,
	  trunk/doc/generate-man.sh, trunk/doc/nonpersistent,
	  trunk/doc/nonpersistent/Makefile.am,
	  trunk/doc/nonpersistent/export-wiki.sh,
	  trunk/doc/nonpersistent/export-wiki.xsl,
	  trunk/doc/nonpersistent/svn2cl.xsl, trunk/doc/svn2cl.xsl,
	  trunk/doc/tools, trunk/doc/tools/pkcs15-profile.xml, trunk/etc,
	  trunk/etc/Makefile.am, trunk/etc/opensc.conf.in, trunk/man,
	  trunk/solaris, trunk/solaris/Makefile, trunk/src,
	  trunk/src/Makefile.am, trunk/src/common,
	  trunk/src/common/ChangeLog,
	  trunk/src/common/ChangeLog.compat_getopt,
	  trunk/src/common/LICENSE,
	  trunk/src/common/LICENSE.compat_getopt,
	  trunk/src/common/Makefile.am,
	  trunk/src/common/README.compat_getopt,
	  trunk/src/common/README.compat_strlcpy,
	  trunk/src/common/README.my_getopt,
	  trunk/src/common/README.strlcpy,
	  trunk/src/common/compat_dummy.c,
	  trunk/src/common/compat_getopt.3,
	  trunk/src/common/compat_getopt.c,
	  trunk/src/common/compat_getopt.h,
	  trunk/src/common/compat_getopt.txt,
	  trunk/src/common/compat_getpass.c,
	  trunk/src/common/compat_getpass.h,
	  trunk/src/common/compat_strlcpy.3,
	  trunk/src/common/compat_strlcpy.c,
	  trunk/src/common/compat_strlcpy.h, trunk/src/common/getopt.3,
	  trunk/src/common/getopt.txt, trunk/src/common/getpass.c,
	  trunk/src/common/my_getopt.c, trunk/src/common/my_getopt.h,
	  trunk/src/common/strlcpy.3, trunk/src/common/strlcpy.c,
	  trunk/src/common/strlcpy.h, trunk/src/include,
	  trunk/src/include/Makefile.am, trunk/src/include/opensc,
	  trunk/src/include/opensc/Makefile.am,
	  trunk/src/include/opensc/svnignore, trunk/src/libopensc,
	  trunk/src/libopensc/Makefile.am, trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/card-oberthur.c,
	  trunk/src/libopensc/card-piv.c,
	  trunk/src/libopensc/card-rutoken.c,
	  trunk/src/libopensc/compression.c, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/internal-winscard.h,
	  trunk/src/libopensc/internal.h,
	  trunk/src/libopensc/libopensc.exports,
	  trunk/src/libopensc/log.c, trunk/src/libopensc/log.h,
	  trunk/src/libopensc/opensc-config.in,
	  trunk/src/libopensc/p15card-helper.c,
	  trunk/src/libopensc/part10.h,
	  trunk/src/libopensc/pkcs15-actalis.c,
	  trunk/src/libopensc/pkcs15-atrust-acos.c,
	  trunk/src/libopensc/pkcs15-esteid.c,
	  trunk/src/libopensc/pkcs15-gemsafeGPK.c,
	  trunk/src/libopensc/pkcs15-infocamere.c,
	  trunk/src/libopensc/pkcs15-openpgp.c,
	  trunk/src/libopensc/pkcs15-piv.c,
	  trunk/src/libopensc/pkcs15-postecert.c,
	  trunk/src/libopensc/pkcs15-prkey-rutoken.c,
	  trunk/src/libopensc/pkcs15-starcert.c,
	  trunk/src/libopensc/pkcs15-tcos.c,
	  trunk/src/libopensc/pkcs15-wrap.c,
	  trunk/src/libopensc/reader-openct.c,
	  trunk/src/libopensc/reader-pcsc.c, trunk/src/libopensc/sc.c,
	  trunk/src/libopensc/ui.c, trunk/src/openssh,
	  trunk/src/openssh/Makefile.am, trunk/src/pkcs11,
	  trunk/src/pkcs11/Makefile.am,
	  trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/mechanism.c,
	  trunk/src/pkcs11/opensc-pkcs11.exports,
	  trunk/src/pkcs11/openssl.c, trunk/src/pkcs11/pkcs11-display.c,
	  trunk/src/pkcs11/pkcs11-global.c,
	  trunk/src/pkcs11/pkcs11-object.c, trunk/src/pkcs11/pkcs11-spy.c,
	  trunk/src/pkcs11/pkcs11-spy.exports,
	  trunk/src/pkcs11/sc-pkcs11.h, trunk/src/pkcs15init,
	  trunk/src/pkcs15init/Makefile.am,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c,
	  trunk/src/pkcs15init/pkcs15-rutoken.c,
	  trunk/src/pkcs15init/pkcs15init.exports,
	  trunk/src/pkcs15init/profile.c, trunk/src/scconf,
	  trunk/src/scconf/Makefile.am, trunk/src/scconf/parse.c,
	  trunk/src/scconf/scconf.exports, trunk/src/signer,
	  trunk/src/signer/Makefile.am, trunk/src/signer/npinclude,
	  trunk/src/signer/npinclude/Makefile.am,
	  trunk/src/signer/signer.exports, trunk/src/tests,
	  trunk/src/tests/Makefile.am, trunk/src/tests/pintest.c,
	  trunk/src/tests/regression,
	  trunk/src/tests/regression/Makefile.am,
	  trunk/src/tests/sc-test.c, trunk/src/tools,
	  trunk/src/tools/Makefile.am, trunk/src/tools/cardos-info.c,
	  trunk/src/tools/cryptoflex-tool.c, trunk/src/tools/eidenv.c,
	  trunk/src/tools/netkey-tool.c,
	  trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/piv-tool.c,
	  trunk/src/tools/pkcs11-tool.c, trunk/src/tools/pkcs15-crypt.c,
	  trunk/src/tools/pkcs15-init.c, trunk/src/tools/pkcs15-tool.c,
	  trunk/src/tools/rutoken-tool.c, trunk/src/tools/util.c,
	  trunk/src/tools/util.h, trunk/svnignore, trunk/win32,
	  trunk/win32/Makefile.am, trunk/win32/ltrc.inc,
	  trunk/win32/versioninfo.rc.in: Complete rewrite of OpenSC build
	  system. 1. Build system now supports MinGW (Windows) compilation
	  using msys and cross compilation. 2. Ability to explicitly
	  disable and enable dependencies of the package. 3. openct, pcsc
	  and nsplugins features are disabled by default. 4. Modified pcsc
	  driver to use pcsc dynamically, no compile time dependency is
	  required. 5. --enable-pcsc-lite configuration option renamed to
	  --enable-pcsc. 6. Install opensc.conf file (as opensc.conf.new
	  if opensc.conf exists). 7. Add--enable-doc configuration option,
	  allow installing documentation into target. 8. Add --disable-man
	  configuration option, allow msys mingw32 users to build from svn
	  without extra dependencies. 9. Add export files to each library
	  in order to export only required symbols. Windows native build
	  may use these files instead of scanning objects' symbols. 10.
	  Add opensc-tool --info to display some general information about
	  the build. 11. Create compatibility library to be linked against
	  library instread of recompiling the same source files in
	  different places. 12. Add different win32 version resource to
	  each class of outputs. 13. Make xsl-stylesheets location
	  selectable. 14. Some win32 fixups. 15. Some warning fixups. 16.
	  Many other autoconf/automake cleanups. Alon Bar-Lev svn diff -r
	  3315:3399
	  https://www.opensc-project.org/svn/opensc/branches/alonbl/mingw
	  _M . D configure.in _M src _M src/openssh M
	  src/openssh/Makefile.am _M src/tools M src/tools/rutoken-tool.c
	  M src/tools/opensc-tool.c M src/tools/cardos-info.c M
	  src/tools/pkcs15-crypt.c M src/tools/pkcs15-init.c M
	  src/tools/piv-tool.c M src/tools/netkey-tool.c M
	  src/tools/eidenv.c M src/tools/cryptoflex-tool.c M
	  src/tools/util.c M src/tools/pkcs11-tool.c M
	  src/tools/pkcs15-tool.c M src/tools/util.h M
	  src/tools/opensc-explorer.c M src/tools/Makefile.am _M
	  src/pkcs11 M src/pkcs11/pkcs11-global.c M
	  src/pkcs11/framework-pkcs15.c M src/pkcs11/mechanism.c M
	  src/pkcs11/pkcs11-display.c M src/pkcs11/pkcs11-object.c A
	  src/pkcs11/opensc-pkcs11.exports M src/pkcs11/sc-pkcs11.h M
	  src/pkcs11/pkcs11-spy.c M src/pkcs11/openssl.c M
	  src/pkcs11/Makefile.am A src/pkcs11/pkcs11-spy.exports _M
	  src/tests _M src/tests/regression M
	  src/tests/regression/Makefile.am M src/tests/sc-test.c M
	  src/tests/pintest.c M src/tests/Makefile.am _M src/include _M
	  src/include/opensc M src/include/opensc/Makefile.am A
	  src/include/opensc/svnignore M src/include/Makefile.am _M
	  src/signer _M src/signer/npinclude M
	  src/signer/npinclude/Makefile.am M src/signer/Makefile.am A
	  src/signer/signer.exports _M src/common A
	  src/common/compat_dummy.c D src/common/getopt.txt D
	  src/common/strlcpy.c D src/common/LICENSE A
	  src/common/compat_getopt.txt A src/common/compat_strlcpy.c A
	  src/common/LICENSE.compat_getopt A src/common/compat_getopt.c D
	  src/common/strlcpy.h D src/common/ChangeLog D
	  src/common/getpass.c D src/common/my_getopt.c A
	  src/common/compat_strlcpy.h A src/common/compat_getpass.c A
	  src/common/compat_getopt.h A src/common/ChangeLog.compat_getopt
	  D src/common/README.strlcpy D src/common/my_getopt.h A
	  src/common/compat_getpass.h A src/common/README.compat_strlcpy D
	  src/common/strlcpy.3 A src/common/README.compat_getopt D
	  src/common/getopt.3 D src/common/README.my_getopt A
	  src/common/compat_strlcpy.3 A src/common/compat_getopt.3 M
	  src/common/Makefile.am M src/Makefile.am _M src/pkcs15init M
	  src/pkcs15init/pkcs15-oberthur.c M src/pkcs15init/profile.c M
	  src/pkcs15init/pkcs15-lib.c M src/pkcs15init/pkcs15-rutoken.c A
	  src/pkcs15init/pkcs15init.exports M src/pkcs15init/pkcs15-gpk.c
	  M src/pkcs15init/Makefile.am _M src/scconf M
	  src/scconf/Makefile.am M src/scconf/parse.c A
	  src/scconf/scconf.exports _M src/libopensc M
	  src/libopensc/card-rutoken.c M src/libopensc/compression.c M
	  src/libopensc/sc.c M src/libopensc/card-piv.c M
	  src/libopensc/pkcs15-openpgp.c M
	  src/libopensc/pkcs15-postecert.c M src/libopensc/pkcs15-tcos.c M
	  src/libopensc/opensc-config.in M src/libopensc/reader-pcsc.c A
	  src/libopensc/internal-winscard.h M src/libopensc/ctx.c A
	  src/libopensc/libopensc.exports M src/libopensc/pkcs15-piv.c M
	  src/libopensc/pkcs15-infocamere.c M src/libopensc/internal.h M
	  src/libopensc/pkcs15-actalis.c M src/libopensc/pkcs15-starcert.c
	  M src/libopensc/card-oberthur.c M
	  src/libopensc/pkcs15-atrust-acos.c M
	  src/libopensc/p15card-helper.c D src/libopensc/part10.h M
	  src/libopensc/ui.c M src/libopensc/card-gpk.c M
	  src/libopensc/pkcs15-wrap.c M src/libopensc/pkcs15-gemsafeGPK.c
	  M src/libopensc/log.c M src/libopensc/pkcs15-esteid.c M
	  src/libopensc/pkcs15-prkey-rutoken.c M src/libopensc/log.h M
	  src/libopensc/Makefile.am M src/libopensc/reader-openct.c _M
	  aclocal M aclocal/Makefile.am _M win32 M win32/Makefile.am A
	  win32/versioninfo.rc.in A win32/ltrc.inc A configure.ac _M doc
	  _M doc/tools M doc/tools/pkcs15-profile.xml D doc/changelog.sh D
	  doc/export-wiki.xsl _M doc/api _M doc/api/file M doc/api/man.xsl
	  _M doc/api/asn1 _M doc/api/apps _M doc/api/init _M doc/api/types
	  _M doc/api/card M doc/api/html.xsl _M doc/api/misc _M
	  doc/api/util M doc/Makefile.am D doc/export-wiki.sh AM
	  doc/nonpersistent A doc/nonpersistent/export-wiki.xsl A
	  doc/nonpersistent/Makefile.am A doc/nonpersistent/export-wiki.sh
	  A doc/nonpersistent/svn2cl.xsl D doc/generate-man.sh D
	  doc/svn2cl.xsl M Makefile.am A svnignore _M etc M
	  etc/opensc.conf.in M etc/Makefile.am D man _M solaris M
	  solaris/Makefile

2008-03-06 15:04  alonbl

	* trunk/etc/opensc.conf.in, trunk/src/pkcs11/misc.c,
	  trunk/src/pkcs11/pkcs11-global.c, trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/pkcs11/slot.c: Convert constant
	  SC_PKCS11_MAX_VIRTUAL_SLOTS to configuration option.

2008-03-06 15:00  alonbl

	* trunk/src/tools/pkcs15-init.c, trunk/src/tools/pkcs15-tool.c:
	  Allow specifying application name for data objects at
	  pkcs15-init.

2008-03-06 14:56  alonbl

	* trunk/src/pkcs11/pkcs11-global.c: PKCS#11 "Application and
	  processes" instructs the sequence that should be taken after
	  fork(). Applications should call C_Initialize() immediately
	  after fork() to reinitialize the provider. The change monitor
	  the pid that calls C_Initialize(), if it is different than
	  previous C_Finalize() is called.

2008-02-29 15:37  ludovic.rousseau

	* trunk/src/libopensc/asn1.c:
	  sc_asn1_decode_integer/asn1_encode_integer: correctly manage
	  negative numbers and some positive numbers like 128

2008-02-29 10:18  martin

	* trunk/src/pkcs11/framework-pkcs15.c: * Correctly return
	  CKR_PIN_INCORRECT if PIN is out of range. * By Alon Bar-Lev from
	  svn diff -r 3397:3398
	  https://www.opensc-project.org/svn/opensc/branches/alonbl/pkcs11-login-rv

2008-02-25 20:36  nils

	* trunk/src/pkcs15init/asepcos.profile: do not use memory quota

2008-02-25 19:47  nils

	* trunk/src/pkcs15init/pkcs15-asepcos.c: check tpin before trying
	  to delete application

2008-02-14 17:02  martin

	* trunk/src/libopensc/card.c: circumvent the 'padded with zeros'
	  ATR bug on Mac OS X <=10.5.2

2008-02-10 16:13  martin

	* trunk/src/libopensc/reader-pcsc.c: * Fix protocol forcing.
	  Whenever connecting, use whatever protocol is available /
	  currently set on card and only force the protocol with a cold
	  reset when different This fixes
	  pcsc_lock->pcsc_reconnect->protocol mismatch error escaping from
	  reader-pcsc.c if some other application has set the card to a
	  different protocol. * pcsc_reconnect uses PC/SC return values,
	  pcsc_reset uses OpenSC; 0 -> SC_SUCCESS * CCID driver with
	  OmniKey 1021 returns SCARD_W_UNPOWERED_CARD when a card is
	  inserted upside-down. Translate the currently unknown error into
	  'Unresponsive card'.

2008-02-01 14:31  ludovic.rousseau

	* trunk/src/libopensc/card-atrust-acos.c,
	  trunk/src/libopensc/pkcs15-atrust-acos.c: Add support for the
	  Austrian A-Trust ACOS card Thanks to Franz Brandl for the patch
	  http://www.opensc-project.org/pipermail/opensc-devel/2008-February/010675.html

2008-01-11 16:28  ludovic.rousseau

	* trunk/src/pkcs11/Makefile.am: remove
	  $(pkcs11dir)/opensc-pkcs11.so so that creating the symbolink
	  link does not fail if the file already exists. Thanks to
	  Jean-Pierre Szikora for the bug report

2008-01-04 13:13  ludovic.rousseau

	* trunk/src/tools/util.c: print_binary(): everything except
	  printable characters (including space) are displayed in hex
	  Thanks to Ian Young for the patch
	  http://www.opensc-project.org/pipermail/opensc-devel/2008-January/010641.html

2008-01-04 08:57  ludovic.rousseau

	* trunk/src/libopensc/pkcs15-prkey-rutoken.c,
	  trunk/src/pkcs15init/pkcs15-rutoken.c: add two missing files for
	  ruToken support Thanks to Ian Young for the bug report

2008-01-03 09:44  ludovic.rousseau

	* trunk/etc/opensc.conf.in: update comment to reflect the fact
	  that lock_login is now false by default Thanks to Eric Dorland
	  for the patch

2008-01-03 08:59  ludovic.rousseau

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/card-rutoken.c,
	  trunk/src/libopensc/cardctl.h,
	  trunk/src/libopensc/pkcs15-rutoken.c,
	  trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs15init/Makefile.am,
	  trunk/src/pkcs15init/rutoken.profile,
	  trunk/src/tools/rutoken-tool.c: new patch for ruToken support
	  Thanks to Andrew V. Stepanov
	  http://www.opensc-project.org/pipermail/opensc-devel/2007-December/010631.html

2007-12-28 18:18  pk

	* trunk/src/libopensc/card-tcos.c, trunk/src/libopensc/cards.h,
	  trunk/src/libopensc/pkcs15-tcos.c,
	  trunk/src/tools/opensc-explorer.c: support for TCOS3

2007-12-21 16:40  martin

	* trunk/src/libopensc/card-mcrd.c: Remove unused code.

2007-12-21 16:37  martin

	* trunk/etc/opensc.conf.in: Remove copy of Estonian eID ATR

2007-12-19 09:58  jps

	* trunk/src/libopensc/card-cardos.c, trunk/src/libopensc/cards.h,
	  trunk/src/pkcs15init/pkcs15-cardos.c,
	  trunk/src/tools/cardos-info.c: support for Siemens CardOS V4.2C

2007-12-17 13:47  ludovic.rousseau

	* trunk/src/tools/rutoken-tool.c: redefine trace macro to avoid
	  compiler warnings when _DEBUG is not defined rutoken-tool.c:107:
	  warning: statement with no effect rutoken-tool.c:165: warning:
	  left-hand operand of comma expression has no effect

2007-12-17 13:39  ludovic.rousseau

	* trunk/etc/opensc.conf.in, trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/card-rutoken.c,
	  trunk/src/libopensc/cardctl.h, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-algo.c,
	  trunk/src/libopensc/pkcs15-rutoken.c,
	  trunk/src/libopensc/pkcs15-syn.c,
	  trunk/src/pkcs11/framework-pkcs15.c, trunk/src/pkcs11/pkcs11.h,
	  trunk/src/pkcs15init/Makefile.am,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/rutoken.profile,
	  trunk/src/tools/Makefile.am, trunk/src/tools/pkcs11-tool.c,
	  trunk/src/tools/rutoken-tool.c: add support of ruToken Thanks to
	  Andrew V. Stepanov for the patch
	  http://www.opensc-project.org/pipermail/opensc-devel/2007-December/010617.html

2007-12-07 09:46  ludovic.rousseau

	* trunk/src/libopensc/card-cardos.c, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15.c: do not add a signature prefix for
	  D-Trust cards Thanks to Simon Eisenmann for the patch
	  http://www.opensc-project.org/pipermail/opensc-devel/2007-December/010609.html

2007-11-15 15:52  ludovic.rousseau

	* trunk/src/libopensc/card-gemsafeV1.c: gemsafe_init(): the applet
	  supports also SC_ALGORITHM_RSA_HASH_NONE thanks to Douglas E.
	  Engert for the patch

2007-11-15 14:07  ludovic.rousseau

	* trunk/src/libopensc/card-gemsafeV1.c: gemsafe_flags2algref():
	  return 0x12 instead of 0x13 for SC_ALGORITHM_RSA_PAD_PKCS1
	  thanks to Douglas E. Engert for the patch

2007-11-13 09:38  ludovic.rousseau

	* trunk/configure.in, trunk/src/pkcs11/Makefile.am: add support of
	  /usr/lib/pkcs11/ directory. See
	  http://wiki.cacert.org/wiki/Pkcs11TaskForce Thanks to Alon
	  Bar-Lev for the better patch

2007-11-13 09:13  ludovic.rousseau

	* trunk/src/libopensc/pkcs15-gemsafeV1.c:
	  sc_pkcs15emu_gemsafeV1_init(): remove addition of
	  SC_ALGORITHM_RSA_PAD_PKCS1 algorithm since it is already done in
	  card-gemsafeV1.c:gemsafe_init() Thanks to Douglas E. Engert for
	  the patch

2007-11-13 07:52  ludovic.rousseau

	* trunk/src/libopensc/card-gemsafeV1.c,
	  trunk/src/libopensc/pkcs15-gemsafeV1.c: remove spaces and tabs
	  at end of lines

2007-11-13 07:48  ludovic.rousseau

	* trunk/src/libopensc/pkcs15-gemsafeV1.c: sc_pkcs15emu_add_pin():
	  do not devide pin length by 2 in BCD case since it is already
	  done in sec.c line 262 Thanks to Douglas E. Engert for the patch

2007-11-12 10:18  ludovic.rousseau

	* trunk/etc/opensc.conf.in, trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/card-gemsafeV1.c, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15-gemsafeV1.c,
	  trunk/src/libopensc/pkcs15-syn.c: add initial support of Gemsafe
	  applet V1 cards Thanks to David Mattes for the patch
	  http://www.opensc-project.org/pipermail/opensc-devel/2007-November/010558.html

2007-11-12 10:16  ludovic.rousseau

	* trunk/src/libopensc/pkcs15-gemsafeGPK.c: rename
	  sc_pkcs15emu_gemsafe_init_ex() in
	  sc_pkcs15emu_gemsafeGPK_init_ex() and
	  sc_pkcs15emu_gemsafe_init() in sc_pkcs15emu_gemsafeGPK_init()

2007-11-12 10:09  ludovic.rousseau

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/pkcs15-gemsafe.c,
	  trunk/src/libopensc/pkcs15-gemsafeGPK.c: rename pkcs15-gemsafe.c
	  in pkcs15-gemsafeGPK.c

2007-11-12 09:59  ludovic.rousseau

	* trunk/etc/opensc.conf.in, trunk/src/libopensc/pkcs15-gemsafe.c,
	  trunk/src/libopensc/pkcs15-syn.c: rename gemsafe in gemsafeGPK
	  so we can also have gemsafeV1, gemsafeV2, etc.

2007-11-09 08:35  ludovic.rousseau

	* trunk/src/libopensc/card-piv.c,
	  trunk/src/libopensc/pkcs15-piv.c: patch from Douglas E. Engert
	  for bug #165

2007-11-09 08:29  ludovic.rousseau

	* trunk/src/libopensc/card-setcos.c: setcos_match_card(): replace
	  sc_error() by sc_debug() since some cards are not SetCOS bug
	  respond to the APDU: 00 CA DF 30 05

2007-10-06 12:03  gurer

	* trunk/src/libopensc/card-akis.c: This should be limited too.

2007-09-29 07:43  nils

	* trunk/src/libopensc/card-asepcos.c: ignore paths with a AID in it

2007-09-28 19:10  nils

	* trunk/src/pkcs15init/pkcs15-asepcos.c: the so-puk is optional

2007-09-27 18:19  gurer

	* trunk/src/tools/opensc-explorer.c: two new debugging commands.
	  asn1 2f01 Dumps asn.1 content of a file apdu
	  00:20:00:00:04:31:31:32:32 Send the custom APDU inside the
	  session

2007-09-27 06:24  gurer

	* trunk/src/tools: cosmetic patch piv-tool and netkey-tool added
	  to the svn:ignore

2007-09-23 10:19  gurer

	* trunk/src/libopensc/card-akis.c: AKIS can handle bigger data
	  blocks, but that causes GET_RESPONSE calls. So for a 300 byte
	  file, this saves one transaction (244 + 56) instead of (244 + 11
	  + 45).

2007-09-22 20:47  gurer

	* trunk/src/libopensc/card-akis.c: On a third thought, it is
	  better to not introduce any confusion at all :)

2007-09-22 20:34  gurer

	* trunk/src/libopensc/card-akis.c: On a second thought, it is
	  better to stay compatible with released 0.11.4 code, and still
	  use ISO7814 pin_cmd.

2007-09-17 11:41  gurer

	* trunk/src/libopensc/card-akis.c: * instead of using a custom PIN
	  VERIFY command, pin_reference is reported back, and used for
	  verifying. * PIN CHANGE command is implemented (that is really
	  different from ISO7816) * max_pin_len is set to 16 in akis_init

2007-09-10 07:09  aj

	* trunk/doc/Makefile.am: cleanup *.tmp as well.

2007-09-10 07:03  aj

	* trunk/Makefile.am: Add code to check version information in
	  several files. done by Peter Stuge.

2007-09-10 06:41  aj

	* trunk/NEWS: Release 0.11.4 without changes.

2007-09-10 06:22  aj

	* trunk/src/libopensc/Makefile.mak, trunk/win32/Make.rules.mak:
	  Appy patch by magog to build a static opensc_a.lib on windows.
	  Also removes *.lib on "make clean".

2007-09-04 05:39  aj

	* trunk/src/libopensc/card.c: fix typo found by Grer zen.

2007-08-29 19:54  nils

	* trunk/src/libopensc/card-asepcos.c: properly check return value

2007-08-29 19:32  nils

	* trunk/src/libopensc/card-asepcos.c: bugfix: select DF before
	  setting sec. attributes

2007-08-28 20:35  aj

	* trunk/src/libopensc/card-akis.c: akis update by Grer zen:
	  implement logout code.
	* trunk/src/libopensc/apdu.c: fix typo, found by Grer zen.

2007-08-28 20:34  aj

	* trunk/src/pkcs11/framework-pkcs15.c: fix typo, found by Grer
	  zen.

2007-08-22 18:38  aj

	* trunk/src/libopensc/card-akis.c: mark supported padding and a
	  comment - by Grer zen
	* trunk/src/libopensc/apdu.c, trunk/src/libopensc/types.h: fix
	  typos, patch by Grer zen

2007-08-20 20:20  aj

	* trunk/src/include/winconfig.h, trunk/win32/version.rc: update
	  version info for windows.

2007-08-19 18:55  aj

	* trunk/configure.in: trunk now after 0.11.4 release.
	* trunk/NEWS: Update news file.

2007-08-19 18:37  aj

	* trunk/aclocal/libassuan.m4: update libassuan m4 macro package to
	  current version.

2007-08-14 06:17  aj

	* trunk/src/libopensc/Makefile.am: fix typo.

2007-08-14 06:02  aj

	* trunk/src/tools/opensc-explorer.c: restores ability to change
	  opensc-explorer debug level at runtime, using "debug" command
	  from opensc prompt. by Jakub Bogusz

2007-08-14 05:55  aj

	* trunk/aclocal/Makefile.am, trunk/aclocal/libassuan.m4: keep
	  libassuan as most users will not have this.

2007-08-13 19:10  aj

	* trunk/src/libopensc/Makefile.am, trunk/src/pkcs11/Makefile.am:
	  add cflags for ltdl.h where needed.

2007-08-13 08:32  ludovic.rousseau

	* trunk/src/tests/Makefile.am, trunk/src/tools/Makefile.am: the
	  commands line tools do not call lt_dlopen() so do not need to
	  link with libltdl

2007-08-13 08:30  ludovic.rousseau

	* trunk/configure.in, trunk/src/libopensc/Makefile.am,
	  trunk/src/pkcs11/Makefile.am: use LTLIB_CFLAGS and LTLIB_LIBS
	  instead of the global LIBS to find and use libltdl thanks to
	  Alon Bar-Lev for the patch

2007-08-10 13:06  ludovic.rousseau

	* trunk/aclocal/Makefile.am, trunk/aclocal/lib-ld.m4,
	  trunk/aclocal/lib-link.m4, trunk/aclocal/lib-prefix.m4:
	  lib-link.m4, lib-prefix.m4 and lib-ld.m4 are provided by gettext
	  but is no more needed after revision 3239

2007-08-10 13:05  ludovic.rousseau

	* trunk/aclocal/Makefile.am, trunk/aclocal/pkg.m4: pkg.m4 is an
	  external dependency provided by pkg-config (or similar) package

2007-08-10 13:04  ludovic.rousseau

	* trunk/aclocal/Makefile.am, trunk/aclocal/libassuan.m4:
	  libassuan.m4 is an external dependency provided by libassuan-dev
	  (or similar) package

2007-08-10 12:56  ludovic.rousseau

	* trunk/configure.in: do not use AC_LIB_LINKFLAGS() since this
	  macro is provided by gettext and we do not use gettext. Use
	  AC_CHECK_LIB() instead

2007-08-10 12:51  ludovic.rousseau

	* trunk/man: propset svn:ignore to ignore unversioned files

2007-08-08 20:06  aj

	* trunk/src/libopensc/card-cardos.c, trunk/src/libopensc/cards.h,
	  trunk/src/pkcs15init/pkcs15-cardos.c,
	  trunk/src/tools/cardos-info.c: add information about cardos 4.2b
	  - latest cardos update.

2007-08-03 07:47  aj

	* trunk/src/libopensc/pkcs15.c: Add same hack for Prime cards.

2007-08-02 13:53  ludovic.rousseau

	* trunk/src/pkcs15init/Makefile.am: AM_LDFLAGS is not used in
	  libpkcs15init_la_LDFLAGS so explicitly use it

2007-07-28 18:27  aj

	* trunk/aclocal/Makefile.am, trunk/aclocal/lib-ld.m4,
	  trunk/aclocal/lib-link.m4, trunk/aclocal/lib-prefix.m4,
	  trunk/aclocal/libassuan.m4, trunk/aclocal/pkg.m4: revert
	  revision 3403 + 3404, seems to break mac os X.

2007-07-28 18:22  aj

	* trunk/src/tools/pkcs11-tool.c: pkcs11-tool crashes while
	  printing its usage message. fixed by Ville Skytt.

2007-07-28 18:18  aj

	* trunk/src/tools/cryptoflex-tool.c: cryptoflex-tool.c:505:
	  warning: array subscript is above array bounds gcc 4.3 warning,
	  reported and fixed by novell: Problem found by David Binderman
	  Patch created by Michal Vaner closes our trac bug #153 and
	  novell bug 238660

2007-07-24 06:42  aj

	* trunk/src/libopensc/card-akis.c: fix a compiler warning.

2007-07-22 19:56  aj

	* trunk/src/libopensc/card-akis.c: Grer zen: * akis_get_data()
	  implemented * akis_delete_file() implemented *
	  akis_set_security_env() implemented, pkcs15 signing works now *
	  life cycle set/get via cardctl implemented * card_ops commented,
	  so it is clear whether a function is supported via iso7816
	  implementation or not * mark pin apdu as sensitive in
	  akis_pin_cmd

2007-07-21 07:31  aj

	* trunk/src/signer/Makefile.am: create plugin directory if it does
	  not exist.

2007-07-20 18:50  aj

	* trunk/configure.in, trunk/src/signer/Makefile.am: add explicit
	  option to enable/disable the ns plugin. patch by Alon Bar-Lev.

2007-07-20 14:38  aj

	* trunk/src/libopensc/pkcs15-sec.c: oops, define tmplen at start
	  of block.

2007-07-20 13:47  aj

	* trunk/src/libopensc/pkcs15-pubkey.c: silence a warning we get
	  with siemens cards.

2007-07-20 12:30  aj

	* trunk/src/libopensc/asn1.c: asn1_decode_entry() allocates
	  (objlen - 1) bytes for SC_ASN1_UTF8STRING types with
	  SC_ASN1_ALLOC flag, then calls the sc_asn1_decode_utf8string()
	  function which then fails with BUFFER TOO SMALL cause it wants
	  to end the string with an extra NULL. allocation size was
	  supposed to be objlen + 1. Patch by Grer zen

2007-07-20 12:28  aj

	* trunk/NEWS, trunk/src/libopensc/card-akis.c: Grer zen send
	  another akis update: * create_file implemented * EF(DIR) hack
	  removed, it is easier to put a real EF(DIR) *
	  SC_CARDCTL_GET_SERIALNR implemented

2007-07-20 12:19  aj

	* trunk/NEWS, trunk/src/libopensc/pkcs15-sec.c,
	  trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h: Sign
	  by using the decrypt function.

2007-07-17 20:01  aj

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak,
	  trunk/src/libopensc/card-akis.c, trunk/src/libopensc/cards.h,
	  trunk/src/libopensc/ctx.c, trunk/src/libopensc/opensc.h: add
	  akis support by Grer zen.

2007-07-15 15:29  aj

	* trunk/src/libopensc/pkcs15-piv.c: Douglas E. Engert: The IdAlly
	  CSP calls C_FindObjectsInit looking for CK_PRIVATE_KEY before
	  C_Login with a pin. If it does not find any, it fails. The
	  pkcs15-piv.c in 0.11.3 and 0.11.3-pre3 set the pubkey and prvkey
	  objects as private. This patch removes the
	  SC_PKCS15_CO_FLAG_PRIVATE so IdAlly will work with the PIV cards.

2007-07-11 14:47  aj

	* trunk/configure.in: trunk is now post 0.11.3 release.

2007-07-11 14:46  aj

	* trunk/NEWS: more updates.

2007-07-11 09:35  aj

	* trunk/src/tests/regression/crypt0007: put openssl rsautl in raw
	  signatures mode.

2007-07-11 09:15  aj

	* trunk/src/tests/regression/functions: allow regression test
	  suite to work installed as well.

2007-07-11 09:10  aj

	* trunk/src/tests/regression/Makefile.am,
	  trunk/src/tests/regression/bintest,
	  trunk/src/tests/regression/crypt0007: add test for decrypting
	  binary data of key size.

2007-07-11 09:07  aj

	* trunk/src/tests/regression/functions: stop using p15dump, switch
	  to pkcs15-tool --dump.

2007-07-10 13:03  aj

	* trunk/NEWS, trunk/doc/export-wiki.sh: document latest changes
	  and update wiki export script.

2007-07-10 12:04  vtarasov

	* trunk/src/libopensc/ctx.c: typo, manifested when explicitely
	  using 'reader_drivers = internal;' in opensc.conf

2007-07-09 14:52  aj

	* trunk/src/tools/pkcs15-init.c: use static without inline - the
	  compiler can optimize the function as inline or not, whatever it
	  prefers. "static inline" is not supported by the visual studio c
	  compiler.

2007-07-09 14:17  aj

	* trunk/src/pkcs15init/pkcs15-cardos.c,
	  trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-incrypto34.c: inline is something
	  the compiler can decide on his own. static is a good hint to the
	  compiler for that - the function isn't used outside of this
	  file. "static inline" is not valid, visual studio doesn't
	  compile that.

2007-07-09 08:28  aj

	* trunk/configure.in: Revert last change, breaks building opensc:
	  ../../src/libopensc/.libs/libopensc.so: undefined reference to
	  `lt_dlopen' ...

2007-07-07 11:29  nils

	* trunk/src/libopensc/card-cardos.c: improve atr matching for
	  cardos m4.01[a]

2007-07-04 14:25  vtarasov

	* trunk/src/libopensc/card-oberthur.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c: Enables the second PIN
	  (one-time PIN) defined for the same application DF

2007-07-04 09:19  aj

	* trunk/doc/Makefile.am, trunk/doc/export-wiki.sh: add image files
	  to release tar.gz

2007-07-04 08:55  ludovic.rousseau

	* trunk/aclocal/Makefile.am: update the list of distributed .m4
	  files

2007-07-04 08:54  ludovic.rousseau

	* trunk/aclocal/lib-ld.m4, trunk/aclocal/lib-link.m4,
	  trunk/aclocal/lib-prefix.m4, trunk/aclocal/libassuan.m4,
	  trunk/aclocal/pkg.m4: libassuan.m4 is provided by libassuan-dev
	  pkg.m4 is provided by pkg-config lib-link.m4, lib-prefix.m4 and
	  lib-ld.m4 are provided by gettext but should not be needed after
	  revision 3202

2007-07-04 08:46  ludovic.rousseau

	* trunk/configure.in: do not use AC_LIB_LINKFLAGS() since this
	  macro is provided by gettext and we do not use gettext. Use
	  AC_CHECK_LIB() instead

2007-07-04 06:51  aj

	* trunk/NEWS: update NEWS with list of all changes (that I
	  remember).

2007-07-03 20:44  nils

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak,
	  trunk/src/libopensc/card-asepcos.c,
	  trunk/src/libopensc/cardctl.h, trunk/src/libopensc/cards.h,
	  trunk/src/libopensc/ctx.c, trunk/src/libopensc/opensc.h,
	  trunk/src/pkcs15init/Makefile.am,
	  trunk/src/pkcs15init/Makefile.mak,
	  trunk/src/pkcs15init/asepcos.profile,
	  trunk/src/pkcs15init/pkcs15-asepcos.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c: add support for asepcos

2007-07-03 19:42  nils

	* trunk/src/libopensc/card-cardos.c: re-add cardos m4.01a ATR

2007-07-03 15:33  vtarasov

	* trunk/src/libopensc/card-oberthur.c: PIN unblock error. Internal
	  pin reference procedure updated.

2007-07-03 14:15  aj

	* trunk/configure.in, trunk/src/include/winconfig.h,
	  trunk/win32/version.rc: fix version numbers preparing for next
	  release.

2007-07-03 14:14  aj

	* trunk/src/pkcs11/pkcs11.h: update pkcs11.h header file from
	  scute.

2007-07-03 13:44  vtarasov

	* trunk/src/libopensc/card-oberthur.c: Error when output
	  allocation length is not equal to the signature length.
	  'Compute_signature' now returns the answer's length

2007-06-29 14:14  aj

	* trunk/src/tools/eidenv.c: remove unused definition.

2007-06-29 13:31  aj

	* trunk/src/tools/opensc-tool.c: fix duplicate static.

2007-06-29 13:19  aj

	* trunk/src/tools/cardos-info.c,
	  trunk/src/tools/cryptoflex-tool.c, trunk/src/tools/eidenv.c,
	  trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/piv-tool.c,
	  trunk/src/tools/pkcs11-tool.c, trunk/src/tools/pkcs15-crypt.c,
	  trunk/src/tools/pkcs15-init.c, trunk/src/tools/pkcs15-tool.c:
	  make app_name, options and option_help static.

2007-06-25 18:01  nils

	* trunk/src/libopensc/card-cardos.c: implement more flexible
	  cardos detection func

2007-06-24 21:03  aj

	* trunk/src/tools/pkcs11-tool.c: Douglas E. Engert: fix more
	  compiler warnings.

2007-06-21 13:58  aj

	* trunk/src/pkcs11/hack-disabled.c,
	  trunk/src/pkcs11/hack-enabled.c,
	  trunk/src/signer/opensc-support.c,
	  trunk/src/tools/netkey-tool.c, trunk/src/tools/pkcs15-init.c:
	  silence more warnings by gcc/sparse.

2007-06-21 13:46  ludovic.rousseau

	* trunk/src/tools/cardos-info.c,
	  trunk/src/tools/cryptoflex-tool.c,
	  trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/piv-tool.c,
	  trunk/src/tools/pkcs11-tool.c, trunk/src/tools/pkcs15-crypt.c,
	  trunk/src/tools/pkcs15-init.c, trunk/src/tools/pkcs15-tool.c,
	  trunk/src/tools/util.c, trunk/src/tools/util.h: do not use
	  global variables app_name, options and option_help so they can
	  be static

2007-06-21 13:38  aj

	* trunk/src/tools/cardos-info.c,
	  trunk/src/tools/cryptoflex-tool.c, trunk/src/tools/eidenv.c,
	  trunk/src/tools/netkey-tool.c, trunk/src/tools/pkcs11-tool.c,
	  trunk/src/tools/pkcs15-crypt.c, trunk/src/tools/pkcs15-init.c:
	  fix more warnings.

2007-06-21 13:29  ludovic.rousseau

	* trunk/src/tools/eidenv.c: eidenv.c:55: attention : &#8216;option_help&#8217;
	  defined but not used
	* trunk/src/tests/pintest.c: initialize objs to NULL to avoid:
	  pintest.c:83: attention : &#8216;objs&#8217; may be used uninitialized in
	  this function

2007-06-21 13:20  ludovic.rousseau

	* trunk/src/tools/pkcs11-tool.c: correct a typo

2007-06-21 12:58  aj

	* trunk/src/pkcs11/debug.c, trunk/src/signer/dialog.c,
	  trunk/src/signer/opensc-crypto.c,
	  trunk/src/signer/opensc-support.c, trunk/src/tests/print.c,
	  trunk/src/tools/cardos-info.c,
	  trunk/src/tools/cryptoflex-tool.c, trunk/src/tools/eidenv.c,
	  trunk/src/tools/netkey-tool.c, trunk/src/tools/piv-tool.c,
	  trunk/src/tools/pkcs11-tool.c, trunk/src/tools/pkcs15-crypt.c,
	  trunk/src/tools/pkcs15-tool.c: silence more warnings.

2007-06-21 12:14  aj

	* trunk/src/pkcs11/pkcs11-display.c, trunk/src/tests/sc-test.h:
	  fix broken changes.

2007-06-21 12:06  aj

	* trunk/src/pkcs11/debug.c: make sc_pkcs11_print_attrs non static.

2007-06-21 12:01  aj

	* trunk/src/libopensc/card-muscle.c,
	  trunk/src/libopensc/pkcs15-piv.c, trunk/src/pkcs11/debug.c,
	  trunk/src/pkcs11/framework-pkcs15.c, trunk/src/pkcs11/openssl.c,
	  trunk/src/pkcs11/pkcs11-display.c,
	  trunk/src/pkcs11/pkcs11-global.c, trunk/src/pkcs11/pkcs11-spy.c,
	  trunk/src/tests/lottery.c, trunk/src/tests/p15dump.c,
	  trunk/src/tests/pintest.c, trunk/src/tests/sc-test.c,
	  trunk/src/tests/sc-test.h, trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/pkcs15-tool.c:
	  silence more gcc/sparse warnings.

2007-06-21 11:34  aj

	* trunk/src/libopensc/pkcs15-tcos.c: revert change - is needed by
	  pkcs15-syn.c

2007-06-21 11:07  aj

	* trunk/src/libopensc/card-mcrd.c,
	  trunk/src/libopensc/card-muscle.c,
	  trunk/src/libopensc/card-oberthur.c,
	  trunk/src/libopensc/card-piv.c,
	  trunk/src/libopensc/compression.c,
	  trunk/src/libopensc/pkcs15-atrust-acos.c,
	  trunk/src/libopensc/pkcs15-gemsafe.c,
	  trunk/src/libopensc/pkcs15-piv.c,
	  trunk/src/libopensc/pkcs15-starcert.c,
	  trunk/src/libopensc/pkcs15-tcos.c,
	  trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c,
	  trunk/src/pkcs15init/pkcs15-setcos.c,
	  trunk/src/pkcs15init/profile.c: fix more warnings found by
	  gcc/sparse.

2007-06-21 10:07  aj

	* trunk/src/common/strlcpy.c, trunk/src/libopensc/card-belpic.c,
	  trunk/src/libopensc/card-cardos.c,
	  trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/card-incrypto34.c,
	  trunk/src/libopensc/card-jcop.c,
	  trunk/src/libopensc/card-mcrd.c,
	  trunk/src/libopensc/card-oberthur.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/muscle-filesystem.c,
	  trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-syn.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/reader-openct.c, trunk/src/libopensc/sc.c,
	  trunk/src/libopensc/ui.c, trunk/src/scconf/test-conf.c: fix
	  compiler/sparse warnings.

2007-06-21 09:37  aj

	* trunk/src/pkcs11/framework-pkcs15.c, trunk/src/pkcs11/misc.c,
	  trunk/src/pkcs11/pkcs11-object.c,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/tools/pkcs11-tool.c: Alessandro Premoli: add support
	  for reading, writing and deleting private (require cache_pins)
	  and public data objects in PKCS11. updated the pkcs11-tool and
	  fixed a few bugs in the code. Tested on an aladdin etoken.

2007-06-21 07:11  aj

	* trunk/src/pkcs11/framework-pkcs15.c: Douglas E. Engert: Looking
	  at framework-pkcs11.c, it looks like there is a bug in the
	  handling of auth_count, if there is more then one pin, and one
	  of the pins is a SC_PKCS15_PIN_FLAG_SO_PIN. The for loop at line
	  767 will add a slot for each non SO_PIN or UNBLOCKING_PIN. But
	  at line 812, the auth_count is still set to the number of pins,
	  even though the SO_PIN did not cause a new slot to be allocated
	  and thus the test of hide_empty_tokens will not be used. With
	  the attached patch, I can get the expected behavior when
	  hide_empty_tokens = yes in the opensc.conf from pkcs11-tool -L,
	  pkcs11-tool -O and pkcs11-tool -O -l There is only 1 slot
	  allocated, the pkcs11-tool -O shows all the public objects, and
	  pkcs11-tool -O -l (after PIN) shows all the objects, and Heimdal
	  PKINIT still runs. I still think that if two or more slots need
	  to be allocated for multiple auth pins, then all the public
	  objects should be added to each. I have an additional mod for
	  this too. Since the cards I am working with only have 1 pin, the
	  attached mods works for me. Note it looks like the
	  pkcs15-openpgp.c might also be affected by this change as it
	  defines two pins an auth pin and a SO_PIN, much like the PIV
	  card does.

2007-06-21 07:07  aj

	* trunk/src/libopensc/card-piv.c,
	  trunk/src/libopensc/pkcs15-piv.c, trunk/src/tools/piv-tool.c:
	  Douglas E. Engert: Major improvments in the PIV card modules: *
	  OpenSC-0.11.2 only supported RSA 1K keys, the patch supports RSA
	  2K and 3K keys. * The FASC-N in the CHUID object is used as the
	  card serial number. * A PIV card may have additional objects.
	  These can now be read by pkcs11-tool and pkcs15-tool. * The
	  p15card-helper.c module is no longer used. The code to call the
	  sc_pkcs15emu_* routines has been moved back into pkcs15-piv.c
	  and uses existing OpenSC routines to parse the certificate to
	  find the modulus_len. * pkcs15-piv.c will now get the
	  modulus_len from the certificates to store into the emulated
	  prvkey an pubkey objects as they are being created using the
	  sc_pkcs15emu_* routines. * The caching code that was added to
	  card-piv.c in 0.11.2 is disabled, as pkcs15-piv.c will cache the
	  certificate using existing OpenSC routines. * piv-tool will now
	  print a serial number. * The key-usage bits for prvkey and
	  pubkey objects are set in pkcs15-piv.c * The PIV "9E" key was
	  added. It is not a private object, and can be used without a
	  PIN. It is used with the "Certificate for Card Authenticaiton".
	  * When used with the OpenSSL engine to generate a certificate
	  request, the public key saved by piv-tool during a "generate
	  asymmetric key pair" card command can be read from a file
	  pointed at by the environment variable PIV_9*_KEY. Where * is A,
	  C, D or E. * In the card_atr section of opensc.conf, flags = 20;
	  can be used to only show the PIV Authentication cert. This
	  feature was in 0.11.1 but was dropped in 0.11.2 when the
	  p15card-helper.c was introduced.

2007-05-25 20:10  aj

	* trunk/src/libopensc/log.c: Added the application name to logging
	  to allow for easier debugging. Since a lot of testing needed
	  multiple applications to be running, it became important to know
	  what application was making each log entry. This was reported by
	  Russell Larner <rlarner@rsasecurity.com> on 5/17/2007

2007-05-25 20:09  aj

	* trunk/src/tools/pkcs11-tool.c: If a PKCS11 get attrribute failes
	  for some reason, pkcs11-tool may return garbage along with the
	  error message. The attached patch to pkcs11-tool.c initializes
	  the type to 0 so the attribute will be 0 in case of an error. by
	  Douglas E. Engert

2007-05-25 20:06  aj

	* trunk/src/pkcs11/framework-pkcs15.c: The framework-pkcs15 will
	  filed the modulus in a certificate and copy it to a pubkey or
	  from apubkey to a privkey object. But it does not copy the
	  modulus_len. This patch will look at pub_info->modulus_len and
	  prv_info->modulus_len and copy the modulus_len while copying the
	  modulus. This will be used with the pkcs15-piv code when it
	  creates pub and priv objects, as it has no way other then from
	  the certificates to know the modulus_len. By Douglas E. Engert.

2007-05-13 15:43  nils

	* trunk/src/libopensc/card-gpk.c: 252 bytes work as well

2007-05-13 09:32  nils

	* trunk/src/libopensc/card-oberthur.c: fix warning

2007-05-13 09:31  nils

	* trunk/src/libopensc/card-gpk.c: bugfix: try to read at most 248
	  bytes

2007-05-13 09:30  nils

	* trunk/src/libopensc/apdu.c: bugfix: avoid recursion

2007-05-04 07:13  aj

	* trunk/doc/export-wiki.sh: fix wiki html export.

2007-05-04 06:17  aj

	* trunk/NEWS: add date for 0.11.2

2007-04-25 06:53  aj

	* trunk/configure.in: probe for readline+ncurses too.

2007-04-24 07:59  aj

	* trunk/NEWS: update NEWS with latest changes.

2007-04-24 07:54  aj

	* trunk/etc/opensc.conf.in, trunk/src/pkcs11/misc.c: enable pin
	  caching by default.

2007-04-24 07:52  aj

	* trunk/src/libopensc/ctx.c, trunk/src/libopensc/opensc.h: use
	  255/256 bytes as max_send/recv_size by default.

2007-04-23 19:23  nils

	* trunk/src/pkcs15init/pkcs15-cardos.c: increase size of pin buffer

2007-04-23 19:18  nils

	* trunk/src/tools/pkcs15-tool.c: authenticate if data object is
	  protected

2007-04-15 17:26  nils

	* trunk/src/libopensc/card-openpgp.c: request at most for 256 bytes

2007-04-10 19:49  aj

	* trunk/src/libopensc/muscle.c: Steve Jacobs: fix muscle driver.

2007-04-01 17:03  nils

	* trunk/src/pkcs11/pkcs11-global.c: bugfix: don't use the size of
	  a void pointer, thanks to Carl Przybylek <crprzyby@gmail.com>

2007-03-29 10:25  martin

	* trunk/src/pkcs11/Makefile.am, trunk/src/pkcs11/Makefile.mak,
	  trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/hack-disabled.c,
	  trunk/src/pkcs11/hack-enabled.c: Build a pkcs11 module with only
	  one pin exposed to overcome issues described in #132. Closes #132

2007-03-21 09:41  martin

	* trunk/src/libopensc/reader-pcsc.c: * Add support for
	  SCARD_E_NO_READERS_AVAILABLE to describe errors like: {{{
	  sc.c:201:sc_detect_card_presence: returning with: Unknown error
	  SCardGetStatusChange failed: 8010002e }}} * When doing a reset
	  with pcsc_reconnect do a cold reset instead a warm one to allow
	  next change * Change the protocol force feature to change the
	  protocol with a hard reset only when needed to prevent: {{{
	  SCardConnect failed: 8010000f card.c:228:sc_connect_card:
	  returning with: Unknown error }}}

2007-03-21 09:34  martin

	* trunk/src/libopensc/Makefile.mak: Missing file

2007-03-21 09:33  martin

	* trunk/src/libopensc/card-mcrd.c: Make sure the right thing is
	  always selected on the card by bypassing cache

2007-03-21 09:32  martin

	* trunk/src/libopensc/pkcs15-esteid.c: Simplify esteid detection

2007-03-18 17:55  aj

	* trunk/src/tools/piv-tool.c: fix --serial option.

2007-03-16 20:44  aj

	* trunk/configure.in: changes to trunk won#t go into 0.11.2.

2007-03-16 20:42  aj

	* trunk/NEWS: document changes in this release.

2007-03-15 07:59  ludovic.rousseau

	* trunk/doc/api/card/sc_format_apdu.xml,
	  trunk/doc/api/card/sc_get_data.xml,
	  trunk/doc/api/card/sc_put_data.xml,
	  trunk/doc/api/file/sc_append_record.xml,
	  trunk/doc/api/file/sc_delete_record.xml,
	  trunk/doc/api/file/sc_read_binary.xml,
	  trunk/doc/api/file/sc_read_record.xml,
	  trunk/doc/api/file/sc_update_binary.xml,
	  trunk/doc/api/file/sc_update_record.xml,
	  trunk/doc/api/file/sc_write_binary.xml,
	  trunk/doc/api/file/sc_write_record.xml,
	  trunk/doc/api/init/sc_establish_context.xml: remove <link
	  linkend="foo">Foo</link> that can't be solved and generates
	  Error: no ID for constraint linkend: foo

2007-03-14 18:26  aj

	* trunk/src/libopensc/Makefile.am: add missing header file to
	  noinst_HEADERS.

2007-03-13 23:10  aj

	* trunk/src/libopensc/card-acos5.c, trunk/src/libopensc/cards.h:
	  Ian Young: use proper card type for acos5.

2007-03-13 20:59  aj

	* trunk/src/tools/Makefile.am: Douglas E. Engert: piv-tool needs
	  openssl, so compile only if it is present.

2007-03-13 20:57  aj

	* trunk/src/libopensc/compression.c,
	  trunk/src/libopensc/p15card-helper.c: Patch by Douglas E.
	  Engert: use c style comments and different header files (for mac
	  os X?).

2007-03-13 13:38  aj

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/card-acos5.c, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/opensc.h: Add acos5 driver by Ian Young.

2007-03-12 20:17  aj

	* trunk/src/libopensc/opensc.h: test new chop size (256 bytes by
	  default).

2007-03-12 20:15  aj

	* trunk/etc/opensc.conf.in, trunk/src/libopensc/card-piv.c,
	  trunk/src/libopensc/compression.c,
	  trunk/src/libopensc/compression.h,
	  trunk/src/libopensc/p15card-helper.c,
	  trunk/src/libopensc/p15card-helper.h,
	  trunk/src/libopensc/pkcs15-piv.c, trunk/src/pkcs11/Makefile.mak:
	  changes by Douglas E. Engert: change the do_decompress* to
	  sc_decompress* and the initialize_* to sc_pkcs15emu_initialize_*
	  in the new code.

2007-03-10 10:46  aj

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak,
	  trunk/src/libopensc/card-piv.c,
	  trunk/src/libopensc/compression.c,
	  trunk/src/libopensc/compression.h,
	  trunk/src/libopensc/p15card-helper.c,
	  trunk/src/libopensc/p15card-helper.h,
	  trunk/src/libopensc/pkcs15-piv.c, trunk/src/tools/piv-tool.c,
	  trunk/win32/Make.rules.mak: full piv update by Thomas harning
	  Jr. and David E. Engert, adding compression etc. Also enables
	  opensc to be compiled with and without zlib support.

2007-03-07 21:26  aj

	* trunk/etc/opensc.conf.in: don't set max send/recv size per
	  defaults. document how to find out if there is an issue.

2007-03-07 12:39  vtarasov

	* trunk/src/libopensc/card-oberthur.c: after Douglas Engert's
	  remarks on the coding style

2007-03-07 09:38  vtarasov

	* trunk/src/libopensc/card-oberthur.c: some ACLs was forgotten; i
	  compute_signature() le should not be more then 256

2007-03-05 17:30  vtarasov

	* trunk/src/pkcs15init/oberthur.profile: change inappropriate
	  oberthur profile

2007-03-03 20:24  ludovic.rousseau

	* trunk/src/libopensc/card-incrypto34.c: update Giuseppe Amato
	  email at his request (he is no more working for ST Incard srl)

2007-02-09 11:08  martin

	* trunk/src/tests/regression/Makefile.am: Include files from [3113]

2007-02-06 14:29  ludovic.rousseau

	* trunk/src/pkcs15init/pkcs15-lib.c: comment out static and unused
	  functions (sc_pkcs15init_read_unusedspace,
	  sc_pkcs15init_update_unusedspace, merge_paths,
	  sc_pkcs15init_add_unusedspace and
	  sc_pkcs15init_remove_unusedspace)

2007-02-06 14:20  ludovic.rousseau

	* trunk/src/libopensc/card-oberthur.c: correct 3 warning: unused
	  variable 'entry'

2007-02-06 14:17  ludovic.rousseau

	* trunk/src/libopensc/reader-pcsc.c: use SCARD_SCOPE_USER instead
	  of the pcsc-lite specific SCARD_SCOPE_GLOBAL

2007-02-02 22:15  nils

	* trunk/src/libopensc/card-cardos.c,
	  trunk/src/libopensc/card-incrypto34.c,
	  trunk/src/libopensc/internal.h, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/padding.c, trunk/src/libopensc/pkcs15-sec.c,
	  trunk/src/pkcs11/framework-pkcs15.c, trunk/src/pkcs11/openssl.c,
	  trunk/src/pkcs11/pkcs11-display.c, trunk/src/pkcs11/pkcs11.h,
	  trunk/src/tools/pkcs11-tool.c, trunk/src/tools/pkcs15-crypt.c:
	  implement support for SHA2 (still experimental)

2007-01-20 12:46  nils

	* trunk/src/libopensc/opensc.h, trunk/src/libopensc/sc.c,
	  trunk/src/libopensc/types.h, trunk/src/pkcs15init/profile.c,
	  trunk/src/tools/opensc-explorer.c: use const, add yet another ACL

2007-01-19 21:10  nils

	* trunk/src/tests/regression/crypt0005,
	  trunk/src/tests/regression/crypt0006,
	  trunk/src/tests/regression/functions: conditionally check 2048
	  bit rsa key ops

2007-01-19 21:08  nils

	* trunk/src/pkcs15init/pkcs15-lib.c: check key size, set so-pin ref

2007-01-15 20:32  nils

	* trunk/src/tools/opensc-tool.c: increase pointer

2007-01-09 21:16  nils

	* trunk/src/tests/regression/test.p12: undo last change:
	  converting a binary file to utf-8 isn't really a good idea ;-)

2007-01-09 19:41  nils

	* trunk/src/libopensc/apdu.c: improve get_response logic: try to
	  read at least as much bytes as indicated in the 0x61xx response.

2007-01-09 07:22  aj

	* trunk/src/libopensc/card.c: improve atr masking code - also mask
	  atr to match. and add more debugging messages.

2007-01-08 21:10  nils

	* trunk/src/libopensc/card-oberthur.c: remove unnecessary assertion

2007-01-08 20:19  nils

	* trunk/src/libopensc/card-piv.c: use EVP API for DES encryption

2007-01-08 17:04  nils

	* trunk/src/libopensc/card-oberthur.c: use EVP api for DES
	  encryption

2007-01-07 23:40  martin

	* trunk/src/libopensc/card-mcrd.c: off by 1

2007-01-06 16:35  martin

	* trunk/src/libopensc/card-muscle.c, trunk/src/libopensc/muscle.c:
	  Stop MS visual studio 2005 complaints.

2007-01-06 13:23  nils

	* trunk/src/libopensc/card-gpk.c: use EVP api

2007-01-05 16:36  martin

	* trunk/src/libopensc/reader-pcsc.c: Properly set the defaults for
	  pcsc reader options even if no configuration file is
	  found/available

2007-01-05 16:25  martin

	* trunk/src/libopensc/reader-pcsc.c: * Add a few debug lines *
	  Remove the locked status from the reader no matter what
	  SCardEndTransaction thinks - either the card was removed or
	  broken pcsc allowed to reset the card while in a transaction
	  (pcsc-lite before Oct. 2006)

2007-01-05 16:20  martin

	* trunk/src/libopensc/pkcs15-syn.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/pkcs15.h: Allow to specify at compile time
	  that a card will work only via pkcs15 emulation. This way no
	  matter what is configured in the config file
	  (try_emulation_first option) the card is usable via pkcs15 tools.

2007-01-05 16:13  martin

	* trunk/src/libopensc/card-mcrd.c: Match EstEID based on ATR
	  contents rather than the full ATR itself.

2007-01-03 11:44  vtarasov

	* trunk/src/libopensc/card-oberthur.c: change encoding

2007-01-02 10:06  vtarasov

	* trunk/src/libopensc/cardctl.h: prepare Oberthur card support for
	  secure messaging
	* trunk/src/libopensc/card-oberthur.c,
	  trunk/src/pkcs15init/oberthur.profile,
	  trunk/src/pkcs15init/pkcs15-oberthur.c: prepare Oberthur card
	  support for secure messaging

2007-01-02 10:04  vtarasov

	* trunk/src/libopensc/iso7816.c, trunk/src/libopensc/types.h:
	  introduce SC_PATH_TYPE_FROM_CURRENT and SC_PATH_TYPE_PARENT path
	  types

2006-12-29 09:44  aj

	* trunk/src/libopensc/apdu.c: only the first apdu (command) tells
	  us how many bytes we need to get. we need to keep this value and
	  call get_response as often as needed to get them part by part.

2006-12-22 12:43  nils

	* trunk/src/libopensc/pkcs15-pin.c: encode max pin length as well

2006-12-19 22:11  aj

	* trunk/src/tools/pkcs11-tool.c: kill warnings.

2006-12-19 21:35  aj

	* trunk/src/tools/cardos-info.c,
	  trunk/src/tools/cryptoflex-tool.c,
	  trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/piv-tool.c,
	  trunk/src/tools/pkcs15-crypt.c, trunk/src/tools/pkcs15-tool.c:
	  convert to utf-8.

2006-12-19 21:34  aj

	* trunk/src/signer/testprog.c: replace with an ascii test string.
	* trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-miocos.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c: convert to utf-8.

2006-12-19 21:33  aj

	* trunk/src/tests/lottery.c, trunk/src/tests/p15dump.c,
	  trunk/src/tests/pintest.c, trunk/src/tests/print.c,
	  trunk/src/tests/prngtest.c, trunk/src/tests/regression/test.p12,
	  trunk/src/tests/sc-test.c: convert to utf-8.
	* trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/framework-pkcs15init.c,
	  trunk/src/pkcs11/misc.c, trunk/src/pkcs11/pkcs11-global.c,
	  trunk/src/pkcs11/pkcs11-object.c,
	  trunk/src/pkcs11/pkcs11-session.c, trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/pkcs11/slot.c: convert to utf-8.

2006-12-19 21:32  aj

	* trunk/src/libopensc/card-atrust-acos.c,
	  trunk/src/libopensc/card-cardos.c,
	  trunk/src/libopensc/card-default.c,
	  trunk/src/libopensc/card-emv.c, trunk/src/libopensc/card-flex.c,
	  trunk/src/libopensc/card-incrypto34.c,
	  trunk/src/libopensc/card-mcrd.c,
	  trunk/src/libopensc/card-miocos.c,
	  trunk/src/libopensc/card-oberthur.c,
	  trunk/src/libopensc/card-piv.c,
	  trunk/src/libopensc/card-setcos.c,
	  trunk/src/libopensc/card-starcos.c,
	  trunk/src/libopensc/card-tcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/ctx.c: convert to utf-8.

2006-12-19 21:31  aj

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/asn1.h,
	  trunk/src/libopensc/base64.c, trunk/src/libopensc/dir.c,
	  trunk/src/libopensc/emv.c, trunk/src/libopensc/emv.h,
	  trunk/src/libopensc/errors.c, trunk/src/libopensc/errors.h,
	  trunk/src/libopensc/internal.h, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/log.c, trunk/src/libopensc/log.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/padding.c,
	  trunk/src/libopensc/pkcs15-cache.c,
	  trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-pubkey.c,
	  trunk/src/libopensc/pkcs15-sec.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/pkcs15.h,
	  trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/libopensc/reader-pcsc.c, trunk/src/libopensc/sc.c,
	  trunk/src/libopensc/sec.c, trunk/src/libopensc/types.h: convert
	  to utf-8.

2006-12-19 21:28  aj

	* trunk/NEWS: convert to utf-8
	* trunk/aclocal/pkg.m4: convert to ascii.

2006-12-19 20:48  aj

	* trunk/src/common/getopt.txt: convert to unix style line ending.

2006-12-18 21:58  aj

	* trunk/src/libopensc/card-muscle.c,
	  trunk/src/libopensc/muscle-filesystem.h,
	  trunk/src/libopensc/muscle.c, trunk/src/libopensc/muscle.h:
	  update to latest muscle code.

2006-12-18 21:34  aj

	* trunk/src/pkcs15init/pkcs15-lib.c: apcos driver is not yet
	  commited.

2006-12-18 11:23  nils

	* trunk/src/pkcs15init/pkcs15-lib.c: pad only if necessary

2006-12-18 11:22  nils

	* trunk/src/pkcs15init/pkcs15-init.h: remove comment
	* trunk/src/libopensc/iso7816.c: use net size if available

2006-12-18 07:42  aj

	* trunk/src/pkcs11/pkcs11.h, trunk/src/pkcs11/sc-pkcs11.h: update
	  to latest pkcs11.h version.

2006-12-10 13:33  nils

	* trunk/src/pkcs11/pkcs11.h: make it work with my compiler, add
	  missing parenthesis

2006-12-10 07:57  aj

	* trunk/src/pkcs11/pkcs11.h: update to latest pkcs11.h from Marcus.

2006-12-09 15:46  aj

	* trunk/configure.in: Alon Bar-Lev: enables disabling the linkage
	  of pcsc-lite and openct, even if they are installed on system.
	  It adds --disable-openct and --disable-pcsc-lite options. Also a
	  minor correction for pkg-config (adds PKG_PROG_PKG_CONFIG).

2006-12-09 15:41  aj

	* trunk/src/pkcs11/pkcs11.h: pkcs11.h with updates from Alon.

2006-12-08 14:56  jps

	* trunk/src/libopensc/card-setcos.c, trunk/src/libopensc/cards.h:
	  Initial support for SetCOSXpresso (GemXpresso R4 with EID 2.x
	  applet)

2006-12-07 10:53  aj

	* trunk/src/libopensc/muscle-filesystem.c,
	  trunk/src/libopensc/muscle-filesystem.h,
	  trunk/src/libopensc/muscle.c: define these constants where used
	  to kill warnings.

2006-12-07 10:35  aj

	* trunk/src/libopensc/card-muscle.c: Thomas Harning: patch to fix
	  the MuscleCard driver to work in the case of forced drivers.
	  drv_data is used as a flag so that muscle_init knows if the
	  applet has been selected during initialization.

2006-11-30 08:14  aj

	* trunk/src/libopensc/card-muscle.c,
	  trunk/src/libopensc/muscle-filesystem.c,
	  trunk/src/libopensc/muscle-filesystem.h,
	  trunk/src/libopensc/muscle.c, trunk/src/libopensc/muscle.h:
	  update the MuscleCard driver for OpenSC to use an msc_id struct
	  rather than int/bytes and messing around with byte-swapping for
	  that. (by Thomas Harning)

2006-11-30 08:11  aj

	* trunk/configure.in, trunk/src/include/opensc/Makefile.am,
	  trunk/src/include/opensc/rsaref, trunk/src/pkcs11/Makefile.am,
	  trunk/src/pkcs11/Makefile.mak, trunk/src/pkcs11/libpkcs11.c,
	  trunk/src/pkcs11/pkcs11-display.c,
	  trunk/src/pkcs11/pkcs11-spy.c, trunk/src/pkcs11/pkcs11.h,
	  trunk/src/pkcs11/rsaref, trunk/src/pkcs11/sc-pkcs11.h: replace
	  rsa pkcs#11 header files with rewrite.

2006-11-28 15:54  ludovic.rousseau

	* trunk/configure.in: remove now useless (see revision 3062)
	  --enable-debug option

2006-11-28 11:54  martin

	* trunk/src/libopensc/card.c: Have equal number of sc_lock and
	  sc_unlock loglines to aid debugging locking.

2006-11-28 11:53  martin

	* trunk/configure.in: Remove unused headers

2006-11-23 22:40  nils

	* trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/libopensc/reader-openct.c,
	  trunk/src/libopensc/reader-pcsc.c: enable APDU logging again

2006-11-22 19:27  nils

	* trunk/src/libopensc/card-flex.c: remove unused variable, cleanup

2006-11-21 22:10  nils

	* trunk/src/libopensc/iso7816.c: try to read at most max_recv_size
	  bytes in GET RESPONSE

2006-11-18 00:05  pk

	* trunk/src/libopensc/pkcs15-tcos.c: Support for DATEV smartcard
	  classic

2006-11-17 11:50  aj

	* trunk/src/signer/dialog.c: size_t is 64bit on 64bit plattforms,
	  thus use %ld and convert to unsigned long.

2006-11-12 21:01  nils

	* trunk/src/libopensc/iso7816.c: 

2006-11-11 11:47  nils

	* trunk/src/libopensc/sc.c: fix typo

2006-11-11 11:46  nils

	* trunk/src/libopensc/iso7816.c: remove useless code

2006-11-11 11:09  nils

	* trunk/src/libopensc/sc.c: check types before concatenating paths

2006-11-10 23:07  nils

	* trunk/src/libopensc/pkcs15-gemsafe.c: update; patch supploed by
	  Douglas E. Engert <deengert@anl.gov>

2006-11-09 21:26  nils

	* trunk/src/tools/opensc-explorer.c: fix typo

2006-11-09 16:05  martin

	* trunk/doc/tools/pkcs15-tool.xml: Fixes #17

2006-11-06 11:15  vtarasov

	* trunk/src/libopensc/card-cardos.c,
	  trunk/src/libopensc/card-piv.c, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/log.h, trunk/src/libopensc/muscle.c: Use do
	  {...} while(0) construction for SC_TEST_RET, SC_FUNC_RETURN and
	  SC_FUNC_CALLED defines

2006-11-02 13:58  nils

	* trunk/src/libopensc/pkcs15-sec.c: set path type; patch supplied
	  by Thomas Irlet <iksiloev@gmail.com>

2006-11-02 09:19  vtarasov

	* trunk/src/pkcs15init/keycache.c: When forgetting PIN set to
	  'null' the corresponding named_pin's entry

2006-11-02 06:55  aj

	* trunk/src/libopensc/card-muscle.c: Thomas Harning: sc_list_files
	  doesn't return the length of the applicable buffer, but instead
	  the # of files. Fixed.

2006-10-31 17:29  pk

	* trunk/src/libopensc/pkcs15-tcos.c: Netkey E4 emulation

2006-10-30 18:51  nils

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/asn1.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/pkcs15.h, trunk/src/libopensc/sc.c,
	  trunk/src/tools/opensc-explorer.c: add support to parse the
	  seInfo TokenInfo entry, improve aid support in opensc-explorer

2006-10-30 11:54  martin

	* trunk/doc/tools/opensc-explorer.xml: Remove invalid
	  documentation, addresses #95

2006-10-30 07:37  ludovic.rousseau

	* trunk/src/libopensc/ctx.c: use the OPENSC_DEBUG environment
	  variable to overwite the configuration variable debug in
	  opensc.conf

2006-10-09 15:09  martin

	* trunk/src/libopensc/card-mcrd.c: New EstEID v1.5 card ATR

2006-10-04 07:00  ludovic.rousseau

	* trunk/src/libopensc/pkcs15.c: c_asn1_toki[]: the serialNumber
	  field is not mandatory in ISO 7816-15 see
	  http://www.opensc-project.org/pipermail/opensc-devel/2006-October/009025.html

2006-10-02 17:26  nils

	* trunk/src/pkcs11/pkcs11-global.c: make the decision which
	  locking functions to use more explicit; patch supplied by Martin

2006-10-02 16:49  nils

	* trunk/src/libopensc/pkcs15.c: restore backward compatibility:
	  try READ BINARY in case of a unknown file type

2006-10-02 13:46  ludovic.rousseau

	* trunk/src/libopensc/pkcs15.c: c_asn1_ddo[]: the oid field of the
	  DDO is not mandatory in ISO 7816-15 See
	  http://www.opensc-project.org/pipermail/opensc-devel/2006-October/009022.html

2006-10-02 10:39  nils

	* trunk/doc/tools/pkcs15-crypt.xml: update doc

2006-10-02 10:34  nils

	* trunk/src/tools/pkcs15-crypt.c: add the possibility to read the
	  pin from stdin

2006-10-01 20:52  nils

	* trunk/src/libopensc/card-mcrd.c,
	  trunk/src/libopensc/reader-pcsc.c: fix warnings

2006-10-01 20:39  nils

	* trunk/src/libopensc/iso7816.c: fix warning

2006-09-27 22:10  nils

	* trunk/src/pkcs11/framework-pkcs15.c: set
	  CKF_USER_PIN_INITIALIZED only if we really have a pin object

2006-09-27 12:02  ludovic.rousseau

	* trunk/src/libopensc/pkcs15.c: sc_pkcs15_make_absolute_path(): a
	  0 length path stays a 0 length pat

2006-09-27 12:01  ludovic.rousseau

	* trunk/src/libopensc/iso7816.c: iso7816_process_fci(): dump the
	  filename in Hex + ASCII instead of just ASCII in the debug log

2006-09-26 18:17  nils

	* trunk/src/libopensc/card-oberthur.c: fix apdu

2006-09-26 18:01  nils

	* trunk/src/tools/opensc-tool.c: check if the ef type is in range;
	  thanks to Thomas Irlet

2006-09-26 10:55  henryk

	* trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-data.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-pubkey.c,
	  trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h: Make
	  absolute paths from all paths read from the PKCS#15 directories
	  by prepending the DF(PKCS#15) path if necessary. Fixes
	  compatibility with Siemens HiPath SIcurity formatted cards which
	  use relative paths.

2006-09-26 10:43  henryk

	* trunk/src/libopensc/pkcs15.c: Fix handling for SIMPLE-TLV
	  records with a three-byte length

2006-09-26 10:36  henryk

	* trunk/src/libopensc/pkcs15.c: opensc-siemens.diff Adds support
	  for record-oriented files in linear variable, simple-tlv format.
	  TODO: Add support for all the other file formats, too.

2006-09-26 10:31  henryk

	* trunk/src/libopensc/pkcs15.c: Make do { ... } while (...); into
	  while (...) { ... };. Fixes behaviour with empty files.

2006-09-24 14:05  nils

	* trunk/src/libopensc/pkcs15.c: implement workaround for the
	  Taiwanese id card

2006-09-24 12:50  nils

	* trunk/src/libopensc/sc.c: keep index and count parameters

2006-09-22 14:34  nils

	* trunk/src/libopensc/card-starcos.c: add starcos spk 2.4 ATR

2006-09-22 14:18  nils

	* trunk/src/libopensc/card-starcos.c: bugfix

2006-09-20 13:33  aj

	* trunk/src/scconf/Makefile.mak: scconf needs strlcpy too.

2006-09-20 12:32  aj

	* trunk/src/libopensc/Makefile.mak: ntohl is in ws2_32.lib / dll.

2006-09-20 12:10  aj

	* trunk/src/libopensc/Makefile.am: don't forget part10.h (only
	  used on windows I think).

2006-09-18 05:30  nils

	* trunk/src/tools/pkcs11-tool.c: add option to write data objects;
	  patch supplied by Cornelius Klbel
	  <cornelius.koelbel@lsexperts.de> et. al.

2006-09-17 18:34  nils

	* trunk/src/libopensc/reader-pcsc.c: remove check for T0 as it
	  seems to work for T1 as well

2006-09-14 12:56  ludovic.rousseau

	* trunk/doc/tools/opensc-config.xml,
	  trunk/doc/tools/pkcs11-tool.xml: use <option></option> for
	  command arguments

2006-09-14 12:46  ludovic.rousseau

	* trunk/doc/tools/pkcs11-tool.xml: using --pin with set --login

2006-09-14 09:17  ludovic.rousseau

	* trunk/doc/tools/pkcs11-tool.xml: explicit that --module is to
	  load a "PKCS#11 module (or library)" not just a module

2006-09-14 08:55  ludovic.rousseau

	* trunk/src/pkcs11/pkcs11-global.c: C_GetInfo(): use "OpenSC
	  (www.opensc-project.org)" instead of "OpenSC Project
	  (www.opensc-project.org)" for the manufacturerID to avoid a
	  truncation at 32 characters

2006-09-04 20:01  martin

	* trunk/src/libopensc/card-mcrd.c: Make sure every new opensc
	  instance sees the card from the sight starting point.

2006-09-03 15:58  martin

	* trunk/src/libopensc/pkcs15-esteid.c: Update for [2836] chganges.

2006-08-27 18:25  aj

	* trunk/src/pkcs11/slot.c: shorten string, fixing #98.

2006-08-19 08:44  nils

	* trunk/etc/opensc.conf.in: fix typo

2006-08-16 16:36  martin

	* trunk/src/libopensc/part10.h, trunk/src/libopensc/reader-pcsc.c:
	  * Fix endianness for PCSCv2 part 10 IOCTLs * Add support for
	  start/finish style IOCTLs * Add support for the same pinpad
	  functionality on windows Some code from Robert Konklewski and
	  Ludovic Rousseau

2006-08-13 21:20  aj

	* trunk/src/pkcs11/pkcs11-spy.c: Douglas E. Engert: Change
	  PKCS11-Spy so it looks in HKEY_LOCAL_MACHINE, before
	  HKEY_LOCAL_USER. This should not cause any problems, as the
	  HKEY_LOCAL_MACHINE, "Software\PKCS11-Spy" would not normally be
	  set, accept while the sysadmin of the machine as trying to debug
	  a login type problem.

2006-08-03 21:05  nils

	* trunk/src/libopensc/Makefile.mak, trunk/src/pkcs11/Makefile.mak,
	  trunk/src/pkcs15init/Makefile.mak, trunk/src/tests/Makefile.mak,
	  trunk/src/tools/Makefile.mak: build fixes for win; patch
	  supplied by Douglas E. Engert <deengert@anl.gov>

2006-08-02 19:43  nils

	* trunk/src/tools/opensc-explorer.c, trunk/src/tools/piv-tool.c,
	  trunk/src/tools/pkcs15-tool.c: fix warnings

2006-08-02 19:31  nils

	* trunk/src/common/Makefile.mak, trunk/src/include/winconfig.h,
	  trunk/src/libopensc/pkcs15-piv.c, trunk/src/pkcs11/Makefile.mak,
	  trunk/src/tools/eidenv.c, trunk/src/tools/netkey-tool.c,
	  trunk/src/tools/util.h, trunk/win32/Make.rules.mak: win build
	  fixes; patch supplied by Douglas E. Engert <deengert@anl.gov>

2006-08-01 18:49  nils

	* trunk/src/libopensc/sc.c: fix sc_compare_path_prefix(); patch
	  supplied by Henryk Pltz <henryk@ploetzli.ch>

2006-07-23 08:02  nils

	* trunk/src/tools/pkcs15-tool.c: check the value of the pin type
	  before accessing the array; patch supplied by Henryk Pltz
	  <henryk@ploetzli.ch>

2006-07-18 20:37  nils

	* trunk/etc/opensc.conf.in: spelling fixes by ville.skytta@iki.fi

2006-07-14 08:18  nils

	* trunk/src/pkcs15init/profile.c: bugfix: copy the first n
	  characters (if possible)

2006-07-13 21:01  nils

	* trunk/src/pkcs15init/pkcs15-cardos.c: cardos v4.3b support

2006-07-13 20:40  nils

	* trunk/src/libopensc/sc.c: don't accept invalid OIDs

2006-07-13 20:37  nils

	* trunk/src/libopensc/card-cardos.c: cardos v4.3

2006-07-13 20:35  nils

	* trunk/src/libopensc/pkcs15.c: bugfixes ...

2006-07-13 19:59  nils

	* trunk/src/libopensc/pkcs15.c: initialize pointer

2006-07-12 08:12  ludovic.rousseau

	* trunk/src/libopensc/card-belpic.c,
	  trunk/src/libopensc/pkcs15-actalis.c,
	  trunk/src/libopensc/pkcs15-atrust-acos.c,
	  trunk/src/libopensc/pkcs15-esteid.c,
	  trunk/src/libopensc/pkcs15-gemsafe.c,
	  trunk/src/libopensc/pkcs15-infocamere.c,
	  trunk/src/libopensc/pkcs15-openpgp.c,
	  trunk/src/libopensc/pkcs15-piv.c,
	  trunk/src/libopensc/pkcs15-postecert.c,
	  trunk/src/libopensc/pkcs15-starcert.c,
	  trunk/src/libopensc/pkcs15-tcos.c,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/profile.c, trunk/src/scconf/parse.c,
	  trunk/src/tools/cryptoflex-tool.c,
	  trunk/src/tools/pkcs15-init.c: - use strlcpy() instead of
	  strncpy() to always have a terminating NUL-byte - use
	  sizeof(field) instead of SC_PKCS15_MAX_LABEL_SIZE-1 or
	  equivalent as the 3rd argument of strlcpy()

2006-07-12 08:09  ludovic.rousseau

	* trunk/src/scconf/Makefile.am: add
	  $(top_srcdir)/src/common/strlcpy.c to libscconf_la_SOURCES since
	  src/scconf/parse.c now uses strlcpy(). Note that, since
	  libopensc uses libscconf, strlcpy() will be available from any
	  program linked with libopensc

2006-07-12 08:06  ludovic.rousseau

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/pkcs15init/Makefile.am: add -I$(top_srcdir)/src/common
	  so that strlcpy.h is found

2006-07-12 08:05  ludovic.rousseau

	* trunk/src/common/Makefile.am, trunk/src/common/README.strlcpy,
	  trunk/src/common/strlcpy.3, trunk/src/common/strlcpy.c,
	  trunk/src/common/strlcpy.h: add strlcpy.{c,h} from
	  ftp://ftp.openbsd.org/pub/OpenBSD/src/lib/libc/string/

2006-07-12 07:43  ludovic.rousseau

	* trunk/configure.in, trunk/src/common/Makefile.am,
	  trunk/src/common/getopt.h, trunk/src/common/my_getopt.c,
	  trunk/src/common/my_getopt.h, trunk/src/tests/Makefile.am,
	  trunk/src/tests/sc-test.c, trunk/src/tools/Makefile.am: - remove
	  src/common/getopt.h since it collide with /usr/include/getopt.h
	  - replace @GETOPTSRC@ by $(top_srcdir)/src/common/my_getopt.c in
	  Makefile.am files - change the detection of getopt_long in
	  configure.in since GETOPTSRC is not used anymore. my_getopt.c is
	  now always compiled and used but provides getopt_long() only if
	  HAVE_GETOPT_H is NOT defined (ie. if getopt_long() is not
	  provided by the system) - src/common/my_getopt.c: the code is
	  within #ifndef HAVE_GETOPT_H - move the useful lines of
	  src/common/getopt.h in src/common/my_getopt.h

2006-07-12 07:32  ludovic.rousseau

	* trunk/src/common/Makefile.am, trunk/src/common/README,
	  trunk/src/common/README.my_getopt: rename README in
	  README.my_getopt

2006-07-12 06:41  ludovic.rousseau

	* trunk/configure.in, trunk/src/signer/Makefile.am: use
	  LIBASSUAN_* instead of ASSUAN_* so the assuan library is
	  correctly found and we avoid "undefined symbol: assuan_strerror
	  (.libs/opensc-signer.so)", etc

2006-07-11 22:25  nils

	* trunk/src/libopensc/asn1.c: bugfix: return error if OID is
	  invalid

2006-07-11 21:43  nils

	* trunk/src/libopensc/card-cardos.c: fix typo

2006-07-08 12:31  nils

	* trunk/src/libopensc/card-cardos.c: changes for cardos 4.3b

2006-07-05 19:45  aj

	* trunk/src/libopensc/pkcs15.c: replace static buffer with
	  dynamically allocated buffer. patch by Tomasz Lemiech to fix a
	  problem with setec cards.

2006-07-05 19:36  aj

	* trunk/src/libopensc/pkcs15.c: Tomasz Lemiech wrote: I found that
	  struct c_asn1_odf[] in pkcs15.c does not define secretKeys
	  object (as specified in PKCS#15 v. 1.1 standard, par. 6.2). I
	  consider this to be an omission. My Setec card contains objects
	  of this type and all PKCS#15 operations fail with "Unable to
	  parse ODF". Attached patch fixes this issue.

2006-06-27 21:54  aj

	* trunk/src/libopensc/card-flex.c: add new atr reported by Sven
	  Loeschner as Cryptoflex 32k Card.

2006-06-27 17:56  sth

	* trunk/src/libopensc/internal.h: Added doxygen comments

2006-06-27 17:49  sth

	* trunk/src/libopensc/card-muscle.c,
	  trunk/src/libopensc/internal.h, trunk/src/libopensc/muscle.c,
	  trunk/src/libopensc/sc.c: Endian-independent way to convert
	  numbers to a byte array + vice versa

2006-06-26 21:03  aj

	* trunk/src/libopensc/ctx.c: check for environment variable first
	  on windows, too.

2006-06-23 16:09  nils

	* trunk/src/libopensc/card-oberthur.c: fix apdu types and response
	  buffer length

2006-06-21 20:05  nils

	* trunk/src/pkcs11/misc.c: bring implementation in accordance with
	  the docu in opensc.conf

2006-06-19 23:04  aj

	* trunk/src/libopensc/card-flex.c: the cryptoflex manual states
	  the last two bytes of the atr are some software version so we
	  can ignore them. use the atr mask to do that.

2006-06-19 19:01  nils

	* trunk/src/libopensc/opensc.h: fix docu

2006-06-18 20:52  sth

	* trunk/src/libopensc/muscle.c: The applet returns unexpected
	  values when entering a wrong PIN; this is a work-around by
	  Thomas Harning

2006-06-17 15:07  nils

	* trunk/src/libopensc/muscle-filesystem.c,
	  trunk/src/libopensc/muscle.c: fix warnings

2006-06-17 12:24  nils

	* trunk/src/libopensc/card-belpic.c,
	  trunk/src/libopensc/card-cardos.c,
	  trunk/src/libopensc/card-jcop.c,
	  trunk/src/libopensc/card-muscle.c,
	  trunk/src/libopensc/card-openpgp.c,
	  trunk/src/libopensc/card-piv.c,
	  trunk/src/libopensc/card-setcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/cards.h, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/sec.c: remove
	  iso logout function, remove dummy logout functions and remove
	  logout call from sc_unlock()

2006-06-16 20:47  nils

	* trunk/src/libopensc/muscle-filesystem.c: fix warning

2006-06-08 08:12  aj

	* trunk/src/pkcs15init/Makefile.am: Fix makefile: add muscle files.

2006-06-07 08:33  sth

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak,
	  trunk/src/libopensc/card-muscle.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/cardctl.h, trunk/src/libopensc/cards.h,
	  trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/muscle-filesystem.c,
	  trunk/src/libopensc/muscle-filesystem.h,
	  trunk/src/libopensc/muscle.c, trunk/src/libopensc/muscle.h,
	  trunk/src/libopensc/opensc.h, trunk/src/pkcs15init/Makefile.mak,
	  trunk/src/pkcs15init/muscle.profile,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-muscle.c: Added support for
	  MuscleCard applet. Thanks to Thomas Harning, David Corcoran of
	  Identity Alliance

2006-06-06 06:00  aj

	* trunk/src/libopensc/card-cardos.c: add new card reported to work
	  by Christian Koegler. Thanks Christian!

2006-05-30 20:59  aj

	* trunk/NEWS: commit NEWS update.

2006-05-23 20:53  aj

	* trunk/src/pkcs11/framework-pkcs15.c: sprintf bad. maybe even
	  potential exploitable? bug found by ville skytta using pscan.

2006-05-23 12:55  aj

	* trunk/src/tools/Makefile.mak: fix compiling netkey-tool on win32.

2006-05-23 09:09  aj

	* trunk/src/tools/Makefile.mak, trunk/win32/Make.rules.mak: try to
	  fix windows compile (include netkey-tool and cryptoflex-tool).

2006-05-20 16:06  aj

	* trunk/src/libopensc/pkcs15-piv.c,
	  trunk/src/pkcs11/framework-pkcs15.c: make objects on piv card
	  public.

2006-05-20 16:05  aj

	* trunk/src/pkcs11/misc.c: revert prior change as it breaks the
	  regression tests.

2006-05-17 09:07  ludovic.rousseau

	* trunk/src/libopensc/reader-pcsc.c: pcsc_connect(): use an
	  explicit debug message if the reader supports PIN
	  verification/modification but that feature is not enabled in
	  opensc.conf (enable_pinpad = true)

2006-05-15 18:48  nils

	* trunk/src/pkcs11/framework-pkcs15.c: check for existing public
	  key before creating one from the certificate; patch supplied by
	  Albert Solana <asb@c3po.es>

2006-05-12 20:03  aj

	* trunk/src/libopensc/pkcs15-piv.c: Douglas E. Engert: removes the
	  private bit on the pubkey. Without this change the openssl req
	  with engine can not be used to generate a certificate request,
	  as it will not be able to find the public key that should have
	  been saved by the piv-tool when the private key was generated on
	  the card.

2006-05-12 20:01  aj

	* trunk/src/libopensc/card-mcrd.c,
	  trunk/src/pkcs11/framework-pkcs15.c: compile fixes for win32.

2006-05-10 06:18  aj

	* trunk/NEWS: document changes so far.

2006-05-10 06:14  aj

	* trunk/configure.in: trunk is now used for changed past 0.11.1.

2006-05-09 21:35  nils

	* trunk/src/pkcs11/framework-pkcs15.c: improve buffer length check

2006-05-09 19:39  aj

	* trunk/src/include/winconfig.h, trunk/win32/version.rc: oops, we
	  forgot to update the version. fix that for opensc 0.11.1.

2006-05-05 10:35  nils

	* trunk/src/pkcs11/misc.c: set the default for lock_login to false
	  (as documented in opensc.conf)

2006-05-05 10:10  nils

	* trunk/src/libopensc/card-openpgp.c: if the card doesn't support
	  a logout functionality it's not an error

2006-05-05 10:06  nils

	* trunk/src/libopensc/card-openpgp.c: bugfix: Le must be <= buffer
	  size

2006-05-04 06:50  aj

	* trunk/src/libopensc/pkcs15-piv.c: piv fixes by Douglas E.
	  Engert. This patch will allow a flag in the opensc.conf file to
	  be set to only expose the PIV authentication certificate and
	  matching keys.

2006-05-03 07:16  nils

	* trunk/src/libopensc/card-starcos.c: use correct ef attribute in
	  switch statement; thanks to Chaskiel M Grundman
	  <cg2v@andrew.cmu.edu>

2006-05-01 10:27  aj

	* trunk/src/libopensc/pkcs15-gemsafe.c: close memory leaks.

2006-05-01 10:26  aj

	* trunk/src/libopensc/card-oberthur.c: close some memory leaks.

2006-05-01 10:23  aj

	* trunk/src/pkcs15init/pkcs15-lib.c: make sure result is
	  null-terminated.

2006-05-01 10:22  aj

	* trunk/src/pkcs15init/pkcs15-lib.c: at least partialy close
	  memory leak.

2006-05-01 10:21  aj

	* trunk/src/pkcs15init/pkcs15-lib.c: check df before dereferencing
	  it.

2006-05-01 10:20  aj

	* trunk/src/pkcs11/framework-pkcs15.c: free(data) (allocated by
	  sc_pkcs15_read_data_object, no reference kept anywhere).

2006-05-01 10:17  aj

	* trunk/src/tools/eidenv.c: if exec() fails, exit with return code
	  1.

2006-05-01 10:16  aj

	* trunk/src/tools/pkcs15-init.c: initialize with NULL, so the
	  later check for NULL will work.

2006-05-01 10:12  aj

	* trunk/NEWS, trunk/etc/opensc.conf.in,
	  trunk/src/libopensc/card-mcrd.c, trunk/src/libopensc/cards.h:
	  add support for d-trust cards.

2006-05-01 10:10  aj

	* trunk/src/libopensc/apdu.c: revert bogus change.

2006-05-01 10:07  aj

	* trunk/src/scconf/test-conf.c: bogus change, no segfault here.

2006-05-01 10:06  aj

	* trunk/src/libopensc/log.c: revert bogus patch.

2006-05-01 10:02  aj

	* trunk/NEWS, trunk/src/common/main.c, trunk/src/libopensc/apdu.c,
	  trunk/src/libopensc/card-flex.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/ui.c, trunk/src/pkcs11/pkcs11-display.c,
	  trunk/src/pkcs15init/pkcs15-cardos.c, trunk/src/tests/print.c,
	  trunk/src/tools/netkey-tool.c,
	  trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/piv-tool.c,
	  trunk/src/tools/pkcs11-tool.c, trunk/src/tools/pkcs15-crypt.c,
	  trunk/src/tools/pkcs15-tool.c: fix printf size_t problem with
	  "%lu" and (unsigned long) cast.

2006-05-01 09:20  aj

	* trunk/NEWS: Document changes since 0.10.0-rc2

2006-04-29 22:10  pk_opensc

	* trunk/src/libopensc/pkcs15-tcos.c: TCOS-Emulation, support for
	  Uni-Giessen card

2006-04-27 20:44  ludovic.rousseau

	* trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/libopensc/reader-pcsc.c: fix a memory leak that occurs
	  when the APDU exchange fails

2006-04-26 11:54  aj

	* trunk/configure.in: trunk will contain work done after 0.11.0
	  release

2006-04-26 11:41  aj

	* trunk/src/pkcs11/openssl.c, trunk/src/pkcs11/pkcs11-display.c,
	  trunk/src/pkcs11/sc-pkcs11.h, trunk/src/tests/print.c,
	  trunk/src/tools/eidenv.c, trunk/src/tools/netkey-tool.c,
	  trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/piv-tool.c,
	  trunk/src/tools/pkcs11-tool.c, trunk/src/tools/pkcs15-crypt.c,
	  trunk/src/tools/pkcs15-tool.c: fix signed and size_t warnings.

2006-04-26 10:08  aj

	* trunk/src/libopensc/log.c: make sure buffer is 0 terminated.

2006-04-26 10:07  aj

	* trunk/src/libopensc/apdu.c: fix a memory leak. don't access
	  buffer beyond length.

2006-04-26 10:05  aj

	* trunk/src/libopensc/card-oberthur.c: maybe it would be good to
	  check the return value?
	* trunk/src/libopensc/ctx.c: maybe it would be good to check he
	  return value?

2006-04-26 10:04  aj

	* trunk/src/libopensc/card-piv.c: fix double free and segfault.

2006-04-26 10:02  aj

	* trunk/src/libopensc/reader-openct.c: fix memory leak.

2006-04-26 10:01  aj

	* trunk/src/libopensc/asn1.c: remove dead code.
	* trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c: close memory leaks.

2006-04-26 10:00  aj

	* trunk/src/pkcs11/framework-pkcs15.c: not sure it is a good idea
	  to ignore the return value.

2006-04-26 09:59  aj

	* trunk/src/scconf/test-conf.c: no idea how to fix, at least
	  document it.

2006-04-26 09:58  aj

	* trunk/src/tools/opensc-explorer.c: fix off by one bug.

2006-04-24 18:41  aj

	* trunk/src/libopensc/card-tcos.c,
	  trunk/src/libopensc/pkcs15-tcos.c: tcos updates by Peter Koch.

2006-04-18 15:15  aj

	* trunk/src/pkcs11/pkcs11-spy.c: remove a function that is no
	  longer used at all.
	* trunk/src/tests/regression/Makefile.am,
	  trunk/src/tests/regression/functions: improve regression tests:
	  cleanup failed/ and out/ folder. specify path to
	  opensc-pkcs11.so module.

2006-04-18 08:16  aj

	* trunk/src/libopensc/card-mcrd.c: Lindent so the result is easier
	  to read / diff.

2006-04-11 20:50  aj

	* trunk/src/libopensc/card-piv.c: Douglas E. Engert wrote: The
	  attached change to card-piv.c is need to recognize a valid PIV
	  card applet. All of the previous test cards would return in
	  response to a SELECT the full AID where as they should have
	  returned the the PIX portion of the AID. The newest test cards
	  are now doing this correctly. This change will recognize either
	  as a PIV applet.

2006-04-06 18:41  sth

	* trunk/src/pkcs15init/flex.profile: There doesn't seem to be a
	  need to leave the certs (and CDF) unprotected. In case there do
	  are problems, please revert this change

2006-04-06 18:38  sth

	* trunk/src/pkcs15init/pkcs15-lib.c: Set the user pin reference
	  when writing a cert. If not, there's a problem with the onepin
	  profile option: the CDF (and certs) will be created with NONE
	  ACs instead of ACs that refer to the user PIN

2006-04-06 18:35  sth

	* trunk/src/pkcs15init/profile.c: protect certs by default

2006-04-03 10:42  nils

	* trunk/src/libopensc/errors.c, trunk/src/libopensc/errors.h,
	  trunk/src/libopensc/iso7816.c: return an error if offset is too
	  large

2006-03-24 23:54  aj

	* trunk/src/signer/Makefile.am: install signer in libdir like
	  everything else.

2006-03-24 10:55  nils

	* trunk/src/pkcs11/framework-pkcs15.c: check the private flag of
	  public key objects; patch supplied by Albert Solana <asb@c3po.es>

2006-03-24 08:06  martin

	* trunk/src/libopensc/card.c: Threading: Reader locking can fail
	  as well

2006-03-22 21:44  nils

	* trunk/src/libopensc/card.c, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/reader-pcsc.c: add function sc_reset() to
	  reset a card; patch supplied by Josep Mons Teixidor
	  <jmt@c3po.es>

2006-03-22 17:12  nils

	* trunk/src/tools/opensc-explorer.c: fix ACs; patch supplied by
	  njustin@idealx.com

2006-03-16 21:37  aj

	* trunk/configure.in: simply the revision, drop the m4 code. it
	  didn't turn out the way I wanted it (does not contain the
	  _repository_/_branch_ revision).

2006-03-09 20:35  nils

	* trunk/src/libopensc/card-setcos.c, trunk/src/libopensc/cards.h:
	  initial support for the Swedish NIDEL card

2006-03-07 07:22  ludovic.rousseau

	* trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h,
	  trunk/src/pkcs15init/pkcs15-lib.c: sc_pkcs15_parse_tokeninfo()
	  and sc_pkcs15_encode_tokeninfo() now use a
	  (sc_pkcs15_tokeninfo_t *) instead of struct (sc_pkcs15_card *)

2006-03-06 09:21  ludovic.rousseau

	* trunk/src/libopensc/ui.c: __sc_ui_read_pin(): use "%lu" and
	  (unsigned long) cast to print a (size_t) value (size_t is 32 or
	  64 bits depending on the platform)

2006-03-06 07:58  aj

	* trunk/doc/tools/pkcs15-tool.xml: small fix - \& was left from
	  cut&paste from a man page.

2006-03-05 19:43  aj

	* trunk/doc/tools/pkcs15-tool.xml: document --unblock-pin / -u
	  option.

2006-03-03 22:56  nils

	* trunk/configure.in, trunk/src/libopensc/apdu.c,
	  trunk/src/libopensc/internal.h,
	  trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/libopensc/reader-openct.c,
	  trunk/src/libopensc/reader-pcsc.c: - move logging to the reader
	  driver - log APDUs only if DEBUG is defined (sensitive APDUs
	  should never be logged and we cannot know whether a APDU is
	  sensitive or not => enable APDU logging only in a non-production
	  debug build) - remove OPENSC_DONT_LOG_SENSITIVE configure option
	  as it's needed anymore

2006-03-03 21:10  nils

	* trunk/src/libopensc/opensc.h: add some doxygen comments

2006-03-02 18:24  nils

	* trunk/src/libopensc/opensc.h: add note

2006-03-02 16:17  nils

	* trunk/src/libopensc/pkcs15-piv.c: remove useless code

2006-03-02 14:16  ludovic.rousseau

	* trunk/src/libopensc/pkcs15-actalis.c:
	  sc_pkcs15emu_actalis_init(): define 3 variables only #ifdef
	  HAVE_ZLIB_H since they are used in this case only

2006-03-02 14:12  ludovic.rousseau

	* trunk/src/libopensc/ui.c: __sc_ui_read_pin(): use %lu instead of
	  %u to avoid a warning: format '%u' expects type 'unsigned int',
	  but argument 3 has t ype 'size_t'

2006-03-01 22:34  nils

	* trunk/src/libopensc/opensc.h: mark second parameter of
	  sc_disconnect_card() as unused

2006-03-01 09:45  martin

	* trunk/src/libopensc/card.c, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/libopensc/reader-openct.c,
	  trunk/src/libopensc/reader-pcsc.c: Remove the disconnect action
	  from internal reader api

2006-02-27 20:11  nils

	* trunk/src/tools/pkcs15-tool.c: use absolute paths when caching
	  files

2006-02-23 19:15  nils

	* trunk/src/libopensc/pkcs15-tcos.c: change name + fix warning

2006-02-23 18:43  nils

	* trunk/src/libopensc/card-piv.c,
	  trunk/src/libopensc/pkcs15-tccardos.c: fix some warnings

2006-02-23 13:40  martin

	* trunk/src/libopensc/ctx.c: Fix for a segfaul. Patch provided by
	  Albert Solana Berengu

2006-02-23 11:49  martin

	* trunk/etc/opensc.conf.in, trunk/src/libopensc/card-piv.c: Add an
	  example config entry for PIV cards and remove a card matching
	  black hole

2006-02-23 11:02  martin

	* trunk/src/include/winconfig.h, trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/pkcs15-gemsafe.c,
	  trunk/src/libopensc/pkcs15-openpgp.c,
	  trunk/src/libopensc/pkcs15-postecert.c,
	  trunk/src/libopensc/pkcs15-tccardos.c,
	  trunk/src/libopensc/pkcs15-tcos.c,
	  trunk/src/pkcs11/pkcs11-global.c, trunk/win32/Make.rules.mak,
	  trunk/win32/Makefile.mak, trunk/win32/version.rc: Small fixes
	  for windows compilation (Visual Studio Express 2005)

2006-02-23 11:01  martin

	* trunk/etc/opensc.conf.in: Add a section for tokend

2006-02-23 08:10  nils

	* trunk/src/libopensc/pkcs15-piv.c: NIST 800-73-1 certs aren't
	  protected by a pin anymore; patch supplied by Douglas E. Engert
	  <deengert@anl.gov>

2006-02-22 20:35  nils

	* trunk/src/libopensc/pkcs15-piv.c: use sc_format_oid()

2006-02-17 21:06  nils

	* trunk/src/libopensc/card-piv.c, trunk/src/libopensc/ctx.c: fix
	  warnings

2006-02-17 11:22  martin

	* trunk/src/libopensc/reader-pcsc.c, trunk/win32/Make.rules.mak: *
	  Also delete .pdb files on windows when doing a clean * Call
	  directly internal pcsc transmit method for pcsc pinpad calls.

2006-02-16 21:45  nils

	* trunk/src/libopensc/pkcs15-tcos.c: add support a TCOS card used
	  at the uni Giessen; this is still experimental

2006-02-15 17:29  nils

	* trunk/src/tools/cryptoflex-tool.c, trunk/src/tools/eidenv.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/util.c: use
	  sc_ctx_get_reader() etc. instead of of accessing the structure
	  members directly

2006-02-15 17:05  nils

	* trunk/src/scconf/test-conf.c, trunk/src/tools/eidenv.c,
	  trunk/src/tools/netkey-tool.c, trunk/src/tools/pkcs11-tool.c:
	  fix some warnings + cleanup

2006-02-15 08:10  nils

	* trunk/src/tools/piv-tool.c: fix warnings

2006-02-15 08:07  nils

	* trunk/src/tools/pkcs15-tool.c: fix warning

2006-02-14 22:46  nils

	* trunk/src/pkcs11/framework-pkcs15.c: a unblocking pin could be
	  used for authentication as well

2006-02-14 22:41  nils

	* trunk/src/libopensc/pkcs15-tcos.c: undo commit in pkcs15-tcos.c

2006-02-14 22:09  nils

	* trunk/src/libopensc/Makefile.am, trunk/src/libopensc/card-piv.c,
	  trunk/src/libopensc/cards.h, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-piv.c,
	  trunk/src/libopensc/pkcs15-syn.c,
	  trunk/src/libopensc/pkcs15-tcos.c, trunk/src/tools/Makefile.am,
	  trunk/src/tools/Makefile.mak, trunk/src/tools/piv-tool.c,
	  trunk/src/tools/pkcs15-tool.c: add initial PIV card support;
	  patch supplied by Douglas E. Engert <deengert@anl.gov>

2006-02-14 22:04  nils

	* trunk/src/tools/util.c: fix warning

2006-02-12 18:30  nils

	* trunk/src/libopensc/card-mcrd.c,
	  trunk/src/pkcs15init/pkcs15-cardos.c: add support for two byte
	  tags in sc_asn1_find_tag() + normalize return value

2006-02-12 18:29  nils

	* trunk/src/libopensc/asn1.c: add support for two byte tags in
	  sc_asn1_find_tag() + normalize return value

2006-02-12 17:37  nils

	* trunk/src/tools/pkcs15-tool.c: don't bind the pkcs15 card twice

2006-02-12 17:07  nils

	* trunk/src/pkcs15init/pkcs15-lib.c: fix memory leak

2006-02-09 20:05  nils

	* trunk/src/pkcs11/framework-pkcs15.c: support private
	  certificates; patch supplied by Douglas E. Engert
	  <deengert@anl.gov>

2006-02-08 22:25  nils

	* trunk/src/libopensc/pkcs15-tcos.c: pkcs15 emulation changes for
	  the TCOS cards, patch supplied by Peter Koch

2006-02-08 16:29  martin

	* trunk/etc/opensc.conf.in: apdu_masquerade is gone

2006-02-07 20:14  nils

	* trunk/src/tests/sc-test.c, trunk/src/tools/cardos-info.c,
	  trunk/src/tools/cryptoflex-tool.c, trunk/src/tools/eidenv.c,
	  trunk/src/tools/netkey-tool.c,
	  trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/pkcs15-crypt.c,
	  trunk/src/tools/pkcs15-init.c, trunk/src/tools/pkcs15-tool.c:
	  use sc_context_create instead of sc_establish_context

2006-02-05 19:35  nils

	* trunk/src/libopensc/card.c, trunk/src/libopensc/ctbcs.c,
	  trunk/src/libopensc/ctx.c, trunk/src/libopensc/internal.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/sc.c,
	  trunk/src/pkcs11/pkcs11-global.c: sc_mutex_destroy should have a
	  return value

2006-02-05 19:00  nils

	* trunk/src/libopensc/apdu.c, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/internal.h, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/libopensc/reader-openct.c,
	  trunk/src/libopensc/reader-pcsc.c: - move APDU encoding to the
	  reader layer - remove APDU masquerading code, it shouldn't be
	  necessary anymore

2006-02-03 21:24  nils

	* trunk/src/libopensc/apdu.c: fix typo

2006-02-01 22:59  nils

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/ctbcs.c, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/internal.h, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/portability.c, trunk/src/libopensc/sc.c,
	  trunk/src/pkcs11/pkcs11-global.c, trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/pkcs15init/pkcs15-gpk.c: - remove dependence on a
	  specific threading library - add two new structures:
	  sc_thread_context_t which let the user specify the mutex
	  functions to use and sc_context_param_t to specify parameters
	  for the sc_context_t creation (including mutex functions) using
	  sc_create_context() - add new function sc_context_create() -
	  remove timestamp code from libopensc

2006-01-31 15:53  martin

	* trunk/src/libopensc/card.c, trunk/src/libopensc/internal.h,
	  trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/reader-openct.c,
	  trunk/src/libopensc/reader-pcsc.c: Rename: _get_conf_block ->
	  sc_get_conf_block and put it into opensc.h This way it can be
	  used by OpenSC tokend module.

2006-01-26 19:02  aj

	* trunk/src/libopensc/card-cardos.c, trunk/src/libopensc/cards.h,
	  trunk/src/tools/cardos-info.c: add atr and os identification for
	  cardos 4.3 (plain, not b, not likely to be ever seen, but 100%
	  compatible to 4.3b as far as I know - only slower).

2006-01-23 22:02  aj

	* trunk/src/pkcs15init/pkcs15-cardos.c,
	  trunk/src/pkcs15init/pkcs15-init.h: rename lower level function,
	  fix typo.

2006-01-23 21:48  aj

	* trunk/src/pkcs15init/Makefile.am,
	  trunk/src/pkcs15init/Makefile.mak,
	  trunk/src/pkcs15init/cardos.profile,
	  trunk/src/pkcs15init/etoken.profile,
	  trunk/src/pkcs15init/pkcs15-cardos.c,
	  trunk/src/pkcs15init/pkcs15-etoken.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c: big rename etoken -> cardos,
	  part II.

2006-01-23 21:44  aj

	* trunk/src/libopensc/ctx.c: move renames.

2006-01-23 21:43  aj

	* trunk/src/libopensc/card-cardos.c,
	  trunk/src/libopensc/cardctl.h, trunk/src/libopensc/cards.h,
	  trunk/src/libopensc/opensc.h: rename everything namend "etoken"
	  to "cardos" :)

2006-01-23 21:39  aj

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak,
	  trunk/src/libopensc/card-cardos.c,
	  trunk/src/libopensc/card-etoken.c: rename card-etoken.c to
	  card-cardos.c

2006-01-23 18:09  martin

	* trunk/src/libopensc/card.c: If, for some reasons, card can not
	  be initialized (broken) then we must make sure that we release
	  all resources (disconnect the card). If not we can only have 16
	  tries with a longrunning application (number of contexts inside
	  pcsclite).

2006-01-23 17:37  martin

	* trunk/src/libopensc/card-mcrd.c,
	  trunk/src/libopensc/pkcs15-esteid.c: Some cleanup/fixes in
	  micardo/esteid code related to new apdu.c Now it works again ;)

2006-01-23 17:29  martin

	* trunk/src/libopensc/pkcs15-cache.c,
	  trunk/src/libopensc/pkcs15.c: Negative r has a meaning in the
	  cached file logic, so be sure to reset it to -1 after
	  sc_print_path has returned a value.

2006-01-22 21:15  aj

	* trunk/NEWS, trunk/README, trunk/src/pkcs11/pkcs11-global.c,
	  trunk/src/pkcs11/slot.c, trunk/src/tools/netkey-tool.c,
	  trunk/src/tools/pkcs15-tool.c: change more opensc.org references
	  to opensc-project.org till dns is back.

2006-01-22 21:07  aj

	* trunk/doc/README, trunk/doc/export-wiki.sh: moved to
	  opensc-project till opensc.org dns is back. fix openct
	  references to opensc.

2006-01-21 11:53  nils

	* trunk/src/pkcs15init/etoken.profile: increase size for bigger
	  keys

2006-01-20 20:52  nils

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/asn1.h,
	  trunk/src/libopensc/pkcs15-algo.c,
	  trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-data.c,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-pubkey.c,
	  trunk/src/libopensc/pkcs15-wrap.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/tools/pkcs15-tool.c: use more opensc specific names
	  for ASN.1 tags to avoid name conflicts with other ASN.1 libraries

2006-01-12 09:37  aj

	* trunk/configure.in: doc/old is gone.

2006-01-12 09:36  aj

	* trunk/man/old: remove old man pages (replaced by new man pages
	  in xml format).
	* trunk/doc/Makefile.am, trunk/doc/old: remove old documentation
	  (replaced by wiki).

2006-01-11 23:41  nils

	* trunk/src/libopensc/card-atrust-acos.c,
	  trunk/src/libopensc/card-flex.c,
	  trunk/src/libopensc/card-oberthur.c,
	  trunk/src/libopensc/card-starcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/sc.c, trunk/src/libopensc/types.h,
	  trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c,
	  trunk/src/pkcs15init/profile.c: - implement thread-safe path
	  printing function sc_path_print() and use it src/libopensc/ and
	  src/pkcs15init/ - use size_t for the certlen parameter of
	  sc_pkcs15init_update_certificate()

2006-01-07 23:40  martin

	* trunk/src/libopensc/card-mcrd.c: Get rid of handwritten
	  sc_read_record calls

2006-01-05 22:21  nils

	* trunk/src/scconf/test-conf.c: the current code requires a
	  pointer to a integer, note: it's actually not a bug when
	  foo_item is NULL as the necessary scconf_item object is created
	  by scconf_item_add_internal

2006-01-04 18:52  nils

	* trunk/src/libopensc/ctx.c: don't segfault if no config file
	  could be found (win); thanks to Nicolas Justin
	  <nicolas.justin@idealx.com>

2006-01-03 22:46  nils

	* trunk/src/libopensc/pkcs15-actalis.c: increase buffer size for
	  the serial number to 9 as we need 8 bytes for serial number plus
	  1 byte for the terminating 0 character

2006-01-03 16:24  sth

	* trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/tools/pkcs15-init.c: Add possibility to change pkcs15
	  attributes (currently only the label)

2006-01-03 14:42  sth

	* trunk/src/pkcs15init/pkcs15.profile: Forgotten to add in r2773

2006-01-01 23:11  nils

	* trunk/src/libopensc/opensc.h, trunk/src/libopensc/sc.c: summary:
	  -add more general path concatenation function
	  sc_concatenate_path() and let sc_append_path use it. -add
	  function sc_compare_path_prefix to check whether a path starts
	  with a certain sub-path (prefix). -add some doxygen docu to some
	  path handling functions

2005-12-30 10:34  sth

	* trunk/src/tools/pkcs15-tool.c: Typo fixes

2005-12-28 20:20  aj

	* trunk/src/tools/opensc-explorer.c: "cat xxxx" is not supposed to
	  create errors (on record structured files). so silence it.

2005-12-28 20:15  nils

	* trunk/src/libopensc/card-incrypto34.c,
	  trunk/src/libopensc/reader-openct.c,
	  trunk/src/libopensc/reader-pcsc.c: fix warnings

2005-12-28 20:05  nils

	* trunk/src/libopensc/pkcs15-tccardos.c: 

2005-12-28 20:01  nils

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak, trunk/src/libopensc/apdu.c,
	  trunk/src/libopensc/card.c, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/types.h:
	  summary: -complete rewrite of the APDU/transmission handling
	  code (should now support extended APDUs and is hopefully better
	  documented. Note: support for the T0 ENVELOPE command is still
	  missing due to a lack of test cards). -add new APDU case
	  constants SC_APDU_CASE_2 etc. which let OpenSC decides, based on
	  the card capabilities, whether to use short or extended APDUs.
	  -add new capability SC_CARD_CAP_RSA_2048 for cards supporting
	  2048 bit RSA operations (note: this is more a preliminary hack)

2005-12-28 19:41  nils

	* trunk/src/pkcs15init/pkcs15-lib.c: remove unused variable

2005-12-28 19:38  nils

	* trunk/src/libopensc/card-etoken.c, trunk/src/libopensc/cards.h,
	  trunk/src/pkcs15init/pkcs15-etoken.c: add support for cardos
	  m4.2 (still experimental)

2005-12-27 14:11  martin

	* trunk/src/libopensc/iso7816.c: If there's less data ina
	  file/record than requested do not fail but return as much data
	  as was available. This behaviour is similar to read(2).

2005-12-27 13:41  martin

	* trunk/src/libopensc/reader-pcsc.c: If SCardControl fails there's
	  nothing bad going on - just there's no support for this feature.

2005-12-27 13:39  martin

	* trunk/etc/opensc.conf.in: hav commented configuration lines have
	  the opposite values of hardcoded defaults.

2005-12-26 23:09  aj

	* trunk/configure.in: use svn revision based version numbers.

2005-12-26 18:50  aj

	* trunk/src/libopensc/pkcs15-tcos.c,
	  trunk/src/tools/netkey-tool.c: tcos update by peter koch, adds
	  interoperability with th darmstadt cards.

2005-12-23 11:23  sth

	* trunk/etc/opensc.conf.in: Added default debug/log file locations
	  for Windows

2005-12-23 10:15  sth

	* trunk/src/libopensc/log.c, trunk/src/pkcs11/pkcs11-global.c:
	  Referted the 'Fireofox 1.5' fix in log.c and replaced it by
	  letting a blocking C_WaitForSlotEvent() return
	  CKR_FUNCTION_NOT_SUPPORTED. This isn't a solution for the
	  multihread problems (things hang or try to log to a released
	  context) but at least it solves the Ff 1.5 problems

2005-12-22 15:54  nils

	* trunk/src/libopensc/card-flex.c: use correct apdu case and set
	  Le value

2005-12-21 21:19  nils

	* trunk/src/tests/p15dump.c: suppress errors when EF(unusedSpace)
	  is missing

2005-12-18 07:54  sth

	* trunk/src/pkcs15init/pkcs15.profile: Belongs to the rev. 2769
	  patch for adding EF(UnusedSpace) support

2005-12-17 21:52  nils

	* trunk/src/libopensc/pkcs15.c: remove unused variables

2005-12-17 20:54  nils

	* trunk/src/pkcs15init/pkcs15-lib.c: fix key usage flags and
	  ensure that we are in the correct lifecycle

2005-12-17 19:53  sth

	* trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/profile.c, trunk/src/tests/p15dump.c: Add
	  support for reading and writing from/to an EF(UnusedSpace) file;
	  this functionality can be used for deleting and creating pkcs15
	  objects (that reside in a file)

2005-12-16 20:52  nils

	* trunk/src/tools/cardos-info.c: add cardos m4.2 and print the
	  startkey version in hex

2005-12-14 10:59  aj

	* trunk/src/tools/Makefile.am: pkcs15-tool needs openssl_libs
	  also, if it is available. only older gcc versions found this
	  problem, it seems.

2005-12-12 20:38  nils

	* trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/card-starcos.c: fix APDU case

2005-12-08 20:25  sth

	* trunk/src/libopensc/log.c, trunk/src/pkcs11/pkcs11-global.c: Fix
	  for ticket #45: Firefox 1.5 and new Mozilla's crash when they
	  are closed because there's a blocking C_WaitForSlotEvent()
	  called from another thread then the 'main' thread that calls
	  C_Finalize(); and this cause C_WaitForSlotEvent() to log to a
	  NULL context -> assertion failure.

2005-12-08 09:05  ludovic.rousseau

	* trunk/src/libopensc/card-setcos.c: etcos_create_file_44(): use
	  sizeof(pins)/sizeof(pins[0]) instead of a constant (7)

2005-12-05 22:09  aj

	* trunk/src/scconf/scconf.c: oops, parm points to the first char,
	  not to a pointer to the string.

2005-12-05 22:07  aj

	* trunk/src/scconf/scconf.c: remove unused variable item in
	  scconf_put_str. remove unused variable ret in scconf_put_int.
	  from the readme: "if parm not NULL, then ... parm points to ..."
	  so we need to get the value of the location where it points to.

2005-12-05 21:59  aj

	* trunk/src/pkcs15init/pkcs15-oberthur.c: free pub_buff in error
	  path. removed unused pubfile variable and dead code. check
	  prvfile != NULL.

2005-12-05 21:58  aj

	* trunk/src/pkcs15init/pkcs15-cflex.c: check prkf != NULL.

2005-12-05 21:57  aj

	* trunk/src/pkcs15init/pkcs15-lib.c: free profilke and pin_obj in
	  the error path. check res_obj and keybits/keyargs before
	  dereferencing.

2005-12-05 21:55  aj

	* trunk/src/pkcs15init/profile.c: check p15card != NULL before
	  accessing it. in the error path free file if it was allocated.

2005-12-05 21:53  aj

	* trunk/src/pkcs11/secretkey.c: no code change, only easier to
	  parse :)

2005-12-05 21:52  aj

	* trunk/src/signer/opensc-crypto.c: also check that priv->p15card
	  is not NULL.

2005-12-05 21:51  aj

	* trunk/src/libopensc/pkcs15-infocamere.c: for example if the card
	  was removed, select file on the main folder will fail. so I
	  think it is best to return the error.

2005-12-05 21:50  aj

	* trunk/src/libopensc/pkcs15-postecert.c: even select_file can
	  fail (if card was removed etc.) so better check the error and
	  return the problem, right?

2005-12-05 21:49  aj

	* trunk/src/libopensc/pkcs15-algo.c: fix typo on *paramp test.
	  check alg_info always, not only in some case.

2005-12-05 21:48  aj

	* trunk/src/libopensc/pkcs15-syn.c: check scconf_find_blocks
	  returning NULL add a free(obj) to the error path.

2005-12-05 21:43  aj

	* trunk/src/libopensc/card-oberthur.c: check file parameter. set
	  file=NULL after freeing it to avoid potential double free. check
	  key_file parameter before dereferencing it. check card first,
	  then derefence it.

2005-12-05 21:41  aj

	* trunk/src/libopensc/card-setcos.c: sizeof(int[7]) is 28. I think
	  bCommands_pin should have 7 elements, too.

2005-12-05 21:39  aj

	* trunk/src/libopensc/card-openpgp.c: remove unneeded if(1) block.
	  free temp in error paths.
	* trunk/src/libopensc/card-belpic.c: check if scconf_find_blocks
	  returned NULL

2005-12-05 21:38  aj

	* trunk/src/libopensc/reader-ctapi.c: check if scconf_find_blocks
	  returned NULL

2005-12-05 21:37  aj

	* trunk/src/libopensc/pkcs15.c: check if scconf_find_blocks
	  returned NULL.
	* trunk/src/libopensc/iso7816.c: add proper free to error path.

2005-12-05 21:36  aj

	* trunk/src/libopensc/sc.c: simply code / remove dead code.
	* trunk/src/libopensc/card.c: check if scconf_find_blocks returns
	  NULL;

2005-12-05 21:35  aj

	* trunk/src/libopensc/ctx.c: add paranoia: what if
	  scconf_find_bloicks returns NULL?

2005-12-05 21:33  aj

	* trunk/src/libopensc/pkcs15-wrap.c: add paranoia: check all
	  arguments before dereferencing them to prevent segfaults.
	* trunk/src/libopensc/dir.c: free allocated variable in error
	  path. set rec=NULL after freeing it to prevent double free'ing.

2005-12-05 21:31  aj

	* trunk/src/tools/cryptoflex-tool.c: free buf if pin was entered
	  incorrectly. check if file is not NULL (out of memory). free
	  file, if something goes wrong. free pin/puk once no longer
	  needed.

2005-12-05 21:29  aj

	* trunk/src/tools/pkcs15-init.c: make code easier by removing
	  match variable. check if cert was returned != NULL. free cert if
	  there is some error. set variables to NULL after being freed, to
	  avoid potential double free bugs.

2005-12-05 21:27  aj

	* trunk/src/tools/opensc-explorer.c: proper cleanup: close files
	  if something goes wrong.
	* trunk/src/tools/pkcs15-tool.c: check publickey variable before
	  de-referencing. change newpin to NULL so it can't get free'd
	  twice. allocate buf from heap, not stack (quite large).

2005-12-05 21:25  aj

	* trunk/src/tools/pkcs11-tool.c: #if out the dead code. remove
	  some dead code in the hexdump code.

2005-12-05 21:22  aj

	* trunk/src/scconf/test-conf.c: does not work, will segfault. also
	  no need to assign foo_item all the time, scconf_item_add returns
	  the item parameter, so it does not change.

2005-12-05 21:21  aj

	* trunk/src/scconf/parse.c: add a few sanity checks.

2005-12-04 23:23  nils

	* trunk/src/pkcs11/framework-pkcs15.c: fix problem with
	  uninitialized pointer; this patch resolves opensc ticket #61

2005-12-02 22:24  nils

	* trunk/src/libopensc/card-incrypto34.c,
	  trunk/src/pkcs15init/pkcs15-incrypto34.c: fix pkcs15
	  initialization + fix DIRECTORY command; patch supplied by
	  Giuseppe AMATO <giuseppe.amato@st.com>

2005-12-01 22:18  aj

	* trunk/src/libopensc/card-flex.c: fix for the combination of
	  cryptoflex, 2048bit keys and some smart card readers by
	  Jean-Pierre Szikora

2005-11-29 20:56  nils

	* trunk/src/tools/opensc-tool.c, trunk/src/tools/pkcs15-tool.c:
	  use sc_print_path

2005-11-28 23:07  nils

	* trunk/src/tests/print.c: use sc_print_path

2005-11-26 10:03  nils

	* trunk/src/libopensc/card-atrust-acos.c,
	  trunk/src/libopensc/card-starcos.c: remove senseless and
	  inconsistent checks + cleanup

2005-11-25 19:11  nils

	* trunk/src/libopensc/reader-pcsc.c: use unsigned int instead of
	  uint16_t

2005-11-20 21:53  nils

	* trunk/src/libopensc/card-starcos.c: remove disabled code,
	  request FCI only if a file object has been specified

2005-11-17 10:23  nils

	* trunk/src/libopensc/opensc.h: fix ac for file deletion

2005-11-01 22:34  aj

	* trunk/src/tools/cardos-info.c: add more cardos versions.

2005-11-01 08:31  nils

	* trunk/src/tests/regression/init0005: use 1024 bit keys for
	  testing to avoid problems with starcos tokens

2005-10-31 19:31  sth

	* trunk/src/tools/pkcs15-init.c: Let --assert-pristine work for
	  Setcos 4.4 cards

2005-10-31 18:44  nils

	* trunk/src/libopensc/card.c, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/opensc.h: fix GET RESPONSE handling

2005-10-30 21:44  nils

	* trunk/src/pkcs11/slot.c: use sc_ctx_get_reader

2005-10-30 21:42  nils

	* trunk/src/libopensc/pkcs15-actalis.c,
	  trunk/src/libopensc/pkcs15-infocamere.c,
	  trunk/src/libopensc/pkcs15-postecert.c,
	  trunk/src/libopensc/pkcs15-syn.c, trunk/src/libopensc/pkcs15.h:
	  remove deprecated pkcs15 emulation api. Add temporary wrappers
	  for the new functions in some pkcs15 emulation drivers.

2005-10-30 21:17  nils

	* trunk/src/libopensc/card.c: fix warning

2005-10-30 20:37  nils

	* trunk/src/libopensc/card.c, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/opensc.h: summary: - improve support for
	  extended APDUs - add experimental support for command chaining -
	  simplify get_response prototype

2005-10-30 19:55  nils

	* trunk/src/libopensc/pkcs15-syn.c, trunk/src/libopensc/pkcs15.h:
	  add pkcs15 emu function for data objects

2005-10-30 19:08  nils

	* trunk/src/libopensc/card-atrust-acos.c,
	  trunk/src/libopensc/card-etoken.c,
	  trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/card-incrypto34.c,
	  trunk/src/libopensc/card-jcop.c,
	  trunk/src/libopensc/card-mcrd.c,
	  trunk/src/libopensc/card-openpgp.c,
	  trunk/src/libopensc/card-setcos.c,
	  trunk/src/libopensc/card-starcos.c, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/dir.c, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15-atrust-acos.c,
	  trunk/src/libopensc/pkcs15-gemsafe.c,
	  trunk/src/libopensc/pkcs15-infocamere.c,
	  trunk/src/libopensc/pkcs15-starcert.c,
	  trunk/src/libopensc/pkcs15-tcos.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/pkcs11/framework-pkcs15init.c,
	  trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c,
	  trunk/src/pkcs15init/pkcs15-setcos.c,
	  trunk/src/pkcs15init/pkcs15-starcos.c,
	  trunk/src/tools/cryptoflex-tool.c,
	  trunk/src/tools/pkcs15-init.c: add functions void
	  sc_ctx_suppress_errors_on(sc_context_t *ctx); void
	  sc_ctx_suppress_errors_off(sc_context_t *ctx); to turn on/off
	  error suppression (to avoid accessing sc_context_t directly) and
	  use it.

2005-10-30 18:05  nils

	* trunk/src/libopensc/internal.h, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/sc.c, trunk/src/tools/pkcs11-tool.c,
	  trunk/src/tools/pkcs15-init.c, trunk/src/tools/pkcs15-tool.c,
	  trunk/src/tools/util.c, trunk/src/tools/util.h: summary: - add
	  new function sc_format_oid to libopensc - cleanup libopensc api

2005-10-29 21:17  martin

	* trunk/src/libopensc/reader-pcsc.c: Update pcsc pinpad code to
	  latest pcsc-lite code, limit to pcsc-lite only. Verify works
	  fine, modify needs some debugging-testing.

2005-10-28 18:10  nils

	* trunk/src/libopensc/pkcs15-infocamere.c: update from Sirio
	  Capizzi <graaf@virgilio.it>

2005-10-27 21:39  martin

	* trunk/src/libopensc/card-etoken.c: This works better.

2005-10-27 20:16  nils

	* trunk/src/libopensc/card-etoken.c: add another cardos ATR,
	  supplied by graaf@virgilio.it

2005-10-24 22:00  aj

	* trunk/CodingStyle, trunk/INSTALL, trunk/Makefile.am, trunk/NEWS,
	  trunk/README: remove outdated files, improve documentation
	  slightly.

2005-10-24 21:58  nils

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak,
	  trunk/src/libopensc/card-incrypto34.c,
	  trunk/src/libopensc/cardctl.h, trunk/src/libopensc/cards.h,
	  trunk/src/libopensc/ctx.c, trunk/src/libopensc/log.h,
	  trunk/src/libopensc/opensc.h, trunk/src/pkcs15init/Makefile.am,
	  trunk/src/pkcs15init/Makefile.mak,
	  trunk/src/pkcs15init/incrypto34.profile,
	  trunk/src/pkcs15init/pkcs15-incrypto34.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c: add support for the Italian
	  Incrypto34 smartcard; patch supplied by Giuseppe AMATO
	  <giuseppe.amato@st.com>

2005-10-24 21:18  aj

	* trunk/man/Makefile.am: fix man page installation.

2005-10-24 15:19  martin

	* trunk/etc/opensc.conf.in: More comments on default config options

2005-10-21 20:12  aj

	* trunk/configure.in: not compatible with 0.9.*. increse library
	  major revision.

2005-10-21 19:40  nils

	* trunk/src/tools/pkcs11-tool.c: fix typo

2005-10-21 17:34  aj

	* trunk/NEWS, trunk/doc/old/doxygen.conf,
	  trunk/src/include/winconfig.h, trunk/win32/version.rc: prepare
	  0.10.0 release.

2005-10-20 12:55  aj

	* trunk/Makefile.am, trunk/QUICKSTART, trunk/README: remove
	  QUICKSTART (outdated and replaced by wiki documentation
	  "QuickStart") and add README pointing people to our wiki / html
	  documentation.

2005-10-17 08:00  aj

	* trunk/src/libopensc/card-tcos.c: update by Peter Koch. still one
	  problem left in pkcs11-tool, but lots of improvements.

2005-10-15 14:53  martin

	* trunk/etc/opensc.conf.in: Comment config file lines that have
	  default values.

2005-10-13 11:19  sth

	* trunk/src/tools/pkcs11-tool.c: Compiler warning fix: use 'char *
	  argv[]' in main() because getopt_long() does so too

2005-10-12 17:52  nils

	* trunk/src/libopensc/card-setcos.c: bugfix for a potential
	  segfault in card-setcos.c when the acl "pointer" is one of the
	  special values 1,2,3 Patch supplied by Jakub Bogusz
	  <qboosh@pld-linux.org>

2005-10-12 13:37  ludovic.rousseau

	* trunk/man/Makefile.am: use *.[1-7] instead of *.1 *.3 *.5 *.7 to
	  avoid the (harmless) error "ls: *.7: No such file or directory"

2005-10-11 20:57  aj

	* trunk/src/tools/pkcs11-tool.c, trunk/src/tools/util.h: fix
	  compiling on solaris9. Thanks to Douglas E. Engert

2005-10-10 19:24  aj

	* trunk/etc/opensc.conf.in: masquerading is no longer needed on
	  windows or mac os X and never was on linux.

2005-10-10 08:07  aj

	* trunk/doc/tools/netkey-tool.xml: fix typo.

2005-10-09 22:15  nils

	* trunk/src/libopensc/sc.c: fix build with openssl 0.9.8: move
	  "#include <openssl/crypto.h> up and remove unnecessary include
	  for asn1.h

2005-10-09 12:00  nils

	* trunk/src/libopensc/card.c: fix typo

2005-10-08 11:08  nils

	* trunk/src/libopensc/dir.c, trunk/src/libopensc/pkcs15.c:
	  suppress errors in pkcs15 card detection if we don't know
	  whether we really have a pkcs15 card

2005-10-07 20:04  nils

	* trunk/src/libopensc/pkcs15-infocamere.c: set the ca certificate
	  only if it's really present

2005-10-07 19:58  nils

	* trunk/src/tools/pkcs15-tool.c: print lastUpdate field as well

2005-10-07 11:40  martin

	* trunk/configure.in: define HAVE_PCSC on darwin with native pcsc

2005-10-07 07:06  aj

	* trunk/src/tools/pkcs15-tool.c: add a few details about the card,
	  also by Antonio Iacono.

2005-10-06 19:30  aj

	* trunk/src/tools/pkcs15-tool.c: add --dump option, thanks to
	  antonio

2005-10-06 18:23  aj

	* trunk/etc/opensc.conf.in: enable masquerading by default for
	  pcsc.

2005-10-06 10:28  martin

	* trunk/configure.in: Fix the #define in pcsc probing, move
	  pkg-config code before the darwin-specific code so that if a
	  pkg-config enabled pcsc is installed you can simply use
	  PKG_CONFIG_PATH to detect it.

2005-10-06 06:57  aj

	* trunk/configure.in, trunk/src/libopensc/reader-pcsc.c: Better
	  name, as suggested by Ludovic.

2005-10-05 15:25  aj

	* trunk/configure.in, trunk/src/libopensc/reader-pcsc.c: __APPLE__
	  does not need special handly. Only the broken pcsc-lite shipped
	  in mac os X does, so use define set by configure on mac os X, if
	  the default pcsc is used, but not if a self compiled is used.
	  teach configure new getopt source file names.

2005-10-05 15:23  aj

	* trunk/src/common/ChangeLog, trunk/src/common/LICENSE,
	  trunk/src/common/Makefile.am, trunk/src/common/Makefile.mak,
	  trunk/src/common/README, trunk/src/common/getopt.3,
	  trunk/src/common/getopt.c, trunk/src/common/getopt.h,
	  trunk/src/common/getopt.txt, trunk/src/common/getopt1.c,
	  trunk/src/common/getopt_int.h, trunk/src/common/main.c,
	  trunk/src/common/my_getopt.c, trunk/src/common/my_getopt.h:
	  replace GNU/glibc getopt (LGPL) with my_getopt (BSD).

2005-10-01 18:51  sth

	* trunk/src/pkcs11/framework-pkcs15.c: Do an sc_lock() before an
	  sc_pkcs15init_bind(). Reason: in sc_pkcs15init_bind() an
	  sc_lock() and sc_unlock() is done; and when the lock_login
	  config option is set to false, the sc_unlock() will call
	  logout() which for some cards means a SELECT(3F00) -> unwanted
	  change of the current EF/DF causing errors

2005-09-30 17:44  aj

	* trunk/src/pkcs11/pkcs11.h: reomve unneeded ifdefs.

2005-09-30 11:17  sth

	* trunk/src/pkcs11/pkcs11.h: Removed the bundle on Mac

2005-09-30 06:35  aj

	* trunk/src/libopensc/errors.c: "Unsupported" might be easier to
	  understand.

2005-09-28 14:52  sth

	* trunk/src/tools/pkcs15-init.c: Fix: deleting a cert chain with 1
	  or more intermediate CA's crashed

2005-09-27 17:22  nils

	* trunk/src/tools/pkcs11-tool.c: add option to specify the key
	  length

2005-09-24 17:45  aj

	* trunk/src/libopensc/card-tcos.c: new tcos atr provided by Gerald
	  Richter.

2005-09-23 15:47  aj

	* trunk/src/common/Makefile.am, trunk/src/common/getopt.c,
	  trunk/src/common/getopt.h, trunk/src/common/getopt1.c,
	  trunk/src/common/getopt_int.h: replace gpl'ed and old version
	  with new lgpl'ed version from glibc.

2005-09-23 15:46  aj

	* trunk/doc/Makefile.am: proper reference to src dir.

2005-09-23 15:45  aj

	* trunk/aclocal/Makefile.am: list all current macro packages.

2005-09-22 14:53  aj

	* trunk/doc/old/Makefile.am, trunk/doc/old/init_perso_guide.html,
	  trunk/doc/old/init_perso_guide.txt: add init perso guide by Nils.

2005-09-22 14:51  aj

	* trunk/src/libp11, trunk/src/scdl, trunk/src/sslengines: scdl is
	  replaced by ltdl, libp11 and sslengines are not standalone.

2005-09-22 13:15  aj

	* trunk/src/pkcs11/rsaref/Makefile.am,
	  trunk/src/pkcs11/rsaref/README: Document cryptoki header files.

2005-09-22 12:45  sth

	* trunk/src/pkcs15init/pkcs15-lib.c: No SC_AC_OP_DELETE for EFs

2005-09-22 08:50  martin

	* trunk/configure.in: Also remove the bundle stuff from configure

2005-09-21 20:18  aj

	* trunk/src/pkcs11/Makefile.mak: scconf no longer needed for
	  pkcs#11 spy.

2005-09-21 20:17  aj

	* trunk/src/pkcs11/Makefile.am: do not install bundles on mac os
	  X. no reason to.

2005-09-21 18:55  bert

	* trunk/doc/tools/netkey-tool.xml, trunk/doc/tools/tools.xml:
	  Added Peter Koch's netkey-tool manpage

2005-09-21 12:52  martin

	* trunk/Makefile.am, trunk/configure.in,
	  trunk/src/pkcs11/Makefile.mak: Fix makefiles

2005-09-21 10:10  martin

	* trunk/win32/Make.rules.mak: It actually helps to have make clean
	  on windows too

2005-09-21 10:09  martin

	* trunk/macos: don't know what it was for but it's not needed now.

2005-09-20 22:22  nils

	* trunk/src/libopensc/card.c: fix TPDU if T0 is used

2005-09-20 07:32  aj

	* trunk/aclocal/libtool.m4: adding libtool.m4 was a bad idea and
	  causes problems. undo.

2005-09-19 16:37  nils

	* trunk/src/tools/pkcs15-init.c: remove unused variable

2005-09-19 08:09  ludovic.rousseau

	* trunk/src/libopensc/ui.c: use_color(): add "rxvt-unicode" to the
	  list of terminals supporting colors

2005-09-18 20:29  aj

	* trunk/src/libopensc/card.c: undo change 2397 as it breaks openct
	  and you can use apd_masquerade = case4as3 instead.

2005-09-18 12:33  aj

	* trunk/etc/opensc.conf.in, trunk/src/libopensc/reader-openct.c:
	  make openct readers configureable.

2005-09-18 11:00  aj

	* trunk/etc/opensc.conf.in, trunk/src/pkcs11/Makefile.am,
	  trunk/src/pkcs11/pkcs11-spy.c: pkcs11-spy no longer uses a
	  config file.

2005-09-17 10:44  nils

	* trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/card-oberthur.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/ctx.c, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-pubkey.c,
	  trunk/src/libopensc/pkcs15-sec.c,
	  trunk/src/libopensc/reader-openct.c, trunk/src/libopensc/sc.c,
	  trunk/src/libopensc/ui.c, trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs15init/keycache.c: add a new function void
	  sc_mem_clear(void *ptr, size_t len); to clear a memory buffer.
	  If OpenSSL is used this function is a wrapper for
	  OPENSSL_cleanse, otherwise memset is currenlty used. Use this
	  function to clear memory buffers with sensitive content.

2005-09-17 09:40  nils

	* trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/libopensc/reader-pcsc.c,
	  trunk/src/signer/opensc-support.c: use calloc instead of malloc
	  + memset

2005-09-17 08:53  nils

	* trunk/src/libopensc/card-belpic.c: remove useless memset

2005-09-17 08:20  nils

	* trunk/src/libopensc/iso7816.c: don't use static buffer in
	  iso7816_build_pin_apdu

2005-09-17 08:04  nils

	* trunk/src/libopensc/pkcs15-infocamere.c: fix warning

2005-09-16 20:31  nils

	* trunk/src/libopensc/ctx.c, trunk/src/libopensc/pkcs15-syn.c,
	  trunk/src/libopensc/reader-ctapi.c, trunk/src/libopensc/ui.c,
	  trunk/src/pkcs15init/pkcs15-lib.c: log dlerror message when
	  dlopen failed

2005-09-16 10:18  nils

	* trunk/src/libopensc/ctx.c, trunk/src/libopensc/opensc.h,
	  trunk/src/pkcs11/pkcs11-global.c, trunk/src/pkcs11/slot.c: add
	  two new functions sc_reader_t *sc_ctx_get_reader(sc_context_t
	  *ctx, unsigned int i); unsigned int
	  sc_ctx_get_reader_count(sc_context_t *ctx); to access the
	  reader_count and the sc_reader objects (to avoid accessing the
	  sc_context members directly). Use these functions in src/pkcs11
	  + error checking to avoid accessing invalid sc_reader objects.

2005-09-16 08:55  nils

	* trunk/etc/opensc.conf.in, trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak,
	  trunk/src/libopensc/pkcs15-syn.c,
	  trunk/src/libopensc/pkcs15-tccardos.c: add pkcs15 emulation
	  support for a cardos based id card issued by tc trustcenter

2005-09-15 19:40  sth

	* trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/tools/pkcs15-init.c: Added certificate update
	  functionality

2005-09-15 05:55  sth

	* trunk/INSTALL, trunk/src/libopensc/Makefile.mak,
	  trunk/src/pkcs11/Makefile.mak,
	  trunk/src/pkcs15init/Makefile.mak, trunk/win32/Make.rules.mak:
	  Win32: we now need the external libtool package

2005-09-15 05:41  sth

	* trunk/src/libopensc/ctx.c: Fix warning on Windows compiler

2005-09-14 09:50  ludovic.rousseau

	* trunk/doc/export-wiki.sh: use -nv instead of --non-verbose since
	  wget 1.10 now uses --no-verbose instead. Grr!

2005-09-13 10:46  aj

	* trunk/doc/Makefile.am: fix ChangeLog generation.

2005-09-13 09:42  aj

	* trunk/doc/Makefile.am: generate and ship ChangeLog and HTML.

2005-09-13 08:13  sth

	* trunk/src/pkcs15init/Makefile.am: Added setcos.profile (thx JP
	  Szikora)

2005-09-12 21:16  aj

	* trunk/doc/changelog.sh, trunk/doc/export-wiki.sh,
	  trunk/doc/generate-man.sh: disable network connections by
	  xsltproc.

2005-09-12 21:09  nils

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/card-setcos.c,
	  trunk/src/libopensc/pkcs15-actalis.c,
	  trunk/src/libopensc/pkcs15-atrust-acos.c,
	  trunk/src/libopensc/pkcs15-gemsafe.c,
	  trunk/src/libopensc/pkcs15-infocamere.c,
	  trunk/src/libopensc/reader-pcsc.c: fix compiler warnings

2005-09-12 20:13  aj

	* trunk/doc/Makefile.am, trunk/doc/changelog.sh,
	  trunk/doc/generate-man.sh, trunk/doc/svn2cl.xsl: more makefile
	  fixes for man page stuff. add ChangeLog generation using svn2cl.

2005-09-12 17:34  aj

	* trunk/doc/Makefile.am, trunk/doc/generate-man.sh: remove html
	  files on "make maintainer-clean".

2005-09-12 17:32  aj

	* trunk/man/Makefile.am: remove man files on "make
	  maintainer-clean".
	* trunk/doc/tools/pkcs15-profile.xml,
	  trunk/doc/tools/pkcs15-profile.xml.in: rename *.xml.in to *.xml.

2005-09-12 17:12  aj

	* trunk/man/Makefile.am: simplified make.
	* trunk/configure.in, trunk/doc/Makefile.am,
	  trunk/doc/generate-man.sh, trunk/doc/src: remove doc/src, add
	  replacement script to render these files.

2005-09-12 17:07  aj

	* trunk/doc/api, trunk/doc/src/api, trunk/doc/src/tools,
	  trunk/doc/tools: remove one unneeded sublevel.
	* trunk/configure.in: don't touch pkcs15-profile.5.in.

2005-09-12 17:06  aj

	* trunk/man/cardos-info.1, trunk/man/cryptoflex-tool.1,
	  trunk/man/netkey-tool.1, trunk/man/old,
	  trunk/man/old/cardos-info.1, trunk/man/old/cryptoflex-tool.1,
	  trunk/man/old/netkey-tool.1, trunk/man/old/opensc-config.1,
	  trunk/man/old/opensc-explorer.1, trunk/man/old/opensc-tool.1,
	  trunk/man/old/opensc.7, trunk/man/old/pkcs11-tool.1,
	  trunk/man/old/pkcs15-crypt.1, trunk/man/old/pkcs15-init.1,
	  trunk/man/old/pkcs15-profile.5.in, trunk/man/old/pkcs15-tool.1,
	  trunk/man/old/pkcs15.7, trunk/man/old/sc_connect_card.3,
	  trunk/man/old/sc_detect_card_presence.3,
	  trunk/man/old/sc_disconnect_card.3,
	  trunk/man/old/sc_establish_context.3, trunk/man/old/sc_file.3,
	  trunk/man/old/sc_file_free.3, trunk/man/old/sc_file_new.3,
	  trunk/man/old/sc_list_files.3, trunk/man/old/sc_lock.3,
	  trunk/man/old/sc_pkcs15_compute_signature.3,
	  trunk/man/old/sc_read_binary.3, trunk/man/old/sc_read_record.3,
	  trunk/man/old/sc_release_context.3,
	  trunk/man/old/sc_select_file.3, trunk/man/opensc-config.1,
	  trunk/man/opensc-explorer.1, trunk/man/opensc-tool.1,
	  trunk/man/opensc.7, trunk/man/pkcs11-tool.1,
	  trunk/man/pkcs15-crypt.1, trunk/man/pkcs15-init.1,
	  trunk/man/pkcs15-profile.5.in, trunk/man/pkcs15-tool.1,
	  trunk/man/pkcs15.7, trunk/man/sc_connect_card.3,
	  trunk/man/sc_detect_card_presence.3,
	  trunk/man/sc_disconnect_card.3,
	  trunk/man/sc_establish_context.3, trunk/man/sc_file.3,
	  trunk/man/sc_file_free.3, trunk/man/sc_file_new.3,
	  trunk/man/sc_list_files.3, trunk/man/sc_lock.3,
	  trunk/man/sc_pkcs15_compute_signature.3,
	  trunk/man/sc_read_binary.3, trunk/man/sc_read_record.3,
	  trunk/man/sc_release_context.3, trunk/man/sc_select_file.3: move
	  old manpages to old/.

2005-09-12 08:32  nils

	* trunk/etc/opensc.conf.in: add gemsafe as well

2005-09-12 06:42  nils

	* trunk/etc/opensc.conf.in: tcos not netkey

2005-09-11 21:06  nils

	* trunk/src/libopensc/cards.h: remove superfluous comma

2005-09-11 21:05  nils

	* trunk/src/libopensc/ui.c: more pointer madness to make the
	  compiler happy

2005-09-11 20:40  nils

	* trunk/src/libopensc/ctx.c: fix function pointers

2005-09-11 19:57  sth

	* trunk/src/pkcs11/pkcs11-spy.c: Typo fix

2005-09-11 19:49  aj

	* trunk/configure.in: set assuan status for the summary at the end.
	* trunk/ChangeLog: "NEWS" is the file for manual editing, and
	  doc/ChangeLog will be auto generated from the svn repository /
	  log.

2005-09-11 19:48  aj

	* trunk/ANNOUNCE, trunk/AUTHORS, trunk/Makefile.am, trunk/README:
	  AUTHORS: now in the wiki. README: now in the wiki. people will
	  find the "doc/" directory, I'm sure. remove ANNONCE, as it is
	  always outdated.

2005-09-09 19:51  nils

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak,
	  trunk/src/libopensc/pkcs15-netkey.c,
	  trunk/src/libopensc/pkcs15-syn.c,
	  trunk/src/libopensc/pkcs15-tcos.c: pkcs15-netkey.c ->
	  pkcs15-tcos.c

2005-09-09 19:30  nils

	* trunk/src/libopensc/pkcs15-netkey.c: update tcos pkcs15
	  emulation drivers; patch supplied by Peter Koch
	  <pk_opensc@web.de>

2005-09-09 14:43  aj

	* trunk/src/Makefile.mak, trunk/src/libp11/Makefile.mak,
	  trunk/src/pkcs11/Makefile.mak, trunk/src/tools/Makefile.mak,
	  trunk/win32/Make.rules.mak: use ltdl not scdl.

2005-09-09 12:45  aj

	* trunk/configure.in: add autoconf voodoo to circumvent the
	  caching.

2005-09-09 12:32  aj

	* trunk/configure.in: oops, ugly bug in configure script. set
	  those variables, if the user did *NOT* supply any of them
	  himself.

2005-09-09 11:32  martin

	* trunk/configure.in: No ENGINE_MSG in configure.in

2005-09-09 11:31  martin

	* trunk/etc/opensc.conf.in: RIP, scam

2005-09-09 07:15  nils

	* trunk/src/pkcs15init/pkcs15-starcos.c: select file even if no
	  acl for writting is set; patch supplied by Tarasov Viktor
	  <vtarasov@idealx.com>

2005-09-08 17:21  aj

	* trunk/src/libopensc/Makefile.am, trunk/src/pkcs11/Makefile.am,
	  trunk/src/tests/Makefile.am, trunk/src/tools/Makefile.am: we use
	  libtool for linking, so it can calucalte the dependencies using
	  LTLIBLTDL better. Thanks to Ralf Wildenhues.

2005-09-08 17:15  aj

	* trunk/src/libopensc/Makefile.am, trunk/src/pkcs11/Makefile.am,
	  trunk/src/pkcs15init/Makefile.am, trunk/src/scconf/Makefile.am,
	  trunk/src/signer/Makefile.am, trunk/src/tests/Makefile.am,
	  trunk/src/tools/Makefile.am: AC_SUBSTed variables are better
	  used with $(..). Thanks to Ralf Wildenhues.

2005-09-08 17:06  aj

	* trunk/configure.in: fix AC_MSG_ERROR usage. thanks to Ralf
	  Wildenhues.

2005-09-08 16:52  aj

	* trunk/Makefile.am, trunk/bootstrap: aclocal -I aclocal/ (as
	  suggested by Ralf Wildenhues)

2005-09-08 14:27  aj

	* trunk/configure.in: proper use of CFLAGS push/pop. fix
	  overwriting CFLAGS.

2005-09-08 11:35  martin

	* trunk/etc/opensc.conf.in, trunk/src/libopensc/card-mcrd.c,
	  trunk/src/libopensc/reader-pcsc.c,
	  trunk/src/pkcs11/Makefile.mak: * Get rid of reset card error
	  that comes from pcsc only and deal with reset situations with
	  SCardReconnect * Add some options to control pcsc behavior.

2005-09-07 20:05  nils

	* trunk/src/pkcs11/Makefile.am, trunk/src/pkcs11/pkcs11-spy.c:
	  remove dependence on libopensc, instead use scconf directly.
	  Note: this code is still experimental !

2005-09-07 09:34  nils

	* trunk/src/pkcs11/pkcs11-session.c: fix warning

2005-09-07 09:32  nils

	* trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/tools/pkcs15-init.c: cleanup key usage handling,
	  cleanup

2005-09-07 09:20  nils

	* trunk/src/tests/Makefile.am: we need libltdl

2005-09-07 09:05  nils

	* trunk/configure.in: fix openssl configure message

2005-09-07 08:47  nils

	* trunk/src/libopensc/card-jcop.c: let src/libopensc/ compile with
	  -Wall -W -Wno-unused-parameter -Werror

2005-09-07 08:33  nils

	* trunk/src/libopensc/card-atrust-acos.c,
	  trunk/src/libopensc/card-belpic.c,
	  trunk/src/libopensc/card-default.c,
	  trunk/src/libopensc/card-emv.c,
	  trunk/src/libopensc/card-etoken.c,
	  trunk/src/libopensc/card-flex.c, trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/card-mcrd.c,
	  trunk/src/libopensc/card-miocos.c,
	  trunk/src/libopensc/card-oberthur.c,
	  trunk/src/libopensc/card-openpgp.c,
	  trunk/src/libopensc/card-setcos.c,
	  trunk/src/libopensc/card-starcos.c,
	  trunk/src/libopensc/card-tcos.c,
	  trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/libopensc/reader-pcsc.c: let src/libopensc/ compile
	  with -Wall -W -Wno-unused-parameter -Werror

2005-09-06 21:18  nils

	* trunk/src/tools/pkcs15-init.c: adjust key usage bits

2005-09-06 20:22  aj

	* trunk/src/pkcs11/Makefile.am: users of libpcs11.c also need
	  @LIBLTDL@ libraries.

2005-09-06 12:40  aj

	* trunk/man/pkcs15-init.1, trunk/man/pkcs15-profile.5.in,
	  trunk/man/pkcs15.7: man page fixes from the debian diff.

2005-09-05 20:44  aj

	* trunk/src/libopensc/Makefile.am, trunk/src/tools/Makefile.am:
	  fix compiling with ltdl.

2005-09-05 20:15  aj

	* trunk/configure.in: fix openct detection. fix assuan detection.
	  improve libltdl detection code.
	* trunk/aclocal/lib-ld.m4, trunk/aclocal/lib-link.m4,
	  trunk/aclocal/lib-prefix.m4: add macro packages used by opensc.

2005-09-05 20:13  aj

	* trunk/aclocal/libassuan.m4, trunk/aclocal/libtool.m4: add
	  additional m4 macro packages used by opensc.

2005-09-05 17:05  nils

	* trunk/src/pkcs11/libpkcs11.c: we need lt_dlinit()

2005-09-05 11:29  martin

	* trunk/src/libopensc/reader-pcsc.c: Include reader.h if found.

2005-09-05 06:44  ludovic.rousseau

	* trunk/doc/export-wiki.sh: make export-wiki.sh executable

2005-09-04 09:23  nils

	* trunk/src/libopensc/card-setcos.c: yet another atr + cleanup

2005-09-04 08:57  nils

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/internal.h:
	  remove unused internal function

2005-09-02 16:53  aj

	* trunk/Makefile.am, trunk/doc/Makefile.am: one more change to
	  "make dist" style documentation generation.

2005-09-02 09:51  aj

	* trunk/Makefile.am: "doc" does not work well, it is the
	  subdirectory name.

2005-09-02 09:29  aj

	* trunk/Makefile.am: dist-hook: is too late, need to generate the
	  documentation before automake "make dist" copied files around.

2005-09-01 20:51  aj

	* trunk/src/pkcs15init/Makefile.am, trunk/src/tools/Makefile.am:
	  fix compiling with openssl installed in a non-standard location.

2005-09-01 17:18  aj

	* trunk/doc/Makefile.am, trunk/doc/old/Makefile.am: proper
	  documentation cleanup.

2005-09-01 14:01  aj

	* trunk/Makefile.am, trunk/bootstrap, trunk/configure.in,
	  trunk/src/Makefile.am, trunk/src/include/opensc/Makefile.am,
	  trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/pkcs15-syn.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/reader-ctapi.c, trunk/src/libopensc/ui.c,
	  trunk/src/pkcs11/Makefile.am, trunk/src/pkcs11/Makefile.mak,
	  trunk/src/pkcs11/libpkcs11.c, trunk/src/pkcs15init/Makefile.mak,
	  trunk/src/pkcs15init/pkcs15-lib.c, trunk/src/signer/Makefile.am,
	  trunk/src/tools/Makefile.am: big configure update. use
	  pkg-config for openct, openssl, pcsc. do not compilke libp11. do
	  not compile sslengines. remove scdl. use libltdl instead. use
	  libassuan.m4 macro for m4 detection.

2005-09-01 14:00  aj

	* trunk/doc/old/generate.sh, trunk/doc/trac.css: remove trac.css
	  from svn. add script to generate documentation (old one).

2005-09-01 13:59  aj

	* trunk/doc/AladdinEtokenPro.html, trunk/doc/AutoVersions.html,
	  trunk/doc/BelgianEid.html, trunk/doc/CardOs.html,
	  trunk/doc/CardReaders_CTAPI.html,
	  trunk/doc/CardReaders_SPR532.html,
	  trunk/doc/CardsAndTokens.html,
	  trunk/doc/CompatibilityIssues.html,
	  trunk/doc/CompatiblityIssues.html,
	  trunk/doc/CryptoIdendityItsec.html, trunk/doc/Cryptoflex.html,
	  trunk/doc/Cyberflex.html, trunk/doc/DesignDiscussion.html,
	  trunk/doc/DesignDiscussion_UserInterface.html,
	  trunk/doc/EstonianEid.html, trunk/doc/FinnishEid.html,
	  trunk/doc/GemplusGpk.html, trunk/doc/GermanEid.html,
	  trunk/doc/ItalianEid.html, trunk/doc/ItalianPostecert.html,
	  trunk/doc/LinuxDistributions.html, trunk/doc/MacOsX.html,
	  trunk/doc/Makefile.am, trunk/doc/MartinBlog.html,
	  trunk/doc/MartinBlogMuscle.html,
	  trunk/doc/MartinBlogPlatform.html, trunk/doc/OpenPgp.html,
	  trunk/doc/OpenSsh.html, trunk/doc/OpensslEngines.html,
	  trunk/doc/PinpadReaders.html, trunk/doc/PuTTYcard.html,
	  trunk/doc/RainbowIkeyThree.html,
	  trunk/doc/RecentTestresults.html, trunk/doc/ReleaseHowto.html,
	  trunk/doc/ReplacingCertificates.html, trunk/doc/RoadMap.html,
	  trunk/doc/SchlumbergerEgate.html,
	  trunk/doc/SmartCardApplications.html, trunk/doc/SpanishEid.html,
	  trunk/doc/SubversionRepository.html,
	  trunk/doc/SupportedHardware.html, trunk/doc/SwedishEid.html,
	  trunk/doc/TaiwanEid.html, trunk/doc/TelseCos.html,
	  trunk/doc/TroubleShooting.html, trunk/doc/WindowsCsp.html,
	  trunk/doc/export-wiki.sh, trunk/doc/index.html,
	  trunk/doc/old/Makefile.am, trunk/doc/old/opensc-es.html,
	  trunk/doc/old/opensc.html, trunk/doc/pkcs11_keypair_gen.html:
	  big documentation update. remove html from svn.

2005-08-29 20:48  sth

	* trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15.profile,
	  trunk/src/pkcs15init/profile.c, trunk/src/pkcs15init/profile.h:
	  The lastUpdate field is in the EF(TokenInfo), not in the ODF
	  (thx Nils)

2005-08-29 12:49  sth

	* trunk/src/pkcs11/pkcs11-display.c: Added Netscape/Mozilla
	  specific types etc.

2005-08-28 20:18  aj

	* trunk/configure.in, trunk/src/Makefile.am,
	  trunk/src/Makefile.mak, trunk/win32/Make.rules.mak: stop
	  building libp11 and the ssl engines.

2005-08-26 19:35  sth

	* trunk/src/pkcs15init/pkcs15-setcos.c: Fix in new_file(): if
	  there's already a key with such ID, take next one

2005-08-26 19:33  sth

	* trunk/src/libopensc/card-setcos.c: Return the real pinref

2005-08-24 16:18  nils

	* trunk/src/tools/eidenv.c: fix compiler warning

2005-08-24 16:11  sth

	* trunk/src/pkcs15init/setcos.profile: Improved ACs

2005-08-24 15:59  nils

	* trunk/src/tools/pkcs15-init.c: add missing include, removed
	  unused variable and initialize variable

2005-08-24 15:54  nils

	* trunk/src/libopensc/pkcs15.c: decode preferredLanguage field if
	  present

2005-08-24 14:25  ludovic.rousseau

	* trunk/src/libp11/libp11-int.h, trunk/src/libp11/libp11.h: move
	  PKCS11_open_session() from libp11-int.h to libp11.h

2005-08-24 09:50  sth

	* trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15.profile,
	  trunk/src/pkcs15init/profile.c, trunk/src/pkcs15init/profile.h:
	  Have the option not to update the ODF (the lastUpdate field),
	  this is usefull for cards that don't have an ODF that is
	  un-writable or too small

2005-08-24 08:00  nils

	* trunk/src/libopensc/asn1.c: de-/encode printable strings as well

2005-08-23 21:16  nils

	* trunk/src/libopensc/card-gpk.c: cleanup

2005-08-23 09:01  sth

	* trunk/src/tools/pkcs15-init.c: Added set_userpin_ref() to link a
	  PIN value to a PIN ref for an existing user PIN

2005-08-22 12:53  sth

	* trunk/ChangeLog: Add support for SetCOS 4.4.1 card. Add support
	  for deleting pkcs15 objects.

2005-08-22 09:37  nils

	* trunk/src/pkcs15init/pkcs15-lib.c: mark card/profile as dirty
	  when an object has been deleted
	* trunk/src/libopensc/cardctl.h: avoid warning

2005-08-22 09:23  sth

	* trunk/src/tools/pkcs15-init.c: Added support for deleting pkcs15
	  objects (if the pkcs15init card driver for that card supports it)

2005-08-22 09:22  nils

	* trunk/src/libopensc/card.c, trunk/src/libopensc/internal.h: fix
	  parameter type

2005-08-22 09:20  sth

	* trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-etoken.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-jcop.c,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-miocos.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c,
	  trunk/src/pkcs15init/pkcs15-setcos.c,
	  trunk/src/pkcs15init/pkcs15-starcos.c: Added support for
	  deleting pkcs15 objects, each card driver should implement its
	  delete_object() operation in order to support it

2005-08-22 09:17  nils

	* trunk/src/libopensc/card-oberthur.c: add support for serial
	  number in card-oberthur.c; supplied by Tarasov Viktor
	  <vtarasov@idealx.com>

2005-08-22 09:15  nils

	* trunk/src/libopensc/reader-pcsc.c: add missing variable

2005-08-21 18:44  martin

	* trunk/src/libopensc/card.c, trunk/src/libopensc/internal.h,
	  trunk/src/libopensc/reader-pcsc.c: Make the pcsc pinpad option
	  work.

2005-08-21 18:39  martin

	* trunk/src/pkcs11/framework-pkcs15.c: Don't cache pins that
	  protect a userconsent slot.

2005-08-20 13:39  nils

	* trunk/src/libopensc/iso7816.c: use compile time initialization
	  for the iso_ops structure

2005-08-20 11:06  nils

	* trunk/src/libopensc/pkcs15-netkey.c: use non-repudiation flag
	  only for the signature key

2005-08-19 17:56  nils

	* trunk/src/libopensc/card-jcop.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c,
	  trunk/src/pkcs15init/profile.c: check result of sc_file_dup +
	  some cleanup

2005-08-19 06:39  nils

	* trunk/src/libopensc/sc.c: sc_file_dup(): copy attributes as
	  well, use explicit assignement and check return values

2005-08-18 22:43  nils

	* trunk/src/libopensc/sc.c: use calloc instead of malloc + memset

2005-08-18 21:14  sth

	* trunk/src/pkcs15init/pkcs15-lib.c: Fix: object type contains not
	  only the class

2005-08-18 14:01  sth

	* trunk/src/libopensc/card-belpic.c,
	  trunk/src/libopensc/pkcs15-sec.c: Undo-ing accidential commit of
	  card-belpic.c and pkcs15-sec.c

2005-08-18 13:55  sth

	* trunk/src/libopensc/card-belpic.c,
	  trunk/src/libopensc/pkcs15-sec.c, trunk/src/libopensc/pkcs15.c:
	  The lengths of the ASN.1 entries are used outside the if blocks
	  -> declare them outside the blocks

2005-08-18 08:39  ludovic.rousseau

	* trunk/src/libp11/libp11.h: use _LIB11_H instead of _LIB11_INT_H

2005-08-18 07:06  ludovic.rousseau

	* trunk/src/libp11/p11_load.c: PKCS11_CTX_unload(): do not call
	  ERR_free_strings() and ERR_remove_state() since OpenSSL strings
	  may be used by the application and we can't know

2005-08-16 21:35  nils

	* trunk/src/libopensc/card-tcos.c: add support for signature
	  generation with a decryption key; patch supplied by Peter Koch
	  <pk_opensc@web.de>

2005-08-16 12:10  nils

	* trunk/src/libp11/libp11.h: use ERR_LIB_USER instead of 42

2005-08-16 11:05  ludovic.rousseau

	* trunk/src/libp11/libp11.h, trunk/src/libp11/p11_err.c,
	  trunk/src/libp11/p11_slot.c: add PKCS11_change_pin() function

2005-08-16 10:58  nils

	* trunk/src/sslengines/engine_pkcs11.c: summary: - do not use key
	  enumeration as a test of login status, as this will not work for
	  all PKCS#11 libraries - replace magic number used for PIN length
	  with a constant - add documentation for set_pin, as well as
	  testing for NULL input and checking for strdup failure - made
	  the global variable 'pin' static (TODO check if other global
	  variables can be declared static) - if a PIN is allocated, then
	  check for NULL - if a PIN is to be freed, then whiten the memory
	  first - if the token has a secure authentication path, then the
	  PIN shoud be NULL (as per PKCS#11 v2, p. 126) - replaced some
	  fprintf statements with 'fail' (TODO all fprintf calls should be
	  replaced with log functions) Patch supplied by Geoff Elgey
	  <Geoff.Elgey@quest.com>

2005-08-14 22:33  nils

	* trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-etoken.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-jcop.c,
	  trunk/src/pkcs15init/pkcs15-miocos.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c,
	  trunk/src/pkcs15init/pkcs15-setcos.c,
	  trunk/src/pkcs15init/pkcs15-starcos.c: make old compilers happy

2005-08-14 22:00  nils

	* trunk/src/libopensc/card-oberthur.c: fix typo

2005-08-13 13:26  martin

	* trunk/etc/opensc.conf.in, trunk/src/libopensc/reader-pcsc.c: *
	  Clean up some whitespace * class2->part10 * Make pinpad
	  detection a configurable option

2005-08-13 13:14  martin

	* trunk/configure.in: Add a check for reader.h

2005-08-13 13:10  martin

	* trunk/Makefile.am, trunk/PAM_README, trunk/solaris/proto: *
	  Remove PAM_README as it is not valid any more * Remove dead
	  files from Solaris package script

2005-08-13 13:04  martin

	* trunk/etc/opensc.conf.in, trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h:
	  Remove the (stupid) use_pinpad option from pkcs15 structures

2005-08-11 19:14  nils

	* trunk/src/libopensc/card-oberthur.c,
	  trunk/src/pkcs15init/oberthur.profile: two small fixes from
	  Tarasov Viktor <vtarasov@idealx.com>

2005-08-10 21:31  nils

	* trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-etoken.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-jcop.c,
	  trunk/src/pkcs15init/pkcs15-miocos.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c,
	  trunk/src/pkcs15init/pkcs15-starcos.c: initialize
	  sc_pkcs15init_operations at compile time

2005-08-10 21:00  nils

	* trunk/src/libopensc/asn1.c: set obj to NULL to avoid double free
	  in case of an error

2005-08-10 19:04  nils

	* trunk/configure.in, trunk/src/tools/pkcs15-tool.c: use
	  inttypes.h instead of stdint.h; disable read_ssh_key when no
	  uint32_t is available

2005-08-10 18:20  nils

	* trunk/src/tools/pkcs15-init.c: initialize the oid object, patch
	  supplied by Tarasov Viktor <vtarasov@idealx.com>

2005-08-09 21:27  nils

	* trunk/src/pkcs11/debug.c, trunk/src/tools/pkcs15-tool.c: include
	  sys/types.h if stdint.h doesn't exist + fix typo

2005-08-09 21:13  nils

	* trunk/configure.in: check for stdint.h and remove checks for pam
	  stuff

2005-08-09 18:21  nils

	* trunk/src/tools/opensc-explorer.c: allow up to 64 byte long pins

2005-08-09 11:51  ludovic.rousseau

	* trunk/src/libp11/libp11.h, trunk/src/libp11/p11_slot.c:
	  PKCS11_login(), PKCS11_init_token(), PKCS11_init_pin(): use
	  "const char *" instead of "char *" for pin arguments

2005-08-09 11:48  ludovic.rousseau

	* trunk/src/libp11/p11_misc.c: pkcs11_strdup(): use "return NULL;"
	  instead of just "NULL;"

2005-08-09 07:53  nils

	* trunk/src/libopensc/card-oberthur.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c: oberthur updates from
	  Tarasov Viktor <vtarasov@idealx.com>

2005-08-08 14:25  sth

	* trunk/src/tools/eidenv.c: One of the memset()s appears to write
	  too much zeros on some systems -> put all the data in a struct
	  and memset() this instead of each field separately. Thx to JP
	  Szikora for notifying.

2005-08-08 10:22  nils

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/asn1.h,
	  trunk/src/libopensc/card-atrust-acos.c,
	  trunk/src/libopensc/card-starcos.c,
	  trunk/src/libopensc/card-tcos.c, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/pkcs15-postecert.c,
	  trunk/src/libopensc/pkcs15-syn.c,
	  trunk/src/pkcs15init/pkcs15-starcos.c: cleanup, mostly
	  signed/unsigned issues

2005-08-05 19:07  nils

	* trunk/ChangeLog, trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-setcos.c,
	  trunk/src/pkcs15init/pkcs15-starcos.c,
	  trunk/src/pkcs15init/profile.h: Add support for the lastUpdate
	  field to pkcs15init. Add flag to indicate whether some data has
	  been changed to the profile structure and set the flag in the
	  functions which change the card contents.

2005-08-05 17:18  nils

	* trunk/src/libopensc/card-atrust-acos.c,
	  trunk/src/libopensc/card-etoken.c,
	  trunk/src/libopensc/card-starcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/internal.h, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/opensc.h: the apdu error codes are unsigned
	  => change sc_check_sw and the card ops check_sw

2005-08-05 16:24  nils

	* trunk/ChangeLog, trunk/src/libopensc/pkcs15-cache.c,
	  trunk/src/libopensc/pkcs15-syn.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/pkcs15.h: - Initial support for
	  TokenUpdate;;lastUpdate field. Change pkcs15 caching code to use
	  the card serial number and lastUpdate field (if present) to
	  specify the cache file. - consistently use unsigned data types
	  to specify object types - make sc_pkcs15emu_get_df a local
	  function (it's not used outside pkcs15-syn.c and honestly I see
	  no reason to export it). - start of a new ChangeLog file (with
	  some intial entries)

2005-08-05 15:03  nils

	* trunk/src/libopensc/pkcs15-atrust-acos.c,
	  trunk/src/libopensc/pkcs15-gemsafe.c,
	  trunk/src/libopensc/pkcs15-netkey.c,
	  trunk/src/libopensc/pkcs15-starcert.c: more cleanup

2005-08-05 07:28  nils

	* trunk/src/libopensc/asn1.c: improve generalizedTime support +
	  more cleanup

2005-08-05 07:24  nils

	* trunk/src/libopensc/dir.c, trunk/src/libopensc/pkcs15-algo.c,
	  trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-data.c,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-pubkey.c,
	  trunk/src/libopensc/pkcs15-wrap.c: properly initialize
	  sc_asn1_entry elements + some cleanup

2005-08-04 06:29  sth

	* trunk/src/libopensc/pkcs15.h: Reverse the export of function
	  parse_x509_cert()

2005-08-03 18:43  nils

	* trunk/src/libopensc/opensc.h, trunk/src/libopensc/sc.c: change
	  sc_bin_to_hex separator parameter from char to int as character
	  constants are integers in c

2005-08-03 18:29  nils

	* trunk/src/libopensc/card-belpic.c,
	  trunk/src/libopensc/pkcs15-gemsafe.c,
	  trunk/src/libopensc/pkcs15-openpgp.c: cleanup

2005-08-03 11:33  sth

	* trunk/src/tools/eidenv.c: More typo fixes, from JP Zikora

2005-08-03 09:07  sth

	* trunk/src/libopensc/pkcs15-cert.c, trunk/src/libopensc/pkcs15.h:
	  Export function parse_x509_cert()

2005-08-03 09:05  sth

	* trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h:
	  Allow to seach a data object by it's application OID

2005-08-03 09:00  sth

	* trunk/src/libopensc/opensc.h, trunk/src/libopensc/sc.c: Added
	  function sc_compare_oid()

2005-08-02 21:13  nils

	* trunk/src/libopensc/base64.c, trunk/src/libopensc/card-belpic.c,
	  trunk/src/libopensc/card-etoken.c,
	  trunk/src/libopensc/iso7816.c: cleanup

2005-08-02 20:48  sth

	* trunk/src/tools/eidenv.c: Typo fix

2005-08-01 08:59  nils

	* trunk/src/libp11/p11_misc.c: check malloc return value

2005-07-29 21:21  sth

	* trunk/src/tools/eidenv.c: Added support for the Belgian EID card
	  (shows the contents of the ID and Address files)

2005-07-29 21:15  sth

	* trunk/src/tools/Makefile.mak: Add eidenv.exe tool

2005-07-29 21:14  sth

	* trunk/src/tools/eidenv.c: Now compiles on Win32

2005-07-29 14:38  mb

	* trunk/src/tests/print.c: Fixed a warning (comparison between
	  signed and unsigned).

2005-07-24 14:06  nils

	* trunk/etc/opensc.conf.in, trunk/src/pkcs11/framework-pkcs15.c:
	  apply Stef's patch which puts all public objects in first slot
	  if only one pin is present (and hide_empty_tokens is true)

2005-07-21 21:05  aj

	* trunk/src/pkcs11/framework-pkcs15.c: fix compiling without
	  openssl.

2005-07-20 18:19  nils

	* trunk/src/libopensc/reader-openct.c,
	  trunk/src/pkcs15init/pkcs15-cflex.c: fix memory leak; patch
	  supplied by Imanishi Masayuki <Masayuki.Imanishi@jp.sony.com>

2005-07-20 17:58  nils

	* trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/tools/pkcs15-init.c: fix use of x509v3 key usage
	  extension value

2005-07-20 00:47  bert

	* trunk/opensc: oops, how did I create that...

2005-07-20 00:43  bert

	* trunk/doc/src/tools, trunk/doc/src/tools/cardos-info.xml,
	  trunk/doc/src/tools/cryptoflex-tool.xml,
	  trunk/doc/src/tools/opensc-config.xml,
	  trunk/doc/src/tools/opensc-explorer.xml,
	  trunk/doc/src/tools/opensc-tool.xml,
	  trunk/doc/src/tools/pkcs11-tool.xml,
	  trunk/doc/src/tools/pkcs15-crypt.xml,
	  trunk/doc/src/tools/pkcs15-init.xml,
	  trunk/doc/src/tools/pkcs15-profile.xml.in,
	  trunk/doc/src/tools/pkcs15-tool.xml,
	  trunk/doc/src/tools/tools.xml: added docbook XML source for
	  tools manpages

2005-07-19 23:28  bert

	* trunk/opensc: Initial import.

2005-07-19 21:03  aj

	* trunk/src/libopensc/card-etoken.c: sorry, not compatible :(

2005-07-19 11:57  nils

	* trunk/src/libp11/p11_load.c: free error strings on when
	  destroying context

2005-07-19 11:20  sth

	* trunk/src/libp11/p11_key.c,
	  trunk/src/sslengines/engine_pkcs11.c: #ifndef strncasecmp
	  doesn't work because strncasecmp is no macro (thx Nils)

2005-07-18 22:33  aj

	* trunk/src/libopensc/card-etoken.c: add new atr.

2005-07-18 21:30  nils

	* trunk/src/libopensc/card-starcos.c: only copy resp if the
	  operation was successful

2005-07-18 20:20  nils

	* trunk/src/pkcs11/framework-pkcs15.c, trunk/src/pkcs11/openssl.c,
	  trunk/src/pkcs11/pkcs11-object.c, trunk/src/pkcs11/sc-pkcs11.h:
	  don't use software prng

2005-07-18 12:20  sth

	* trunk/src/tools/pkcs15-tool.c: Added #ifdef HAVE_OPENSSL for
	  read_ssh_key()

2005-07-18 12:13  sth

	* trunk/src/Makefile.mak, trunk/win32/Make.rules.mak: Don't build
	  libp11 if we don't have OpenSSL support

2005-07-18 12:12  sth

	* trunk/win32/Make.rules.mak: Get include files also from
	  include\opensc, this is a temporary fix so the compiler finds
	  the rsaref/ dir when reaching '#include <rsaref/pkcs11.h>' in
	  libp11-int.h

2005-07-18 11:56  sth

	* trunk/src/sslengines/Makefile.mak: Changes in .obj and .lib
	  files now we have the new libp11

2005-07-18 11:54  sth

	* trunk/src/sslengines/engine_pkcs11.c: No strncasecmp() on Windows

2005-07-18 11:53  sth

	* trunk/src/libp11/Makefile.mak: Install libp11.h + small fixes

2005-07-18 11:51  sth

	* trunk/src/libp11/p11_key.c: No strncasecmp() on Windows

2005-07-18 09:15  aj

	* trunk/src/libp11/p11_slot.c: open a session if there is none.

2005-07-18 07:26  nils

	* trunk/src/libopensc/card-starcos.c: starcos has a GET CHALLENGE
	  command ... useless flag

2005-07-17 21:19  aj

	* trunk/src/libp11/libp11.h, trunk/src/libp11/p11_slot.c: add
	  functions to access smart card as random number generator.

2005-07-17 20:40  aj

	* trunk/configure.in: fix scconf linking.

2005-07-17 20:31  aj

	* trunk/src/libopensc/Makefile.am: oops, ldap/scam is no more.

2005-07-17 20:27  aj

	* trunk/doc/Makefile, trunk/doc/src/Makefile.am: fix two small
	  makefile gliches.

2005-07-17 20:23  aj

	* trunk/configure.in, trunk/etc/Makefile.am,
	  trunk/etc/scldap.conf.in, trunk/src/libopensc/libscam.pc.in,
	  trunk/src/libopensc/libscldap.pc.in: remove scldap.conf, and
	  pkg-config files for libscldap and libscam.

2005-07-17 20:19  aj

	* trunk/src/include/opensc/Makefile.am: remove ldap/random related
	  makefile commands.

2005-07-17 20:18  aj

	* trunk/src/include/opensc/Makefile.am,
	  trunk/src/pkcs11/Makefile.am, trunk/src/pkcs11/Makefile.mak,
	  trunk/src/pkcs11/openssl.c, trunk/src/pkcs11/pkcs11-object.c:
	  remove code dealing with random numbers for now.

2005-07-17 20:11  aj

	* trunk/configure.in: remove random/prng related code from
	  configure.in

2005-07-17 20:10  aj

	* trunk/configure.in, trunk/src/Makefile.am,
	  trunk/src/Makefile.mak, trunk/src/scrandom: remove scrandom
	  code. We will implement proper code to get random data from the
	  card itself.

2005-07-17 20:09  aj

	* trunk/configure.in: remove pam/ldap/sia specific code from
	  configure.in

2005-07-17 20:08  aj

	* trunk/configure.in, trunk/src/Makefile.am, trunk/src/pam,
	  trunk/src/scam, trunk/src/scldap, trunk/src/sia: pam module
	  obsoleted by pam_pkcs11 and pam_p11.

2005-07-17 20:06  aj

	* trunk/man/Makefile.am: add Makefile for man/ directory.

2005-07-17 19:59  aj

	* trunk/Makefile.am, trunk/configure.in, trunk/doc/Makefile.am,
	  trunk/doc/old/Makefile.am, trunk/doc/src/Makefile.am: additionl
	  cleanup from doc / docs merge. New include api documentation
	  (xml files at least). Not yet installed.

2005-07-17 19:50  aj

	* trunk/doc/AladdinEtokenPro.html, trunk/doc/AutoVersions.html,
	  trunk/doc/BelgianEid.html, trunk/doc/CardOs.html,
	  trunk/doc/CardReaders_CTAPI.html,
	  trunk/doc/CardReaders_SPR532.html,
	  trunk/doc/CardsAndTokens.html,
	  trunk/doc/CompatibilityIssues.html,
	  trunk/doc/CompatiblityIssues.html,
	  trunk/doc/CryptoIdendityItsec.html, trunk/doc/Cryptoflex.html,
	  trunk/doc/Cyberflex.html, trunk/doc/DesignDiscussion.html,
	  trunk/doc/DesignDiscussion_UserInterface.html,
	  trunk/doc/EstonianEid.html, trunk/doc/FinnishEid.html,
	  trunk/doc/GemplusGpk.html, trunk/doc/GermanEid.html,
	  trunk/doc/ItalianEid.html, trunk/doc/ItalianPostecert.html,
	  trunk/doc/LinuxDistributions.html, trunk/doc/MacOsX.html,
	  trunk/doc/Makefile.am, trunk/doc/MartinBlog.html,
	  trunk/doc/MartinBlogMuscle.html,
	  trunk/doc/MartinBlogPlatform.html, trunk/doc/OpenPgp.html,
	  trunk/doc/OpenSsh.html, trunk/doc/OpensslEngines.html,
	  trunk/doc/PinpadReaders.html, trunk/doc/PuTTYcard.html,
	  trunk/doc/README, trunk/doc/RainbowIkeyThree.html,
	  trunk/doc/RecentTestresults.html, trunk/doc/ReleaseHowto.html,
	  trunk/doc/ReplacingCertificates.html, trunk/doc/RoadMap.html,
	  trunk/doc/SchlumbergerEgate.html,
	  trunk/doc/SmartCardApplications.html, trunk/doc/SpanishEid.html,
	  trunk/doc/SubversionRepository.html,
	  trunk/doc/SupportedHardware.html, trunk/doc/SwedishEid.html,
	  trunk/doc/TaiwanEid.html, trunk/doc/TelseCos.html,
	  trunk/doc/TroubleShooting.html, trunk/doc/WindowsCsp.html,
	  trunk/doc/export-wiki.sh, trunk/doc/export-wiki.xsl,
	  trunk/doc/index.html, trunk/doc/pkcs11_keypair_gen.html,
	  trunk/doc/trac.css: Add wiki snapshot.

2005-07-17 19:49  aj

	* trunk/doc/old, trunk/docs: move docs/ to do/. mark it "old"
	  (plan is to use the wiki).

2005-07-17 19:19  aj

	* trunk/Makefile.am, trunk/configure.in, trunk/docs/cardos-info.1,
	  trunk/docs/cryptoflex-tool.1, trunk/docs/netkey-tool.1,
	  trunk/docs/opensc-config.1, trunk/docs/opensc-explorer.1,
	  trunk/docs/opensc-tool.1, trunk/docs/opensc.7,
	  trunk/docs/pkcs11-tool.1, trunk/docs/pkcs15-crypt.1,
	  trunk/docs/pkcs15-init.1, trunk/docs/pkcs15-profile.5.in,
	  trunk/docs/pkcs15-tool.1, trunk/docs/pkcs15.7,
	  trunk/docs/sc_connect_card.3,
	  trunk/docs/sc_detect_card_presence.3,
	  trunk/docs/sc_disconnect_card.3,
	  trunk/docs/sc_establish_context.3, trunk/docs/sc_file.3,
	  trunk/docs/sc_file_free.3, trunk/docs/sc_file_new.3,
	  trunk/docs/sc_list_files.3, trunk/docs/sc_lock.3,
	  trunk/docs/sc_pkcs15_compute_signature.3,
	  trunk/docs/sc_read_binary.3, trunk/docs/sc_read_record.3,
	  trunk/docs/sc_release_context.3, trunk/docs/sc_select_file.3,
	  trunk/man, trunk/man/cardos-info.1, trunk/man/cryptoflex-tool.1,
	  trunk/man/netkey-tool.1, trunk/man/opensc-config.1,
	  trunk/man/opensc-explorer.1, trunk/man/opensc-tool.1,
	  trunk/man/opensc.7, trunk/man/pkcs11-tool.1,
	  trunk/man/pkcs15-crypt.1, trunk/man/pkcs15-init.1,
	  trunk/man/pkcs15-profile.5.in, trunk/man/pkcs15-tool.1,
	  trunk/man/pkcs15.7, trunk/man/sc_connect_card.3,
	  trunk/man/sc_detect_card_presence.3,
	  trunk/man/sc_disconnect_card.3,
	  trunk/man/sc_establish_context.3, trunk/man/sc_file.3,
	  trunk/man/sc_file_free.3, trunk/man/sc_file_new.3,
	  trunk/man/sc_list_files.3, trunk/man/sc_lock.3,
	  trunk/man/sc_pkcs15_compute_signature.3,
	  trunk/man/sc_read_binary.3, trunk/man/sc_read_record.3,
	  trunk/man/sc_release_context.3, trunk/man/sc_select_file.3: move
	  man pages to man/ directory.

2005-07-17 09:39  aj

	* trunk/src/libp11/p11_key.c: fail() returned NULL, windows need
	  return 0;

2005-07-15 13:37  sth

	* trunk/src/tools/pkcs11-tool.c: If we want to test signing, first
	  see if the key can do this

2005-07-15 13:32  sth

	* trunk/src/pkcs15init/pkcs15-lib.c: Cast correctly

2005-07-14 10:38  aj

	* trunk/src/libp11/libp11-int.h, trunk/src/libp11/libp11.h,
	  trunk/src/libp11/p11_key.c: cert to key is even more interesting
	  than key to cert.

2005-07-13 17:11  aj

	* trunk/src/libp11/p11_load.c: Unload twice causes segfault.

2005-07-13 17:10  aj

	* trunk/src/libp11/libp11-int.h, trunk/src/libp11/libp11.h,
	  trunk/src/libp11/p11_ops.c, trunk/src/libp11/p11_rsa.c: make the
	  sign/encrypt/decrypt opterations public.

2005-07-13 13:50  aj

	* trunk/src/sslengines/engine_pkcs11.c: first step to eleminate
	  libpkcs11.

2005-07-13 13:48  aj

	* trunk/src/libp11/Makefile.am, trunk/src/libp11/libp11-int.h,
	  trunk/src/libp11/libp11.h, trunk/src/libp11/p11_rsa.c: commit
	  latest code, improve include file split, first steps towards
	  eleminating libpkcs11.

2005-07-13 11:47  aj

	* trunk/src/libp11/libp11-int.h: add new internal header file.

2005-07-13 11:41  aj

	* trunk/src/libp11/Makefile.am, trunk/src/libp11/libp11.h,
	  trunk/src/libp11/p11_attr.c, trunk/src/libp11/p11_cert.c,
	  trunk/src/libp11/p11_err.c, trunk/src/libp11/p11_key.c,
	  trunk/src/libp11/p11_load.c, trunk/src/libp11/p11_misc.c,
	  trunk/src/libp11/p11_ops.c, trunk/src/libp11/p11_rsa.c,
	  trunk/src/libp11/p11_slot.c: split libp11.h in an internal and a
	  public part. add p11_ops.c and other code by kevin stefanik.

2005-07-13 10:24  aj

	* trunk/src/libp11/Makefile.am: install header file, fix linking.

2005-07-13 08:25  sth

	* trunk/src/libp11/libp11.h: Increased the ID length

2005-07-12 21:03  nils

	* trunk/src/libopensc/dir.c: interpret rec_nr == 0 as a request to
	  create a new record, fix for bug report #21

2005-07-11 21:31  nils

	* trunk/src/libopensc/card.c: in case of T0 the Le value is
	  omitted for case 4 APDUs; patch supplied by
	  richard.musil@bigfoot.com

2005-07-11 21:28  nils

	* trunk/src/libopensc/iso7816.c, trunk/src/pkcs15init/profile.c:
	  fix file descriptor byte and ef_structure type; patch supplied
	  by richard.musil@bigfoot.com

2005-07-11 08:26  aj

	* trunk/src/sslengines/Makefile.am: remove reference to no longer
	  existing file pkcs11-internal.h

2005-07-10 20:32  aj

	* trunk/src/libp11/Makefile.am: fix compiling and distribution
	  package.

2005-07-10 18:40  aj

	* trunk/src/sslengines/Makefile.am,
	  trunk/src/sslengines/engine_pkcs11.c,
	  trunk/src/sslengines/hw_pkcs11.c: use new libp11.h header from
	  libp11.

2005-07-10 18:38  aj

	* trunk/src/libp11/p11_attr.c, trunk/src/libp11/p11_cert.c,
	  trunk/src/libp11/p11_err.c, trunk/src/libp11/p11_key.c,
	  trunk/src/libp11/p11_load.c, trunk/src/libp11/p11_misc.c,
	  trunk/src/libp11/p11_rsa.c, trunk/src/libp11/p11_slot.c: use new
	  name in include syntax.

2005-07-10 18:37  aj

	* trunk/configure.in, trunk/src/libp11/Makefile.am,
	  trunk/src/libp11/libp11.pc.in: enable libp11.pc pkg-config file.

2005-07-10 18:36  aj

	* trunk/src/libp11/libp11.h,
	  trunk/src/sslengines/pkcs11-internal.h: move and rename
	  pkcs11-internal.h to libp11.h

2005-07-10 17:03  aj

	* trunk/src/libp11/Makefile.am, trunk/src/libp11/Makefile.mak: add
	  Makefiles for libp11
	* trunk/src/pkcs11/Makefile.am: do not install libpkcs11 as shared
	  library.

2005-07-10 17:01  aj

	* trunk/src/Makefile.am, trunk/src/Makefile.mak, trunk/src/libp11,
	  trunk/src/libp11/p11_attr.c, trunk/src/libp11/p11_cert.c,
	  trunk/src/libp11/p11_err.c, trunk/src/libp11/p11_key.c,
	  trunk/src/libp11/p11_load.c, trunk/src/libp11/p11_misc.c,
	  trunk/src/libp11/p11_rsa.c, trunk/src/libp11/p11_slot.c,
	  trunk/src/sslengines/Makefile.am,
	  trunk/src/sslengines/p11_attr.c,
	  trunk/src/sslengines/p11_cert.c, trunk/src/sslengines/p11_err.c,
	  trunk/src/sslengines/p11_key.c, trunk/src/sslengines/p11_load.c,
	  trunk/src/sslengines/p11_misc.c, trunk/src/sslengines/p11_rsa.c,
	  trunk/src/sslengines/p11_slot.c: move p11_* into a new library.

2005-07-08 21:16  nils

	* trunk/src/pkcs11/pkcs11-display.c,
	  trunk/src/pkcs11/rsaref/pkcs11t.h: enhance attribute support;
	  patch supplied by supplied by Marc Bevand <bevand_m@epita.fr>

2005-07-08 21:04  nils

	* trunk/src/pkcs11/pkcs11-spy.c: fix check of the return value in
	  C_GetAttributeValue; supplied by Marc Bevand <bevand_m@epita.fr>

2005-07-06 12:59  sth

	* trunk/src/tools/pkcs11-tool.c: Oops, shouldn't have changed the
	  serial number size in x509cert_info to 256

2005-07-06 12:23  sth

	* trunk/src/tools/pkcs15-tool.c: No uint32_t type in MS VS

2005-07-05 17:45  sth

	* trunk/src/pkcs15init/pkcs15-lib.c: Don't ignore the
	  profile_option -- remark from Victor Tarasov

2005-07-05 17:43  sth

	* trunk/src/tools/pkcs15-init.c: Print an error if
	  sc_pkcs15init_bind() fails

2005-07-05 15:27  sth

	* trunk/src/tools/pkcs11-tool.c: Increased sizes in rsakey_info
	  struct

2005-07-05 15:22  sth

	* trunk/src/pkcs15init/setcos.profile: Typo fix
	* trunk/src/libopensc/card-setcos.c: SetCOS 4.4.1 supports keypair
	  generation, keysizes of 512, 768 and 1024 are fine

2005-07-05 13:34  sth

	* trunk/src/sslengines/p11_rsa.c: Macro cleanup, patch received
	  some time ago but appearently not committed

2005-07-01 22:37  nils

	* trunk/src/pkcs15init/pkcs15-etoken.c: remove unnecessary include

2005-07-01 08:40  nils

	* trunk/etc/opensc.conf.in: remove duplicate entry

2005-07-01 08:26  nils

	* trunk/etc/opensc.conf.in, trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak,
	  trunk/src/libopensc/card-atrust-acos.c,
	  trunk/src/libopensc/ctx.c, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15-atrust-acos.c,
	  trunk/src/libopensc/pkcs15-syn.c: add initial support for atrust
	  acos cards; patch supplied by Franz Brandl <f.brandl@a-trust.at>

2005-07-01 07:17  nils

	* trunk/src/pkcs15init/pkcs15-etoken.c: remove unused variable

2005-07-01 06:27  nils

	* trunk/src/libopensc/card-etoken.c,
	  trunk/src/libopensc/cardctl.h,
	  trunk/src/pkcs15init/pkcs15-etoken.c: GIVE RANDOM is for sm, so
	  remove it from the etoken key generation code

2005-06-29 11:32  martin

	* trunk/src/libopensc/pkcs15-esteid.c: Make the names fit in
	  pkcs11 limits

2005-06-28 21:16  aj

	* trunk/src/tools/pkcs15-tool.c: oops, missed a #endif.

2005-06-28 20:33  aj

	* trunk/src/tools/pkcs15-tool.c: use uint32_t, it is a c++ stdtype
	  and should work on all plattforms.

2005-06-28 13:50  sth

	* trunk/src/tools/pkcs15-tool.c: Use uint32_t on Mac

2005-06-28 04:09  aj

	* trunk/src/openssh/ask-for-pin.diff: rediffed against openssh
	  4.1p1

2005-06-27 21:49  aj

	* trunk/src/openscd: openscd code hasn't been used by anyone in
	  years.

2005-06-27 13:52  martin

	* trunk/src/pkcs11/framework-pkcs15.c: Annoying typo

2005-06-27 13:51  martin

	* trunk/src/libopensc/card-mcrd.c: Adjust function name to reflect
	  documented functionality

2005-06-27 11:51  sth

	* trunk/src/tools/pkcs15-tool.c: No asm/types.h on MacOSX either

2005-06-27 11:47  aj

	* trunk/src/tests/regression/test.p12: add working file.
	* trunk/src/tests/regression/test.p12: remove broken file.

2005-06-27 10:08  martin

	* trunk/src/libopensc/reader-pcsc.c: Log in hex format of course...

2005-06-22 10:32  sth

	* trunk/src/tools/pkcs15-tool.c: Windows: no _uu32 in MS VS

2005-06-17 19:34  aj

	* trunk/docs/opensc.xml: add comment about usb crypto tokens.

2005-06-17 15:47  sth

	* trunk/src/libopensc/reader-pcsc.c: Fix: if a card is inserted,
	  the SC_SLOT_CARD_CHANGED flag must be set

2005-06-16 20:15  aj

	* trunk/src/sslengines/Makefile.am: small makefile fix.

2005-06-16 19:39  aj

	* trunk/src/tools/pkcs15-tool.c: make it compile without openssl.

2005-06-16 19:35  aj

	* trunk/QUICKSTART, trunk/doc/src/api/card/sc_card_ctl.xml,
	  trunk/doc/src/api/card/sc_wait_for_event.xml,
	  trunk/doc/src/api/file/sc_delete_record.xml,
	  trunk/doc/src/api/init/sc_connect_card.xml,
	  trunk/doc/src/api/init/sc_detect_card_presence.xml,
	  trunk/doc/src/api/init/sc_disconnect_card.xml,
	  trunk/doc/src/api/init/sc_set_card_driver.xml,
	  trunk/doc/src/api/types/sc_app_info_t.xml,
	  trunk/src/libopensc/card.c, trunk/src/libopensc/ctbcs.h,
	  trunk/src/libopensc/errors.c,
	  trunk/src/openssh/ask-for-pin.diff,
	  trunk/src/pkcs11/pkcs11-global.c, trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/pkcs11/slot.c, trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/signer/opensc-crypto.c, trunk/src/signer/signer.c,
	  trunk/src/sslengines/engine_opensc.c,
	  trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/pkcs15-crypt.c,
	  trunk/src/tools/pkcs15-init.c, trunk/src/tools/pkcs15-tool.c:
	  "smart card" not "smartcard" or "SmartCard".

2005-06-16 19:28  aj

	* trunk/docs/netkey-tool.1, trunk/docs/opensc-es.html,
	  trunk/docs/opensc.html, trunk/docs/opensc.xml: "smart card" not
	  smartcard or SmartCards.

2005-06-16 18:13  aj

	* trunk/aclocal/pkg.m4: update to current version of pkg.m4 from
	  pkg-config.

2005-06-15 08:57  aj

	* trunk/src/tools/pkcs15-tool.c: add options for displaying
	  openssh keys.

2005-06-15 08:56  aj

	* trunk/src/pkcs11/Makefile.am, trunk/src/sslengines/Makefile.am:
	  move libraries from lib/pkcs11 to lib/, rename the engine dir to
	  engine, and make it "openssl" so openssl can load the engines
	  automaticaly.

2005-06-14 21:37  nils

	* trunk/docs/Makefile.am, trunk/docs/netkey-tool.1,
	  trunk/src/tools/Makefile.am, trunk/src/tools/netkey-tool.c: add
	  netkey-tool from Peter Koch

2005-06-07 14:31  martin

	* trunk/src/libopensc/reader-pcsc.c: It is plain wrong to call
	  again pcsc layer locking methods as card.c:sc_lock() already
	  does it when somebody goes to the card the very first time and
	  thus begins a transaction. iso7816.c methods should lock the
	  card in iso7816_pin_cmd() on card level if anything.

2005-06-07 12:43  martin

	* trunk/src/libopensc/card-oberthur.c: Add support for pinpad PIN
	  verification. Patch from Andreas Steffen

2005-05-22 20:07  nils

	* trunk/src/tools/pkcs11-tool.c: microsoft's vs 6.0 doesn't like
	  initialization during declaration. let's use memset instead

2005-05-21 10:21  nils

	* trunk/docs/pkcs11-tool.1, trunk/src/tools/pkcs11-tool.c: enhance
	  object writting support, patch supplied by Marc Bevand
	  <bevand_m@epita.fr>

2005-05-20 09:55  nils

	* trunk/src/pkcs11/pkcs11-display.c: cleanup, patch supplied by
	  Marc Bevand

2005-05-17 21:51  nils

	* trunk/src/libopensc/pkcs15-netkey.c: update from Peter Koch

2005-05-11 14:00  sth

	* trunk/src/pkcs11/framework-pkcs15.c: Don't used cashed PINs for
	  a UserConsent key!

2005-05-10 19:58  sth

	* trunk/src/pkcs15init/setcos.profile: Better choices for the
	  sizes/FIDs + typo fix

2005-05-10 12:59  nils

	* trunk/src/libopensc/pkcs15-actalis.c: add certs only when we
	  have zlib support

2005-05-09 11:46  sth

	* trunk/src/pkcs15init/pkcs15-lib.c: If an object is added to a
	  pkcs15_card, don't call sc_pkcs15_free_object() on it

2005-05-08 21:30  nils

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak,
	  trunk/src/libopensc/pkcs15-actalis.c,
	  trunk/src/libopensc/pkcs15-syn.c: add support for Actalis card;
	  patch supplied by Andrea Frigido

2005-05-07 22:22  nils

	* trunk/docs/pkcs11-tool.1, trunk/src/tools/pkcs11-tool.c: add
	  initialization support for token/pin; supplied by Marc Bevand
	  <marc.bevand@smartjog.com>

2005-05-06 13:52  sth

	* trunk/src/pkcs15init/pkcs15-setcos.c: Fix: re-link the SO-PIN to
	  the pkcs15 DF, otherwise the AC's in sc_pkcs15init_add_app() are
	  ignored resulting in a.o. an unprotected pkcs15 DF

2005-05-06 11:31  sth

	* trunk/src/pkcs15init/pkcs15-setcos.c,
	  trunk/src/pkcs15init/setcos.profile: Fixed handling of pkcs15
	  types and added support for storing pkcs15 data objects

2005-05-04 13:17  sth

	* trunk/src/pkcs15init/Makefile.mak: Have pkcs15init as a DLL
	  instead of as a static lib file

2005-05-03 09:33  martin

	* trunk/src/tests/pintest.c: Announce the capabilities of the
	  terminal 'press enter for pinpad'-enable the pintest utility

2005-05-02 19:17  sth

	* trunk/src/libopensc/card.c: Removed double line -- thx Nils

2005-05-02 18:48  sth

	* trunk/src/libopensc/card.c: atr table reallocation fix by
	  William Wanders

2005-05-02 09:43  sth

	* trunk/src/sslengines/engine_pkcs11.c: Removed unnessary
	  #includes from previous path

2005-05-02 09:41  sth

	* trunk/src/sslengines/engine_pkcs11.c: Typo fix -- causes compile
	  error on MS VS

2005-04-30 10:07  nils

	* trunk/src/sslengines/engine_pkcs11.c: free pin when ending a
	  pkcs11 session; patch supplied by Douglas E. Engert
	  <deengert@anl.gov>

2005-04-29 20:23  aj

	* trunk/QUICKSTART: create a key that does signing and decryption.

2005-04-26 09:09  aj

	* trunk/NEWS: Oops, didn't update news file yesterday before the
	  release. So at least document it now.

2005-04-25 21:00  nils

	* trunk/src/libopensc/pkcs15-infocamere.c: changes from Antonino
	  Iacono

2005-04-25 19:21  aj

	* trunk/src/libopensc/ui.c: Ludovic Rousseau: rxvt can also do
	  color so here is a patch.

2005-04-24 16:17  nils

	* trunk/src/libopensc/pkcs15-infocamere.c: changes from Antonino
	  Iacono

2005-04-24 09:28  nils

	* trunk/src/pkcs11/pkcs11-display.c: bugfix; supplied by Marc
	  Bevand <marc.bevand@smartjog.com>

2005-04-23 12:26  nils

	* trunk/src/sslengines/engine_opensc.c,
	  trunk/src/sslengines/engine_pkcs11.c: add callback_data
	  parameter to get_pin; supplied by Douglas E. Engert
	  <deengert@anl.gov>

2005-04-23 11:20  nils

	* trunk/src/libopensc/pkcs15-gemsafe.c: try file id if selection
	  via df name doesn't work; Douglas E. Engert <deengert@anl.gov>

2005-04-19 18:38  nils

	* trunk/src/libopensc/pkcs15-gemsafe.c: fix problem with unsigned
	  int; pointe out by Douglas E. Engert <deengert@anl.gov>

2005-04-17 16:43  nils

	* trunk/src/libopensc/pkcs15-infocamere.c: add support for yet
	  another infocamere card, submitted by Sirio Capizzi
	  <graaf@virgilio.it>

2005-04-16 13:42  nils

	* trunk/configure.in: check for zlib

2005-04-16 13:36  nils

	* trunk/src/libopensc/card-etoken.c: add yet another atr to
	  card-etoken.c

2005-04-16 12:06  nils

	* trunk/src/libopensc/card-flex.c: added yet another atr to
	  card-flex, supplied by: Giuseppe Raspanti <graspanti@crytron.com>

2005-04-16 10:40  nils

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak,
	  trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/pkcs15-gemsafe.c,
	  trunk/src/libopensc/pkcs15-syn.c: add support for gpk16k gemsafe
	  cards, Douglas E. Engert et al

2005-04-16 10:37  nils

	* trunk/src/libopensc/card-setcos.c,
	  trunk/src/pkcs15init/pkcs15-setcos.c: cleanup

2005-04-16 10:21  martin

	* trunk/src/pkcs15init/pkcs15-starcos.c: scrandom interface is not
	  used by starcos

2005-04-12 20:46  aj

	* trunk/configure.in: set the version to "WIP" (work in progress)
	  for the snapshot script.

2005-04-11 06:36  nils

	* trunk/configure.in: make it work again (at least for me)

2005-04-10 21:58  nils

	* trunk/src/libopensc/pkcs15-syn.c: remove broken code, add
	  skeleton for a new function

2005-04-10 20:59  nils

	* trunk/src/libopensc/pkcs15-infocamere.c: disabled auth key/pin
	  as the IDs are wrong

2005-04-09 13:32  nils

	* trunk/src/libopensc/card-setcos.c: fix compiler warnings

2005-04-09 13:23  nils

	* trunk/src/sslengines/engine_pkcs11.c,
	  trunk/src/sslengines/engine_pkcs11.h,
	  trunk/src/sslengines/hw_pkcs11.c,
	  trunk/src/sslengines/test_engine.sh: add support cert loading,
	  patch supplied by Douglas E. Engert <deengert@anl.gov>

2005-04-07 19:45  martin

	* trunk/NEWS, trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/reader-pcsc.c: Small fixes in the teletrust
	  spec support code and related NEWS item

2005-04-07 08:45  aj

	* trunk/QUICKSTART: files were renamed - adjust QUICKSTART file.

2005-04-07 07:29  aj

	* trunk/Makefile.am, trunk/NEWS, trunk/solaris/opensc.conf-dist:
	  update trunk: include solaris/* files in tar file, update NEWS
	  with 0.9.6 changes, add profile_dir to solaris/openscc.conf-dist

2005-04-04 21:52  nils

	* trunk/src/libopensc/padding.c, trunk/src/libopensc/pkcs15.c:
	  cleanup

2005-04-04 09:30  sth

	* trunk/src/libopensc/card-setcos.c,
	  trunk/src/libopensc/cardctl.h, trunk/src/libopensc/cards.h,
	  trunk/src/pkcs15init/Makefile.am,
	  trunk/src/pkcs15init/Makefile.mak,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-setcos.c,
	  trunk/src/pkcs15init/setcos.profile: Added initial support for
	  SetCOS 4.4 cards

2005-03-30 18:25  sth

	* trunk/src/libopensc/opensc.h, trunk/src/pkcs15init/pkcs15-lib.c:
	  If the SC_CARD_CAP_USE_FCI_AC flag is set,
	  sc_pkcs15init_authenticate() will check the file's ACs on the
	  card instead of relying on the ones in the profile file

2005-03-30 18:18  sth

	* trunk/src/libopensc/opensc.h: Added another life cycle state

2005-03-30 16:40  nils

	* branches/opensc-0.9/src/libopensc/asn1.c,
	  trunk/src/libopensc/asn1.c: bools are int; pointed out by
	  William Wanders <william@wanders.org>

2005-03-29 19:59  nils

	* trunk/src/tools/eidenv.c: fix for solaris; patch supplied by
	  Douglas E. Engert <deengert@anl.gov>

2005-03-29 07:30  aj

	* trunk/solaris, trunk/solaris/Makefile, trunk/solaris/README,
	  trunk/solaris/checkinstall.in, trunk/solaris/opensc.conf-dist,
	  trunk/solaris/pkginfo.in, trunk/solaris/proto: Add solaris/
	  subdir and files to make using opensc on solaris easier.

2005-03-26 20:10  sth

	* trunk/src/pkcs15init/pkcs15-lib.c: Moved init-card() till after
	  the pin-initialisation, this allows init-card() to do operation
	  with a pin without doing the pin stuff again. Shouldn't break
	  anything -- if it does, we'll undo this.

2005-03-26 20:00  sth

	* trunk/src/pkcs11/misc.c: Added opensc-to-pks11 error mapping

2005-03-26 19:48  sth

	* trunk/src/libopensc/sc.c: Prevent doubles in the ACL entries

2005-03-26 19:47  sth

	* trunk/src/libopensc/iso7816.c: Allow an empty path in
	  iso7816_delete_file(), to indicate that the current DF should be
	  deleted.

2005-03-26 19:35  sth

	* trunk/src/libopensc/opensc.h: No unistd.h on Windows

2005-03-26 19:33  sth

	* trunk/src/libopensc/Makefile.mak: Removed pinpad-ccid

2005-03-24 16:57  martin

	* trunk/src/libopensc/pkcs15-esteid.c: Parentheses too..

2005-03-24 16:54  martin

	* trunk/src/libopensc/pkcs15-esteid.c,
	  trunk/src/libopensc/reader-pcsc.c: * fix an return code from
	  ctbcs spec * make sure pins and puk are correctly associated in
	  esteid emu

2005-03-23 23:24  aj

	* trunk/src/libopensc/opensc.h, trunk/src/libopensc/reader-pcsc.c:
	  silence a few warnings.

2005-03-23 23:16  aj

	* trunk/etc/Makefile.am: use tab, not spaces.

2005-03-23 23:12  aj

	* trunk/etc/opensc.conf.in: fill in profile_dir in config file.
	* trunk/etc/Makefile.am, trunk/etc/opensc.conf.example,
	  trunk/etc/opensc.conf.in, trunk/etc/scldap.conf.example,
	  trunk/etc/scldap.conf.in: generate config file code with the
	  configure'd profile dir in opensc.conf.

2005-03-23 23:10  aj

	* trunk/src/libopensc/ctx.c, trunk/src/pkcs15init/profile.c,
	  trunk/src/pkcs15init/profile.h: apply improved profile handling
	  code.

2005-03-23 22:58  aj

	* trunk/src/include/winconfig.h: remove winreg.h as global include
	  (not needed in 99.9% of all files), remove obsolete config file
	  / profile dir definitions.

2005-03-23 22:44  aj

	* trunk/src/libopensc/card-flex.c: fix egate token with cryptoflex
	  on windows.

2005-03-23 22:37  aj

	* trunk/src/pkcs11/pkcs11-global.c: put new version in
	  pkcs11-global.c, too.

2005-03-23 21:31  aj

	* trunk/configure.in: library was changed in an incompatible way
	  since 0.8, so we need to go from 0 to 1.

2005-03-23 21:26  aj

	* trunk/NEWS: import news from 0.9 branch / releases.

2005-03-23 21:08  aj

	* trunk/.cvsignore, trunk/aclocal/.cvsignore,
	  trunk/doc/.cvsignore, trunk/docs/.cvsignore,
	  trunk/etc/.cvsignore, trunk/macos/.cvsignore,
	  trunk/src/.cvsignore, trunk/src/common/.cvsignore,
	  trunk/src/include/.cvsignore,
	  trunk/src/include/opensc/.cvsignore,
	  trunk/src/include/opensc/rsaref/.cvsignore,
	  trunk/src/libopensc/.cvsignore, trunk/src/openscd/.cvsignore,
	  trunk/src/openssh/.cvsignore, trunk/src/pam/.cvsignore,
	  trunk/src/pkcs11/.cvsignore, trunk/src/pkcs11/rsaref/.cvsignore,
	  trunk/src/pkcs15init/.cvsignore, trunk/src/scam/.cvsignore,
	  trunk/src/scconf/.cvsignore, trunk/src/scdl/.cvsignore,
	  trunk/src/scldap/.cvsignore, trunk/src/scrandom/.cvsignore,
	  trunk/src/sia/.cvsignore, trunk/src/signer/.cvsignore,
	  trunk/src/signer/npinclude/.cvsignore,
	  trunk/src/sslengines/.cvsignore, trunk/src/tests/.cvsignore,
	  trunk/src/tests/regression/.cvsignore,
	  trunk/src/tools/.cvsignore, trunk/win32/.cvsignore: remove
	  .cvsignore files.

2005-03-23 21:07  aj

	* trunk/debian: remove debian/ as it is obsolete and was not
	  maintained at all. this was eric can commit the current debian/
	  used by the official debian packages.

2005-03-18 20:36  nils

	* trunk/src/libopensc/pkcs15-esteid.c,
	  trunk/src/libopensc/pkcs15-infocamere.c,
	  trunk/src/libopensc/pkcs15-netkey.c,
	  trunk/src/libopensc/pkcs15-openpgp.c,
	  trunk/src/libopensc/pkcs15-postecert.c: fix free argument,
	  pointed out by Giuseppe Sacco
	  <giuseppe@eppesuigoccas.homedns.org>

2005-03-09 12:46  pisi

	* trunk/src/libopensc/pkcs15-pin.c: common pin validity check,
	  supprot (still disabled) for pinpads in modify and unblock

2005-03-09 12:44  pisi

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/pinpad-ccid.c,
	  trunk/src/libopensc/pinpad-ccid.h,
	  trunk/src/libopensc/reader-pcsc.c: Introduce TeleTrust Class 2
	  spec compliant pinpad functionality and incorporate the pinpad
	  functions directly to reader-pcsc.c. Mainly because the code
	  requires access to internal pcsc-only structures and splitting
	  some definitions to an extra header would not be very nice.
	  Also, the API is pcsc based and usable with other ifdhandlers
	  too, not just CCID.

2005-03-09 12:25  pisi

	* trunk/src/libopensc/card-mcrd.c: Minor additions

2005-03-09 11:45  pisi

	* trunk/etc/opensc.conf.example, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/pkcs15.h: A single flag for all pkcs15 layer
	  applications to detect a) if pinpad is present b) and if we
	  should make use of it. Also remove the CCID specific option for
	  pinpad detection - if detected, the flag will anyway always be
	  set as it reflects the capabilities of the actual reader. Also,
	  the detection mechanism is changed to be crossplatform.

2005-03-09 11:14  pisi

	* trunk/src/libopensc/card.c, trunk/src/libopensc/internal.h:
	  copypaste ****s. Introduce a common internal function that
	  removes several copypastes

2005-03-09 10:47  pisi

	* trunk/src/libopensc/asn1.c: Space cleanups

2005-03-09 00:04  bert

	* trunk/src/openscd/commands.c,
	  trunk/src/pkcs11/framework-pkcs15.c, trunk/src/pkcs11/misc.c,
	  trunk/src/pkcs11/pkcs11-global.c, trunk/src/pkcs11/pkcs11-spy.c,
	  trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-etoken.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-jcop.c,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-miocos.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c,
	  trunk/src/pkcs15init/pkcs15-starcos.c,
	  trunk/src/pkcs15init/profile.c, trunk/src/scam/p15_eid.c,
	  trunk/src/scam/p15_ldap.c, trunk/src/tests/sc-test.c,
	  trunk/src/tools/cardos-info.c,
	  trunk/src/tools/cryptoflex-tool.c, trunk/src/tools/eidenv.c,
	  trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/pkcs15-crypt.c,
	  trunk/src/tools/pkcs15-init.c, trunk/src/tools/pkcs15-tool.c,
	  trunk/src/tools/util.c: API fixup: use defined type instead of
	  struct for exposed structs (part 2)

2005-03-08 20:59  bert

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/card-belpic.c,
	  trunk/src/libopensc/card-default.c,
	  trunk/src/libopensc/card-emv.c,
	  trunk/src/libopensc/card-etoken.c,
	  trunk/src/libopensc/card-flex.c, trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/card-jcop.c,
	  trunk/src/libopensc/card-mcrd.c,
	  trunk/src/libopensc/card-miocos.c,
	  trunk/src/libopensc/card-oberthur.c,
	  trunk/src/libopensc/card-setcos.c,
	  trunk/src/libopensc/card-starcos.c,
	  trunk/src/libopensc/card-tcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/ctbcs.c, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/dir.c, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/log.c, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/padding.c,
	  trunk/src/libopensc/pinpad-ccid.c,
	  trunk/src/libopensc/pkcs15-algo.c,
	  trunk/src/libopensc/pkcs15-cache.c,
	  trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-data.c,
	  trunk/src/libopensc/pkcs15-infocamere.c,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-postecert.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-pubkey.c,
	  trunk/src/libopensc/pkcs15-sec.c,
	  trunk/src/libopensc/pkcs15-starcert.c,
	  trunk/src/libopensc/pkcs15-wrap.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/libopensc/reader-openct.c,
	  trunk/src/libopensc/reader-pcsc.c, trunk/src/libopensc/sc.c,
	  trunk/src/libopensc/sec.c: API fixup: use defined type instead
	  of struct for exposed structs

2005-03-07 14:00  aet

	* trunk/etc/opensc.conf.example, trunk/src/include/winconfig.h,
	  trunk/src/libopensc/ctx.c, trunk/src/pkcs15init/profile.c,
	  trunk/src/pkcs15init/profile.h: - Add support for getting
	  location of the configuration file from Windows registry
	  (HKCU/HKLM) - Handle OPENSC_CONF environment variable on unix -
	  Add configuration option "profile_dir" to bypass build time
	  setting for pkcs15 initialization profiles directory Patch by
	  Andreas Jellinghaus, with minor enhancements from me.

2005-03-06 14:37  pisi

	* trunk/src/libopensc/card-flex.c: whitespace cleanups

2005-03-04 01:41  pisi

	* trunk/src/libopensc/reader-pcsc.c: consistent naming and trimmed
	  lines

2005-03-03 18:12  aet

	* trunk/src/tools, trunk/src/tools/.cvsignore,
	  trunk/src/tools/Makefile.am: - eidenv cleanup

2005-03-02 09:03  aet

	* trunk/src/tools/eidenv.c: - Minor fixes, convert crlf -> lf

2005-03-02 09:02  aet

	* trunk/configure.in: - Disable openscd

2005-03-02 08:11  pisi

	* trunk/src/Makefile.am: Removed openscd from
	  automake/distribution as it should be dead code.

2005-03-02 08:05  pisi

	* trunk/src/tools/Makefile.am, trunk/src/tools/eidenv.c: eidenv -
	  small utility for Estonian ID card *nix only)

2005-03-02 06:03  sth

	* trunk/src/libopensc/pkcs15-cache.c: Correctly check for reading
	  out of file bounds, thx to Sirio Capizi

2005-03-02 02:06  bert

	* trunk/doc/src/api/apps/sc_enum_apps.xml,
	  trunk/doc/src/api/apps/sc_find_app_by_aid.xml,
	  trunk/doc/src/api/apps/sc_find_pkcs15_app.xml,
	  trunk/doc/src/api/apps/sc_free_apps.xml,
	  trunk/doc/src/api/apps/sc_update_dir.xml,
	  trunk/doc/src/api/asn1/sc_asn1_decode.xml,
	  trunk/doc/src/api/asn1/sc_asn1_encode.xml,
	  trunk/doc/src/api/asn1/sc_asn1_find_tag.xml,
	  trunk/doc/src/api/asn1/sc_asn1_print_tags.xml,
	  trunk/doc/src/api/asn1/sc_asn1_put_tag.xml,
	  trunk/doc/src/api/asn1/sc_asn1_read_tag.xml,
	  trunk/doc/src/api/asn1/sc_asn1_skip_tag.xml,
	  trunk/doc/src/api/asn1/sc_asn1_verify_tag.xml,
	  trunk/doc/src/api/asn1/sc_copy_asn1_entry.xml,
	  trunk/doc/src/api/asn1/sc_format_asn1_entry.xml: Add XML header
	  + manual title

2005-03-02 02:01  bert

	* trunk/doc/src/api/init/sc_set_card_driver.xml,
	  trunk/doc/src/api/types/sc_file_t.xml,
	  trunk/doc/src/api/types/sc_path_t.xml: Work around simplelist bug

2005-03-02 00:30  bert

	* trunk/doc/src/api/card/sc_card_ctl.xml,
	  trunk/doc/src/api/card/sc_check_sw.xml,
	  trunk/doc/src/api/card/sc_format_apdu.xml,
	  trunk/doc/src/api/card/sc_get_challenge.xml,
	  trunk/doc/src/api/card/sc_get_data.xml,
	  trunk/doc/src/api/card/sc_lock.xml,
	  trunk/doc/src/api/card/sc_put_data.xml,
	  trunk/doc/src/api/card/sc_transmit_apdu.xml,
	  trunk/doc/src/api/card/sc_unlock.xml: Add proper XML header

2005-03-02 00:10  bert

	* trunk/doc/src/api/util/sc_base64_decode.xml,
	  trunk/doc/src/api/util/sc_base64_encode.xml,
	  trunk/doc/src/api/util/sc_der_clear.xml,
	  trunk/doc/src/api/util/sc_der_copy.xml,
	  trunk/doc/src/api/util/sc_strerror.xml: Add proper XML header

2005-03-02 00:08  bert

	* trunk/doc/src/api/init/sc_wait_for_event.xml: removed
	  sc_wait_for_event()

2005-03-01 23:33  bert

	* trunk/doc/src/api/file/chapter.xml,
	  trunk/doc/src/api/file/sc_append_record.xml,
	  trunk/doc/src/api/file/sc_create_file.xml,
	  trunk/doc/src/api/file/sc_delete_file.xml,
	  trunk/doc/src/api/file/sc_delete_record.xml,
	  trunk/doc/src/api/file/sc_file_dup.xml,
	  trunk/doc/src/api/file/sc_file_free.xml,
	  trunk/doc/src/api/file/sc_file_new.xml,
	  trunk/doc/src/api/file/sc_list_files.xml,
	  trunk/doc/src/api/file/sc_read_binary.xml,
	  trunk/doc/src/api/file/sc_read_record.xml,
	  trunk/doc/src/api/file/sc_select_file.xml,
	  trunk/doc/src/api/file/sc_update_binary.xml,
	  trunk/doc/src/api/file/sc_update_record.xml,
	  trunk/doc/src/api/file/sc_write_binary.xml,
	  trunk/doc/src/api/file/sc_write_record.xml: cleanup headers +
	  add manual title

2005-03-01 23:18  bert

	* trunk/doc/src/api/init/sc_card_valid.xml,
	  trunk/doc/src/api/init/sc_connect_card.xml,
	  trunk/doc/src/api/init/sc_detect_card_presence.xml,
	  trunk/doc/src/api/init/sc_disconnect_card.xml,
	  trunk/doc/src/api/init/sc_establish_context.xml,
	  trunk/doc/src/api/init/sc_get_cache_dir.xml,
	  trunk/doc/src/api/init/sc_make_cache_dir.xml,
	  trunk/doc/src/api/init/sc_release_context.xml,
	  trunk/doc/src/api/init/sc_set_card_driver.xml: clean up headers
	  + add manual title

2005-03-01 23:13  bert

	* trunk/doc/src/api/card/sc_wait_for_event.xml: fix typo's

2005-03-01 23:02  bert

	* trunk/doc/src/api/card/chapter.xml,
	  trunk/doc/src/api/card/sc_wait_for_event.xml,
	  trunk/doc/src/api/init/chapter.xml: Moved sc_wait_for_event() to
	  card ops

2005-03-01 22:58  bert

	* trunk/doc/src/api/init/chapter.xml,
	  trunk/doc/src/api/init/sc_wait_for_event.xml: Added
	  sc_wait_for_event()

2005-03-01 16:28  bert

	* trunk/doc/src/api/util/sc_base64_decode.xml,
	  trunk/doc/src/api/util/sc_base64_encode.xml,
	  trunk/doc/src/api/util/sc_der_clear.xml,
	  trunk/doc/src/api/util/sc_der_copy.xml,
	  trunk/doc/src/api/util/sc_strerror.xml: Added manual title

2005-03-01 16:11  bert

	* trunk/doc/src/api/types/chapter.xml: header file cleanup

2005-03-01 16:09  bert

	* trunk/doc/src/api/types/sc_app_info_t.xml,
	  trunk/doc/src/api/types/sc_asn1_entry.xml,
	  trunk/doc/src/api/types/sc_card_t.xml,
	  trunk/doc/src/api/types/sc_file_t.xml,
	  trunk/doc/src/api/types/sc_path_t.xml: header file cleanup +
	  manual title

2005-03-01 16:01  bert

	* trunk/doc, trunk/doc/.cvsignore: cvsignore

2005-03-01 15:56  bert

	* trunk/doc/Makefile, trunk/doc/src/api/api.xml,
	  trunk/doc/src/api/html.xsl, trunk/doc/src/api/man.xsl: New doc
	  build system

2005-02-28 20:08  bert

	* trunk/doc/src/api/init/sc_set_card_driver.xml,
	  trunk/doc/src/api/types/sc_card_t.xml: * openpgp card, not
	  opengpg * add atr_len field to sc_card_t

2005-02-27 07:25  sth

	* trunk/src/tools/pkcs15-crypt.c: Typo fix (thx Andreas, sorry Juha

2005-02-26 19:47  sth

	* trunk/src/tools/pkcs15-crypt.c: 'pinpad-enable' pkcs15-crypt: if
	  it's a pinpad and you press enter when being asked for a PIN,
	  you can enter the PIN on the reader

2005-02-25 23:57  bert

	* trunk/doc/src/api/api.css, trunk/doc/src/api/api.xml,
	  trunk/doc/src/api/types/sc_app_info_t.xml,
	  trunk/doc/src/api/types/sc_asn1_entry.xml,
	  trunk/doc/src/api/util/sc_strerror.xml: Added sc_app_info_t,
	  sc_asn1_entry and sc_strerror()

2005-02-25 23:56  bert

	* trunk/doc/src/api/asn1/sc_asn1_decode.xml,
	  trunk/doc/src/api/asn1/sc_copy_asn1_entry.xml,
	  trunk/doc/src/api/asn1/sc_format_asn1_entry.xml: Docbook
	  validation fixes

2005-02-25 23:55  bert

	* trunk/doc/src/api/apps/chapter.xml,
	  trunk/doc/src/api/asn1/chapter.xml,
	  trunk/doc/src/api/card/chapter.xml,
	  trunk/doc/src/api/file/chapter.xml,
	  trunk/doc/src/api/init/chapter.xml,
	  trunk/doc/src/api/types/chapter.xml,
	  trunk/doc/src/api/util/chapter.xml: Validation fixes

2005-02-25 21:17  pisi

	* trunk/src/sslengines/engine_pkcs11.c,
	  trunk/src/sslengines/p11_slot.c,
	  trunk/src/sslengines/pkcs11-internal.h: If the PKCS#11 token can
	  itself authenticate the user, we let it do it and ask nothing.
	  First because many applications that might link to the openssl
	  library would never-ever implement it and anyway it is the task
	  of the pkcs11 module to take care of the authentication however
	  the module/token feels feasible.

2005-02-24 11:11  aet

	* trunk/src/libopensc/card-setcos.c, trunk/src/libopensc/cards.h:
	  - Some fine-tuning to get previous, current and future FinEID
	  cards working.

2005-02-23 23:36  bert

	* trunk/doc/src/api/api.xml, trunk/doc/src/api/apps,
	  trunk/doc/src/api/apps/chapter.xml,
	  trunk/doc/src/api/apps/sc_enum_apps.xml,
	  trunk/doc/src/api/apps/sc_find_app_by_aid.xml,
	  trunk/doc/src/api/apps/sc_find_pkcs15_app.xml,
	  trunk/doc/src/api/apps/sc_free_apps.xml,
	  trunk/doc/src/api/apps/sc_update_dir.xml,
	  trunk/doc/src/api/types/sc_card_t.xml: Added application
	  functions from dir.c Added app list to sc_card_t docs

2005-02-23 19:34  aet

	* trunk/src/tests/lottery.c, trunk/src/tests/prngtest.c: - Don't
	  loop forever

2005-02-23 19:09  aet

	* trunk/src/libopensc/opensc.h: - For completeness sake, add
	  SC_CARD_FLAG_VENDOR_MASK

2005-02-23 10:44  aet

	* trunk/NEWS: - Preliminary update for the next release

2005-02-23 10:39  aet

	* trunk/src/libopensc/card-openpgp.c: - Case cleanup

2005-02-23 02:52  bert

	* trunk/doc, trunk/doc/src, trunk/doc/src/api,
	  trunk/doc/src/api/api.css, trunk/doc/src/api/api.xml,
	  trunk/doc/src/api/asn1, trunk/doc/src/api/asn1/chapter.xml,
	  trunk/doc/src/api/asn1/sc_asn1_decode.xml,
	  trunk/doc/src/api/asn1/sc_asn1_encode.xml,
	  trunk/doc/src/api/asn1/sc_asn1_find_tag.xml,
	  trunk/doc/src/api/asn1/sc_asn1_print_tags.xml,
	  trunk/doc/src/api/asn1/sc_asn1_put_tag.xml,
	  trunk/doc/src/api/asn1/sc_asn1_read_tag.xml,
	  trunk/doc/src/api/asn1/sc_asn1_skip_tag.xml,
	  trunk/doc/src/api/asn1/sc_asn1_verify_tag.xml,
	  trunk/doc/src/api/asn1/sc_copy_asn1_entry.xml,
	  trunk/doc/src/api/asn1/sc_format_asn1_entry.xml,
	  trunk/doc/src/api/card, trunk/doc/src/api/card/chapter.xml,
	  trunk/doc/src/api/card/sc_card_ctl.xml,
	  trunk/doc/src/api/card/sc_check_sw.xml,
	  trunk/doc/src/api/card/sc_format_apdu.xml,
	  trunk/doc/src/api/card/sc_get_challenge.xml,
	  trunk/doc/src/api/card/sc_get_data.xml,
	  trunk/doc/src/api/card/sc_lock.xml,
	  trunk/doc/src/api/card/sc_put_data.xml,
	  trunk/doc/src/api/card/sc_transmit_apdu.xml,
	  trunk/doc/src/api/card/sc_unlock.xml, trunk/doc/src/api/file,
	  trunk/doc/src/api/file/chapter.xml,
	  trunk/doc/src/api/file/sc_append_record.xml,
	  trunk/doc/src/api/file/sc_create_file.xml,
	  trunk/doc/src/api/file/sc_delete_file.xml,
	  trunk/doc/src/api/file/sc_delete_record.xml,
	  trunk/doc/src/api/file/sc_file_dup.xml,
	  trunk/doc/src/api/file/sc_file_free.xml,
	  trunk/doc/src/api/file/sc_file_new.xml,
	  trunk/doc/src/api/file/sc_list_files.xml,
	  trunk/doc/src/api/file/sc_read_binary.xml,
	  trunk/doc/src/api/file/sc_read_record.xml,
	  trunk/doc/src/api/file/sc_select_file.xml,
	  trunk/doc/src/api/file/sc_update_binary.xml,
	  trunk/doc/src/api/file/sc_update_record.xml,
	  trunk/doc/src/api/file/sc_write_binary.xml,
	  trunk/doc/src/api/file/sc_write_record.xml,
	  trunk/doc/src/api/init, trunk/doc/src/api/init/chapter.xml,
	  trunk/doc/src/api/init/sc_card_valid.xml,
	  trunk/doc/src/api/init/sc_connect_card.xml,
	  trunk/doc/src/api/init/sc_detect_card_presence.xml,
	  trunk/doc/src/api/init/sc_disconnect_card.xml,
	  trunk/doc/src/api/init/sc_establish_context.xml,
	  trunk/doc/src/api/init/sc_get_cache_dir.xml,
	  trunk/doc/src/api/init/sc_make_cache_dir.xml,
	  trunk/doc/src/api/init/sc_release_context.xml,
	  trunk/doc/src/api/init/sc_set_card_driver.xml,
	  trunk/doc/src/api/init/sc_wait_for_event.xml,
	  trunk/doc/src/api/misc, trunk/doc/src/api/misc/chapter.xml,
	  trunk/doc/src/api/types, trunk/doc/src/api/types/chapter.xml,
	  trunk/doc/src/api/types/sc_card_t.xml,
	  trunk/doc/src/api/types/sc_file_t.xml,
	  trunk/doc/src/api/types/sc_path_t.xml, trunk/doc/src/api/util,
	  trunk/doc/src/api/util/chapter.xml,
	  trunk/doc/src/api/util/sc_base64_decode.xml,
	  trunk/doc/src/api/util/sc_base64_encode.xml,
	  trunk/doc/src/api/util/sc_der_clear.xml,
	  trunk/doc/src/api/util/sc_der_copy.xml: Initial checkin of new
	  docs

2005-02-22 21:03  nils

	* trunk/src/signer/opensc-crypto.c: bugfix

2005-02-22 07:59  aet

	* trunk/etc/opensc.conf.example, trunk/src/libopensc/card-flex.c,
	  trunk/src/libopensc/card.c, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/internal.h, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15-syn.c,
	  trunk/src/libopensc/reader-pcsc.c: - Introduce a new powerful
	  card_atr mechanism to opensc configuration file to handle any
	  configuring related to certain card / cards using atrmask. -
	  Rewrite Martin's force_protocol to _sc_check_forced_protocol()
	  to make it possible to share the code with other reader driver
	  implementations than pcsc. - Implement _sc_match_atr_block() to
	  help out with force protocol and pkcs15 emulation layers, to
	  find information that's not stored directly to sc_atr_table.

2005-02-20 08:26  aet

	* trunk/etc/opensc.conf.example, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/internal.h, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15-syn.c: - Increase
	  SC_MAX_READER_DRIVERS / SC_MAX_CARD_DRIVERS - Some cleanups
	  before future commits

2005-02-15 14:41  pisi

	* trunk/src/pkcs11/libpkcs11.c: test label

2005-02-14 09:13  aet

	* trunk/src/libopensc/card-setcos.c: - Typo

2005-02-14 09:12  aet

	* trunk/src/libopensc/card.c, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/internal.h: - Fix a long-standing issue for
	  user configured atrs in the configuration file; free allocated
	  memory from the card_driver structures.

2005-02-13 18:24  aet

	* trunk/src/libopensc/card-etoken.c, trunk/src/libopensc/cards.h:
	  - Correct some information for Italian eid cards, I suppose.

2005-02-13 17:58  sth

	* trunk/src/libopensc/pinpad-ccid.c: Typo fix

2005-02-13 11:41  aet

	* trunk/src/Makefile.mak: - Fixed a typo (Bernhard Froehlich)

2005-02-13 08:43  aet

	* trunk/src/sslengines/engine_opensc.c,
	  trunk/src/sslengines/engine_pkcs11.c,
	  trunk/src/sslengines/hw_opensc.c,
	  trunk/src/sslengines/hw_pkcs11.c,
	  trunk/src/sslengines/p11_rsa.c: - Fix a pin issue with pinpad
	  readers (Bernhard Froehlich, Martin Paljak) -
	  UI_add_input_string enhancements (Martin Paljak) - printf
	  cleanups

2005-02-12 10:29  aet

	* trunk/QUICKSTART: - Update the atr example output

2005-02-11 20:43  aet

	* trunk/configure.in: - Merge between opensc / openct

2005-02-11 20:09  aet

	* trunk/src/libopensc/card-mcrd.c,
	  trunk/src/libopensc/card-setcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/pinpad-ccid.c,
	  trunk/src/libopensc/pkcs15-esteid.c,
	  trunk/src/libopensc/pkcs15.c,
	  trunk/src/pkcs11/framework-pkcs15.c, trunk/src/pkcs11/misc.c,
	  trunk/src/pkcs11/pkcs11-global.c,
	  trunk/src/pkcs11/pkcs11-object.c,
	  trunk/src/pkcs11/pkcs11-session.c, trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/pkcs11/slot.c, trunk/src/sslengines/engine_opensc.c,
	  trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/pkcs11-tool.c, trunk/src/tools/pkcs15-tool.c: -
	  Whitespace cleanup from me and Martin Paljak

2005-02-11 20:02  aet

	* trunk/configure.in: - make use of AC_HELP_STRING in configure.in
	  (Martin Paljak)

2005-02-11 10:05  aet

	* trunk/src/libopensc/pkcs15.c: - A fix for ISO 7816-15 cards I'm
	  playing with. No feedback received about the patch, let's move
	  on. The patch shouldn't affect any current behaviour.

2005-02-11 10:03  aet

	* trunk/src/libopensc/pinpad-ccid.c: - A patch for belpic and
	  other global platform pin cards (Martin Paljak)

2005-02-11 10:01  aet

	* trunk/src/libopensc/Makefile.am: - Add cards.h

2005-02-10 14:30  aet

	* trunk/docs/opensc.html, trunk/docs/opensc.xml: - Remove entries
	  from TODO list (Martin Paljak)

2005-02-10 12:48  aet

	* trunk/src/libopensc/card-flex.c: - Add ATR for a CryptoFlex card
	  from Mario Strasser, that I forgot to add over six months ago.

2005-02-10 10:09  aet

	* trunk/src/libopensc/internal.h: - Change sc_atr_table->id to
	  type, so the name is synced between sc_atr_table and sc_card
	  structures.

2005-02-10 10:08  aet

	* trunk/src/libopensc/cards.h: - Add cards.h

2005-02-10 10:07  aet

	* trunk/src/libopensc/card-belpic.c,
	  trunk/src/libopensc/card-etoken.c,
	  trunk/src/libopensc/card-flex.c, trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/card-jcop.c,
	  trunk/src/libopensc/card-mcrd.c,
	  trunk/src/libopensc/card-miocos.c,
	  trunk/src/libopensc/card-oberthur.c,
	  trunk/src/libopensc/card-openpgp.c,
	  trunk/src/libopensc/card-setcos.c,
	  trunk/src/libopensc/card-starcos.c,
	  trunk/src/libopensc/card-tcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/pkcs15-esteid.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c: - First stab towards
	  standardized card types

2005-02-10 09:57  aet

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/card-oberthur.h,
	  trunk/src/pkcs15init/pkcs15-oberthur.c: - Remove card-oberthur.h

2005-02-10 09:56  aet

	* trunk/src/include/opensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak: - Add cards.h

2005-02-09 20:16  aet

	* trunk/src/libopensc/cardctl.h: - Remove outdated comment, part
	  of the information wasn't even correct.

2005-02-09 20:03  aet

	* trunk/src/libopensc/card-flex.c, trunk/src/libopensc/cardctl.h:
	  - Cleanup

2005-02-09 19:15  aet

	* trunk/src/libopensc/cardctl.h, trunk/src/libopensc/esteid.h,
	  trunk/src/libopensc/ui.h: - Cleanup

2005-02-09 14:47  aet

	* trunk/src/libopensc/card-belpic.c,
	  trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/card-miocos.c,
	  trunk/src/libopensc/card-setcos.c,
	  trunk/src/libopensc/card-starcos.c,
	  trunk/src/libopensc/card-tcos.c: - Unify a bit the output of
	  commands like opensc-tool -D

2005-02-09 14:09  aet

	* trunk/src/libopensc/card.c: - Fix for the previous commit

2005-02-09 14:07  aet

	* trunk/src/libopensc/card.c: - _sc_match_atr: add support for
	  atrmask field in sc_atr_table

2005-02-09 14:05  aet

	* trunk/src/libopensc/card-setcos.c: - Cleanup
	* trunk/src/libopensc/internal.h: - Add comments

2005-02-09 11:37  aet

	* trunk/src/libopensc/card-setcos.c: - Checkpoint commit, add
	  support for the next generation FinEID cards with ISO/IEC
	  7816-15 layout.

2005-02-09 11:33  aet

	* trunk/src/libopensc/card-belpic.c,
	  trunk/src/libopensc/card-etoken.c,
	  trunk/src/libopensc/card-flex.c, trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/card-jcop.c,
	  trunk/src/libopensc/card-mcrd.c,
	  trunk/src/libopensc/card-miocos.c,
	  trunk/src/libopensc/card-oberthur.c,
	  trunk/src/libopensc/card-openpgp.c,
	  trunk/src/libopensc/card-starcos.c,
	  trunk/src/libopensc/card-tcos.c, trunk/src/libopensc/internal.h:
	  - Add atrmask to sc_atr_table

2005-02-08 19:49  nils

	* trunk/src/pkcs15init/pkcs15.profile: remove unused profile entry

2005-02-08 19:33  nils

	* trunk/src/pkcs15init/pkcs15-lib.c: remove unused define

2005-02-08 09:51  aet

	* trunk/src/tools/pkcs15-init.c: - Warning fix

2005-02-07 22:43  nils

	* trunk/src/libopensc/card.c: workaround for broken cashmouse
	  driver

2005-02-07 17:03  aet

	* trunk/src/libopensc/dir.c, trunk/src/libopensc/pkcs15-esteid.c,
	  trunk/src/libopensc/pkcs15-syn.c: - Fixed typos

2005-02-07 11:40  aet

	* trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/reader-pcsc.c: - Cleanup

2005-02-07 10:58  nils

	* trunk/src/libopensc/pkcs15-pin.c: remove outdated comment

2005-02-07 10:53  nils

	* trunk/src/libopensc/pkcs15-pin.c: fix usage of
	  sc_pkcs15_pin_info_t::max_length etc.

2005-02-06 21:38  nils

	* trunk/src/libopensc/pkcs15-openpgp.c: no need to include
	  internal.h and asn1.h

2005-02-06 21:34  nils

	* trunk/src/libopensc/pkcs15-openpgp.c: update, note: this totally
	  untested

2005-02-06 21:32  nils

	* trunk/src/libopensc/pkcs15-syn.c: fix type flag

2005-02-06 21:01  nils

	* trunk/src/tools/pkcs15-init.c: const fixes etc.

2005-02-06 20:46  nils

	* trunk/src/libopensc/pkcs15-infocamere.c,
	  trunk/src/libopensc/pkcs15-postecert.c: as every card structure
	  has an own copy of the card ops struc, allocating a new one
	  shouldn't be necessary

2005-02-06 20:14  aet

	* trunk/src/libopensc/card.c: - Ahm, fixed a typo in the previous
	  commit

2005-02-06 19:40  aet

	* trunk/src/libopensc/card-belpic.c,
	  trunk/src/libopensc/card-etoken.c,
	  trunk/src/libopensc/card-flex.c, trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/card-jcop.c,
	  trunk/src/libopensc/card-mcrd.c,
	  trunk/src/libopensc/card-miocos.c,
	  trunk/src/libopensc/card-oberthur.c,
	  trunk/src/libopensc/card-openpgp.c,
	  trunk/src/libopensc/card-setcos.c,
	  trunk/src/libopensc/card-starcos.c,
	  trunk/src/libopensc/card-tcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/ctx.c, trunk/src/libopensc/internal.h,
	  trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15-esteid.c, trunk/src/libopensc/sc.c: -
	  Optimize a few cpu cycles from _sc_match_atr_hex - Replace
	  struct sc_atr_table / _sc_match_atr with recently introduced
	  _hex variants - Rewrote _add_atr - Introduce int type variable
	  to sc_card_t, so that every other card driver won't have to glue
	  around with this - Card driver cleanups, optimize the number of
	  sc_match_atr called per card driver. Also always try direct
	  match with _sc_match_atr first, before relying on eg. historical
	  bytes information on some card drivers - Fixed a memory leak
	  from the miocos driver

2005-02-06 10:28  nils

	* trunk/src/pkcs11/pkcs11-display.c,
	  trunk/src/pkcs11/pkcs11-display.h,
	  trunk/src/pkcs11/pkcs11-spy.c: declare some functions static +
	  some type fixes

2005-02-06 10:06  aet

	* trunk/src/tools/pkcs11-tool.c, trunk/src/tools/pkcs15-init.c: -
	  Warning fix

2005-02-06 09:09  aet

	* trunk/configure.in: - Give up, just use CoreFoundation framework
	  instead of -lobjc

2005-02-06 08:57  aet

	* trunk/src/libopensc/card-oberthur.c: - Cleanup

2005-02-06 08:53  aet

	* trunk/src/pam/pam_support.c: - Warning fix, build fix

2005-02-05 10:02  nils

	* trunk/src/tools/opensc-tool.c: even more cleanup

2005-02-05 09:54  nils

	* trunk/src/tools/cryptoflex-tool.c: cleanup

2005-02-04 22:52  nils

	* trunk/src/tools/pkcs15-crypt.c, trunk/src/tools/pkcs15-tool.c:
	  declare some functions static plus some type fixes

2005-02-04 22:33  nils

	* trunk/src/tools/pkcs11-tool.c: remove unreachable code, make
	  some functions static and fix parameter type

2005-02-04 22:11  nils

	* trunk/src/libopensc/card-starcos.c: cleanup

2005-02-04 20:29  aet

	* trunk/src/libopensc/card-belpic.c,
	  trunk/src/libopensc/card-etoken.c,
	  trunk/src/libopensc/card-flex.c, trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/card-jcop.c,
	  trunk/src/libopensc/card-mcrd.c,
	  trunk/src/libopensc/card-miocos.c,
	  trunk/src/libopensc/card-oberthur.c,
	  trunk/src/libopensc/card-oberthur.h,
	  trunk/src/libopensc/card-openpgp.c,
	  trunk/src/libopensc/card-setcos.c,
	  trunk/src/libopensc/card-starcos.c,
	  trunk/src/libopensc/card-tcos.c,
	  trunk/src/libopensc/pkcs15-esteid.c: - Unify all card drivers
	  ATR matching code to use _sc_match_atr_hex, untested as of yet.

2005-02-04 18:10  nils

	* trunk/src/tools/opensc-explorer.c: fix some compiler warnings

2005-02-04 17:32  aet

	* trunk/src/libopensc/pkcs15-postecert.c: - Indent cleanups

2005-02-04 17:29  aet

	* trunk/src/libopensc/pkcs15-starcert.c: - Revert previous patch,
	  it's unnecessary after recent changes

2005-02-04 15:57  aet

	* trunk/src/libopensc/card.c, trunk/src/libopensc/internal.h: -
	  Introduce _sc_match_atr_hex / struct sc_atr_table_hex.

2005-02-04 14:38  aet

	* trunk/src/tests/sc-test.c: - Cleanup ATR dumping code

2005-02-04 11:43  aet

	* trunk/src/libopensc/pkcs15-starcert.c: - Add internal.h, that's
	  where the config.h and other general stuff comes from.

2005-02-04 09:27  nils

	* trunk/src/libopensc/pkcs15-esteid.c,
	  trunk/src/libopensc/pkcs15-netkey.c,
	  trunk/src/libopensc/pkcs15-starcert.c: use strncpy instead of
	  snprintf + update of pkcs15-netkey.c

2005-02-03 22:44  nils

	* trunk/src/libopensc/cardctl.h, trunk/src/libopensc/esteid.h,
	  trunk/src/libopensc/pinpad-ccid.c,
	  trunk/src/libopensc/pkcs15-esteid.c,
	  trunk/src/pkcs11/framework-pkcs15.c: indent fixes and cleanup by
	  Martin Paljak

2005-02-02 22:18  nils

	* trunk/src/libopensc/pkcs15-starcert.c: make win compilers happy
	  (include config.h)

2005-02-02 21:18  nils

	* trunk/src/libopensc/pkcs15-esteid.c,
	  trunk/src/libopensc/pkcs15-starcert.c,
	  trunk/src/libopensc/pkcs15-syn.c, trunk/src/libopensc/pkcs15.h:
	  first part of a pkcs15 emulation driver cleanup/rework: use new
	  api the create pkcs15 objects (note: the part enclosed in
	  '#ifndef OPENSC_NO_DEPRECATED' statement will be removed in
	  someday). At first only for pkcs15-esteid.c and
	  pkcs15-starcert.c but the others will follow soon (including
	  some documentation)

2005-02-02 10:21  aet

	* trunk/src/libopensc/asn1.h, trunk/src/libopensc/cardctl.h,
	  trunk/src/libopensc/emv.h, trunk/src/libopensc/errors.h,
	  trunk/src/libopensc/internal.h, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15.h, trunk/src/libopensc/types.h,
	  trunk/src/pkcs15init/keycache.h,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/profile.h,
	  trunk/src/sslengines/pkcs11-internal.h,
	  trunk/src/tests/sc-test.h, trunk/src/tools/util.h: - Cleanup,
	  typo fix

2005-02-01 19:09  nils

	* trunk/src/libopensc/pkcs15-sec.c: fix indent

2005-02-01 19:03  nils

	* trunk/src/libopensc/card-starcos.c: add debugging output

2005-02-01 19:02  nils

	* trunk/src/pkcs11/framework-pkcs15.c: bugfix: reselect
	  application directory when lock_login=false is set (at the
	  moment only for pkcs15_prkey_sign and pkcs15_prkey_decrypt),
	  see:
	  http://www.opensc.org/pipermail/opensc-devel/2005-January/005345.html

2005-02-01 07:53  sth

	* trunk/src/libopensc/card-belpic.c: Work-around for the lack of
	  FCI info, so the card can be used with opensc-explorer

2005-02-01 07:52  sth

	* trunk/src/libopensc/opensc.h, trunk/src/tools/opensc-explorer.c:
	  Work-around for cards that don't return FCI info

2005-01-30 19:20  sth

	* trunk/src/include/winconfig.h,
	  trunk/src/libopensc/card-belpic.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/opensc.h: Have the option add a delay before
	  resending an APDU (after a 6CXX response). Is needed for most
	  current belpic cards on fast readers

2005-01-30 13:50  aet

	* trunk/src/libopensc/card-belpic.c: - Indent source

2005-01-30 13:29  aet

	* trunk/src/libopensc/card-belpic.c: - Cleanups

2005-01-29 12:14  sth

	* trunk/src/libopensc/card-belpic.c: Added belpic card driver

2005-01-29 12:10  sth

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/opensc.h: src/libopensc/card-belpic.c

2005-01-29 10:51  aet

	* trunk/configure.in: - Show package version when configure is
	  finished

2005-01-29 10:49  aet

	* trunk/src/libopensc/ctbcs.c, trunk/src/libopensc/ctbcs.h,
	  trunk/src/libopensc/ctx.c, trunk/src/libopensc/reader-ctapi.c: -
	  Add experimental multi-slot support for CT-API and CT-BCS 1.0
	  enhancements. (Bernhard Froehlich <ted@convey.de>) - Enable
	  CT-API for win32

2005-01-29 10:44  aet

	* trunk/src/libopensc/reader-pcsc.c: - Build fix

2005-01-29 09:13  aet

	* trunk/src/libopensc, trunk/src/libopensc/.cvsignore: Update

2005-01-29 09:12  aet

	* trunk/Makefile.am: - Require automake 1.5 or later

2005-01-28 21:22  nils

	* trunk/src/libopensc/card.c: yet another fix

2005-01-28 20:41  sth

	* trunk/src/libopensc/Makefile.mak: Added pinpad-ccid.obj

2005-01-28 20:39  sth

	* trunk/src/libopensc/pinpad-ccid.h,
	  trunk/src/libopensc/reader-pcsc.c: Windows fix: SCARD_CTL_CODE
	  is already #defined in a Windows header

2005-01-27 22:52  nils

	* trunk/src/pkcs15init/pkcs15-lib.c: fix last commit

2005-01-27 21:35  sth

	* trunk/src/libopensc/asn1.c: Fix: stop parsing at the end of the
	  file, not when finding padding bytes

2005-01-25 11:45  aet

	* trunk/src/libopensc/reader-pcsc.c: - Build fix

2005-01-25 11:11  aet

	* trunk/etc/opensc.conf.example,
	  trunk/src/libopensc/reader-pcsc.c: - Add use_ccid_pin_cmd
	  boolean to opensc.conf, for now.

2005-01-24 22:10  nils

	* trunk/src/libopensc/card.c: fix lock/unlock mismatch

2005-01-24 19:46  aet

	* trunk/src/libopensc/ctbcs.c, trunk/src/libopensc/pinpad-ccid.c:
	  - Cleanup

2005-01-24 18:30  aet

	* trunk/configure.in, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/pinpad-ccid.c,
	  trunk/src/libopensc/pinpad-ccid.h,
	  trunk/src/libopensc/reader-pcsc.c: - Early ccid pinpad cleanups,
	  more to follow

2005-01-24 17:20  nils

	* trunk/configure.in: add two more options: one for Martin's
	  pinpad stuff and one for enable/disable logging of sensitive
	  apdu data

2005-01-24 17:19  nils

	* trunk/src/libopensc/card.c: make it configurable whether or not
	  allow logging of sensitive apdu command data at all (to please
	  the Belgian EID guys ;-)

2005-01-24 11:31  nils

	* trunk/src/libopensc/Makefile.am, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pinpad-ccid.c,
	  trunk/src/libopensc/pinpad-ccid.h,
	  trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/libopensc/reader-openct.c,
	  trunk/src/libopensc/reader-pcsc.c: merge Martin Paljak's ccid
	  pinpad changes from the OPENSC_0_9 branch to the cvs head

2005-01-23 19:48  nils

	* trunk/src/tools/pkcs11-tool.c: just issue a warning in case of a
	  missing attribute, patch supplied by Philipp Marek (with some
	  changes from me)

2005-01-23 10:14  aet

	* trunk/aclocal/Makefile.am, trunk/aclocal/pkg.m4: - Add pkg.m4
	  for pkg-config depencies

2005-01-21 18:47  nils

	* trunk/src/tools/opensc-explorer.c: more indent fixes from Martin
	  Paljak

2005-01-21 18:31  nils

	* trunk/src/pkcs15init/pkcs15-lib.c: fix more memory leaks

2005-01-21 18:25  nils

	* trunk/src/tools/pkcs15-init.c: fix memory leak

2005-01-21 11:06  nils

	* trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-lib.c: fix memory leaks

2005-01-21 10:04  nils

	* trunk/src/pkcs15init/profile.c: fix memory leak: use object
	  specific release method

2005-01-19 20:39  nils

	* trunk/src/tools/opensc-tool.c: print the atr in standard opensc
	  hex format, patch supplied by Martin Paljak

2005-01-19 20:12  nils

	* trunk/src/pkcs11/pkcs11-object.c: even more indent issues

2005-01-19 19:56  nils

	* trunk/src/libopensc/card-mcrd.c: fix debug message + remove
	  empty lines, patch supplied by Martin Paljak

2005-01-19 19:52  nils

	* trunk/src/pkcs11/slot.c: fix indent again

2005-01-19 18:15  nils

	* trunk/src/pkcs11/framework-pkcs15.c, trunk/src/pkcs11/misc.c,
	  trunk/src/pkcs11/pkcs11-display.c,
	  trunk/src/pkcs11/pkcs11-global.c,
	  trunk/src/pkcs11/pkcs11-object.c,
	  trunk/src/pkcs11/pkcs11-session.c,
	  trunk/src/pkcs11/pkcs11-spy.c, trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/pkcs11/slot.c: some indent fixes from Martin Paljak
	  plus some additional changes from me

2005-01-19 16:17  nils

	* trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-sec.c,
	  trunk/src/libopensc/reader-pcsc.c, trunk/src/libopensc/sec.c:
	  fix indent, patch supplied by Martin Paljak

2005-01-19 16:12  nils

	* trunk/src/tools/pkcs11-tool.c: don't print key length in case of
	  a private key (as private key doesn't have the CKA_MODULUS_BITS
	  attribute)

2005-01-19 08:00  nils

	* trunk/src/common/getpass.c, trunk/src/tools/opensc-explorer.c:
	  fix indent, patch supplied by Martin Paljak

2005-01-18 21:42  nils

	* trunk/src/libopensc/pkcs15-pin.c, trunk/src/libopensc/sec.c:
	  cleanup pin handling (set and use sc_pin_cmd_pin->pad_length +
	  use pkcs15 puk object if existing)

2005-01-17 09:10  nils

	* trunk/src/libopensc/sec.c: of course we should not do it

2005-01-16 21:12  sth

	* trunk/src/Makefile.mak, trunk/src/libopensc/Makefile.mak,
	  trunk/src/pkcs11/Makefile.mak,
	  trunk/src/sslengines/Makefile.mak, trunk/src/tools/Makefile.mak,
	  trunk/win32/Make.rules.mak: Simplified the procedure to link
	  with openssl on Windows: now you only need to slightly change
	  Make.rules.mak instead of hacking in several Makefile.mak files

2005-01-16 14:24  aet

	* trunk/src/libopensc/reader-ctapi.c: - Add dynamic loading
	  support for win32, Bernhard Froehlich <ted@convey.de>

2005-01-16 13:29  aet

	* trunk/QUICKSTART: - Spell checks

2005-01-14 23:14  nils

	* trunk/src/pkcs15init/pkcs15-lib.c: in case of SC_AC_UNKNOWN it
	  doesn't make much sense to verify something + add missing
	  suppress_errors--

2005-01-13 21:52  nils

	* trunk/docs/pkcs15-init.1, trunk/src/tools/pkcs15-init.c,
	  trunk/src/tools/pkcs15-tool.c: change auth_id -> id, show pin
	  type, update pkcs15-init manpage

2005-01-13 20:28  nils

	* trunk/src/libopensc/card-starcos.c,
	  trunk/src/libopensc/iso7816.c: starcos: use iso decipher,
	  iso7816: set le to 256 == 0x00

2005-01-09 20:10  nils

	* trunk/src/libopensc/pkcs15-pin.c: remove misleading comment

2005-01-08 10:20  nils

	* trunk/src/libopensc/pkcs15-pin.c: evaluate pkcs15 pin type

2005-01-07 18:50  nils

	* trunk/src/libopensc/opensc.h: types are unsigned int

2005-01-04 19:45  aet

	* trunk/src/libopensc/reader-ctapi.c: - fixed a typo, pointed out
	  by Bernhard Froehlich <ted@convey.de>

2005-01-03 17:47  nils

	* trunk/src/libopensc/ctx.c: dump version info in the log

2005-01-03 17:25  nils

	* trunk/src/pkcs11/openssl.c, trunk/src/pkcs11/pkcs11-session.c,
	  trunk/src/pkcs11/secretkey.c, trunk/src/pkcs15init/keycache.c,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/profile.c: some cleanup + improved error
	  checking

2005-01-03 17:20  nils

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/ctx.c, trunk/src/libopensc/pkcs15-algo.c,
	  trunk/src/libopensc/pkcs15.c: some cleanup + improved error
	  checking

2004-12-29 23:20  nils

	* trunk/src/libopensc/pkcs15-syn.c: check calloc return value

2004-12-29 23:11  nils

	* trunk/src/libopensc/pkcs15-syn.c: bugfix, pointed out by David
	  Mattes <david.mattes@boeing.com>

2004-12-27 14:33  nils

	* trunk/src/libopensc/ctx.c: cleanup

2004-12-27 13:22  nils

	* trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-pubkey.c,
	  trunk/src/libopensc/pkcs15.h: add data field for subject
	  Common{Private|Public}KeyAttributes

2004-12-24 23:24  nils

	* trunk/src/libopensc/card-flex.c: implement serial number support
	  for cryptoflex cards

2004-12-23 10:49  nils

	* trunk/src/libopensc/asn1.c: fix type, found by T.Fujita
	  <fujita@ouk.jp>

2004-12-23 09:28  aet

	* trunk/src/signer/Makefile.am: - Revert the previous patch, as it
	  broke the snapshot generation and has been broken since.. July?
	  No new automatic snapshots until some hardware issues have been
	  solved.

2004-12-22 10:17  nils

	* trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/pkcs11-global.c: cleanup ...

2004-12-22 09:54  nils

	* trunk/src/libopensc/cardctl.h, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15.h: flags/types are unsigned int, the
	  exponent shouldn't be negative and more const

2004-12-22 09:48  nils

	* trunk/src/pkcs15init/keycache.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-miocos.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c,
	  trunk/src/pkcs15init/pkcs15-starcos.c,
	  trunk/src/pkcs15init/profile.c, trunk/src/pkcs15init/profile.h:
	  cleanup: -index shadows a variable in /usr/include/string.h
	  -some signed vs. unsigned issues -and some const cleanup

2004-12-21 22:38  nils

	* trunk/src/libopensc/card-oberthur.c,
	  trunk/src/libopensc/card-oberthur.h,
	  trunk/src/libopensc/cardctl.h: cleanup: signed vs. unsigned and
	  some const

2004-12-21 21:52  nils

	* trunk/src/libopensc/pkcs15-openpgp.c: more const ...

2004-12-21 21:47  nils

	* trunk/src/libopensc/pkcs15-esteid.c: more const

2004-12-21 21:43  nils

	* trunk/src/libopensc/pkcs15-netkey.c: cleanup: declare structures
	  as const

2004-12-21 15:00  nils

	* trunk/src/libopensc/card-miocos.c: signed vs. unsigned

2004-12-21 14:01  nils

	* trunk/src/libopensc/log.c: char * -> const char *

2004-12-21 13:56  nils

	* trunk/src/libopensc/ctbcs.c: disable unused functions

2004-12-21 13:22  nils

	* trunk/src/libopensc/reader-pcsc.c: fix compiler warnings

2004-12-21 11:03  nils

	* trunk/src/libopensc/reader-pcsc.c: remove superfluous code,
	  Martin Paljak <martin@paljak.pri.ee>

2004-12-21 09:54  nils

	* trunk/etc/opensc.conf.example, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/reader-pcsc.c:
	  force_protocol cleanup from Martin Paljak <martin@paljak.pri.ee>

2004-12-20 20:05  nils

	* trunk/src/tools/pkcs11-tool.c: fix help message (supplied by
	  Philipp Marek)

2004-12-20 19:44  nils

	* trunk/src/pkcs11/framework-pkcs15.c: fix public key reference

2004-12-20 08:03  nils

	* trunk/src/tools/opensc-tool.c: dump serial number only if we
	  have one

2004-12-18 14:14  nils

	* trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-data.c,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-pubkey.c,
	  trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h,
	  trunk/src/pkcs11/framework-pkcs15.c: fix memory leak, cleanup:
	  use object specific release method

2004-12-16 08:50  nils

	* trunk/docs/opensc-tool.1, trunk/src/tools/opensc-tool.c: serial
	  number support for opensc-tool

2004-12-15 19:59  nils

	* trunk/src/libopensc/card-gpk.c: implement serial number support
	  for gpk 16k cards

2004-12-15 18:18  aet

	* trunk/configure.in: - Big bunch of OpenSSL and some other fixes

2004-12-15 18:10  aet

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/sslengines/Makefile.am: - Cleanups

2004-12-15 18:01  aet

	* trunk/src/libopensc/card-oberthur.c: - Build fixes

2004-12-15 17:34  nils

	* trunk/src/libopensc/card-etoken.c,
	  trunk/src/libopensc/card-oberthur.c,
	  trunk/src/libopensc/card-openpgp.c,
	  trunk/src/libopensc/pkcs15-esteid.c,
	  trunk/src/libopensc/pkcs15-infocamere.c,
	  trunk/src/libopensc/pkcs15-netkey.c,
	  trunk/src/libopensc/pkcs15-openpgp.c,
	  trunk/src/libopensc/pkcs15-postecert.c,
	  trunk/src/libopensc/pkcs15-starcert.c: cleanup ...

2004-12-15 15:42  aet

	* trunk/src/include/winconfig.h: - Update version for win32 build

2004-12-15 14:47  aet

	* trunk/src/pkcs15init/pkcs15-oberthur.c: - Cleanup

2004-12-15 13:57  aet

	* trunk/ANNOUNCE, trunk/NEWS, trunk/QUICKSTART: - Preparations for
	  the next release

2004-12-15 13:53  aet

	* trunk/src/libopensc/card-starcos.c,
	  trunk/src/libopensc/card-tcos.c, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/pkcs15-esteid.c,
	  trunk/src/libopensc/pkcs15-infocamere.c,
	  trunk/src/libopensc/pkcs15-netkey.c,
	  trunk/src/libopensc/pkcs15-postecert.c,
	  trunk/src/libopensc/pkcs15-starcert.c,
	  trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c,
	  trunk/src/pkcs15init/pkcs15-starcos.c,
	  trunk/src/scam/cert_support.c, trunk/src/sslengines/p11_rsa.c,
	  trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/pkcs11-tool.c: - Build / warning fixes

2004-12-15 10:56  aet

	* trunk/src/libopensc/card-mcrd.c,
	  trunk/src/libopensc/card-oberthur.c,
	  trunk/src/libopensc/pkcs15-esteid.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c,
	  trunk/src/sslengines/engine_pkcs11.c: - Convert C++ comments
	  into C to avoid compiler errors on some platforms

2004-12-15 09:35  nils

	* trunk/src/libopensc/card-jcop.c,
	  trunk/src/libopensc/card-mcrd.c,
	  trunk/src/libopensc/card-oberthur.c,
	  trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/pkcs15-infocamere.c: cleanup: declare local
	  functions as static, renamed shadowed variables etc.

2004-12-15 08:38  nils

	* trunk/src/libopensc/card-flex.c: cleanup

2004-12-13 20:58  nils

	* trunk/src/libopensc/padding.c: do a memcpy only if source and
	  dest are different

2004-12-13 11:24  nils

	* trunk/src/libopensc/card-etoken.c: local functions should be
	  static

2004-12-13 09:48  nils

	* trunk/src/libopensc/ctx.c: don't close stdout/stderr

2004-12-12 21:51  nils

	* trunk/src/libopensc/pkcs15-pubkey.c: fix memory leak

2004-12-12 20:41  nils

	* trunk/src/libopensc/ctx.c: close files when the context is
	  destroyed

2004-12-12 19:13  nils

	* trunk/src/pkcs11/framework-pkcs15.c: use object specific release
	  method (if existing)

2004-12-12 17:17  nils

	* trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-starcert.c: fix (potential) memory
	  leak

2004-12-09 08:23  nils

	* trunk/src/tools/pkcs11-tool.c: bugfix: don't try to get the
	  CKA_MODULUS_BITS attribute from a private key

2004-12-08 20:57  nils

	* trunk/src/libopensc/pkcs15-syn.c: fix memory leak

2004-12-05 19:04  aj

	* trunk/configure.in: the big openssl fix. hope everything still
	  works.

2004-12-05 19:03  aj

	* trunk/src/libopensc/pkcs15-infocamere.c,
	  trunk/src/libopensc/pkcs15-postecert.c: make functions static,
	  so the names don't conflict.

2004-12-05 16:35  nils

	* trunk/src/libopensc/card-etoken.c: suppress error message when
	  testing signature alg

2004-11-30 21:32  aj

	* trunk/src/sslengines/engine_opensc.c,
	  trunk/src/sslengines/engine_opensc.h,
	  trunk/src/sslengines/hw_opensc.c: new pin handling to make
	  opensc engine work with wpa-supplicant.

2004-11-26 08:43  nils

	* trunk/src/libopensc/pkcs15-syn.c: bugfix

2004-11-24 17:00  nils

	* trunk/etc/opensc.conf.example, trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak,
	  trunk/src/libopensc/pkcs15-postecert.c,
	  trunk/src/libopensc/pkcs15-syn.c: add pkcs15 emulation support
	  for the Italian postecert card

2004-11-15 09:39  nils

	* trunk/src/pkcs15init/etoken.profile: try to avoid conflicts with
	  file ids of different file types

2004-11-12 19:49  sth

	* trunk/src/sslengines/engine_pkcs11.c: Don't check if the token
	  is initialised

2004-11-12 16:59  nils

	* trunk/src/pkcs15init/gpk.profile: try to avoid conflicts with
	  file ids of different file types

2004-11-05 21:04  nils

	* trunk/src/libopensc/pkcs15-infocamere.c: bugfix from Antonio
	  Iacono

2004-11-05 18:48  aj

	* trunk/docs/opensc-es.html: add spanish translation.

2004-11-05 18:31  aj

	* trunk/src/libopensc/libpkcs15init.pc.in,
	  trunk/src/libopensc/libscam.pc.in,
	  trunk/src/libopensc/libscconf.pc.in,
	  trunk/src/libopensc/libscldap.pc.in: add more *.pc files for all
	  other libraries as well.

2004-11-05 18:30  aj

	* trunk/configure.in, trunk/docs/Makefile.am,
	  trunk/docs/opensc-es.xml, trunk/src/libopensc/Makefile.am: Add
	  spanish manual by Jonsy (teleline) <jonsito@teleline.es>

2004-11-04 19:14  aj

	* trunk/configure.in, trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/libopensc.pc.in,
	  trunk/src/openscd/Makefile.am, trunk/src/pam/Makefile.am,
	  trunk/src/pkcs15init/Makefile.am, trunk/src/sia/Makefile.am,
	  trunk/src/tests/Makefile.am, trunk/src/tools/Makefile.am: build
	  fixes by Vile Skytt&#65533;.

2004-11-03 21:39  nils

	* trunk/src/libopensc/pkcs15-infocamere.c: bugfix from Antonio
	  Iacono

2004-11-03 18:14  nils

	* trunk/src/tools/pkcs11-tool.c: check only for attributes which
	  can be present

2004-11-02 21:46  nils

	* trunk/src/libopensc/pkcs15-infocamere.c: update for the
	  Infocamere support, supplied by Antonio Iacono

2004-11-01 21:13  aj

	* trunk/src/libopensc/card-mcrd.c: fix select_file in mcrd. by
	  Martin Paljak

2004-11-01 11:41  aj

	* trunk/etc/opensc.conf.example, trunk/src/libopensc/card-mcrd.c:
	  clarify micardo situtation.

2004-10-29 20:08  nils

	* trunk/src/libopensc/card.c, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/pkcs15.c: cleanup

2004-10-27 16:10  nils

	* trunk/src/libopensc/ui.c: fix last commit

2004-10-27 06:41  nils

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak,
	  trunk/src/libopensc/internal.h, trunk/src/libopensc/module.c:
	  remove obsolete module support in libopensc (scdl should now be
	  used)

2004-10-27 05:10  sth

	* trunk/src/pkcs11/Makefile.mak, trunk/src/tools/Makefile.mak:
	  scdl.lib needed for for the link step due to the recent changes
	  in dynamic loading

2004-10-25 10:43  nils

	* trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/profile.h: support for dynamic pkcs15init
	  drivers

2004-10-24 17:20  nils

	* branches/opensc-0.9/src/pkcs15init/profile.c,
	  trunk/src/tools/pkcs15-init.c: fix memory leak

2004-10-24 17:17  nils

	* trunk/src/pkcs15init/profile.c: fix memory leak

2004-10-22 07:29  nils

	* trunk/src/libopensc/card-mcrd.c, trunk/src/libopensc/opensc.h:
	  two patches from Marin Paljak <martin.paljak@gmail.com> : -
	  remove unnecessary function from the reader ops - add a field
	  for pinpad support - cleanup + fix indent in card-mcrd.c

2004-10-20 06:53  nils

	* trunk/src/libopensc/reader-ctapi.c: sc_module_*() -> scdl_*()

2004-10-18 21:35  nils

	* trunk/src/libopensc/reader-ctapi.c, trunk/src/libopensc/ui.c:
	  sc_module_*() -> scdl_*()

2004-10-18 08:24  nils

	* trunk/docs/opensc.xml, trunk/etc/opensc.conf.example,
	  trunk/src/libopensc/ctx.c, trunk/src/libopensc/opensc.h:
	  implement dynamic card/reader support from Juan Antonio Martinez
	  (with some input from me)

2004-10-17 20:40  nils

	* trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-sec.c, trunk/src/libopensc/sec.c: fix
	  compiler warnings

2004-10-17 20:20  nils

	* trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h: some
	  cleanup: 'int' -> 'unsigned int' for flags, 'int' -> 'size_t'
	  for length + remove some compiler warnings

2004-10-17 18:34  nils

	* trunk/src/libopensc/dir.c: fix compiler warnings

2004-10-17 16:46  nils

	* trunk/src/libopensc/pkcs15.h: flags should be stored in a
	  'unsigned int' (at least this seems to be the convention in
	  libopensc) => change tokenInfo flags from 'unsigned long' to
	  'unsigned int'

2004-10-17 16:20  nils

	* trunk/src/libopensc/sc.c: fix signed vs. unsigned mismatch

2004-10-17 15:59  nils

	* trunk/src/libopensc/pkcs15-syn.c: sc_module_* -> scdl_*

2004-10-14 06:37  nils

	* trunk/src/libopensc/dir.c: suppress annoying (but unimportant)
	  error message

2004-10-13 19:07  nils

	* trunk/src/libopensc/pkcs15-cache.c: fix compiler warning

2004-10-13 18:57  nils

	* trunk/etc/opensc.conf.example: update opensc.conf for the new
	  pkcs15 emulation stuff

2004-10-13 18:54  nils

	* trunk/src/libopensc/card.c: fix int vs. size_t mismatch

2004-10-13 18:02  nils

	* trunk/src/scdl/scdl.c: initialize pointer to NULL

2004-10-13 07:19  sth

	* trunk/src/pkcs15init/cyberflex.profile,
	  trunk/src/pkcs15init/flex.profile: Added info for EF data files

2004-10-12 19:36  sth

	* trunk/src/sslengines/p11_rsa.c: Added RSA decryption (Robert
	  Pragai)

2004-10-12 06:24  nils

	* trunk/docs/sc_release_context.3: bugfix from Hubert Sokolowski
	  <hubert.sokolowski@biatel.pl>

2004-10-11 21:22  nils

	* trunk/src/sslengines/engine_opensc.c,
	  trunk/src/sslengines/engine_opensc.h: u_char -> unsigned char

2004-10-08 21:29  nils

	* trunk/src/libopensc/module.c, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15-esteid.c,
	  trunk/src/libopensc/pkcs15-infocamere.c,
	  trunk/src/libopensc/pkcs15-netkey.c,
	  trunk/src/libopensc/pkcs15-openpgp.c,
	  trunk/src/libopensc/pkcs15-starcert.c,
	  trunk/src/libopensc/pkcs15-syn.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/pkcs15.h: update pkcs15 emulation stuff

2004-10-08 21:25  nils

	* trunk/src/scdl/scdl.c: don't search the LD_LIBARY_PATH in case
	  of a absolute path

2004-10-08 07:11  aj

	* trunk/src/sslengines/engine_pkcs11.c: forget pin if it was wrong.

2004-10-06 14:07  sth

	* trunk/src/tools/pkcs15-init.c: If you do pkcs15-init -C with the
	  onepin option, you can now specify --pin and --puk instead of
	  --so-pin and --so-puk (also allowed for backward compatibility)

2004-09-28 20:06  nils

	* trunk/src/libopensc/card-starcos.c,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-starcos.c,
	  trunk/src/pkcs15init/starcos.profile: fix starcos spk 2.3
	  "onepin" profile support

2004-09-27 08:38  sth

	* trunk/src/tools/pkcs11-tool.c: Don't use 0 as input to test
	  signature-verification

2004-09-24 08:54  nils

	* trunk/src/libopensc/pkcs15-netkey.c: improved card detection +
	  cleanup

2004-09-20 09:47  nils

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/base64.c,
	  trunk/src/libopensc/ctx.c, trunk/src/libopensc/log.c,
	  trunk/src/libopensc/padding.c: fix some compiler warnings

2004-09-19 19:50  nils

	* trunk/src/libopensc/pkcs15-infocamere.c,
	  trunk/src/libopensc/pkcs15-netkey.c,
	  trunk/src/libopensc/pkcs15-starcert.c: correct tries_left entries

2004-09-19 19:47  nils

	* trunk/src/tools/pkcs15-tool.c: print 'tries_left' only if the
	  value is >= 0

2004-09-17 19:27  nils

	* trunk/src/libopensc/card-tcos.c,
	  trunk/src/libopensc/pkcs15-netkey.c: add support for
	  sc_card_ctl(*, SC_CARDCTL_GET_SERIALNR, *) for TCOS cards (and
	  use it in the netkey support)

2004-09-17 19:13  nils

	* trunk/src/libopensc/card-starcos.c,
	  trunk/src/libopensc/pkcs15-starcert.c,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/tools/pkcs15-init.c: rename "StarCOS" -> "STARCOS SPK
	  2.3"

2004-08-31 17:31  nils

	* trunk/src/libopensc/reader-pcsc.c: fix definition of
	  SCARD_PROTOCOL_ANY patch supplied by Ludovic Rousseau
	  <ludovic.rousseau@free.fr>

2004-08-25 20:55  nils

	* trunk/src/tools/pkcs15-tool.c: fix tab indentation and adds the
	  tries left field to the --list-pins output patch supplied by
	  Martin Paljak <martin@paljak.pri.ee>

2004-08-25 20:45  nils

	* trunk/src/libopensc/ctbcs.c: bugfix: fix segfaults when using a
	  pin-pad for pin verification thanks to Joachim Bauch
	  <jojo@struktur.de>

2004-08-21 14:26  nils

	* trunk/docs/pkcs15-crypt.1, trunk/src/tools/pkcs15-crypt.c: add
	  "--raw" option patch supplied by Jari Eskelinen
	  <jari.eskelinen@iki.fi>

2004-08-21 14:24  nils

	* trunk/src/pkcs15init/pkcs15-starcos.c: bugfix

2004-08-21 10:54  nils

	* trunk/src/pkcs15init/pkcs15-lib.c: two small fixes to let
	  pkcs15-init work with starcos spk 2.3

2004-08-21 10:53  nils

	* trunk/src/libopensc/card-starcos.c,
	  trunk/src/pkcs15init/pkcs15-starcos.c,
	  trunk/src/pkcs15init/starcos.profile: update starcos spk 2.3
	  pkcs15-init support change summary: - some bug fixes - support
	  for global so-pins - use so-pin (if present) to protect key
	  creation etc.

2004-08-19 08:55  nils

	* trunk/src/libopensc/ctx.c, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/reader-pcsc.c: add support to force pcsc to
	  use a certain protocol patch supplied by Martin Paljak
	  <martin@paljak.pri.ee>

2004-08-19 08:41  nils

	* trunk/src/libopensc/card-mcrd.c: add additional atr patch
	  supplied by Martin Paljak <martin@paljak.pri.ee>

2004-08-19 08:39  nils

	* trunk/src/libopensc/ctx.c: move the emv driver to the end of list

2004-08-14 13:43  nils

	* trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/tools/pkcs15-tool.c, trunk/src/tools/util.c,
	  trunk/src/tools/util.h: improve pkcs15-init + pkcs15-tool
	  support for data objects

2004-08-05 22:34  nils

	* trunk/src/sslengines/engine_opensc.c,
	  trunk/src/sslengines/engine_pkcs11.c: set ui_method if and only
	  if it's not NULL patch supplied by Michael Bell

2004-08-05 22:28  nils

	* trunk/src/sslengines/engine_opensc.c: improved error detection

2004-08-05 22:27  nils

	* trunk/configure.in: fix openssl detection, patch supplied by
	  Victor Tarasov

2004-07-28 20:02  nils

	* trunk/PAM_README, trunk/docs/opensc-explorer.1,
	  trunk/docs/pkcs15-crypt.1, trunk/docs/pkcs15-init.1,
	  trunk/docs/pkcs15-tool.1,
	  trunk/docs/sc_pkcs15_compute_signature.3: minor docu update
	  thanks to Ville Skytt&#65533;

2004-07-27 19:14  nils

	* trunk/src/sslengines/engine_opensc.c: set padding flags
	  accordingly (for the decipher operation)

2004-07-26 19:18  nils

	* trunk/src/tools/pkcs15-tool.c: improve output for pkcs15 data
	  objects

2004-07-26 18:47  nils

	* trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/pkcs11-global.c,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/tools/pkcs11-tool.c, trunk/src/tools/pkcs15-init.c,
	  trunk/src/tools/util.c, trunk/src/tools/util.h: pkcs15-init etc.
	  support for pkcs15 data objects patch supplied by Victor Tarasov
	  <vtarasov@idealx.com>

2004-07-26 04:53  aj

	* trunk/src/scconf/Makefile.am, trunk/src/scldap/Makefile.am:
	  properly split LDFLAGS into LDADD and LDFLAGS to make parallel
	  build work. Thanks to Ville Skytt&#65533;.

2004-07-25 12:35  aj

	* trunk/ANNOUNCE, trunk/Makefile.am, trunk/NEWS, trunk/PAM_README,
	  trunk/QUICKSTART, trunk/configure.in: small configure
	  improvements, documentation updates.

2004-07-24 21:08  aj

	* trunk/src/scam/p15_eid.c: Permission checks and support for
	  several certificates in the authorized_certificates file. Code
	  written by Fritz Elfert.

2004-07-23 20:29  nils

	* trunk/src/libopensc/pkcs15-data.c: fix default values for OIDs
	  patch supplied by Victor Tarasov <vtarasov@idealx.com>

2004-07-23 16:52  nils

	* trunk/src/libopensc/card-oberthur.c: one more ATR for Oberthur
	  64K card patch supplied by Victor Tarasov <vtarasov@idealx.com>

2004-07-23 16:11  nils

	* trunk/src/libopensc/asn1.c: fix ASN1 NULL handling and avoid
	  malloc(0)

2004-07-22 20:52  aj

	* trunk/src/libopensc/card-oberthur.c: There is a problem with
	  decipher() of the oberthur card driver. Manifested when caller
	  allocates more then needed memory for the result. Thanks to the
	  regression tests, Viktor.

2004-07-21 22:11  aj

	* trunk/src/tools/pkcs11-tool.c: Bug found by Stef Hoeben.

2004-07-21 22:10  aj

	* trunk/src/libopensc/Makefile.mak: Typo found by Stef Hoeben.

2004-07-21 22:02  aj

	* trunk/src/tools/Makefile.am: pkcs11-tool and pkcs15-crypt use
	  libcrypto, so they need to link with it. Found by Dirk Gouders.

2004-07-21 21:56  aj

	* trunk/configure.in: fix a typo.

2004-07-20 22:11  aj

	* trunk/QUICKSTART: Add a quick start file, a simple text document.
	* trunk/Makefile.am: Add some text documentation.

2004-07-20 20:52  aj

	* trunk/configure.in, trunk/src/libopensc/reader-pcsc.c: Deal with
	  new pcsc-lite code changes.

2004-07-19 19:37  aj

	* trunk/configure.in, trunk/src/libopensc/Makefile.am: try
	  pkg-config, fall back to conventional code.

2004-07-19 16:58  nils

	* trunk/src/pkcs15init/pkcs15-lib.c: try to get the card serialnr
	  via sc_card_ctl (unless it has been explicitly specified by the
	  user)

2004-07-19 16:51  nils

	* trunk/src/libopensc/card-etoken.c,
	  trunk/src/libopensc/card-starcos.c,
	  trunk/src/libopensc/cardctl.h, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15-starcert.c: experimental support for
	  card serial numbers (at first only for starcos spk 2.3 and
	  cardos m4)

2004-07-19 16:18  nils

	* trunk/src/libopensc/card-oberthur.h: int -> size_t

2004-07-19 16:12  nils

	* trunk/src/libopensc/card-oberthur.c,
	  trunk/src/libopensc/pkcs15-infocamere.c,
	  trunk/src/libopensc/sec.c: fix compiler warning

2004-07-19 15:42  nils

	* trunk/src/libopensc/card-oberthur.c: support OpenSSL version <
	  0.9.7 in card-oberthur.c

2004-07-14 22:11  aj

	* trunk/src/libopensc/card-mcrd.c: kill two warnings about unused
	  variables.

2004-07-14 21:13  aj

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak,
	  trunk/src/libopensc/card-mcrd.c, trunk/src/libopensc/esteid.h,
	  trunk/src/libopensc/pkcs15-esteid.c,
	  trunk/src/libopensc/pkcs15-syn.c: Add support for Estonian ID
	  card. Written by Martin Paljak.

2004-07-12 15:19  nils

	* trunk/src/common/getpass.c: fix off-by-one bug, pointed out by
	  Michael Bell

2004-07-12 08:42  nils

	* trunk/src/tools/pkcs15-init.c: check return value

2004-07-12 08:26  nils

	* trunk/src/tools/pkcs15-init.c: fix/cleanup passphrase input
	  Michael Bell <michael.bell@cms.hu-berlin.de> and Nils Larsch

2004-07-09 21:33  aj

	* trunk/configure.in: As far as I know we did some incompatible
	  changes since 0.8.1

2004-07-09 21:30  aj

	* trunk/src/openssh/Makefile.am: add README and ask-for-pin.diff
	  to the distribution.

2004-07-09 21:28  aj

	* trunk/src/tests/regression/Makefile.am: Add missing scripts
	  init0012 pin0001 pin0002 to distribution.

2004-07-09 15:33  sth

	* trunk/src/pkcs11/slot.c: Fix: if a card couldnt be read (e.g.
	  inverted upside down), allow to retry it later when asked

2004-07-09 15:31  sth

	* trunk/src/libopensc/reader-pcsc.c: Fix: don't free anything in
	  the connect() function because it can be called multiple times

2004-06-30 21:37  aj

	* trunk/src/openssh/README, trunk/src/openssh/ask-for-pin.diff: a
	  small patch to make openssh ask for a pin. and a README. this
	  patch is a hack, not production quality, and will not be
	  accepted by openssh. But a clean solution requires changes in
	  openssh, and that will not be easy.

2004-06-30 21:35  aj

	* trunk/src/openssh/Makefile.am: Add current patch for openssh so
	  it can ask for the pin.

2004-06-30 17:26  nils

	* trunk/src/libopensc/card-tcos.c: fix TCOS decipher operation

2004-06-29 20:34  aj

	* trunk/configure.in, trunk/src/sslengines/Makefile.am: openssl
	  0.9.7d and later require and support linking engines with
	  -lcrypto. for older versions we need to link with libcrypto.a or
	  skip the engines alltogether.

2004-06-28 22:54  aj

	* trunk/src/signer/Makefile.am: small makefile improvement by
	  Ville Skytt&#65533;

2004-06-28 16:42  nils

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak,
	  trunk/src/libopensc/pkcs15-netkey.c,
	  trunk/src/libopensc/pkcs15-syn.c: add support for Telesec NetKey
	  cards (still experimental)

2004-06-25 15:44  nils

	* trunk/src/tools/pkcs15-init.c: use opt_passphrase, if present,
	  before asking the user patch supplied by Michael Bell
	  <michael.bell@cms.hu-berlin.de>

2004-06-24 17:25  nils

	* trunk/src/tools/opensc-explorer.c: Add two new commands:
	  update_binary and update_record. update_binary can be used to
	  write arbitrary data data (entered as hex values) to transparent
	  files and update_record can be used to do the same to record
	  files. Patch supplied by Victor Tarasov <vtarasov@idealx.com>
	  and Nils Larsch

2004-06-24 17:03  nils

	* trunk/src/pkcs15init/oberthur.profile: patch supplied by Victor
	  Tarasov <vtarasov@idealx.com>

2004-06-24 06:29  nils

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak,
	  trunk/src/libopensc/pkcs15-starcert.c,
	  trunk/src/libopensc/pkcs15-syn.c: add (partial) pkcs15 emu
	  support for StarCert V2.2 cards

2004-06-22 17:46  nils

	* trunk/src/pkcs15init/pkcs15-starcos.c: clean up access rights
	  for updating pin/puk

2004-06-21 21:20  nils

	* trunk/src/libopensc/card-flex.c: use the padding character from
	  the pkcs15 objects

2004-06-20 13:37  aj

	* trunk/src/libopensc/card-oberthur.c: the older generation of
	  oberthur card is not supported by the current driver. better not
	  detect them at all.

2004-06-18 20:49  nils

	* trunk/src/libopensc/pkcs15-cert.c: fix usage of asn1 flags

2004-06-18 09:33  aj

	* trunk/src/libopensc/card-etoken.c: One more italian eID card,
	  this time from gemplus. reported by Antonio Iacono.

2004-06-18 09:30  aj

	* trunk/src/libopensc/Makefile.mak,
	  trunk/src/pkcs15init/Makefile.mak: Also add oberthur files to
	  Makefile.mak. oops, sorry for forgetting. Reported by novakv and
	  fixed by Nils Larsch.

2004-06-18 09:12  aj

	* trunk/src/tools/cardos-info.c,
	  trunk/src/tools/cryptoflex-tool.c,
	  trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/pkcs11-tool.c,
	  trunk/src/tools/pkcs15-crypt.c, trunk/src/tools/pkcs15-tool.c:
	  fix short options as well.

2004-06-16 20:59  aj

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/card-oberthur.c,
	  trunk/src/libopensc/card-oberthur.h,
	  trunk/src/libopensc/cardctl.h, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/opensc.h, trunk/src/pkcs15init/Makefile.am,
	  trunk/src/pkcs15init/oberthur.profile,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-oberthur.c,
	  trunk/src/pkcs15init/pkcs15.profile: Very basic and untested
	  oberthur driver. Could possibly work, as only non-essential
	  parts stripped (or at least that was the plan). Written by
	  Viktor Tarasov of idealx. All bugs by Andreas Jellinghaus,
	  please don't blame anyone else.

2004-06-13 20:13  aj

	* trunk/docs/cardos-info.1, trunk/docs/cryptoflex-tool.1,
	  trunk/docs/opensc-explorer.1, trunk/docs/opensc-tool.1,
	  trunk/docs/pkcs11-tool.1, trunk/docs/pkcs15-crypt.1,
	  trunk/docs/pkcs15-init.1, trunk/docs/pkcs15-tool.1,
	  trunk/src/sslengines/engine_opensc.c,
	  trunk/src/sslengines/engine_pkcs11.c,
	  trunk/src/sslengines/engine_pkcs11.h,
	  trunk/src/sslengines/hw_pkcs11.c,
	  trunk/src/tests/regression/functions,
	  trunk/src/tools/cardos-info.c,
	  trunk/src/tools/cryptoflex-tool.c,
	  trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/pkcs11-tool.c,
	  trunk/src/tools/pkcs15-crypt.c, trunk/src/tools/pkcs15-init.c,
	  trunk/src/tools/pkcs15-tool.c, trunk/src/tools/util.c,
	  trunk/src/tools/util.h: cleanup debug/quiet/verbose handling.
	  now all tools accept "-v" for verbose operation, and you can
	  specify -v several times to get more verbose i.e. debugging
	  output.

2004-06-13 20:04  aj

	* trunk/src/tools/pkcs15-init.c: oops, forgot the select.

2004-06-13 19:45  aj

	* trunk/src/tools/pkcs15-init.c: fixed a small bug (!= instead of
	  ==) and made the code hopefully more readable.

2004-06-09 18:40  nils

	* trunk/src/scam/cert_support.c, trunk/src/scam/p15_ldap.c:
	  replace X509_NAME_oneline with X509_NAME_print_ex Patch supplied
	  by Gregor Kroesen and Nils Larsch

2004-06-08 20:22  nils

	* trunk/src/sslengines/engine_pkcs11.c: fix module name handling
	  patch supplied by Michael Bell <michael.bell@cms.hu-berlin.de>

2004-05-30 16:23  nils

	* trunk/src/scam/cert_support.c: don't omit the first extension
	  Thanks to Gregor Kroesen <kroesen@rembrandtstr.de>

2004-05-21 10:15  nils

	* trunk/src/libopensc/dir.c: fix usage flag Thanks to Peter Koch
	  <pk.opensc@naev.de>

2004-05-20 09:36  nils

	* trunk/src/libopensc/pkcs15-sec.c: only set the key_reference if
	  present Thanks to Andrej Komelj <akomelj@email.si>

2004-05-20 09:09  nils

	* trunk/src/libopensc/pkcs15-pin.c: call sc_select_file only if
	  pin->path is actually set Thanks to Andrej Komelj
	  <akomelj@email.si>

2004-05-04 18:13  nils

	* trunk/src/libopensc/pkcs15-infocamere.c: add pkcs15-syn support
	  for infocamere cards

2004-05-04 18:12  nils

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak,
	  trunk/src/libopensc/pkcs15-syn.c: add pkcs15-syn support for
	  infocamere card

2004-05-04 17:58  nils

	* trunk/src/libopensc/pkcs15-openpgp.c,
	  trunk/src/libopensc/pkcs15-syn.c, trunk/src/libopensc/pkcs15.h:
	  include common object attributes in the sc_pkcs15emu_add_* api

2004-04-27 17:41  nils

	* trunk/src/libopensc/reader-pcsc.c: proper checking of the
	  SCardListReaders return values

2004-04-23 17:29  nils

	* trunk/src/libopensc/pkcs15-pin.c: use pin_cmd for
	  sc_pkcs15_change_pin and sc_pkcs15_unblock_pin as well

2004-04-22 07:04  aj

	* trunk/src/tools/pkcs11-tool.c: oops. O_BINARY is for windows,
	  not linux.

2004-04-21 21:11  aj

	* trunk/src/pkcs11/slot.c: better checking for null values. found
	  and fixed reported by Victor Tarasov <vtarasov@idealx.com>

2004-04-21 20:11  nils

	* trunk/src/tools/pkcs15-init.c: "--assert-pristine" workaround
	  for Starcos cards (see comment in the patch)

2004-04-21 18:10  nils

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/pkcs15-algo.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/sc.c, trunk/src/scconf/scconf.c,
	  trunk/src/scconf/write.c, trunk/src/sslengines/p11_cert.c,
	  trunk/src/sslengines/p11_key.c: fix incorrect use of realloc (x
	  = realloc(x, y) doesn't free the x in case of a failure)

2004-04-21 16:52  nils

	* trunk/src/libopensc/dir.c: fix memory leak Discovered by Victor
	  Tarasov (thanks)

2004-04-21 07:41  aj

	* trunk/src/pkcs15init/Makefile.mak: Add pkcs15-starcos to windows
	  makefile.

2004-04-21 07:33  aj

	* trunk/src/tools/pkcs11-tool.c: Open file with O_BINARY on
	  windows.

2004-04-18 18:42  nils

	* trunk/src/pkcs15init/keycache.c: remove pointer to freed secret
	  object Patch supplied by Victor Tarasov

2004-04-18 18:14  aj

	* trunk/src/sslengines/p11_rsa.c: Adds message digest and DER
	  encoding if necessary. Patch by Mathias Brossard
	  <mathias.brossard@idealx.com>

2004-04-18 18:06  aj

	* trunk/src/sslengines/engine_pkcs11.c: Converts all printf(...)
	  tofprintf(stderr, ...) and condition output on all non-error
	  calls to the'quiet' (pre-existing) variable. Patch by Mathias
	  Brossard <mathias.brossard@idealx.com>

2004-04-18 18:05  aj

	* trunk/src/sslengines/engine_pkcs11.c,
	  trunk/src/sslengines/engine_pkcs11.h,
	  trunk/src/sslengines/hw_pkcs11.c: adds three options PIN, QUIET,
	  VERBOSE to theengine allowing respectively to set the PIN code,
	  reduce output, augmentoutput. First one is obvious, the 2 others
	  need the second patch to beuseful. Patch by Mathias Brossard
	  <mathias.brossard@idealx.com>

2004-04-17 22:21  nils

	* trunk/src/sslengines/engine_opensc.c: add support for split keys
	  in engine_opensc.c (backported from the opensc stuff in openssh)
	  Thanks to Neil Dunbar

2004-04-17 09:25  nils

	* trunk/src/tools/pkcs15-init.c: add support for "finalize" to
	  pkcs15-init to activate the ACs for starcos

2004-04-17 09:23  nils

	* trunk/src/pkcs15init/Makefile.am,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c: bind the new starcos spk 2.3
	  support to the pkcs15init code

2004-04-17 09:20  nils

	* trunk/src/pkcs15init/pkcs15-starcos.c,
	  trunk/src/pkcs15init/starcos.profile: initial pkcs15-init
	  support for starcos spk 2.3 cards/tokens

2004-04-17 09:15  nils

	* trunk/src/libopensc/pkcs15-syn.c: ensure that init_func is not
	  NULL (even if the config file is not correct)

2004-04-17 09:05  nils

	* trunk/src/libopensc/card-starcos.c,
	  trunk/src/libopensc/cardctl.h: update starcos spk 2.3 support
	  (add create file + key gen)

2004-04-14 22:09  aj

	* trunk/src/sslengines/p11_rsa.c: while we don't have code to
	  extract a key, tread extractable keys like non extractable ones.

2004-03-29 20:34  aj

	* trunk/src/pkcs11/misc.c: check parameters in strcpy_bp

2004-03-29 07:56  aj

	* trunk/src/libopensc/card-flex.c: cryptoflex 32k e-gate v4 also
	  has on board key generation. thanks for reporting to Pierre
	  JUHEN.

2004-03-28 20:30  aj

	* trunk/src/libopensc/pkcs15.c: it is legal to read all bytes of
	  the file (e.g. offset 0, len 10, fil->len 10). Bug found by
	  Antonio Iacono.

2004-03-28 20:26  aj

	* trunk/src/pkcs15init/pkcs15-lib.c: len is the number of
	  character, we need to alloc len+1 for the \0 terminator. Bug
	  found by Victor Tarasov.

2004-03-14 19:53  aj

	* trunk/src/tools/opensc-explorer.c: add "rm" alias for "delete"
	  and "exit" alias for "quit".

2004-03-08 13:59  sth

	* trunk/src/libopensc/pkcs15-openpgp.c,
	  trunk/src/libopensc/pkcs15-syn.c, trunk/src/libopensc/pkcs15.h:
	  Moved the sc_pkcs15emu_xxx() functions to pkcs15_syn.c

2004-03-03 16:25  sth

	* trunk/src/libopensc/pkcs15-sec.c: Allow file_app in struct
	  sc_pkcs15_card to be NULL (may be the case for pkcs15-emulated
	  cards)

2004-02-16 12:29  aj

	* trunk/src/libopensc/card-etoken.c: remove
	  CARDOS_TYPE_ETOKEN_PRO, the name does not fit. annotate atr with
	  version number 4.0 / 4.01 / 4.01a.

2004-02-15 23:00  aj

	* trunk/src/libopensc/card-etoken.c: added cardos M4.01a atr.
	  thanks to Laurian Gridinoc for reporting.

2004-02-03 14:51  okir

	* trunk/src/libopensc/card-etoken.c: - properly identify Italian
	  eID card

2004-02-03 10:25  okir

	* trunk/src/pkcs15init/profile.c: - Properly handle max-length in
	  PIN statements; added new stored-length: PIN blah { max-length =
	  8; stored-length = 4; } Bug spotted by Victor Tarasov

2004-02-02 10:24  okir

	* trunk/src/pkcs11/framework-pkcs15.c: - Don't crash if
	  card->serial_number is NULL

2004-01-29 09:36  aj

	* trunk/src/libopensc/card-default.c: memset is defined in string.h

2004-01-29 09:21  okir

	* trunk/src/libopensc/card-default.c: - apdu wasn't completely
	  initialized (Renzo Tomaselli)

2004-01-27 09:03  okir

	* trunk/src/tools/pkcs15-tool.c: - Allocate the right amount of
	  memory when base64 encoding for PEM

2004-01-24 20:55  sth

	* trunk/src/tools/pkcs15-init.c: Added --cert-label option,
	  usefull to specify the user cert label if you do a
	  --store-private-key

2004-01-23 09:27  okir

	* trunk/etc/opensc.conf.example: - documented max_{send,recv}_size
	  paramaters

2004-01-22 22:04  aj

	* trunk/debian/changelog, trunk/debian/libopensc0.files: new
	  debian packages: added pkcs11-spy, undid library merge.

2004-01-22 12:37  aet

	* trunk/src/scconf/parse.c: - Allow lists to end as ,;

2004-01-22 10:13  aet

	* trunk/src/scconf/Makefile.am, trunk/src/scconf/README.scconf: -
	  Added a short introduction to scconf as an API and a file format
	  (Jamie Honan)

2004-01-20 11:21  okir

	* trunk/src/libopensc/reader-openct.c: - fix crash with pkcs11
	  module and token disconnect

2004-01-19 19:52  aet

	* trunk/src/pkcs15init/Makefile.am, trunk/src/scam/Makefile.am,
	  trunk/src/scconf/Makefile.am, trunk/src/scldap/Makefile.am: -
	  Revert previous patch

2004-01-19 18:54  aj

	* trunk/src/pkcs15init/Makefile.am, trunk/src/scam/Makefile.am,
	  trunk/src/scconf/Makefile.am, trunk/src/scldap/Makefile.am: make
	  these libraries not standalone (pkcs15init, scam, scconf,
	  scldap).

2004-01-19 18:53  aj

	* trunk/debian/changelog, trunk/debian/libopensc-dev.files,
	  trunk/debian/libopensc0.files: several debian fixes, new version.

2004-01-14 10:43  aj

	* trunk/debian/files, trunk/debian/postinst, trunk/debian/postrm,
	  trunk/debian/preinst, trunk/debian/prerm: From: Ludovic Rousseau
	  <ludovic.rousseau@free.fr> > You still have some unecessary
	  files in CVS debian/ ... thanks for the hint.

2004-01-10 23:13  aet

	* trunk/configure.in: - Fixed a typo in the previous commit

2004-01-10 20:24  aet

	* trunk/src/scam/Makefile.am: - Add versioning

2004-01-10 19:49  aet

	* trunk/configure.in: - Move the variable substitution of
	  exec_prefix and sysincludedir to make-level (Lars T. Mikkelsen)

2004-01-08 18:38  aj

	* trunk/debian/libopensc0.postinst,
	  trunk/debian/libopensc0.postinst.debhelper,
	  trunk/debian/libopensc0.postrm,
	  trunk/debian/libopensc0.postrm.debhelper: Unneeded files,
	  debhelper does everything we need automaticaly.

2004-01-08 15:23  aet

	* trunk/src/libopensc/card-jcop.c,
	  trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-jcop.c: - Warning fixes

2004-01-08 14:16  sth

	* trunk/src/pkcs11/framework-pkcs15.c: Fix: no keycaching if
	  USE_PKCS15_INIT is not #defined

2004-01-08 14:08  aj

	* trunk/debian/changelog, trunk/debian/libopensc0.conffiles,
	  trunk/debian/libopensc0.files: I had removed the wrong file
	  while cleaning up. fixed

2004-01-08 14:05  aet

	* trunk/src/pkcs11/sc-pkcs11.h: - Unify with pkcs11.h

2004-01-08 13:21  aet

	* trunk/debian/rules: - There is no --with-pcsc, replace it with
	  --with-pcsclite which supposedly works the same way as no
	  argument at all. :)

2004-01-08 13:04  aet

	* trunk/etc/opensc.conf.example: - Revert previous patch. Instead
	  of providing a configuration file with all lines commented away,
	  provide a sane configuration that works for most people
	  out-of-the-box without user interaction.

2004-01-08 13:01  aet

	* trunk/etc/scldap.conf.example: - Revert previous patch

2004-01-08 11:59  aj

	* trunk/debian/README.Debian, trunk/debian/TODO.Debian,
	  trunk/debian/changelog, trunk/debian/compat,
	  trunk/debian/control, trunk/debian/copyright,
	  trunk/debian/files, trunk/debian/libopensc-dev.files,
	  trunk/debian/libopensc-dev.manpages,
	  trunk/debian/libopensc0.conffiles, trunk/debian/libopensc0.dirs,
	  trunk/debian/libopensc0.docs, trunk/debian/libopensc0.files,
	  trunk/debian/libopensc0.postinst,
	  trunk/debian/libopensc0.postinst.debhelper,
	  trunk/debian/libopensc0.postrm,
	  trunk/debian/libopensc0.postrm.debhelper,
	  trunk/debian/libopensc0.substvars,
	  trunk/debian/libpam-opensc.dirs,
	  trunk/debian/libpam-opensc.files,
	  trunk/debian/libpam-opensc.substvars, trunk/debian/opensc.dirs,
	  trunk/debian/opensc.docs, trunk/debian/opensc.files,
	  trunk/debian/opensc.manpages, trunk/debian/opensc.substvars,
	  trunk/debian/rules: big rewrite on debian/ files, originaly
	  based on Joe Phillips debianisation, reworked by Andreas
	  Jellinghaus, and with many changes and suggestions by Ludovic
	  Rousseau

2004-01-08 11:57  aj

	* trunk/docs/opensc.html: changes caused by new docbook stylesheet.

2004-01-08 11:56  aj

	* trunk/etc/opensc.conf.example, trunk/etc/scldap.conf.example:
	  commented out everything. now you can install those files to
	  your etc, it will not hurt you.

2004-01-08 11:54  aj

	* trunk/src/pkcs11/pkcs11.h: config.h is not used in pkcs11.h or
	  any file included by it. but pkcs11.h is a public header file,
	  so it shouldn't do so anyway.

2004-01-08 11:53  aj

	* trunk/src/scconf/Makefile.am: cleanup a generated file.

2004-01-08 10:50  okir

	* trunk/src/tests/regression/functions: - fixed placement of
	  "function atexit" wrt shell exit trap handler
	* trunk/src/tests/regression/init0012: - fixed test case

2004-01-08 09:47  sth

	* trunk/src/pkcs11/framework-pkcs15.c: If the maximum allowed
	  number of virtual slots per card is reached, then silently
	  discard all objects that haven't been added yet instead of
	  returning an error

2004-01-08 08:32  sth

	* trunk/src/pkcs11/framework-pkcs15.c: Update to the new keycache
	  functions for caching the user and SO PINs

2004-01-07 10:11  okir

	* trunk/src/libopensc/card-gpk.c: - fixed GPK16K key gen, as
	  suggested by Chaskiel

2004-01-07 10:10  okir

	* trunk/src/pkcs15init/pkcs15-lib.c: - When zapping the contents
	  of a DF, write the whole file (data + padding) in one go.
	  Otherwise the GPK driver may barf if the file offset in
	  sc_update_binary isn't word aligned.

2004-01-07 09:51  sth

	* trunk/src/libopensc/pkcs15.h: Increased the maximum number of
	  PINs and removed some unused #defines

2004-01-07 09:49  sth

	* trunk/src/sslengines/engine_pkcs11.c: Fixed some comments and
	  added an NULL pointer test

2004-01-07 09:32  okir

	* trunk/src/tools/pkcs11-tool.c: - improved C_Decrypt testing

2004-01-06 14:30  okir

	* trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/profile.c, trunk/src/pkcs15init/profile.h:
	  - Implemented keep-public-key and sc_pkcs15init_remove_object as
	  suggested by Victor Tarasov.

2004-01-06 13:40  okir

	* trunk/src/libopensc/pkcs15.c: - in sc_pkcs15_read_file, properly
	  destroy objects in case of error (Victor Tarasov)

2004-01-06 13:33  okir

	* trunk/src/libopensc/card.c, trunk/src/libopensc/opensc.h: -
	  implement sc_delete_record (Victor Tarasov)

2004-01-05 18:44  aet

	* trunk/src/pam/pam_opensc.c, trunk/src/pam/pam_support.c,
	  trunk/src/pam/pam_support.h: - pam_opensc rewrite checkpoint
	  commit - rename some functions

2004-01-05 08:56  okir

	* trunk/src/tools/pkcs15-init.c: - properly handle pubkey_label in
	  key generation

2003-12-30 08:20  okir

	* trunk/src/pkcs11/framework-pkcs15.c: - Another fix from Remo wrt
	  keygen_args.pubkey_label

2003-12-30 08:00  okir

	* trunk/src/pkcs11/pkcs11-session.c: - C_CloseAllSessions would
	  block on some Win32 versions because it tried to acquire the
	  global pkcs11 mutex twice.

2003-12-29 23:21  okir

	* trunk/src/libopensc/card-jcop.c: - small jcop driver fix from
	  Chaskiel

2003-12-29 20:50  sth

	* trunk/src/libopensc/Makefile.mak,
	  trunk/src/pkcs15init/Makefile.mak: Add the JCOP card code

2003-12-29 16:54  aet

	* trunk/src/pkcs11/rsaref/Makefile.am: - Install unix.h and
	  win32.h as well

2003-12-29 13:15  okir

	* trunk/src/tools/pkcs11-tool.c: - signature tests would fail on
	  cards with several keys of different size (fix by Chaskiel)

2003-12-29 13:06  okir

	* trunk/src/tools/cardos-info.c,
	  trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/pkcs15-crypt.c,
	  trunk/src/tools/pkcs15-init.c, trunk/src/tools/pkcs15-tool.c,
	  trunk/src/tools/util.c: - util.c:connect_card() now locks the
	  card; removed sc_lock calls from calling applications (based on
	  a bug report by Chaskiel)

2003-12-29 13:03  okir

	* trunk/src/tools/pkcs11-tool.c: - When testing signatures, don't
	  bail out of C_SignInit returns CKR_MECHANISM_INVALID (Chaskiel
	  Grundman)

2003-12-29 12:42  okir

	* trunk/docs/cardos-info.1, trunk/docs/pkcs11-tool.1: - minor
	  fixes to the new manpages

2003-12-29 12:28  okir

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/card-jcop.c, trunk/src/libopensc/cardctl.h,
	  trunk/src/libopensc/ctx.c, trunk/src/libopensc/opensc.h,
	  trunk/src/pkcs15init/Makefile.am,
	  trunk/src/pkcs15init/jcop.profile,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-jcop.c,
	  trunk/src/pkcs15init/pkcs15-lib.c: - Added support for
	  JCOP/BlueZ cards, contributed by Chaskiel M Grundman

2003-12-29 12:01  aj

	* trunk/docs/Makefile.am, trunk/docs/cardos-info.1,
	  trunk/docs/pkcs11-tool.1, trunk/src/tools/pkcs11-tool.c: new
	  manpages for cardos-info and pkcs11-tool, both written my Joe
	  Phillips.

2003-12-29 11:52  okir

	* trunk/src/pkcs15init/pkcs15-lib.c: - Minor bug fix in new_pin(),
	  patch by Victor Tarasov

2003-12-23 16:31  sth

	* trunk/src/tools/pkcs11-tool.c: Made a seperate function for the
	  login functionality, and split test_kpgen_certwrite() into 2
	  parts, with a logout - unload lib - load lib - login between them

2003-12-23 10:48  sth

	* trunk/src/libopensc/padding.c: Fix: no copying done from in to
	  out in case of SC_ALGORITHM_RSA_PAD_NONE padding (by Chaskiel)

2003-12-22 22:07  aet

	* trunk/src/pam/Makefile.am: - Linking changes, don't link libpam
	  to pam_opensc etc.

2003-12-20 14:41  aet

	* trunk/src/pkcs15init/pkcs15-cflex.c: - Warning fix

2003-12-19 09:56  okir

	* trunk/src/libopensc/card-etoken.c: - in pin_cmd, don't overwrite
	  max_length if set by caller

2003-12-19 09:29  okir

	* trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c: - created new function
	  profile->ops->init_card for card-specific initialization at the
	  pkcs15 creation stage - Added cryptoflex init_card from Stef.
	  This function reads the card's serial number from 3F000002 and
	  puts it into the pkcs15 serial number

2003-12-19 06:52  sth

	* trunk/src/include/winconfig.h: sleep(sec) = Sleep(1000 * ms) on
	  Windows

2003-12-18 21:37  aet

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/card-flex.c,
	  trunk/src/libopensc/card-openpgp.c,
	  trunk/src/libopensc/pkcs15-openpgp.c,
	  trunk/src/libopensc/pkcs15-sec.c, trunk/src/openscd/commands.c,
	  trunk/src/openscd/mkdtemp.c, trunk/src/openscd/openscd.c,
	  trunk/src/openscd/openscd.h, trunk/src/pkcs15init/keycache.c,
	  trunk/src/pkcs15init/keycache.h,
	  trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c, trunk/src/scconf/sclex.c,
	  trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/pkcs15-tool.c: - Minor build and C++ warning
	  fixes - pkcs15init: Use u8 for pin variable declarations like
	  libopensc does

2003-12-18 21:30  aet

	* trunk/src/pkcs15init/TODO: - Obsolete

2003-12-18 19:13  aet

	* trunk/src/libopensc/ctx.c: - Revert parts of the previous patch,
	  use void *func instead of struct sc_reader_driver *(*func(void);
	  as _sc_driver_entry is used for both, reader and card driver
	  lists.

2003-12-18 16:35  okir

	* trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/card-miocos.c,
	  trunk/src/libopensc/card-starcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/ctx.c, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/libopensc/reader-openct.c,
	  trunk/src/libopensc/reader-pcsc.c: - made apdu_masquerade
	  functionality available to all readers, not just pcsc - added
	  new parameters max_send_size and max_recv_size, roughly
	  corresponding to the old max_le (SC_APDU_CHOP_SIZE) parameter.
	  You can now set this chop limit per driver class (pcsc, openct,
	  ctapi), which sets driver->max_{send,recv}_size. This value is
	  copied to card->max_{send,recv}_size in sc_connect_card, and can
	  be overridden by the card driver.

2003-12-18 08:00  okir

	* trunk/src/pkcs15init/pkcs15-lib.c: - do not access file
	  afterdeleting it (S Bakkal)

2003-12-17 12:15  aet

	* trunk/src/pkcs15init/pkcs15-gpk.c: - Add HAVE_UNISTD_H

2003-12-17 07:35  okir

	* trunk/src/pkcs15init/pkcs15-gpk.c: - properly set key usage

2003-12-16 14:41  okir

	* trunk/src/tools/pkcs15-init.c: - Display better pin prompts

2003-12-16 14:32  okir

	* trunk/src/libopensc/card-gpk.c, trunk/src/libopensc/cardctl.h,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-lib.c: - added GPK on-board keygen
	  (based on code by Chaskiel)

2003-12-16 14:31  okir

	* trunk/src/libopensc/card.c: - reduced sc_lock/unlock debug
	  messages even more

2003-12-16 11:07  okir

	* trunk/src/libopensc/card-etoken.c: - added ATR for Italian eID
	  card

2003-12-16 11:04  okir

	* trunk/src/libopensc/asn1.c: - Updated previous patch

2003-12-16 08:01  sth

	* trunk/src/libopensc/asn1.c: Prevent running off the end of the
	  buffer if the asn.1 is invalid (Chaskiel G.)

2003-12-15 11:28  aet

	* trunk/src/signer/opensc-crypto.c: - Ach, forget the previous
	  commit. Just use DBG(printf()); for debugging purposes

2003-12-15 10:51  aet

	* trunk/src/signer/opensc-crypto.c: - error/debug ->
	  sc_error/sc_debug

2003-12-12 09:32  aet

	* trunk/src/pkcs11/Makefile.am, trunk/src/sslengines/Makefile.am:
	  - Minor bundle handling fixes

2003-12-10 15:13  aet

	* trunk/ANNOUNCE: - Another typo fix

2003-12-10 14:52  aet

	* trunk/ANNOUNCE, trunk/configure.in, trunk/debian/rules,
	  trunk/docs/opensc.7, trunk/docs/opensc.html,
	  trunk/docs/opensc.xml, trunk/docs/sc_detect_card_presence.3,
	  trunk/docs/sc_lock.3, trunk/src/libopensc/card-flex.c,
	  trunk/src/libopensc/reader-openct.c,
	  trunk/src/libopensc/reader-pcsc.c,
	  trunk/src/pkcs11/framework-pkcs15.c: - Minor naming convention
	  harmonisation for pc/sc and ct-api related things

2003-12-09 19:37  aet

	* trunk/aclocal/acx_pthread.m4: - Probe for -lpthread before
	  -pthread, as we did in the previous version.

2003-12-09 19:35  aet

	* trunk/src/pam/pam_support.c: - Fix for the previous commit

2003-12-09 15:41  okir

	* trunk/src/tools/pkcs15-crypt.c: - removed some dead debugging
	  code

2003-12-09 13:57  okir

	* trunk/src/libopensc/card-flex.c,
	  trunk/src/pkcs15init/cyberflex.profile,
	  trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-lib.c: - More cyberflex fixes from
	  Martin Buechler

2003-12-09 12:01  okir

	* trunk/src/pkcs15init/pkcs15-lib.c: - turned key-domain printf
	  into sc_debug call

2003-12-08 12:02  okir

	* trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/tools/pkcs15-init.c: - When generating a key in
	  pkcs15init, allow the caller to specify a public key label (Remo
	  Inverardi)

2003-12-08 11:43  okir

	* trunk/src/pkcs15init/Makefile.am,
	  trunk/src/pkcs15init/cyberflex.profile,
	  trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c: - Added support for Cyberflex
	  Access 16K, based on a patch by Martin Buechler

2003-12-08 10:54  okir

	* trunk/src/libopensc/card-default.c,
	  trunk/src/libopensc/card-flex.c, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/opensc.h: - Matched Cyberflex patch from
	  Martin Buechler. Created a new driver named cyberflex which
	  shares a lot of code with the original flex driver. This is a
	  lot cleaner than having to create if/else monsters.

2003-12-08 10:52  okir

	* trunk/src/pkcs15init/pkcs15-lib.c: - use full
	  OPENSC_INFO_FILEPATH when reading info file

2003-12-04 16:43  sth

	* trunk/src/tools/pkcs11-tool.c: Added a check for NSS-like
	  keypair generation

2003-12-04 16:42  sth

	* trunk/src/pkcs11/framework-pkcs15.c: Fix: allow a
	  C_GetAttributeValue(privkey, CKA_MODULUS) after a
	  C_GenerateKeyPair() -- M. Buechler

2003-12-04 15:07  sth

	* trunk/src/pkcs11/pkcs11-spy.c: Little fix: forgotten to log an
	  input param

2003-12-03 14:09  aet

	* trunk/src/libopensc/ctx.c, trunk/src/pkcs15init/profile.c,
	  trunk/src/scconf/parse.c, trunk/src/scconf/scconf.h,
	  trunk/src/scconf/test-conf.c, trunk/src/scldap/scldap.c: - Avoid
	  breaking source compatibility, add char *errmsg to scconf_context

2003-12-03 12:07  okir

	* trunk/src/libopensc/ctx.c, trunk/src/pkcs15init/profile.c,
	  trunk/src/scconf/parse.c, trunk/src/scconf/scconf.h,
	  trunk/src/scconf/test-conf.c, trunk/src/scldap/scldap.c: -
	  scconf_parse and scconf_parse_string now return an error message
	  if something went wrong

2003-12-03 12:02  aet

	* trunk/src/scconf/sclex.c: - Fixed a return value for new
	  scconf_lex_parse

2003-12-03 11:11  okir

	* trunk/src/libopensc/card-gpk.c: - Fix the "get_info failed"
	  error; based on a patch by Ludovic Rousseau.

2003-12-03 10:56  aet

	* trunk/configure.in: - Add AM_MAINTAINER_MODE

2003-12-03 09:09  okir

	* trunk/etc/opensc.conf.example: - Updated comments to reflect new
	  apdu_masquerade parameter

2003-12-02 19:03  aet

	* trunk/configure.in: - Add check for functions vsyslog, setlocale
	  - Add check for header locale.h

2003-12-02 17:51  aet

	* trunk/src/libopensc/pkcs15-syn.c: - Fixed a typo

2003-12-02 15:58  okir

	* trunk/docs/pkcs15-init.1: - Fixed a few glaring errors.
	  Marginally better, but not really great yet.

2003-12-02 15:51  sth

	* trunk/src/pkcs15init/pkcs15-lib.c: Moved the cardinfo file to
	  the pkcs15 DF, changed it's FID to 4946, and protected it
	  against unauthorized changes

2003-11-30 17:19  aet

	* trunk/ChangeLog: - Fixed an embarrassing typo from the ChangeLog
	  URL

2003-11-26 16:19  okir

	* trunk/src/tests/regression/init0012: - fixed test for onepin
	  option

2003-11-26 15:49  okir

	* trunk/src/tools/opensc-explorer.c: - another fix to verify pin

2003-11-26 15:37  okir

	* trunk/src/libopensc/pkcs15-pubkey.c: - fixed problem with pubkey
	  encoding/decoding

2003-11-26 15:35  okir

	* trunk/src/libopensc/asn1.c: - improved support for CHOICE

2003-11-26 13:12  okir

	* trunk/src/pkcs11/framework-pkcs15.c: - Support raw RSA on
	  decryption (Martin Buechler)

2003-11-26 11:56  aet

	* trunk/docs/pkcs15-init.1, trunk/docs/pkcs15-profile.5.in,
	  trunk/docs/pkcs15.7: - Add missing .SH NAME for some man pages
	  (Ludovic Rousseau)

2003-11-25 11:17  aet

	* trunk/configure.in, trunk/docs, trunk/docs/.cvsignore,
	  trunk/docs/Makefile.am, trunk/docs/opensc.html,
	  trunk/docs/opensc.xml, trunk/docs/usbtoken.html,
	  trunk/docs/usbtoken.xml, trunk/src/Makefile.am,
	  trunk/src/libopensc/Makefile.am, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/reader-usbtoken.c, trunk/src/usbtoken: -
	  Remove all references to usbtoken, use OpenCT instead

2003-11-25 10:37  okir

	* trunk/src/pkcs15init/pkcs15-lib.c: - fixed suppress_error
	  handling in sc_pkcs15init_write_info

2003-11-24 10:21  okir

	* trunk/src/pkcs15init/pkcs15-lib.c: - set ACLs on the profile
	  info file

2003-11-23 16:11  sth

	* trunk/src/libopensc/pkcs15-sec.c,
	  trunk/src/pkcs11/framework-pkcs15.c, trunk/src/pkcs11/openssl.c:
	  Removed the exceptional (and incorrect) handling of the
	  signature inputs of 16 and 20 bytes with pkcs11's CKM_RSA_PKCS11
	  signaturemechanism; and made sc_pkcs15_compute_signature() a bit
	  more powerfull: if a digestinfo+hash input is given but the card
	  only accepts hashes, the digestinfo is removed

2003-11-23 15:43  sth

	* trunk/src/tools/pkcs11-tool.c: Little fix in test_signature()

2003-11-23 15:33  sth

	* trunk/src/libopensc/errors.c, trunk/src/libopensc/errors.h,
	  trunk/src/pkcs11/misc.c: Added an error code

2003-11-22 18:50  aet

	* trunk/src/scconf/sclex.c: - Back out Olaf's change, as it seems
	  to break existing behaviour while parsing pkcs15 profile files.
	  Although officially any list value with an equal sign or braces
	  should be enclosured with quotation marks, but anyway.

2003-11-21 12:33  aet

	* trunk/src/scconf/Makefile.am, trunk/src/scconf/Makefile.mak: -
	  Replace the default lex based parser with Jamie's version.
	  Please notify if you run into any problems with the new parser.

2003-11-20 20:46  aet

	* trunk/src/libopensc/reader-pcsc.c: - Warning fix

2003-11-20 20:37  aet

	* trunk/aclocal/acx_pthread.m4: - Replace the patched file with a
	  new upstream version

2003-11-20 17:48  aet

	* trunk/src/scconf/sclex.c: - Fixed CRLF parsing

2003-11-20 16:10  okir

	* trunk/src/scconf/sclex.c: - allow stuff such as blabla=
	  foofaah{} to work

2003-11-20 16:01  okir

	* trunk/src/tools/opensc-explorer.c: - opensc-explorer.c ceased to
	  accept verify data in hex notation, fix by Martin Buechler

2003-11-20 15:42  okir

	* trunk/src/tools/pkcs15-tool.c: - Deal with cards that require
	  authentication before you can extract the public key

2003-11-20 15:41  okir

	* trunk/src/libopensc/card-openpgp.c,
	  trunk/src/libopensc/pkcs15-openpgp.c: - Improved OpenPGP
	  handling; we're now able to sign things

2003-11-20 15:40  okir

	* trunk/src/libopensc/ui.c: - Append newline to error/debug
	  messages if not supplied by caller
	* trunk/src/libopensc/sc.c: - in sc_format_path, initialize
	  path->count = -1

2003-11-20 15:39  okir

	* trunk/src/libopensc/opensc.h: - increase SC_MAX_PIN_SIZE to 256
	  (OpenPGP cards have 254 max)
	* trunk/src/libopensc/log.c: - if ctx->suppress_errors is
	  non-zero, log suppressed error messages at least to the debug log

2003-11-20 15:38  okir

	* trunk/src/libopensc/iso7816.c: - SW 6A88 (referenced data not
	  found) is now translated to SC_ERROR_DATA_OBJECT_NOT_FOUND

2003-11-20 14:16  okir

	* trunk/src/pkcs11/Makefile.am: - Link the spy against libopensc
	  (Patch by Mathias Brossard)

2003-11-20 14:15  aet

	* trunk/src/scconf/internal.h, trunk/src/scconf/parse.c,
	  trunk/src/scconf/sclex.c: - Add new hand written replacement for
	  the lex parser by Jamie Honan, not much tested yet.

2003-11-20 14:13  aet

	* trunk/src/scconf/scconf.c, trunk/src/scconf/scconf.h: - Add
	  scconf_list_toarray() by Jamie Honan

2003-11-20 09:17  sth

	* trunk/src/pkcs11/pkcs11-object.c: Support comparison of large
	  object attributes

2003-11-19 20:37  okir

	* trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15.profile,
	  trunk/src/pkcs15init/profile.c, trunk/src/pkcs15init/profile.h:
	  - Support direct encoding of certificates - Allow more than one
	  profile option (e.g. pkcs15+small+direct-cert) - While creating
	  the basic pcks15 structure, store profile options in a special
	  file on the card (3F002F01). All susequent operations (adding
	  PINs etc) will use this information instead of what's given on
	  the command line.

2003-11-19 20:33  okir

	* trunk/src/tests/print.c: - sc_pkcs15_print_id now prints to a
	  buffer instead of stdout - Now pretty printing Common Object
	  Flags

2003-11-19 20:31  okir

	* trunk/src/libopensc/pkcs15.h: - Support direct encoding of certs
	  in the CDF - Added prototypes for sc_der_{copy,clear} - Changed
	  sc_pkcs15_print_id to return const char *

2003-11-19 20:30  okir

	* trunk/src/libopensc/pkcs15.c: - Somewhat improved debugging
	  output - sc_pkcs15_print_id changed to sprintf to a buffer
	  rather than printing to stdout.

2003-11-19 20:29  okir

	* trunk/src/libopensc/pkcs15-prkey.c: - The changed code in asn1.c
	  requires that the PrKDF subClassAttributes for
	  private{RSA,DSA}Key be marked OPTIONAL (our handling of CHOICE
	  is still somewhat limited)

2003-11-19 20:28  okir

	* trunk/src/libopensc/pkcs15-cert.c: - Read and write CDF entries
	  with directly encoded certificates

2003-11-19 20:22  okir

	* trunk/src/libopensc/asn1.c: - When encoding a path, either
	  encode _neither_ index/count, or both. - Added new functions
	  sc_der_copy, sc_der_clear to handle DER blobs - Somewhat
	  improved debug output

2003-11-17 18:54  aet

	* trunk/src/libopensc/ui.h: - snapshot build fix

2003-11-17 14:52  aj

	* trunk/docs/opensc.xml: fixed "version>" to "version&lt;" in xml
	  file (html file was already fixed by tidy, no change necessary).

2003-11-17 14:49  aj

	* trunk/docs/opensc.html, trunk/docs/opensc.xml: Applied changes
	  by Stef, updated html file.

2003-11-16 16:24  aet

	* trunk/src/libopensc/ui.c: - Test commit

2003-11-14 10:14  sth

	* trunk/src/libopensc/reader-pcsc.c: Add room for SW1-SW2 in case
	  of maximum reply size (256 bytes)

2003-11-12 19:06  sth

	* trunk/src/pkcs11/framework-pkcs15.c: Fix: correctly set the
	  labels of the public and private key during keypairgeneration
	  (Remo Inverardi)

2003-11-12 18:28  sth

	* trunk/src/pkcs11/misc.c: Fix: allow keypair generation of keys
	  other then the default length (Victor Tarasov)

2003-11-11 21:30  aet

	* trunk/src/scdl/scdl.c: - ifdef RTLD_NOW

2003-11-07 11:15  okir

	* trunk/src/tests/pintest.c: - do not test unblocking pins

2003-11-06 10:43  okir

	* trunk/src/pam/pam_opensc.c, trunk/src/pam/pam_support.c: -
	  security: prevent format string attacks

2003-11-03 10:20  okir

	* trunk/src/libopensc/reader-pcsc.c: - remain backward compatible
	  - apdu_masq patch shouldn't break existing config files that use
	  apdu_fix

2003-11-03 10:16  okir

	* trunk/src/libopensc/reader-pcsc.c: - merged apdu_masq patch from
	  Chaskiel Grundman

2003-11-03 06:54  okir

	* trunk/src/tools/opensc-explorer.c: - prevent problem with
	  get/get_do ambiguity

2003-11-01 19:13  sth

	* trunk/src/pkcs11/framework-pkcs15.c: Fix: link the simbolic PIN
	  to the real name

2003-10-31 17:18  okir

	* trunk/src/tools/opensc-explorer.c: - Undid some of the previous
	  changes. We now have a pseudo file system on the openpgp card

2003-10-31 16:06  okir

	* trunk/src/pkcs15init/keycache.c: - fixed put_key(SC_AC_SYMBOLIC)

2003-10-31 16:02  okir

	* trunk/src/tests/print.c: - dont print prkey path if empty
	* trunk/src/tests/p15dump.c: - use sc_test_print_card instead of
	  sc_pkcs15_print_card

2003-10-31 16:01  okir

	* trunk/src/libopensc/pkcs15-openpgp.c: - Updated, now registers
	  key objects as well (untested)
	* trunk/src/libopensc/card-openpgp.c: - OpenPGP card now supports
	  a fake file hierarchy (basically all objects and constructed
	  objects reprented as DFs and EFs)

2003-10-31 13:59  aet

	* trunk/src/libopensc/Makefile.mak: - Add new files

2003-10-31 12:31  okir

	* trunk/src/libopensc/pkcs15-pin.c: - initialize tries_left field
	  to -1 when parsing AODF

2003-10-31 12:29  okir

	* trunk/src/tests/print.c: - Moved p15 print_card function here -
	  print preferred_language, if given - don't print pin path if
	  there is none - print tries_left if present

2003-10-31 12:28  okir

	* trunk/src/tests/sc-test.h: - moved p15 print_card to
	  tests/print.c

2003-10-31 12:27  okir

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/pkcs15-openpgp.c,
	  trunk/src/libopensc/pkcs15-syn.c: - Rewrote
	  sc_pkcs15_bind_synthetic a little - Started work on pkcs15
	  emulation for OpenPGP card

2003-10-31 12:26  okir

	* trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h: -
	  Moved sc_pkcs15_bind_synthetic to a separate file - Moved
	  sc_pkcs15_print_card to ../tests/print.c - added dll_handle and
	  preferred_language fields to p15card

2003-10-31 07:48  sth

	* trunk/src/pkcs15init/pkcs15.profile: Make the PIN for the
	  'onepin' option look like a user PIN instead of an SO PIN

2003-10-30 17:04  okir

	* trunk/src/tools/opensc-explorer.c: - added some support for
	  OpenPGP cards
	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/card-openpgp.c, trunk/src/libopensc/ctx.c: -
	  added initial support for openpgp card driver
	* trunk/src/libopensc/opensc.h: - added sc_get_data/sc_put_data -
	  added openpgp card driver

2003-10-30 17:03  okir

	* trunk/src/libopensc/card.c: - added sc_get_data/sc_put_data
	* trunk/src/libopensc/errors.c, trunk/src/libopensc/errors.h: -
	  added SC_ERROR_DATA_OBJECT_NOT_FOUND

2003-10-30 15:43  okir

	* trunk/src/libopensc/card-mcrd.c: - small fix in mcrd_finish

2003-10-30 12:03  okir

	* trunk/src/pkcs15init/pkcs15-cflex.c: - return error if
	  cflex_create_dummy_chvs fails

2003-10-30 11:47  okir

	* trunk/src/pkcs15init/pkcs15-lib.c: - Another broken commit
	  message :-/ What the previous commit was all about: If we store
	  a pkcs12 files on the card, it stores a key @45, and a CA certs
	  @46. When storing another p12 file, we must make sure we don't
	  grab the next free key ID (46), because the corresponding CERT
	  ID is already taken. We must skip all IDs for which a key or
	  cert exists.

2003-10-30 11:43  okir

	* trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h: -
	  Changed the internal object search machinery quite a bit so it
	  can search for more than one type of object at the same time. -
	  When enumerating a DF as part of the search, no longer ignore
	  all errors. - When parsing a DF, SC_ERROR_ASN1_END_OF_CONTENTS
	  really means we've just reached the end of data in the file, so
	  return 0 instead

2003-10-30 11:38  okir

	* trunk/src/libopensc/asn1.c: - When encountering the end of a
	  SEQUENCE, while there should be more items, we used to return
	  SC_ERROR_ASN1_END_OF_CONTENTS. That error code is reserved for
	  the real end of content markers though. Changed the return code
	  to SC_ERROR_ASN1_OBJECT_NOT_FOUND

2003-10-30 11:36  okir

	* trunk/src/tools/pkcs15-init.c: - When storing a p12 bag, check
	  if the CA cert is already present and skip it if so.

2003-10-30 11:13  okir

	* trunk/src/pkcs15init/flex.profile,
	  trunk/src/pkcs15init/pkcs15-lib.c: - added recommendation about
	  2 cert/key pairs

2003-10-28 12:50  okir

	* trunk/src/libopensc/ui.c: - don't call sc_module_get_address
	  when we dont have a dll handle

2003-10-24 13:20  okir

	* trunk/src/tools/pkcs15-init.c: - now uses new sc_ui_get_pin
	  function

2003-10-24 13:18  okir

	* trunk/src/libopensc/ui.c, trunk/src/libopensc/ui.h: - Changed ui
	  API to offer more knobs and dials

2003-10-23 09:12  aet

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak: - Merging between
	  Makefile.am<>Makefile.mak - Add ui.h to main distribution
	  tarball, snapshots have been broken for a few days

2003-10-22 18:16  aet

	* trunk/src/libopensc/ctx.c, trunk/src/libopensc/internal.h,
	  trunk/src/libopensc/log.c, trunk/src/libopensc/ui.c: - Minor
	  cleanups and a warning fix - sc_release_context: free
	  ctx->preferred_language if set

2003-10-22 08:51  aet

	* trunk/src/libopensc/ui.c: - Replace WIN32 with HAVE_UNISTD_H
	  instead

2003-10-22 08:43  sth

	* trunk/src/libopensc/Makefile.mak, trunk/src/libopensc/ui.c: Let
	  the new UI code compile under Windows

2003-10-22 06:56  sth

	* trunk/src/pkcs15init/Makefile.mak: 'Export' keychache.h
	* trunk/src/sslengines/engine_opensc.c,
	  trunk/src/sslengines/engine_pkcs11.c: Fix: spurious error
	  message (Chaskiel & Kevin)

2003-10-22 06:51  okir

	* trunk/src/tests/regression/functions: - allow to call scripts
	  with --soft and -d

2003-10-22 06:49  okir

	* trunk/src/libopensc/card-flex.c, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/log.c, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/ui.c: - added error/debug message support to
	  ui.c - sc_error/sc_debug now use the new ui code - added
	  language support

2003-10-22 05:43  okir

	* trunk/src/pkcs15init/pkcs15-lib.c: - do an sc_select_file inside
	  do_get_pin_and_verify in case we called a pkcs15 function that
	  enumerated the AODF

2003-10-21 13:30  okir

	* trunk/src/tools/pkcs15-init.c: - call sc_pkcs15init_set_p15card

2003-10-21 12:50  aet

	* trunk/src/signer/Makefile.am, trunk/src/sslengines/Makefile.am:
	  - Add necessary automake conditionals to install-exec-local
	  rule, as it seems to be executed even though lib_LTLIBRARIES is
	  empty in some cases.

2003-10-21 12:48  aet

	* trunk/src/include/opensc/Makefile.am: - Sort filenames

2003-10-21 12:27  aet

	* trunk/configure.in: - Add gcc option -fno-strict-aliasing

2003-10-21 11:12  okir

	* trunk/src/libopensc/Makefile.am, trunk/src/libopensc/ui.c,
	  trunk/src/libopensc/ui.h: - Added new user interface code (not
	  used yet)
	* trunk/src/include/opensc/Makefile.am: - install ui.h

2003-10-21 11:11  okir

	* trunk/src/libopensc/errors.c: - added message for
	  SC_ERROR_CANNOT_LOAD_MODULE - changed the wording of some
	  SC_ERROR_KEYPAD_* messages
	* trunk/src/libopensc/errors.h: - added SC_ERROR_CANNOT_LOAD_MODULE

2003-10-21 11:05  okir

	* trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/profile.c, trunk/src/pkcs15init/profile.h:
	  - sc_pkcs15_find_pin_by_reference now searches by reference
	  _and_path_ - profile->p15_card renamed to p15_spec, as it
	  reflects what _should_ be on the card - added profile->p15_data,
	  which is what _is_ on the card - make do_get_pin_and_verify use
	  the sc_pkcs15_find_pin_by_reference properly.

2003-10-21 11:02  okir

	* trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h: -
	  sc_pkcs15_find_pin_by_reference now searches by reference and
	  path

2003-10-21 08:59  okir

	* trunk/src/libopensc/iso7816.c,
	  trunk/src/tools/opensc-explorer.c: - fixed change/unblock pin
	  with implicit test

2003-10-21 08:32  okir

	* trunk/src/pkcs15init/etoken.profile: - disallow UPDATE on the
	  Application DF

2003-10-21 08:31  okir

	* trunk/src/libopensc/card-etoken.c: - support UPDATE ACLs when
	  creating a DF

2003-10-19 18:05  okir

	* trunk/src/libopensc/dir.c, trunk/src/libopensc/opensc.h: - bump
	  max number of apps per card to 8

2003-10-19 18:02  okir

	* trunk/src/libopensc/card-tcos.c: - tcos_card_ctl shoudlnt
	  complain about unknown cardctls

2003-10-18 17:07  okir

	* trunk/src/tools/pkcs11-tool.c: - Do not overflow signature test
	  for 2K bit keys (fix by Chaskiel Grundman)

2003-10-18 17:02  okir

	* trunk/src/pkcs15init/pkcs15-lib.c: - dont pin protect pubkey

2003-10-18 12:51  okir

	* trunk/src/pkcs15init/etoken.profile: - data files had
	  ERASE=NEVER; which is obviously bad

2003-10-18 12:41  okir

	* trunk/src/tools/opensc-explorer.c: - previous patch was
	  bogus/incomplete

2003-10-18 12:40  okir

	* trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/tools/opensc-explorer.c: pkcs11/framework-pkcs15.c

2003-10-18 12:35  okir

	* trunk/src/tools/pkcs11-tool.c: - honor --pin argument for pin
	  pad readers, too

2003-10-18 08:39  okir

	* trunk/src/libopensc/card-flex.c, trunk/src/libopensc/cardctl.h,
	  trunk/src/pkcs15init/pkcs15-cflex.c: - fix cflex key generation

2003-10-18 08:08  okir

	* trunk/src/pkcs15init/pkcs15-cflex.c: - fix for cryptoflex key
	  download

2003-10-17 11:21  okir

	* trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-etoken.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c: - Prepare for userConsent
	  support: changed ops->create_pin to take a sc_pkcs15_object_t
	  instead of sc_pkcs15_pin_info_t argument.

2003-10-16 20:41  aet

	* trunk/macos/libtool-bundle: - Merge with recent OpenCT changes

2003-10-16 14:32  okir

	* trunk/src/pkcs15init/pkcs15-lib.c: - some more cleanup

2003-10-16 14:31  okir

	* trunk/src/pkcs15init/pkcs15-etoken.c: - On-board generation of
	  non-repudiation keys did not work - Minor cleanup

2003-10-16 11:41  okir

	* trunk/debian, trunk/debian/README.Debian,
	  trunk/debian/TODO.Debian, trunk/debian/changelog,
	  trunk/debian/control, trunk/debian/copyright,
	  trunk/debian/libopensc-dev.dirs,
	  trunk/debian/libopensc-dev.doc-base,
	  trunk/debian/libopensc-dev.docs,
	  trunk/debian/libopensc-dev.files,
	  trunk/debian/libopensc0.conffiles, trunk/debian/libopensc0.dirs,
	  trunk/debian/libopensc0.doc-base, trunk/debian/libopensc0.docs,
	  trunk/debian/libopensc0.files, trunk/debian/libpam-opensc.dirs,
	  trunk/debian/libpam-opensc.docs,
	  trunk/debian/libpam-opensc.files, trunk/debian/opensc.dirs,
	  trunk/debian/opensc.docs, trunk/debian/opensc.files,
	  trunk/debian/postinst, trunk/debian/postrm,
	  trunk/debian/preinst, trunk/debian/prerm, trunk/debian/rules,
	  trunk/docs/pkcs15-init.1, trunk/src/pkcs15init/pkcs15-lib.c: -
	  added debian packaging files from Joe Phillips

2003-10-15 13:21  okir

	* trunk/src/pkcs15init/pkcs15-etoken.c: - pin protection for keys
	  was broken

2003-10-15 09:36  okir

	* trunk/src/pkcs15init/pkcs15-lib.c: - one suppress_errors-- too
	  many
	* trunk/src/pkcs15init/pkcs15-etoken.c: - removed debugging print

2003-10-14 22:11  aet

	* trunk/src/pkcs11/framework-pkcs15.c: - Forgot to commit

2003-10-14 21:56  aet

	* trunk/src/include/opensc/Makefile.am,
	  trunk/src/libopensc/internal.h, trunk/src/libopensc/opensc.h,
	  trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/pkcs11-global.c,
	  trunk/src/pkcs15init/keycache.h: - Fixed nightly snapshot
	  generation - Link keycache.h to src/include/opensc - Move mutex
	  function declarations to opensc.h

2003-10-14 11:23  sth

	* trunk/src/tools/opensc-tool.c: Change setlinebuf() to setbuf(),
	  which is also availabel for MSVS

2003-10-14 10:42  aet

	* trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/tools/pkcs15-init.c: - Remove old callback error/debug
	  functions

2003-10-14 10:10  okir

	* trunk/src/tools/opensc-tool.c: - dont barf on empty directories

2003-10-14 09:58  okir

	* trunk/src/pkcs15init/Makefile.am,
	  trunk/src/pkcs15init/flex_onepin.profile,
	  trunk/src/pkcs15init/flex_so.profile,
	  trunk/src/pkcs15init/pkcs15-small.profile: - removed obsolete
	  profiles

2003-10-14 09:57  okir

	* trunk/src/pkcs11/framework-pkcs15init.c,
	  trunk/src/tools/cryptoflex-tool.c,
	  trunk/src/tools/pkcs15-init.c: - Error logging changes: replace
	  ctx->log_errors with ctx->suppress_errors
	* trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-etoken.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-miocos.c,
	  trunk/src/pkcs15init/profile.c, trunk/src/pkcs15init/profile.h:
	  - Error logging changes: replace ctx->log_errors with
	  ctx->suppress_errors - remove error/debug callbacks; always use
	  sc_error/sc_debug

2003-10-14 09:56  okir

	* trunk/src/libopensc/card-gpk.c, trunk/src/libopensc/card-mcrd.c,
	  trunk/src/libopensc/card.c, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/dir.c, trunk/src/libopensc/log.c,
	  trunk/src/libopensc/log.h, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15.c: - Error logging changes: replace
	  ctx->log_errors with ctx->suppress_errors, so that we can nest
	  error suppression using suppress_errors++/suppress_errors--

2003-10-14 09:14  okir

	* trunk/src/tools/opensc-tool.c: - removed unused variable

2003-10-14 09:02  okir

	* trunk/src/libopensc/card-gpk.c: - the previous patch was bad;
	  fixed it

2003-10-14 08:33  okir

	* trunk/src/pkcs11/framework-pkcs15.c: - replace
	  sc_pkcs15init_set_pin_data -> sc_keycache_put_key

2003-10-14 08:17  okir

	* trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-etoken.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-lib.c: - removed some dead code
	  inside #if 0/#endif

2003-10-14 08:10  okir

	* trunk/src/tools/opensc-tool.c: - Don't limit the number of times
	  the --send-apdu option may be given

2003-10-13 20:41  aet

	* trunk/src/pkcs15init/keycache.c,
	  trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-etoken.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-miocos.c: - Some build/portability
	  fixes for the pkcs15init rewrite - Add
	  sc_pkcs15_get_<drv>_ops(), yet untested

2003-10-13 20:28  aet

	* trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-etoken.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-miocos.c: - Revert previous patch,
	  an alternative patch to work around non-C99 and/or gcc issues
	  coming up soon.

2003-10-13 20:16  sth

	* trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-etoken.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-miocos.c: Small changes to make it
	  work on non-C99 compilers

2003-10-13 16:13  okir

	* trunk/src/tests/regression/functions,
	  trunk/src/tests/regression/init0001,
	  trunk/src/tests/regression/init0002,
	  trunk/src/tests/regression/init0005,
	  trunk/src/tests/regression/init0007,
	  trunk/src/tests/regression/init0008,
	  trunk/src/tests/regression/init0012,
	  trunk/src/tests/regression/pin0001,
	  trunk/src/tests/regression/pin0002,
	  trunk/src/tests/regression/run-all: - updated/added tests
	* trunk/src/pkcs15init/Makefile.am,
	  trunk/src/pkcs15init/Makefile.mak,
	  trunk/src/pkcs15init/etoken.profile,
	  trunk/src/pkcs15init/flex.profile,
	  trunk/src/pkcs15init/gpk.profile,
	  trunk/src/pkcs15init/keycache.c,
	  trunk/src/pkcs15init/keycache.h,
	  trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-etoken.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-miocos.c,
	  trunk/src/pkcs15init/pkcs15.profile,
	  trunk/src/pkcs15init/profile.c, trunk/src/pkcs15init/profile.h,
	  trunk/src/tools/pkcs15-init.c: - pkcs15 rewrite

2003-10-13 14:52  okir

	* trunk/src/libopensc/pkcs15.c: - fixed a bug in the previous patch

2003-10-13 14:35  okir

	* trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h: -
	  added sc_pkcs15_find_prkey_by_reference

2003-10-13 14:34  okir

	* trunk/src/libopensc/errors.c, trunk/src/libopensc/errors.h: -
	  added some more errors
	* trunk/src/libopensc/card.c: - slightly enhanced debugging output
	* trunk/src/libopensc/opensc.h, trunk/src/libopensc/sc.c: - new
	  path functions: sc_append_file_id, sc_compare_path

2003-10-12 19:57  okir

	* trunk/src/tools/pkcs15-tool.c: - allow all pins/puks to be
	  specified on the command line for testing

2003-10-12 08:34  aet

	* trunk/src/pkcs15init/pkcs15-cflex.c: - Remove unused variable

2003-10-11 21:02  sth

	* trunk/src/pkcs15init/flex_onepin.profile,
	  trunk/src/pkcs15init/pkcs15-cflex.c: Security fix: the
	  flex_onepin profile doesn't allow the AUT1 key to change the PIN
	  anymore. Also: it's possible now to add the SO pin to the
	  flex_onepin profile

2003-10-11 20:58  aet

	* trunk/src/openscd/commands.c, trunk/src/openscd/openscd.c,
	  trunk/src/signer/Makefile.am: - Add missing error->sc_error
	  conversions and other Assuan specific build fixes

2003-10-11 12:41  okir

	* trunk/src/libopensc/card-flex.c, trunk/src/libopensc/card-gpk.c:
	  - some commands used the wrong APDU case

2003-10-10 14:48  sth

	* trunk/src/tools/pkcs15-crypt.c: Fix: don't free() a static
	  buffer (Ivo)

2003-10-10 14:24  sth

	* trunk/src/pkcs11/Makefile.mak: Fix: added all required OpenSC
	  libs to the link dependencies (Ivo)

2003-10-10 14:11  sth

	* trunk/src/sslengines/Makefile.mak: Fix: added scdl.lib to the
	  link list, and added all required OpenSSL libs to the link
	  dependencies (Ivo)

2003-10-08 06:46  aet

	* trunk/src/libopensc/reader-openct.c: Minor cleanup

2003-10-07 19:15  sth

	* trunk/etc/opensc.conf.example: Fix: wrong option name

2003-10-07 16:05  aet

	* trunk/win32/Make.rules.mak: Remove hardcoded VERSION define,
	  you'll need need to update versions from winconfig.h and also
	  version.rc.

2003-10-06 14:22  sth

	* trunk/src/libopensc/pkcs15-algo.c: Fix: add room for a
	  'last-flag' object (Ivo Pieck)

2003-10-02 12:21  sth

	* trunk/src/pkcs15init/pkcs15-lib.c: Fix: when doing a
	  sc_pkcs15init_generate_key(), the auth_id for the public key
	  wasn't put into the PuKDF

2003-10-02 09:21  sth

	* trunk/src/tools/pkcs15-tool.c: Allow the pkcs15 data to be
	  fetched by label instead of ID, as pkcs15 data objects don't
	  have an ID (Danny De Cock)

2003-10-02 09:18  sth

	* trunk/src/pkcs15init/pkcs15-lib.c: Correctly add the label to a
	  pkcs15 data object

2003-10-02 08:29  aet

	* trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/mechanism.c, trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/tools/pkcs11-tool.c: Tweak out some compiler warnings

2003-10-01 06:51  sth

	* trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/mechanism.c, trunk/src/pkcs11/pkcs11-object.c,
	  trunk/src/pkcs11/sc-pkcs11.h, trunk/src/tools/pkcs11-tool.c:
	  Added C_DecryptInit() and C_Decrypt() for RSA keys

2003-09-30 20:43  sth

	* trunk/src/tools/pkcs15-init.c: Fix: read data as a binary file,
	  not as ASCII

2003-09-30 09:40  aet

	* trunk/win32/Makefile.am: Add Makefile.mak and version.rc to the
	  distribution tarball.

2003-09-30 09:19  sth

	* trunk/src/libopensc/Makefile.mak, trunk/src/tools/Makefile.mak:
	  Fix: don't link by default with openssl

2003-09-30 07:40  aet

	* trunk/NEWS: Add OpenSC 0.8.1 release date.

2003-09-29 14:29  sth

	* trunk/src/pkcs11/Makefile.mak: Some fixes that accidentially
	  crept in

2003-09-29 13:54  sth

	* trunk/src/pkcs11/mechanism.c: Fix: the hash-based RSA algo's can
	  only do sign/verify, no wrap, encrypt, ...)

2003-09-29 13:45  sth

	* trunk/src/tools/pkcs11-tool.c: Fixed a bug in the mechanism
	  listing and made it more general

2003-09-29 09:00  aet

	* trunk/src/pkcs11/pkcs11-spy.c: Cleanups to scconf handling

2003-09-29 08:59  aet

	* trunk/etc/opensc.conf.example: - Fix a typo - Rename init block
	  into spy instead

2003-09-28 19:22  sth

	* trunk/etc/opensc.conf.example, trunk/src/pkcs11/Makefile.am,
	  trunk/src/pkcs11/Makefile.mak, trunk/src/pkcs11/pkcs11-spy.c:
	  Some changes for the spy: (1) renamed opens-spy to pkcs11-spy,
	  (2) exported all pkcs11 functions, (3) start the log with the
	  name of the module-to-be-loaded, (4) first look in the
	  opensc.conf file for the module and log names

2003-09-26 08:15  aet

	* releases/opensc-0.8.1/configure.in,
	  trunk/src/include/winconfig.h: Rename HAVE_PCSCLITE to
	  HAVE_PCSC, which is more correct.
	* trunk/configure.in: Rename HAVE_PCSCLITE to HAVE_PCSC, which is
	  more correct.
	* releases/opensc-0.8.1/src/include/winconfig.h,
	  trunk/src/libopensc/reader-pcsc.c: Rename HAVE_PCSCLITE to
	  HAVE_PCSC, which is more correct.
	* releases/opensc-0.8.1/src/libopensc/reader-pcsc.c,
	  trunk/src/libopensc/ctx.c: Rename HAVE_PCSCLITE to HAVE_PCSC,
	  which is more correct.

2003-09-25 15:52  aet

	* trunk/configure.in: Fix OpenCT probe issues

2003-09-25 09:33  aet

	* trunk/src/libopensc/dir.c, trunk/src/libopensc/pkcs15-sec.c,
	  trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/pkcs11-tool.c: Fix various C compiler warnings
	  and C++ errors / name conflicts

2003-09-24 19:58  aet

	* trunk/macos/libtool-bundle: Oops, remove hardcoded bundle
	  creator / type

2003-09-24 10:17  aet

	* trunk/ChangeLog: Remove old ChangeLog, add URL to the new
	  location.

2003-09-24 09:20  aet

	* trunk/docs/opensc.html, trunk/docs/opensc.xml: TODO update

2003-09-18 09:18  aet

	* trunk/src/openssh/Makefile.am,
	  trunk/src/openssh/openssh-3.6.1p2.README,
	  trunk/src/openssh/openssh-3.6.1p2.diff: Remove old patches for
	  OpenSSH 3.6.1p2, anyone interested is probably already using
	  version 3.7.1p1.

2003-09-17 19:03  aet

	* trunk/configure.in, trunk/src/scam/scam.c: Back out previous
	  change, wrong branch.

2003-09-17 18:59  aet

	* trunk/configure.in: Set version as 0.8.1.
	* trunk/src/scam/scam.c: Disable pkcs15-ldap from the 0.8.1
	  release.

2003-09-17 18:43  aet

	* trunk/ANNOUNCE, trunk/NEWS, trunk/src/include/winconfig.h,
	  trunk/win32/version.rc: Updates for the 0.8.1 release.

2003-09-17 16:20  aet

	* trunk/docs/opensc.html, trunk/docs/opensc.xml: Use &lt;version>
	  instead of hardcoded version number.

2003-09-16 06:36  sth

	* trunk/src/libopensc/dir.c: Bugfix: return SC_ERROR_OUT_OF_MEMORY
	  if malloc() fails (Kevin Stefanik)

2003-09-14 10:27  aet

	* trunk/configure.in, trunk/src/sslengines/Makefile.am: Fix
	  bootstrap issues with Debian/automake-1.4

2003-09-12 10:36  aet

	* trunk/src/pkcs11/pkcs11-global.c: Update PKCS#11 library version
	  to 0.8.

2003-09-12 06:48  aet

	* trunk/configure.in: The previous libsocket/libresolv configure
	  cleanup broke LDAP support for at least Solaris. Therefore
	  assume, that if we have to use libsocket, probe for libresolv as
	  well although OpenSC's internals don't use it.

2003-09-11 12:11  sth

	* trunk/src/pkcs11/framework-pkcs15.c: Fix: C_GenerateKeyPair(),
	  C_CreateObject() returned CKR_USER_NOT_LOGGED_IN if lock_login
	  is set to false in the config file, because then the pkcs15_init
	  functions do a logoff internally

2003-09-11 08:01  sth

	* trunk/src/common/getopt.c, trunk/src/common/getopt1.c: Removed
	  compiler errors under Win32

2003-09-11 06:02  sth

	* trunk/src/include/winconfig.h: First include <stdio.h>,
	  otherwise the #include <windows.h> turns wchar_t into an
	  (unsigned) short (Unicode)

2003-09-10 22:20  aet

	* trunk/src/libopensc/card-etoken.c,
	  trunk/src/libopensc/card-starcos.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/pkcs15-init.c,
	  trunk/src/tools/pkcs15-tool.c: C++ warning fixes

2003-09-10 14:08  sth

	* trunk/Makefile.mak, trunk/src/libopensc/Makefile.mak,
	  trunk/src/pkcs11/Makefile.mak, trunk/src/tests/Makefile.mak,
	  trunk/src/tools/Makefile.mak, trunk/win32/Makefile.mak,
	  trunk/win32/version.rc: Added version info to the Win32
	  binaries, and set the version number to 0.8.0.0 (4 numbers seems
	  to be needed)

2003-09-10 10:42  aet

	* trunk/src/scam/cert_support.c: Build fix for MacOS X.

2003-09-10 10:41  aet

	* trunk/src/pkcs11/pkcs11.h: Remove extra semicolons

2003-09-10 10:03  aet

	* trunk/configure.in: Accidently changed the version number, fixed.

2003-09-10 10:02  aet

	* trunk/configure.in: Replace overly complex and old configure
	  magic for connect() and friends, just check for socket() in
	  libsocket.

2003-09-09 15:02  aet

	* trunk/src/scam/Makefile.am, trunk/src/scam/cert_support.c,
	  trunk/src/scam/cert_support.h: Add cert_support.c for
	  pkcs15-ldap support, old legacy code that needs to be removed at
	  some point. Implemented against OpenSSL 0.9.6, not much tested
	  against 0.9.7.

2003-09-09 15:00  aet

	* trunk/src/scam/p15_ldap.c: Add very preliminary and quick port
	  of an old scam code that implements ldap-authentication support,
	  needs to be rewritten for more specific OpenSC usage some other
	  day. Work in progress, only tested with FINEID cards.

2003-09-09 14:47  aet

	* trunk/src/scam/scam.c: Remove old cruft, enable p15-ldap support
	  (PAM option auth_method=pkcs15-ldap)

2003-09-08 13:38  sth

	* trunk/src/libopensc/log.c: Increase log buffer size, so that 255
	  hex bytes still can be logged

2003-09-06 19:18  aet

	* trunk/src/pkcs15init/pkcs15-lib.c: Warning fix

2003-09-06 18:30  aet

	* trunk/NEWS: Preliminary update for the upcoming release

2003-09-06 17:56  aet

	* trunk/src/sslengines/engine_opensc.c,
	  trunk/src/sslengines/engine_opensc.h,
	  trunk/src/sslengines/engine_pkcs11.c,
	  trunk/src/sslengines/engine_pkcs11.h,
	  trunk/src/sslengines/hw_opensc.c,
	  trunk/src/sslengines/hw_pkcs11.c,
	  trunk/src/sslengines/p11_attr.c,
	  trunk/src/sslengines/p11_cert.c, trunk/src/sslengines/p11_err.c,
	  trunk/src/sslengines/p11_key.c, trunk/src/sslengines/p11_load.c,
	  trunk/src/sslengines/p11_misc.c, trunk/src/sslengines/p11_rsa.c,
	  trunk/src/sslengines/p11_slot.c,
	  trunk/src/sslengines/pkcs11-internal.h: Indent sources

2003-09-06 17:29  aet

	* trunk/src/sslengines/engine_opensc.c,
	  trunk/src/sslengines/engine_opensc.h,
	  trunk/src/sslengines/engine_pkcs11.c,
	  trunk/src/sslengines/engine_pkcs11.h,
	  trunk/src/sslengines/hw_opensc.c,
	  trunk/src/sslengines/p11_attr.c,
	  trunk/src/sslengines/p11_cert.c, trunk/src/sslengines/p11_key.c,
	  trunk/src/sslengines/p11_load.c,
	  trunk/src/sslengines/p11_misc.c, trunk/src/sslengines/p11_rsa.c,
	  trunk/src/sslengines/p11_slot.c,
	  trunk/src/sslengines/pkcs11-internal.h: Bunch of generic
	  compiler warning and C++ fixes before indenting the sources,
	  apparently OpenSSL engines are not under a heavy development
	  anymore.

2003-09-06 16:18  aet

	* trunk/src/pkcs11/libpkcs11.c, trunk/src/pkcs11/pkcs11-spy.c,
	  trunk/src/pkcs11/pkcs11.h, trunk/src/scdl/scdl.c,
	  trunk/src/scdl/scdl.h, trunk/src/sslengines/p11_load.c,
	  trunk/src/tools/pkcs11-tool.c: Don't bother exposing
	  sc_pkcs11_module_t and scdl_context_t to public headers, use
	  void instead.

2003-09-06 13:36  sth

	* trunk/src/pkcs11/pkcs11-display.c: Fix: don't print the contents
	  of a NULL pointer

2003-09-06 13:35  sth

	* trunk/src/pkcs11/Makefile.mak: Typo fix

2003-09-06 13:13  sth

	* trunk/src/pkcs11/Makefile.mak: Build the pkcs11 spy on Win32

2003-09-06 05:57  sth

	* trunk/src/tools/opensc-explorer.c: Fix: handle the 3rd argument
	  of the Change PIN and Unblock PIN commands correctly

2003-09-05 20:16  sth

	* trunk/src/libopensc/card-flex.c: Fix: let this card driver do
	  the unblocking itself, don't send it to the iso7816 code (Victor
	  Tarasov)

2003-09-05 07:22  aet

	* trunk/src/libopensc/reader-openct.c,
	  trunk/src/libopensc/reader-usbtoken.c: Warning fix

2003-09-04 16:41  aet

	* trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/libopensc/reader-openct.c,
	  trunk/src/libopensc/reader-pcsc.c,
	  trunk/src/libopensc/reader-usbtoken.c: Remove gcc specific code
	  from usbtoken/openct drivers, untested.

2003-09-04 13:50  aet

	* trunk/src/pkcs11/pkcs11-display.h,
	  trunk/src/pkcs11/pkcs11-spy.c: PKCS#11 spy fixes by Mathias
	  Brossard

2003-09-03 21:53  aet

	* trunk/src/pkcs11/Makefile.am: Fix make distcheck to work again,
	  weird that it stopped working only after the opensc-spy patching.

2003-09-03 21:31  aet

	* trunk/src/libopensc/card-etoken.c: error -> sc_error

2003-09-03 18:55  okir

	* trunk/src/libopensc/card-etoken.c,
	  trunk/src/libopensc/cardctl.h: - Properly detect CarDOS
	  lifecycle MANUFACTURING and report it as "OTHER"

2003-09-03 18:21  aet

	* trunk/src/libopensc/portability.c: Typo fix

2003-09-03 18:18  aet

	* trunk/src/include/winconfig.h, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/portability.c,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/profile.c, trunk/src/scrandom/scrandom.c:
	  Move #include <windows.h> to winconfig.h in order to minimize
	  win32 specific code sections.

2003-09-03 18:08  aet

	* trunk/src/pkcs11/Makefile.am, trunk/src/pkcs11/pkcs11-display.c,
	  trunk/src/pkcs11/pkcs11-display.h,
	  trunk/src/pkcs11/pkcs11-spy.c: - Linking cleanups for libpkcs11
	  / opensc-pkcs11 - Build fixes for PKCS#11 spy module by Mathias,
	  so far untested. TODO: C_UnloadModule?

2003-09-03 17:59  aet

	* trunk/src/libopensc/asn1.h, trunk/src/libopensc/log.h: SC ->
	  OPENSC, old legacy from the libsc days

2003-09-03 17:19  aet

	* trunk/src/pkcs11/pkcs11-display.c,
	  trunk/src/pkcs11/pkcs11-display.h,
	  trunk/src/pkcs11/pkcs11-spy.c: Add PKCS#11 spy sources by
	  Mathias Brossard <mathias dot brossard AT idealx dot com>

2003-09-03 17:07  aet

	* trunk/src/pkcs11/libpkcs11.c, trunk/src/pkcs11/pkcs11.h,
	  trunk/src/sslengines/Makefile.am,
	  trunk/src/sslengines/engine_opensc.c,
	  trunk/src/sslengines/engine_opensc.h,
	  trunk/src/sslengines/engine_pkcs11.c,
	  trunk/src/sslengines/engine_pkcs11.h,
	  trunk/src/sslengines/hw_opensc.c,
	  trunk/src/sslengines/hw_pkcs11.c,
	  trunk/src/sslengines/libpkcs11.h,
	  trunk/src/sslengines/p11_attr.c,
	  trunk/src/sslengines/p11_cert.c, trunk/src/sslengines/p11_err.c,
	  trunk/src/sslengines/p11_key.c, trunk/src/sslengines/p11_load.c,
	  trunk/src/sslengines/p11_misc.c, trunk/src/sslengines/p11_rsa.c,
	  trunk/src/sslengines/p11_slot.c,
	  trunk/src/sslengines/pkcs11-internal.h: - Remove
	  sslengines/libpkcs11.h, it's almost identical to libpkcs11's
	  pkcs11.h. - Move default PKCS#11 library defines to pkcs11.h, so
	  they can be used by 3rdparty applications as well. - Minor
	  cleanups

2003-09-03 09:28  aet

	* trunk/src/include/winconfig.h, trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak, trunk/src/libopensc/asn1.c,
	  trunk/src/libopensc/card-default.c,
	  trunk/src/libopensc/card-emv.c,
	  trunk/src/libopensc/card-etoken.c,
	  trunk/src/libopensc/card-flex.c, trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/card-mcrd.c,
	  trunk/src/libopensc/card-miocos.c,
	  trunk/src/libopensc/card-setcos.c,
	  trunk/src/libopensc/card-starcos.c,
	  trunk/src/libopensc/card-tcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/ctbcs.c, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/dir.c, trunk/src/libopensc/internal.h,
	  trunk/src/libopensc/iso7816.c, trunk/src/libopensc/log.c,
	  trunk/src/libopensc/module.c, trunk/src/libopensc/padding.c,
	  trunk/src/libopensc/pkcs15-algo.c,
	  trunk/src/libopensc/pkcs15-cache.c,
	  trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-data.c,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-pubkey.c,
	  trunk/src/libopensc/pkcs15-sec.c,
	  trunk/src/libopensc/pkcs15-wrap.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/portability.c,
	  trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/libopensc/reader-openct.c,
	  trunk/src/libopensc/reader-pcsc.c,
	  trunk/src/libopensc/reader-usbtoken.c, trunk/src/libopensc/sc.c,
	  trunk/src/libopensc/sec.c: - Stop using unflexible automake
	  conditionals when building PC/SC, OpenCT or USBToken support,
	  use ifdef's directly in source. - Because of above, add
	  HAVE_PCSCLITE for winconfig.h - Remove unnecessary includes for
	  log.h, opensc.h and errors.h in libopensc sources, they're
	  already taken care by internal.h.

2003-09-02 20:44  aet

	* trunk/macos/libtool-bundle: Generate minimal Info.plist and
	  PkgInfo for bundles

2003-09-01 08:48  aet

	* trunk/src/scdl/scdl.h: EUSER: Cut'n'paste error

2003-09-01 08:43  aet

	* trunk/configure.in, trunk/src/Makefile.am,
	  trunk/src/Makefile.mak, trunk/src/include/opensc/Makefile.am,
	  trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak, trunk/src/libopensc/module.c,
	  trunk/src/pkcs11/Makefile.am, trunk/src/pkcs11/Makefile.mak,
	  trunk/src/pkcs11/libpkcs11.c, trunk/src/scdl,
	  trunk/src/scdl/.cvsignore, trunk/src/scdl/Makefile.am,
	  trunk/src/scdl/Makefile.mak, trunk/src/scdl/scdl.c,
	  trunk/src/scdl/scdl.h: Move scdl to it's own subdirectory,
	  although it's merely for internal purposes only.

2003-08-29 16:29  aet

	* trunk/src/libopensc/module.c, trunk/src/pkcs11/libpkcs11.c,
	  trunk/src/scdl, trunk/src/scdl/scdl.c: - Move all dynamic
	  loading related code to src/common/scdl.c, probably needs some
	  more work. As a side bonus, we now have a working CT-API support
	  for MacOS X.

2003-08-29 16:26  aet

	* trunk/src/libopensc/ctx.c, trunk/src/libopensc/log.c: Cleanups

2003-08-29 12:55  okir

	* trunk/src/libopensc/opensc.h, trunk/src/libopensc/sc.c: - added
	  sc_print_path
	* trunk/src/libopensc/card.c, trunk/src/libopensc/log.h: -
	  slightly improved debugging output

2003-08-29 12:54  okir

	* trunk/src/libopensc/card-flex.c: - path cache wasn't cleared on
	  error in flex_select_file - slightly better debugging output

2003-08-28 13:08  aet

	* trunk/configure.in, trunk/src/libopensc/Makefile.am,
	  trunk/src/scam/Makefile.am, trunk/src/scldap/Makefile.am: -
	  Cleanups to Makefile.am if / endif mess - Don't bother checking
	  OpenSSL engine LDFLAGS if no engine detected

2003-08-28 12:51  okir

	* trunk/src/libopensc/asn1.c: - added missing newline to error msg

2003-08-28 12:50  okir

	* trunk/src/libopensc/card-gpk.c: - added missing intialization of
	  apdu struct

2003-08-27 08:47  aj

	* trunk/docs/opensc.html, trunk/docs/opensc.xml: Documentation
	  fixes by Ville Skytt&#65533;&#65533;.

2003-08-26 10:55  aet

	* trunk/configure.in: Merge with OpenCT

2003-08-25 14:21  aet

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/card-default.c,
	  trunk/src/libopensc/card-emv.c,
	  trunk/src/libopensc/card-etoken.c,
	  trunk/src/libopensc/card-flex.c, trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/card-mcrd.c,
	  trunk/src/libopensc/card-miocos.c,
	  trunk/src/libopensc/card-setcos.c,
	  trunk/src/libopensc/card-starcos.c,
	  trunk/src/libopensc/card-tcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/ctbcs.c, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/dir.c, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/log.c, trunk/src/libopensc/log.h,
	  trunk/src/libopensc/module.c, trunk/src/libopensc/padding.c,
	  trunk/src/libopensc/pkcs15-algo.c,
	  trunk/src/libopensc/pkcs15-cache.c,
	  trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-pubkey.c,
	  trunk/src/libopensc/pkcs15-sec.c,
	  trunk/src/libopensc/pkcs15-wrap.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/libopensc/reader-openct.c,
	  trunk/src/libopensc/reader-pcsc.c,
	  trunk/src/libopensc/reader-usbtoken.c, trunk/src/libopensc/sc.c,
	  trunk/src/libopensc/sec.c, trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/misc.c, trunk/src/pkcs11/openssl.c,
	  trunk/src/pkcs11/pkcs11-global.c,
	  trunk/src/pkcs11/pkcs11-object.c,
	  trunk/src/pkcs11/pkcs11-session.c, trunk/src/pkcs11/slot.c:
	  Rename libopensc specific error/debug to sc_error/sc_debug We
	  should have done this ages ago.

2003-08-25 10:21  aet

	* trunk/configure.in: Remove old cruft, minor reorganizing changes

2003-08-25 09:29  aet

	* trunk/src/scconf/lex-parse.l: Add fix by Olaf to handle CRLF
	  style text files as well

2003-08-25 09:28  aet

	* trunk/src/pkcs15init/flex_so.profile: CRLF->LF

2003-08-22 13:44  aet

	* trunk/configure.in: Allow MacOS X users to disable the use of
	  PC/SC using --with-pcsclite=no.

2003-08-22 11:47  aet

	* trunk/bootstrap: Merge with recent OpenCT changes

2003-08-21 05:39  okir

	* trunk/src/libopensc/asn1.c: - Do not barf on empty SEQUENCEs if
	  all elements inside are OPTIONAL

2003-08-20 14:15  sth

	* trunk/src/libopensc/pkcs15-data.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/tools/pkcs15-init.c: Fix: don't DER-en/decode the data
	  in a pkcs15 object

2003-08-18 14:54  aet

	* trunk/src/libopensc/opensc.h, trunk/src/libopensc/portability.c,
	  trunk/src/pkcs11/pkcs11-global.c, trunk/src/pkcs11/sc-pkcs11.h:
	  - Rename sysdep_timestamp_t to sc_timestamp_t - Add missing
	  function prototype for sc_current_time

2003-08-18 14:28  aet

	* trunk/configure.in, trunk/src/libopensc/Makefile.am,
	  trunk/src/pkcs11/Makefile.am, trunk/src/pkcs15init/Makefile.am,
	  trunk/src/scconf/Makefile.am, trunk/src/scldap/Makefile.am: Add
	  common versioning to all libraries

2003-08-18 13:45  aet

	* trunk/src/pkcs11/Makefile.am, trunk/src/pkcs11/libpkcs11.c,
	  trunk/src/signer/Makefile.am, trunk/src/sslengines/Makefile.am:
	  - Install OpenSSL engines as bundles as well - Don't bother
	  "renaming" opensc-pkcs11.so when installing as bundle. - More
	  irrelevant cleanups

2003-08-18 12:06  aet

	* trunk/src/libopensc/Makefile.am, trunk/src/pkcs11/Makefile.am,
	  trunk/src/pkcs11/rsaref/Makefile.am,
	  trunk/src/pkcs15init/Makefile.am, trunk/src/scconf/Makefile.am,
	  trunk/src/scldap/Makefile.am, trunk/src/scrandom/Makefile.am:
	  Minor cleanups

2003-08-18 12:05  aet

	* trunk/configure.in: Fix for --without-ldap-ssl

2003-08-18 11:15  aet

	* trunk/configure.in: Fix OpenSSL engine linking for MacOS X.
	  Somewhat works on patched OpenSSL 0.9.7b linked again dlcompat.
	  Macosx's default openssl (0.9.6) does not include engine support
	  and fink's openssl 0.9.7 doesn't include any support for dynamic
	  loading, but that's hardly not our problem.

2003-08-18 08:18  aj

	* trunk/src/openscd/commands.c: fix for compiling openscd, thanks
	  for help to werner koch.

2003-08-15 11:30  aet

	* trunk/Makefile.am: Add ANNOUNCE to distribution tarball

2003-08-15 10:07  aet

	* trunk/Makefile.am: Add macos

2003-08-15 09:00  okir

	* trunk/ANNOUNCE: - Updated gnupg statement

2003-08-14 16:05  aj

	* trunk/NEWS: Let's not advertise buggy code. Usbtoken is only a
	  fall back solution, openct is working far better.

2003-08-14 15:34  aet

	* trunk/NEWS: Updates for the upcoming release.

2003-08-14 12:45  aet

	* trunk/src/pkcs11/libpkcs11.c: - Allow MacOS X build to be able
	  to support simultaneously loading of .dylibs, .bundles (native
	  MacOS X) and bundle objects (.so) created by GNU libtool, if
	  dlcompat is found. Otherwise just support .dylibs and .bundles.

2003-08-14 11:47  aet

	* trunk/src/pkcs11/libpkcs11.c: Cleanups

2003-08-14 11:37  aet

	* trunk/configure.in, trunk/macos, trunk/macos/.cvsignore,
	  trunk/macos/Makefile.am, trunk/macos/libtool-bundle,
	  trunk/src/pkcs11/Makefile.am: - Minor cleanups - Add preliminary
	  support for MacOS X bundle installation

2003-08-14 07:13  sth

	* trunk/src/libopensc/sec.c: Global Platform PIN Encoding: 1. Fix
	  for pin changes: use the real length instead of the max length
	  -- 2. Check for valid pin chars

2003-08-12 11:44  aet

	* trunk/configure.in: - More cleanups - Add '-no-cpp-precomp'
	  check for MacOS X - Rename --with-ssl-dir to --with-openssl

2003-08-12 09:34  aj

	* trunk/configure.in: improve configure code for openssl.

2003-08-11 15:26  aet

	* trunk/configure.in: More cleanups

2003-08-11 14:52  aet

	* trunk/configure.in: Rewrite parts of the OpenSSL detection

2003-08-11 14:39  okir

	* trunk/src/pkcs11/framework-pkcs15.c: - first stab at
	  user_consent handling

2003-08-11 13:56  okir

	* trunk/src/libopensc/card.c: - suppress stupid debug messages for
	  sc_lock/sc_unlock for debug level < 7

2003-08-11 13:55  okir

	* trunk/src/tests/print.c: - print user_consent field

2003-08-09 10:42  aj

	* trunk/configure.in: stupid bug, set those variables if empty...

2003-08-08 20:46  okir

	* trunk/ANNOUNCE: - Added announcement

2003-08-08 08:44  okir

	* trunk/src/tools/pkcs15-crypt.c: - when asked to sign data, also
	  consider SIGNRECOVER and NONREPUDIATION keys - properly
	  interpret return value of get_key

2003-08-08 08:41  aj

	* trunk/configure.in: "-lcrypt" is always wrong for CRYPTOA, and
	  we always need a path to find libcrypto.a. So default to /usr.

2003-08-08 08:34  okir

	* trunk/src/tools/pkcs15-tool.c: - cleaned up formatting

2003-08-07 06:47  sth

	* trunk/src/sslengines/p11_slot.c: Fix: use of uninitalised
	  variable

2003-08-06 13:01  aet

	* trunk/NEWS, trunk/docs/opensc.html, trunk/docs/opensc.xml:
	  Status update

2003-08-06 12:13  sth

	* trunk/src/libopensc/Makefile.mak: correct makefile so that the
	  depending libopensc is updated when a new scconf.lib exist (Ivo
	  Pieck)

2003-08-06 12:01  aet

	* trunk/src/pkcs11/libpkcs11.c: Blah, unify the string handling a
	  bit

2003-08-06 11:18  sth

	* trunk/src/tools/pkcs11-tool.c: Removed some unnecessary output

2003-08-06 08:45  aet

	* trunk/src/pkcs11/libpkcs11.c: - Fixed a mac specific compiler
	  warning - Fixed libdl-specific code to work with Fink's dlcompat
	  package

2003-08-06 07:36  aet

	* trunk/src/pkcs11/openssl.c: Fixed a typo

2003-08-05 19:26  sth

	* trunk/src/pkcs11/openssl.c: Fixed the verification, so that it
	  corresponds completely with the signature functions (more
	  specifically: the special cases are provided for SHA-1 and MD5
	  signatures with the RSA_PKCS1_PADDING mechanism)

2003-08-05 17:28  aet

	* trunk/src/libopensc/iso7816.c,
	  trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/pkcs11-object.c,
	  trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/tools/pkcs11-tool.c: Remove some compiler warnings

2003-08-05 10:34  okir

	* trunk/src/tests/regression/functions: - accept option -T - added
	  function skip_unless_card
	* trunk/src/tests/regression/run-all: - accept option -T

2003-08-05 10:12  sth

	* trunk/src/scconf/Makefile.mak: Under Windows, flex generates
	  lex_parse_win32.c, because the default lex_parse.c that is in
	  the snapshots and in the releases won't compile on Windows

2003-08-05 09:50  okir

	* trunk/src/pkcs15init/Makefile.am,
	  trunk/src/pkcs15init/pkcs15-small.profile,
	  trunk/src/pkcs15init/pkcs15.profile: - doubled file size of
	  PrKDF, PuKDF, CDF etc - provided old profile as
	  pkcs15-small.profile for e.g. GPK4K

2003-08-05 09:08  sth

	* trunk/docs/sc_pkcs15_compute_signature.3: Added info about
	  SC_ALGORITHM_RSA_HASH_NONE, to comply with the 0.8.0 release

2003-08-05 07:09  aet

	* trunk/src/pam, trunk/src/pam/.cvsignore,
	  trunk/src/pam/Makefile.am: Renamed pam_opensc-test to test-pam

2003-08-04 15:11  aet

	* trunk/configure.in, trunk/src/pam/misc_conv.c,
	  trunk/src/pam/pam_support.h: Add support for native MacOS X pam
	  header location

2003-08-01 07:03  aj

	* trunk/src/libopensc/opensc.h, trunk/src/libopensc/sc.c,
	  trunk/src/pkcs15init/pkcs15-lib.c: seperator is written to an
	  u8, so it should be a char or u8 anyway.

2003-07-31 21:16  okir

	* trunk/src/pkcs15init/pkcs15-lib.c: - warn if EF is too small for
	  the amount of data we want to write

2003-07-31 19:06  okir

	* trunk/src/libopensc/card.c: - fixed error message

2003-07-31 08:27  sth

	* trunk/src/libopensc/opensc.h: Removed a call for a (not yet)
	  existing driver, which I accidentally added along with another
	  change

2003-07-31 08:10  okir

	* trunk/src/pkcs11/framework-pkcs15.c: - indentation fix

2003-07-30 14:46  sth

	* trunk/src/pkcs11/framework-pkcs15.c: Fix: if a pkcs11 attribute
	  is requested that valid for that type of object, but that we
	  don't have, then we should return length = 0 instead of
	  returning CKR_ATTRIBUTE_TYPE_INVALID

2003-07-30 12:51  aet

	* trunk/configure.in, trunk/src/sslengines/Makefile.am: Add
	  support for probing the correct extra magic needed for linking
	  sslengines. Probably not perfect, but it's a start.

2003-07-30 11:07  okir

	* trunk/src/libopensc/card-gpk.c: - fixed VERIFY handling

2003-07-30 09:50  aet

	* trunk/configure.in, trunk/src/libopensc/Makefile.am,
	  trunk/src/openscd/Makefile.am, trunk/src/pam/Makefile.am,
	  trunk/src/pkcs11/Makefile.am, trunk/src/pkcs15init/Makefile.am,
	  trunk/src/scam/Makefile.am, trunk/src/sia/Makefile.am,
	  trunk/src/signer/Makefile.am, trunk/src/sslengines/Makefile.am,
	  trunk/src/tests/Makefile.am, trunk/src/tools/Makefile.am: Remove
	  CFLAGS_OPENSC, cleanups to INCLUDES handling.

2003-07-29 11:52  aet

	* trunk/configure.in: Fix OpenSSL engine detection for cases using
	  --with-ssl-dir.

2003-07-29 11:50  aet

	* trunk/src/scam/Makefile.am: Fix for the MacOS X pam module
	  installation

2003-07-29 10:17  aet

	* trunk/src/scrandom/Makefile.am: Remove old references to OpenSSL

2003-07-29 10:04  aet

	* trunk/Makefile.am, trunk/docs/Makefile.am,
	  trunk/src/include/opensc/Makefile.am,
	  trunk/src/include/opensc/rsaref/Makefile.am,
	  trunk/src/pkcs15init/Makefile.am, trunk/src/signer/Makefile.am,
	  trunk/src/tests/regression/Makefile.am: More consistent
	  indentation for multi-line variables

2003-07-28 13:19  sth

	* trunk/src/libopensc/iso7816.c, trunk/src/libopensc/opensc.h:
	  Added struct sc_card to process_fci(), just like it's done with
	  the orhter card operations

2003-07-28 12:17  aet

	* trunk/docs/doxygen.conf: Upgrade the version number.

2003-07-28 12:11  aet

	* trunk/Makefile.am, trunk/docs/Makefile.am,
	  trunk/etc/Makefile.am, trunk/src/include/opensc/Makefile.am,
	  trunk/src/include/opensc/rsaref/Makefile.am,
	  trunk/src/libopensc/Makefile.am, trunk/src/openssh/Makefile.am,
	  trunk/src/pkcs11/Makefile.am,
	  trunk/src/pkcs11/rsaref/Makefile.am,
	  trunk/src/pkcs15init/Makefile.am, trunk/src/scam/Makefile.am,
	  trunk/src/scrandom/Makefile.am, trunk/src/signer/Makefile.am,
	  trunk/src/signer/npinclude/Makefile.am,
	  trunk/src/sslengines/Makefile.am, trunk/src/tests/Makefile.am,
	  trunk/src/tests/regression/Makefile.am,
	  trunk/src/tools/Makefile.am, trunk/src/usbtoken/Makefile.am,
	  trunk/win32/Makefile.am: Minor cleanups

2003-07-28 11:10  aet

	* trunk/src/pam/Makefile.am, trunk/src/pam/test-pam.c: Fix the
	  pam_opensc-test linking problem for AIX5.1+ and MacOS X MacOS X
	  doesn't have /usr/include/security so you'll need to symlink
	  /usr/include/pam to /usr/include/security yourself at the moment.

2003-07-28 10:02  aet

	* trunk/configure.in, trunk/src/libopensc/reader-pcsc.c: Add
	  support for MacOS X with PC/SC framework using autoconfigure.
	  Tested using Panther (WWDC build) + fink. Should work without
	  fink, too.

2003-07-27 16:51  aet

	* trunk/src/sslengines/Makefile.am: Renamed test_engine.s to
	  test_engine.sh

2003-07-27 16:50  sth

	* trunk/src/libopensc/pkcs15-sec.c: Fix: allways set pag_flags =
	  SC_ALGORITHM_RSA_HASH_NONE if sc_pkcs15_compute_signature() is
	  called with this flag

2003-07-27 16:31  aj

	* trunk/src/usbtoken/DEPRECATED, trunk/src/usbtoken/Makefile.am:
	  Add a big fat warning not to use usbtoken.

2003-07-25 09:01  aet

	* trunk/src/sia/Makefile.am: Build fix

2003-07-24 14:27  sth

	* trunk/src/libopensc/padding.c: Fix: don't give an error if the
	  hash algo is SC_ALGORITHM_RSA_HASH_NONE

2003-07-24 13:10  aet

	* trunk/src/libopensc/reader-pcsc.c,
	  trunk/src/sslengines/engine_opensc.c,
	  trunk/src/sslengines/engine_opensc.h,
	  trunk/src/sslengines/pkcs11-internal.h: - Build fixes

2003-07-24 11:29  sth

	* trunk/src/tools/pkcs11-tool.c: Added test code for Mozilla-like
	  keypair generation and the writing of a certificate

2003-07-24 10:00  aet

	* trunk/configure.in, trunk/src/Makefile.am,
	  trunk/src/openscd/Makefile.am, trunk/src/openscd/commands.c,
	  trunk/src/openscd/mkdtemp.c, trunk/src/openscd/openscd.c,
	  trunk/src/openscd/openscd.h, trunk/src/openscd/test.c: - Remove
	  src/assuan, what's the point of having --with-assuan if we're
	  including our own version? Besides, opensc-signer and openscd
	  both are incomplete versions, I don't know if they work at all.
	  - Minor cleanups to openscd.

2003-07-24 09:09  aet

	* trunk/src/tools/opensc-tool.c: Add missing 'n' for getopt_long

2003-07-24 08:35  sth

	* trunk/src/tools/pkcs11-tool.c: Little fix in test_verify()

2003-07-24 06:47  aj

	* trunk/src/libopensc/card-starcos.c: Nils fixes to starcos.

2003-07-24 06:46  aj

	* trunk/docs/opensc.html, trunk/docs/opensc.xml: Add Nils and
	  J&#65533;&#65533;rn to Authors.

2003-07-23 18:12  aj

	* trunk/src/openssh/openssh-3.6.1p2.diff: updated patch. changes:
	  - add Nils fix for split keys. - changed "ask for pin" code. The
	  later is ugly and needs to be changed. however it is open how we
	  can do that. Maybe it will require changes in openssh, so lets
	  keep it till those issues are solved.

2003-07-23 16:11  aet

	* trunk/src/scam/p15_ldap.c: Resync with p15_eid changes. No, it
	  still won't work.

2003-07-23 15:07  aet

	* trunk/configure.in, trunk/src/scam/p15_eid.c,
	  trunk/src/scam/p15_ldap.c, trunk/src/scam/scam.c,
	  trunk/src/scam/scam.h: Remove the rest of old, obsolete SCIDI
	  related crap.

2003-07-23 14:31  sth

	* trunk/src/libopensc/iso7816.c, trunk/src/libopensc/opensc.h:
	  Made the construct_fci() a card operaton, just like it has been
	  done with process_fci() before

2003-07-22 15:51  aj

	* trunk/src/libopensc/pkcs15.c: find the keys by usage (patch by
	  Nils Lars)

2003-07-22 15:50  aj

	* trunk/Makefile.am: clean *.m4 files.

2003-07-22 15:13  aj

	* trunk/src/pkcs15init/profile.c: somewhat improved profile search.

2003-07-22 09:54  sth

	* trunk/src/tools/pkcs11-tool.c: Added test code for the new
	  Verify functions

2003-07-21 13:03  aj

	* trunk/docs/opensc.html, trunk/docs/opensc.xml: add id's to all
	  chapter and section tags. add documentation on Eutron
	  CryptoIdendity IT-SEC.

2003-07-19 10:52  aj

	* trunk/Makefile.am: set automake option.

2003-07-18 09:34  sth

	* trunk/src/tools/pkcs15-crypt.c: Read the file's contents as
	  binary

2003-07-18 09:32  sth

	* trunk/src/tools/opensc-explorer.c: Read/write the file's
	  contents as binary

2003-07-17 23:03  okir

	* trunk/docs/Makefile.am,
	  trunk/docs/sc_pkcs15_compute_signature.3: - added
	  sc_pkcs15_compute_signature.3 draft
	* trunk/docs/sc_read_binary.3: - fixed typo

2003-07-17 22:59  sth

	* trunk/src/pkcs11/misc.c: Added some debugging info

2003-07-17 22:53  sth

	* trunk/src/pkcs11/openssl.c: Added some debugging info

2003-07-17 22:09  sth

	* trunk/src/pkcs11/mechanism.c: Fix: if a pkcs11 operation fails,
	  it should be ended

2003-07-17 16:50  aet

	* trunk/configure.in: Don't leave -lpcsclite to LIBS, use LIBPCSC
	  instead. We really don't want to directly link -lpcsclite to
	  every single library and program.

2003-07-17 15:13  aet

	* trunk/configure.in: Use $LIBDL instead of hardcoding to -ldl

2003-07-17 15:09  sth

	* trunk/src/include/winconfig.h: Little fix for Windows

2003-07-17 13:09  aet

	* trunk/bootstrap: For crying out loud, hands off. There is a
	  fucking reason for these files to be removed manually.

2003-07-17 13:07  aet

	* trunk/configure.in: Remove the use of AC_FUNC_MALLOC and
	  AC_FUNC_MEMCMP as they don't work correctly with autoconf 2.57,
	  we don't really need them for anything anyway.

2003-07-17 13:05  aet

	* trunk/src/sslengines/engine_opensc.c,
	  trunk/src/sslengines/engine_pkcs11.h: Remove C++-style //
	  comments. Yes, I know that they are ok in C99 spec, but who says
	  that all compilers are already C99 compatible.

2003-07-17 12:39  aet

	* trunk, trunk/.cvsignore, trunk/aclocal,
	  trunk/aclocal/.cvsignore, trunk/docs, trunk/docs/.cvsignore,
	  trunk/etc, trunk/etc/.cvsignore, trunk/src,
	  trunk/src/.cvsignore, trunk/src/common,
	  trunk/src/common/.cvsignore, trunk/src/include,
	  trunk/src/include/.cvsignore, trunk/src/include/opensc,
	  trunk/src/include/opensc/.cvsignore,
	  trunk/src/include/opensc/rsaref,
	  trunk/src/include/opensc/rsaref/.cvsignore, trunk/src/libopensc,
	  trunk/src/libopensc/.cvsignore, trunk/src/openscd,
	  trunk/src/openscd/.cvsignore, trunk/src/openssh,
	  trunk/src/openssh/.cvsignore, trunk/src/pam,
	  trunk/src/pam/.cvsignore, trunk/src/pkcs11,
	  trunk/src/pkcs11/.cvsignore, trunk/src/pkcs11/rsaref,
	  trunk/src/pkcs11/rsaref/.cvsignore, trunk/src/pkcs15init,
	  trunk/src/pkcs15init/.cvsignore, trunk/src/scam,
	  trunk/src/scam/.cvsignore, trunk/src/scconf,
	  trunk/src/scconf/.cvsignore, trunk/src/scldap,
	  trunk/src/scldap/.cvsignore, trunk/src/scrandom,
	  trunk/src/scrandom/.cvsignore, trunk/src/sia,
	  trunk/src/sia/.cvsignore, trunk/src/signer,
	  trunk/src/signer/.cvsignore, trunk/src/signer/npinclude,
	  trunk/src/signer/npinclude/.cvsignore, trunk/src/sslengines,
	  trunk/src/sslengines/.cvsignore, trunk/src/tests,
	  trunk/src/tests/.cvsignore, trunk/src/tests/regression,
	  trunk/src/tests/regression/.cvsignore, trunk/src/tools,
	  trunk/src/tools/.cvsignore, trunk/src/usbtoken,
	  trunk/src/usbtoken/.cvsignore, trunk/win32,
	  trunk/win32/.cvsignore: Resync .cvsignore files

2003-07-17 11:04  aj

	* trunk/Makefile.am, trunk/bootstrap: real cleanup via
	  MAINTAINERCLEANFILES. include depcomp in distribution.

2003-07-17 10:59  aj

	* trunk/configure.in: The CVS HEAD should always have a version
	  "CVS". For stable releases we should create a branch I guess.

2003-07-16 15:17  okir

	* trunk/etc/opensc.conf.example, trunk/src/libopensc/errors.c,
	  trunk/src/libopensc/errors.h, trunk/src/libopensc/module.c,
	  trunk/src/libopensc/pkcs15.c: - patch for synthetic p15 cards by
	  Nils Larsch

2003-07-16 15:10  aet

	* trunk/bootstrap: rm -f depcomp and friends so that we don't have
	  to use -f flag for autoreconf. Fixed an issue noticed after
	  upgrading to autoconf 2.52 -> 2.57, automake 1.5 -> 1.7 and
	  libtool 1.4.2 -> 1.5.

2003-07-16 11:52  sth

	* trunk/src/libopensc/Makefile.mak: Moved padding from
	  pkcs15-sec.c to padding.c

2003-07-16 05:20  sth

	* trunk/src/pkcs11/framework-pkcs15.c: Fix of the previous patch:
	  show only 1 public key if both public key and cert exist

2003-07-15 10:49  okir

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/card-starcos.c,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/padding.c,
	  trunk/src/libopensc/pkcs15-sec.c: - Change padding functions

2003-07-14 17:39  sth

	* trunk/src/libopensc/iso7816.c, trunk/src/libopensc/opensc.h:
	  Have process_fci() as a card operation instead of being called
	  internally by iso7816_select_file(). This way card drivers can
	  implement a select_file() and process_fci() independently

2003-07-14 17:34  sth

	* trunk/src/pkcs11/framework-pkcs15.c: Fix of the previous patch:
	  if there are a public key and cert with the same ID, show the
	  public key derived from the cert

2003-07-14 17:28  sth

	* trunk/src/pkcs11/framework-pkcs15.c: Fix: if there was a public
	  key and cert with the same ID, you'd see the public key twice in
	  pkcs11: once the 'real' one and once the one derived from the
	  cert

2003-07-14 16:56  okir

	* trunk/src/libopensc/errors.h: - added SC_ERROR_WRONG_PADDING
	* trunk/src/libopensc/errors.c: - added missing error messages

2003-07-14 16:55  okir

	* trunk/src/libopensc/card-etoken.c: - try to deal with RSA_SIG
	  keys (first try RSA_PURE_SIG, then RSA_SIG)

2003-07-14 13:20  sth

	* trunk/src/libopensc/opensc.h, trunk/src/libopensc/sec.c: Added
	  'Global Platform' PIN encoding

2003-07-12 17:19  aj

	* trunk/src/include/opensc/Makefile.am,
	  trunk/src/include/opensc/rsaref/Makefile.am: remove files in
	  "make distclean" instead of "make maintainer-clean" to match the
	  distribution tar file.

2003-07-12 12:58  jey

	* trunk/configure.in: - Fixed OpenSSL detection (at least with
	  Debian)

2003-07-11 20:14  sth

	* trunk/src/pkcs11/framework-pkcs15.c: If C_SetAttributeValue()
	  wants to change the CKA_SUBJECT, simply return OK. This is OK as
	  we don't save the CKA_SUBJECT of a public key anyway, and it's
	  needed for doing keypair gen + cert writing with Mozilla

2003-07-11 18:16  aet

	* trunk/configure.in, trunk/src/sslengines/engine_pkcs11.c:
	  Cleanups, fix --with-common-dir work with OpenSSL engine
	  detection

2003-07-11 16:33  aet

	* trunk, trunk/.cvsignore: Forgot this one

2003-07-11 16:31  aet

	* trunk/AUTHORS, trunk/Makefile.am, trunk/README,
	  trunk/configure.in, trunk/src/pkcs11/libpkcs11.c,
	  trunk/src/pkcs11/openssl.c, trunk/src/pkcs11/pkcs11-object.c,
	  trunk/src/scrandom/scrandom.c, trunk/src/tests/regression,
	  trunk/src/tests/regression/.cvsignore,
	  trunk/src/tools/pkcs11-tool.c, trunk/src/usbtoken/Makefile.am,
	  trunk/win32, trunk/win32/.cvsignore: - Various build fixes for
	  various operating systems and compilers - Add missing .cvsignore
	  files - Remove tools/ and make configure to work again

2003-07-11 11:18  sth

	* trunk/src/sslengines/Makefile.am: Changed libpkcs11.a to
	  libpkcs11.la (by Ville Skytta)

2003-07-11 11:16  sth

	* trunk/src/sslengines/engine_pkcs11.c: Fix: use strncasecmp()
	  instead of strnicmp()

2003-07-11 09:40  sth

	* trunk/src/libopensc/card.c: Bug fix: let sc_transmit_apdu()
	  returns a negative number or 0 (no positive number)

2003-07-10 22:31  aj

	* trunk/src/libopensc/reader-usbtoken.c: Forgot to init
	  slot[0].flags to SC_CARD_PRESENT

2003-07-10 11:38  sth

	* trunk/src/libopensc/card.c, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/opensc.h: Implemented the get_response card
	  operation, is now explicitely called by sc_transmit_apdu()

2003-07-10 11:13  aj

	* trunk/Makefile.am, trunk/docs/Makefile.am,
	  trunk/src/openssh/Makefile.am: Fix makefiles.

2003-07-10 10:44  aj

	* trunk/AUTHORS, trunk/README, trunk/README.Win32,
	  trunk/README.cards, trunk/README.signer, trunk/THANKS,
	  trunk/TODO, trunk/docs/pkcs11.txt, trunk/src/openssh/README,
	  trunk/src/pam/README, trunk/src/pkcs11/README,
	  trunk/src/sslengines/README: remove old text files. new
	  documentation is in opensc/docs/opensc.html (and .xml)

2003-07-10 10:33  aj

	* trunk/configure.in: updated configure to newer init calls. set
	  automake strictnes to foreign.

2003-07-02 20:47  aj

	* trunk/docs/opensc.html, trunk/docs/opensc.xml: Some of
	  additional documentation.

2003-07-02 17:58  aj

	* trunk/docs/usbtoken.html, trunk/docs/usbtoken.xml: usbtoken is
	  now obsoleted by openct. Update the documentation. This patch
	  was made possible by the INKA e.V. ISP and the Hoepfner Brewery
	  and Beergarden. Thanks for free Internet!

2003-07-01 17:34  aj

	* trunk/configure.in, trunk/src/libopensc/ctx.c: disable usbtoken
	  by default. put usbtokens readers behind openct readers.

2003-06-30 18:25  aj

	* trunk/src/libopensc/card-flex.c: Xander Soldaat
	  <lists@b-yes-d.net> reported this ATR, the card works for him
	  "like a charm."

2003-06-28 07:02  sth

	* trunk/src/libopensc/pkcs15.h: Increased the pkcs15 ID size from
	  16 to 255

2003-06-27 23:01  aj

	* trunk/src/libopensc/card-starcos.c,
	  trunk/src/libopensc/cardctl.h: attached is patch for
	  card-starcos.c This patch generalizes the handling of the driver
	  internal extra data (for example this will be usefull to supply
	  the card driver with the necessary information to create
	  MF/DF/EF). I also added a workaround for certain profiles which
	  require that the pin is only verified once (i.e. the state
	  doesn't change after a signature verification). And finally I
	  changed the order of some starcos function (at first the
	  init/free function and then the rest). If nobody has objections
	  it would be nice if someone could commit this patch to the CVS.

2003-06-27 15:26  sth

	* trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/mechanism.c, trunk/src/pkcs11/openssl.c,
	  trunk/src/pkcs11/pkcs11-object.c, trunk/src/pkcs11/sc-pkcs11.h:
	  Implemented the C_VerifyXXX() functions

2003-06-27 13:29  sth

	* trunk/src/pkcs11/framework-pkcs15.c: Removed the
	  CKF_WRITE_PROTECTED tokeninfo flag

2003-06-27 12:59  sth

	* trunk/src/include/winconfig.h,
	  trunk/src/pkcs15init/pkcs15-lib.c: Placing #include <windows.h>
	  in wincofig.h causes compiler problems, better put it in each
	  file that uses _MAX_PATH

2003-06-27 12:32  sth

	* trunk/README.Win32, trunk/src/Makefile.mak,
	  trunk/src/include/winconfig.h: Some Windows fixes

2003-06-27 12:11  sth

	* trunk/src/pkcs11/framework-pkcs15.c: Fix: register
	  CKF_GENERATE_KEY_PAIR in a correct way

2003-06-27 12:02  sth

	* trunk/src/tools/pkcs11-tool.c: Added test code for
	  C_SetAttributeValue()

2003-06-27 12:00  sth

	* trunk/src/pkcs11/framework-pkcs15.c: Implemented
	  C_SetAttributeValue() that can change the CKA_VALUE and CKA_ID

2003-06-27 11:59  sth

	* trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c: Added
	  sc_pkcs15init_change_attrib() that can change the label and ID
	  of a pkcs15 key or cert

2003-06-27 11:32  sth

	* trunk/src/sslengines/README,
	  trunk/src/sslengines/engine_pkcs11.c: Use a better notation for
	  the -key option

2003-06-26 16:47  aj

	* trunk/docs/Makefile.am, trunk/docs/opensc.html,
	  trunk/docs/usbtoken.html: run tidy on html files (ignore if it
	  is not available). tidy html files, so they are readable.

2003-06-26 10:38  aj

	* trunk/docs/opensc.html, trunk/docs/opensc.xml: ssl engine update
	  (key format), pkcs11.txt integrated. both done by stef, I'm only
	  commiting (and updateing the html file).

2003-06-25 20:20  aj

	* trunk/docs/Makefile.am, trunk/docs/opensc.css,
	  trunk/docs/opensc.html, trunk/docs/opensc.xml,
	  trunk/docs/opensc.xsl: xml/html based documentation. This can
	  replace: README README.Win32 README.cards README.signer THANKS
	  TODO AUTHORS src/openssh/README src/pkcs11/README src/pam/README
	  src/sslengines/README

2003-06-25 10:57  sth

	* trunk/src/pkcs11/pkcs11-object.c: Added a little extra logging
	  to C_GenerateKeyPair()

2003-06-25 10:19  aj

	* trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/profile.c: PATH_MAX is defined via limits.h
	  (I hope that exists on all systems). MAX_PATH is a typo. int r
	  was never used.

2003-06-25 08:42  aj

	* trunk/docs/Makefile.am, trunk/docs/usbtoken.html: make live
	  easier for other developers: html file is now also in the
	  repository, and I will update always both at the same time. So
	  not even developers will need docbook dtd + xsl + xsltproc.

2003-06-24 22:29  aj

	* trunk/configure.in: removed pkcs15-init.sh reference (oops, when
	  did that creep in? shouldn't be.)

2003-06-24 11:31  sth

	* trunk/src/pkcs11/framework-pkcs15.c: Changed SC_PKCS15_MAX_PINS
	  to MAX_OBJECTS in pkcs15_create_tokens()

2003-06-24 11:26  sth

	* trunk/src/pkcs11/framework-pkcs15.c: Added a safer locking
	  mechanism, based on sc_lock/sc_unlock (Olaf)

2003-06-24 11:11  sth

	* trunk/src/pkcs11/slot.c: In slot_initialize(): Bugfix in a
	  memset and added a pool_initialize()

2003-06-24 09:14  sth

	* trunk/src/tools/pkcs11-tool.c: Some fixes/improvements, e.g. an
	  ID now has to be entered in the same way as in pkcs15-init

2003-06-24 09:11  sth

	* trunk/src/sslengines/README,
	  trunk/src/sslengines/engine_pkcs11.c,
	  trunk/src/sslengines/p11_cert.c, trunk/src/sslengines/p11_key.c,
	  trunk/src/sslengines/pkcs11-internal.h: Added support for
	  selecting keys by slot and by key ID; and added newlines to some
	  error messages

2003-06-23 12:56  okir

	* trunk/src/libopensc/card-flex.c, trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/iso7816.c, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/libopensc/reader-openct.c,
	  trunk/src/libopensc/reader-pcsc.c: - added pinpad support for
	  OpenCT

2003-06-18 20:49  sth

	* trunk/src/tools/pkcs11-tool.c: Some improvements to
	  gen_keypair() and write_object()

2003-06-18 12:38  sth

	* trunk/src/include/winconfig.h, trunk/src/pkcs15init/profile.c:
	  Let sc_profile_locate() behave about the same way under Win32
	  than under Linux

2003-06-18 08:07  sth

	* trunk/docs/pkcs15-init.1, trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/framework-pkcs15init.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/tools/pkcs15-init.c: Now you can specify your card
	  profile for pkcs15init, both on the command line if you use the
	  pkcs15init tool and in the opensc.conf file. Not specifying
	  gives the default one, like before.

2003-06-17 11:31  sth

	* trunk/src/libopensc/ctx.c: Changed strcat to strncat

2003-06-16 09:45  aj

	* trunk/src/openssh/README,
	  trunk/src/openssh/openssh-3.6.1p2.diff: The code now asks for
	  the passphrase.

2003-06-16 07:40  okir

	* trunk/src/pkcs15init/profile.c: - when loading a profile, check
	  all variations of <profile>.conf before <profile> itself

2003-06-15 22:22  aj

	* trunk/src/tests/regression/Makefile.am: added makefile so
	  regression files will be included in tarball.

2003-06-15 22:21  aj

	* trunk/src/openssh/openssh-3.6.1p2.README,
	  trunk/src/openssh/openssh-3.6.1p2.diff: current patch for
	  openssh. does not work.

2003-06-15 22:20  aj

	* trunk/configure.in, trunk/src/pkcs15init/Makefile.am,
	  trunk/src/sslengines/Makefile.am, trunk/src/tests/Makefile.am:
	  makefile fixes, so the tarball will contain all files.

2003-06-15 22:19  aj

	* trunk/src/openssh/Makefile.am: Doesn't work, but added current
	  openssh patch anyway.

2003-06-15 12:56  okir

	* trunk/src/libopensc/iso7816.c: - iso7816_logout now invalidates
	  the path cache

2003-06-15 11:56  jey

	* trunk/configure.in: A small fix in OpenCT detection. Bumped the
	  version number up to 0.8.0-rc2.

2003-06-15 11:55  okir

	* trunk/docs/Makefile.am: - put HAVE_DOCBOOK conditional around
	  %.html rule

2003-06-15 11:54  okir

	* trunk/configure.in: - added --without docbook

2003-06-14 12:31  sth

	* trunk/src/pkcs15init/pkcs15-init.h: Add AuthID for pkcs15 data
	  objects

2003-06-13 12:45  sth

	* trunk/src/Makefile.mak: Also compile the sslengines dir under
	  Windows

2003-06-13 06:51  sth

	* trunk/src/pkcs11/openssl.c: Added #include <openssl/rsa.h>, this
	  is needed for openssl 0.9.8 and higher where openssl/evp.h wont
	  include the algorithms anymore (Nils)

2003-06-12 21:35  sth

	* trunk/src/pkcs15init/flex_onepin.profile,
	  trunk/src/pkcs15init/pkcs15-cflex.c: Added support for a new
	  cryptoflex profile, where the user (CHV1) is in charge of the
	  pkcs15 DF

2003-06-12 21:23  sth

	* trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/tools/pkcs15-init.c: Add the AuthID when writing
	  pkcs15 data objects

2003-06-12 21:14  sth

	* trunk/src/libopensc/asn1.c: Add support for non-optional ASN.1
	  object that are empty

2003-06-11 11:03  sth

	* trunk/src/pkcs15init/flex_so.profile: Added some info

2003-06-11 10:56  okir

	* trunk/src/libopensc/card-starcos.c,
	  trunk/src/libopensc/cardctl.h: - starcos fixes from Nils
	* trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-sec.c:
	  - New public function sc_add_padding

2003-06-11 10:54  okir

	* trunk/configure.in: - another fix for --without-openct

2003-06-11 10:53  okir

	* trunk/docs/Makefile.am: - dont fail if we dont have xsltproc

2003-06-10 16:45  aj

	* trunk/src/pkcs15init/Makefile.am: added flex_so.profile, moved
	  list of all profiles to PROFILE

2003-06-10 12:54  aj

	* trunk/docs/Makefile.am: makefile fix by Robert Bihlmeyer:
	  include usbtoken.html in distribution tarball.

2003-06-10 06:32  okir

	* trunk/src/tests/p15dump.c: - prevent excessive calls to logout

2003-06-10 06:31  okir

	* trunk/src/libopensc/iso7816.c: - iso7816_logout should call
	  driver specific select_file function, not the iso7816 generic
	  version

2003-06-07 07:17  sth

	* trunk/src/pkcs15init/Makefile.am,
	  trunk/src/pkcs15init/flex_so.profile,
	  trunk/src/pkcs15init/pkcs15-cflex.c: Add support for a new
	  cryptoflex profile in which the SO (CHV1) is in charge of the
	  pkcs15 DF

2003-06-04 19:17  sth

	* trunk/src/pkcs11/framework-pkcs15.c: Fix in
	  pkcs15_gen_keypair(): labels didnt work

2003-06-04 18:37  sth

	* trunk/src/pkcs15init/pkcs15-lib.c: Fixed a type in previous patch

2003-06-04 12:30  sth

	* trunk/src/tools/pkcs11-tool.c: A first implementation of
	  write_object(), mostly for testing purposes

2003-06-04 12:26  sth

	* trunk/src/pkcs11/framework-pkcs15.c: some fixes to
	  pkcs15_create_object() and pkcs15_gen_keypair()

2003-06-04 12:24  sth

	* trunk/src/pkcs11/misc.c: added a check for CKA_CERTIFICATE_TYPE
	  to attr_extract()

2003-06-03 13:57  sth

	* trunk/etc/opensc.conf.example,
	  trunk/src/pkcs11/framework-pkcs15.c, trunk/src/pkcs11/misc.c,
	  trunk/src/pkcs11/openssl.c, trunk/src/pkcs11/pkcs11-object.c,
	  trunk/src/pkcs11/sc-pkcs11.h, trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/tools/pkcs11-tool.c: First implementation of
	  C_GenerateKeyPair()

2003-05-30 09:54  okir

	* trunk/src/libopensc/pkcs15.h: - fixed typodef in
	  sc_pkcs15_*_info_t (spotted by Nils)

2003-05-30 09:45  sth

	* trunk/src/pkcs15init/pkcs15-cflex.c: Compiler warning (result of
	  malloc not casted)

2003-05-30 08:54  okir

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/base64.c,
	  trunk/src/libopensc/card-etoken.c,
	  trunk/src/libopensc/card-flex.c,
	  trunk/src/libopensc/card-mcrd.c,
	  trunk/src/libopensc/card-starcos.c,
	  trunk/src/libopensc/card-tcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/dir.c, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/log.c, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15-algo.c,
	  trunk/src/libopensc/pkcs15-cache.c,
	  trunk/src/libopensc/pkcs15-sec.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/pkcs15.h: - remove signedness warnings
	  printed by new gcc

2003-05-30 08:33  okir

	* trunk/src/tools/opensc-tool.c: - added --name option

2003-05-28 20:52  okir

	* trunk/src/tests/regression/functions,
	  trunk/src/tests/regression/init0002: - added function
	  skip_if_card to allow tests to be skipped for certain cards
	* trunk/src/libopensc/card-default.c,
	  trunk/src/libopensc/card-etoken.c,
	  trunk/src/libopensc/card-flex.c, trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/card-mcrd.c,
	  trunk/src/libopensc/card-miocos.c,
	  trunk/src/libopensc/card-setcos.c,
	  trunk/src/libopensc/card-starcos.c,
	  trunk/src/libopensc/card-tcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/opensc.h: - added card name to struct
	  sc_card to allow upper level apps to identify card type more
	  precisely

2003-05-28 18:05  okir

	* trunk/src/tests/regression/erase: - added

2003-05-28 13:36  okir

	* trunk/src/tests/regression/crypt0001,
	  trunk/src/tests/regression/crypt0002,
	  trunk/src/tests/regression/crypt0003,
	  trunk/src/tests/regression/crypt0004: - specify user pin when
	  erasing card
	* trunk/src/tests/regression/run-all: - better handling of failures

2003-05-28 08:30  okir

	* trunk/src/tests/regression/run-all: - allow specifying the list
	  of tests to be run on the command line

2003-05-28 05:25  okir

	* trunk/src/tests/regression/crypt0001,
	  trunk/src/tests/regression/crypt0002,
	  trunk/src/tests/regression/crypt0003,
	  trunk/src/tests/regression/crypt0004,
	  trunk/src/tests/regression/functions: - fixed crypt* tests to
	  work with cryptoflex

2003-05-28 05:24  okir

	* trunk/src/tests/regression/run-all: - added

2003-05-27 15:58  aj

	* trunk/src/pam/Makefile.am, trunk/src/pam/pam_opensc.c,
	  trunk/src/pam/test-pam.c: moved main() function into it's own
	  file, killed duplicate compiling, made older
	  autoconf/make/libtool happy.

2003-05-27 09:58  okir

	* trunk/src/pkcs11/framework-pkcs15.c: - return value of
	  pkcs15_login was ignored

2003-05-26 09:30  aj

	* trunk/Makefile.am, trunk/configure.in: move autoconf helper
	  files to tools/ subdirectory.

2003-05-24 19:31  aj

	* trunk/configure.in, trunk/src/libopensc/Makefile.am: configure
	  now accepts a path with --with-openct, and that directory is
	  searched, and variables OPENCT_CFLAGS, LIBS, LDFLAGS are set
	  (and used in src/libopensc/Makefile).

2003-05-23 10:10  okir

	* trunk/src/tests/regression/functions,
	  trunk/src/tests/regression/init0001,
	  trunk/src/tests/regression/init0002,
	  trunk/src/tests/regression/init0003,
	  trunk/src/tests/regression/init0004,
	  trunk/src/tests/regression/init0005,
	  trunk/src/tests/regression/init0006,
	  trunk/src/tests/regression/init0007,
	  trunk/src/tests/regression/init0008,
	  trunk/src/tests/regression/init0009,
	  trunk/src/tests/regression/init0010,
	  trunk/src/tests/regression/init0011: - erase card using --secret

2003-05-23 10:05  okir

	* trunk/src/pkcs15init/pkcs15-cflex.c: - fixed pin handling in
	  generate key
	* trunk/src/libopensc/card-flex.c: - in pin_cmd, dont assume the
	  caller has properly initialized max_length and encoding

2003-05-22 21:04  okir

	* trunk/src/pkcs15init/pkcs15-cflex.c: - fixed cryptoflex keygen

2003-05-22 20:53  okir

	* trunk/src/libopensc/card-flex.c, trunk/src/libopensc/cardctl.h,
	  trunk/src/pkcs15init/pkcs15-cflex.c: - added cryptoflex RSA key
	  generation (not yet functional)

2003-05-22 20:51  okir

	* trunk/src/libopensc/reader-openct.c: - less verbose debug
	  messages

2003-05-22 19:34  okir

	* trunk/src/libopensc/card.c: - change debug level for
	  sc_lock/unlock

2003-05-22 13:59  okir

	* trunk/src/libopensc/card.c: - fixed the hang with logout()

2003-05-20 10:53  aj

	* trunk/aclocal/Makefile.am, trunk/aclocal/libtool.m4: libtool.m4
	  is not required, and a version too old causes problems anyway.

2003-05-20 08:30  sth

	* trunk/src/libopensc/card-flex.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/iso7816.c, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/sec.c, trunk/src/pkcs11/framework-pkcs15.c:
	  added sc_logout() functionality

2003-05-18 10:08  okir

	* trunk/src/tools/pkcs15-init.c: - added option --secret

2003-05-18 10:05  okir

	* trunk/src/pkcs15init/pkcs15-lib.c: - do_get_any_verify_pin: try
	  to look up p15 pin info from card

2003-05-17 13:30  aj

	* trunk/aclocal/libtool.m4: replaced it with a newer version.

2003-05-17 10:55  aj

	* trunk/src/tests/regression/functions,
	  trunk/src/tests/regression/init0003,
	  trunk/src/tests/regression/init0004,
	  trunk/src/tests/regression/init0005,
	  trunk/src/tests/regression/init0006,
	  trunk/src/tests/regression/init0008,
	  trunk/src/tests/regression/init0009,
	  trunk/src/tests/regression/init0010,
	  trunk/src/tests/regression/init0011: always create and use a
	  pin. removed --split-key, cardOS users have to specify it. three
	  new tests.

2003-05-17 10:54  aj

	* trunk/src/tools/pkcs15-tool.c: Added --pin option to pkcs15-tool

2003-05-17 09:18  okir

	* trunk/src/tests/regression/functions: - Disable colors for now -
	  use --assert-pristine to ensure card is pristine

2003-05-17 09:10  okir

	* trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c: - added
	  sc_pkcs15init_set_secret

2003-05-16 22:08  aj

	* trunk/src/pkcs11/Makefile.am,
	  trunk/src/pkcs11/rsaref/Makefile.am: fix include paths. include
	  files are supposed to be in opensc/ and opensc/rsaref/.

2003-05-16 19:12  okir

	* trunk/src/tools/pkcs15-init.c: - redid option handling (you can
	  now call it with -ECPa 01 -G rsa/1024 - except there's a little
	  bug that prevents this from working properly) - implemented
	  --assert-pristine

2003-05-16 19:11  okir

	* trunk/src/tools/util.c: - fix for previous change

2003-05-16 16:41  okir

	* trunk/src/tools/util.c: - print_usage_and_die: skip hidden
	  options

2003-05-16 16:33  okir

	* trunk/src/tools/pkcs11-tool.c: - in test_signature: check
	  CKA_SIGN before doing any signature tests

2003-05-16 15:30  aj

	* trunk/src/libopensc/card-flex.c: egate cryptoflex 32 card can
	  generate key. updated the flags.

2003-05-16 14:25  okir

	* trunk/src/tools/opensc-explorer.c: - display LIST_FILES and
	  CRYPTO ACs as well

2003-05-16 14:24  okir

	* trunk/src/tests/regression/init0004: - minor fix

2003-05-16 14:16  okir

	* trunk/src/pkcs15init/flex.profile: - make sure CREATE/DELETE are
	  protected

2003-05-16 14:15  okir

	* trunk/src/libopensc/card-flex.c: - select file: do not interpret
	  INVALIDATE/REHAB AC bits for DFs

2003-05-16 09:51  okir

	* trunk/src/tests/regression/functions: - added some color

2003-05-16 09:34  okir

	* trunk/src/pkcs15init/pkcs15.profile: - bump the CDF size, as we
	  now put the subject name in the label

2003-05-16 09:27  okir

	* trunk/src/tests/regression/init0008,
	  trunk/src/tests/regression/test.p12: - added pkcs15-init pkcs12
	  test case

2003-05-16 09:14  okir

	* trunk/src/tests/regression/crypt0001,
	  trunk/src/tests/regression/crypt0002,
	  trunk/src/tests/regression/crypt0003,
	  trunk/src/tests/regression/crypt0004,
	  trunk/src/tests/regression/functions: - updated test scripts

2003-05-16 07:42  okir

	* trunk/src/tests/regression/functions: - test set didnt abort if
	  p15_validate failed

2003-05-15 15:42  okir

	* trunk/src/libopensc/card-miocos.c: - it seems the upper limit
	  for r/w binary is 244

2003-05-15 15:30  okir

	* trunk/src/tests/regression/README,
	  trunk/src/tests/regression/functions,
	  trunk/src/tests/regression/init0001,
	  trunk/src/tests/regression/init0002,
	  trunk/src/tests/regression/init0003,
	  trunk/src/tests/regression/init0004,
	  trunk/src/tests/regression/init0005,
	  trunk/src/tests/regression/init0006,
	  trunk/src/tests/regression/init0007: - more tests

2003-05-15 15:29  okir

	* trunk/src/tools/pkcs15-init.c: - Allow "pkcs1-init --erase"
	  without further options

2003-05-15 15:28  okir

	* trunk/src/tools/pkcs11-tool.c: - Do not try to C_Login if the
	  token doesn't require a login

2003-05-15 15:27  okir

	* trunk/src/pkcs11/pkcs11-object.c,
	  trunk/src/pkcs11/pkcs11-session.c: - allow full access to keys
	  not protected by a PIN

2003-05-15 15:26  okir

	* trunk/src/pkcs15init/etoken.profile: - increase size of PrKDF,
	  so that we have room for 2x2 split keys

2003-05-15 13:33  okir

	* trunk/src/tools/pkcs15-init.c: - added --no-prompt
	* trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/profile.c, trunk/src/pkcs15init/profile.h:
	  - erase card fixes: forget cached secrets, and use sc_free_apps

2003-05-15 13:32  okir

	* trunk/src/libopensc/card.c, trunk/src/libopensc/dir.c,
	  trunk/src/libopensc/opensc.h: - added sc_free_apps to undo
	  sc_enum_apps

2003-05-15 11:41  okir

	* trunk/src/libopensc/card-flex.c: - fixed card_ctl error message

2003-05-15 11:39  okir

	* trunk/src/tools/pkcs15-init.c: - keygen: when --split-key is
	  given, try hardware keygen if usage permits

2003-05-15 11:33  okir

	* trunk/src/tests/regression/functions,
	  trunk/src/tests/regression/init0001: - improved test cases
	  slightly

2003-05-15 11:32  okir

	* trunk/src/tools/pkcs11-tool.c: - added --slot-label option to
	  find slot by label

2003-05-15 11:31  okir

	* trunk/src/tools/pkcs15-init.c: - get_pin_callback takes an
	  additional label argument - add split key support to key
	  generation

2003-05-15 11:30  okir

	* trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c: - get_pin callback now takes
	  additional label argument - call get_pin for ALL pins, not just
	  those listed in the profile - add split key support to
	  sc_pkcs15init_generate_key

2003-05-15 11:29  okir

	* trunk/src/pkcs15init/pkcs15-etoken.c: - etoken_erase don't
	  assume PIN 0 is always the SO PIN

2003-05-15 11:27  okir

	* trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h: -
	  added sc_pkcs15_find_pin_by_reference

2003-05-15 10:34  sth

	* trunk/src/pkcs11/framework-pkcs15.c: If signing/decryption fails
	  because the card lost its security status, try to log in again
	  and then do another attempt to sign/decrypt

2003-05-14 19:13  okir

	* trunk/src/tests/regression/functions: - dont say all tests were
	  successful when we failed
	* trunk/src/tests/regression/crypt0004: - show output of
	  pkcs15-init commands

2003-05-14 16:29  okir

	* trunk/src/libopensc/pkcs15.c: - bumped buffer sizes for
	  EF(TokenInfo) labels

2003-05-14 16:22  okir

	* trunk/src/tools/pkcs15-init.c: - minor usability updates

2003-05-14 16:21  okir

	* trunk/src/tests/regression/functions,
	  trunk/src/tests/regression/init0001: - some tests for pkcs15-init

2003-05-14 13:13  sth

	* trunk/src/sslengines/Makefile.mak,
	  trunk/src/sslengines/engine_pkcs11.c,
	  trunk/src/sslengines/engine_pkcs11.def,
	  trunk/src/sslengines/engine_pkcs11.h,
	  trunk/src/sslengines/hw_opensc.c,
	  trunk/src/sslengines/hw_pkcs11.c,
	  trunk/src/sslengines/p11_load.c, trunk/src/sslengines/p11_rsa.c,
	  trunk/src/sslengines/pkcs11-internal.h: Ported to Win32

2003-05-14 12:25  okir

	* trunk/src/libopensc/card-miocos.c: - restrict max read/write
	  size to 128

2003-05-14 12:00  okir

	* trunk/src/libopensc/reader-pcsc.c: - do not mess with Case 4
	  APDUs unless we're doing T=0

2003-05-14 08:47  sth

	* trunk/src/libopensc/card-starcos.c: Some typos fixed and fixed
	  the algos for use in OpenSSH (Nils Larsch)

2003-05-13 20:24  okir

	* trunk/src/libopensc/pkcs15-sec.c: -
	  sc_pkcs15_compute_signature(RSA_RAW): zero pad input if shorter
	  than modulus length

2003-05-13 14:29  aj

	* trunk/src/libopensc/libopensc.pc.in: OpenSC header files are
	  included as #include <opensc/opensc.h> Thus it has to be
	  -I/path/to/opensc/include and not
	  -I/path/to/opensc/include/opensc

2003-05-13 14:06  aj

	* trunk/src/sslengines/p11_attr.c,
	  trunk/src/sslengines/p11_cert.c, trunk/src/sslengines/p11_key.c,
	  trunk/src/sslengines/p11_misc.c, trunk/src/sslengines/p11_rsa.c,
	  trunk/src/sslengines/p11_slot.c: added #include <string.h>
	  killing warnings.

2003-05-13 13:43  aj

	* trunk/src/libopensc/pkcs15.h: At least the rainbow ikey 3000
	  need bigger labels. Label size should be 255, as per pkcs15.

2003-05-13 07:06  sth

	* trunk/src/libopensc/pkcs15.c: Make sc_pkcs15_read_file() work if
	  the pkcs15 files contain only FIDs instead of file paths (Nils
	  Larsch)

2003-05-12 20:37  aj

	* trunk/src/sslengines/Makefile.am: libpkcs11.h was missing from
	  EXTRA_DIST

2003-05-12 20:21  aj

	* trunk/src/sslengines, trunk/src/sslengines/.cvsignore,
	  trunk/src/sslengines/Makefile.am,
	  trunk/src/sslengines/engine_opensc.c,
	  trunk/src/sslengines/engine_opensc.h,
	  trunk/src/sslengines/engine_pkcs11.c,
	  trunk/src/sslengines/engine_pkcs11.h,
	  trunk/src/sslengines/hw_opensc.c,
	  trunk/src/sslengines/hw_pkcs11.c,
	  trunk/src/sslengines/libpkcs11.h,
	  trunk/src/sslengines/p11_attr.c,
	  trunk/src/sslengines/p11_cert.c, trunk/src/sslengines/p11_err.c,
	  trunk/src/sslengines/p11_key.c, trunk/src/sslengines/p11_load.c,
	  trunk/src/sslengines/p11_misc.c, trunk/src/sslengines/p11_rsa.c,
	  trunk/src/sslengines/p11_slot.c,
	  trunk/src/sslengines/pkcs11-internal.h,
	  trunk/src/sslengines/test_engine.sh: new sslengines
	  implementation with pkcs11 and opensc backend.

2003-05-12 20:18  aj

	* trunk/configure.in, trunk/src/Makefile.am: Add sslengines.

2003-05-12 11:51  sth

	* trunk/src/libopensc/card-flex.c: Added decryption functionality

2003-05-11 07:22  sth

	* trunk/src/libopensc/pkcs15-cert.c: Fixed: support for X.509 V1
	  certs

2003-05-08 10:42  sth

	* trunk/src/libopensc/card-gpk.c: Fix of the previous Win32 patch
	  related to the assumed absence of OPENSSL_cleanse(): this
	  function does is present on OpenSSL 0.9.7 but not on the beta4
	  version

2003-05-08 07:54  sth

	* trunk/src/pkcs11/libpkcs11.c: Added support for Mac bundles

2003-05-02 15:12  aj

	* trunk/src/pkcs11/Makefile.am: oops, didn't remove reference to
	  sslrandom.c. fixed.

2003-05-02 15:03  aj

	* trunk/src/openscd/Makefile.am, trunk/src/pam/Makefile.am,
	  trunk/src/pkcs11/Makefile.am, trunk/src/scam/Makefile.am,
	  trunk/src/scrandom/Makefile.am: this should fix the libscrandom
	  issue: the obvious solution is to create libscrandom.la (not .a)
	  and link with ../scrandom/libscrandom.la (not -lscrandom).

2003-05-02 15:01  aj

	* trunk/src/usbtoken/main.c, trunk/src/usbtoken/pid.c: - added a
	  "nofork" parameter - changed the initialization order to fix a
	  race condition where the first usbtoken uses the id 1 and not 0
	  - fixed a bug where all tokens always used id 0. now several
	  tokens work at the same time. - fixed a bug: pid files were
	  empty.

2003-05-02 15:00  aj

	* trunk/src/libopensc/reader-usbtoken.c: - indent (maybe not such
	  a good idea?) - improved some error messages

2003-05-02 14:57  aj

	* trunk/src/tools/opensc-explorer.c: improved "get" function: -
	  path is now by default like 3F00_5015_5031 instead of "3F00" -
	  the final message shows not only number of bytes but also the
	  filename.

2003-05-02 14:33  sth

	* trunk/src/libopensc/card-gpk.c: Fix for Win32 where there's no
	  OPENSSL_cleanse()

2003-05-02 13:38  sth

	* trunk/README.Win32: Little update on how to add OpenSSL support

2003-05-02 08:01  sth

	* trunk/docs/Makefile.am, trunk/docs/pkcs11.txt: Added info about
	  the pkcs11 lib

2003-05-01 14:09  aj

	* trunk/src/pam/Makefile.am, trunk/src/pkcs11/Makefile.am,
	  trunk/src/scam/Makefile.am, trunk/src/scrandom/Makefile.am:
	  Patch by Robert Bihlmeyer: - remove liscrandom - use scrandom.c
	  directly (list as part of the SOURCES)

2003-04-30 12:24  sth

	* trunk/src/tools/pkcs11-tool.c: Dont give errors with -t option
	  if the private key doesnt support key unwrap

2003-04-29 11:37  jey

	* trunk/src/libopensc/card-starcos.c: - Yet another test commit

2003-04-29 11:10  sth

	* trunk/configure.in, trunk/src/pkcs11/Makefile.am,
	  trunk/src/scrandom/Makefile.am: Build libscrandom in both .a and
	  .so versions (by R. Bihlmeyer)

2003-04-29 09:27  sth

	* trunk/src/libopensc/asn1.c: Removed some compiler warnings

2003-04-28 16:34  jey

	* trunk/src/libopensc/card-starcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/iso7816.c, trunk/src/libopensc/opensc.h: -
	  Renamed card->chopsize to max_le, which is more descriptive -
	  Changed a few checks to asserts

2003-04-28 16:29  aj

	* trunk/src/libopensc/asn1.c: Nils fixed asn1 code to detect two
	  byte "file name" versus longer real paths.
	* trunk/src/libopensc/card-starcos.c: Comment fixed by Nils:
	  should be 0x80 or 128, but not "80 bytes".

2003-04-28 09:55  sth

	* trunk/src/pkcs11/pkcs11-global.c: Avoid an Assertion Failed
	  (ctx!=NULL) in log.c if sc_establish_context() fails in
	  C_Initialize()

2003-04-27 19:08  aj

	* trunk/src/libopensc/card-starcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/iso7816.c, trunk/src/libopensc/opensc.h:
	  create card->chopsize, init it with SC_APDU_CHOP_SIZE, allow
	  cards to change that value, and add code to starcos_init to set
	  chopsize to 80. chopsize is used with read_binary and friends to
	  chop the data into small requests, read/write them, and
	  reassemble.

2003-04-27 15:05  aj

	* trunk/src/libopensc/asn1.c: Only look at first byte for end of
	  data detection. That way not only 0,0 and ff,ff is recognized
	  and 0,ff,ff,ff... will not cause trouble.

2003-04-25 10:03  aj

	* trunk/src/libopensc/card-starcos.c,
	  trunk/src/libopensc/pkcs15-pin.c, trunk/src/tools/pkcs11-tool.c:
	  Nils Larsch: here is a patch to remove a bug in card-starcos.c
	  and two warnings: card-starcos.c: fix apdu.le value
	  pkcs15-pin.c: remove unused labels => avoid compiler warnings
	  pkcs11-tool.c : remove memory leak (a RSA_free() was missing)
	  and simplify code (+ remove warning).

2003-04-25 07:51  sth

	* trunk/src/libopensc/pkcs15-sec.c: Allow empty key file paths in
	  compute_signature and decipher

2003-04-24 07:03  sth

	* trunk/src/pkcs11/README, trunk/src/pkcs11/pkcs11-global.c: Have
	  a compile option to enable PTHREAD locking at the pkcs11 level

2003-04-23 11:46  sth

	* trunk/src/libopensc/ctx.c: Extended caching for single-user
	  Windows OSes (Win98)

2003-04-23 10:40  aj

	* trunk/AUTHORS: Changed Roberts email address as requested.

2003-04-23 09:52  sth

	* trunk/src/pkcs11/pkcs11-global.c: Disabled OS thread locking on
	  OSes with PTHREAD due to closing problems with Mozilla

2003-04-23 08:47  sth

	* trunk/src/libopensc/pkcs15-sec.c: Added
	  SC_PKCS15_PRKEY_USAGE_NONREPUDIATION as a valid signature usage

2003-04-22 20:43  sth

	* trunk/src/tools/pkcs11-tool.c: Fix in case no OpenSSL is present

2003-04-22 17:02  aj

	* trunk/Makefile.am, trunk/src/pkcs11/Makefile.am,
	  trunk/src/pkcs11/rsaref/Makefile.am, trunk/src/scam/Makefile.am:
	  remove references to SCIDI sanitize pkcs11 include header
	  references (now they are installed in rsaref/ subdir, and
	  pkcs11.h is *not* overwritten). remove automake 1.5 requirement
	  (automake 1.4 on debian stable/woody works fine)

2003-04-22 17:00  aj

	* trunk/AUTHORS, trunk/configure.in, trunk/docs/Makefile.am,
	  trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/reader-usbtoken.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c, trunk/src/scam/p15_eid.c,
	  trunk/src/signer/Makefile.am, trunk/src/tools/pkcs11-tool.c: -
	  add robert to Authors as contributor of bug fixes - configure
	  code finally working. engine is detected and path to libcrypto.a
	  is also set. - roberts fix for reader-usbtoken.c - card-gpk.c
	  migraton to DES_ routines with #define for 0.9.6 openssl. - man
	  pages: do not ship pkcs15-profile.5 (.in is in the tarfile) -
	  assuan: replace "strcpy(stpcpy(.., ..), ..)" with
	  "strcat(strcpy(.., ..), ..)" which looks good, but nobody uses
	  assuan I guess ? - declaration of sc_pkcs15init_set_lifecycle
	  kills a warning - #include <openssl/bn.h> kills a warning (or
	  compile problem?) - removed unused txt[256]; from p15_eid (kills
	  a warning) - now "ln -s" the signer plugin to the plugin
	  directory. - moved key_out direction to the beginning of a
	  function (kills a warning or compile error) - changed
	  pkcs11-tool option "quiet" to "verbose" to conform to other
	  tools. - made algo argument to wrap_unwrap a "const" (kills
	  several warnings)

2003-04-22 12:41  sth

	* trunk/README.Win32, trunk/win32/Makefile.am,
	  trunk/win32/readme.txt: Moved win32/readme.txt to README.Win32,
	  and updated this file

2003-04-22 12:26  sth

	* trunk/src/tools/pkcs11-tool.c: Fixed an OpenSSL issue with MacOSX

2003-04-22 07:51  sth

	* trunk/src/libopensc/reader-pcsc.c: Correction of the previous
	  insert-remove fix

2003-04-21 15:02  jey

	* trunk/docs, trunk/docs/.cvsignore, trunk/win32/Makefile.am: -
	  added missing win32/Makefile.am - added usbtoken.html to
	  docs/.cvsignore

2003-04-21 15:01  jey

	* trunk/Makefile.am, trunk/configure.in, trunk/docs/Makefile.am,
	  trunk/src/Makefile.am, trunk/src/include/Makefile.am,
	  trunk/src/libopensc/Makefile.am, trunk/src/openscd/Makefile.am,
	  trunk/src/openscd/openscd.c, trunk/src/pkcs11/Makefile.am,
	  trunk/src/pkcs15init/Makefile.am, trunk/src/scconf/Makefile.am,
	  trunk/src/scrandom/Makefile.am, trunk/src/tests/Makefile.am: -
	  applied build fixes from Andreas

2003-04-21 12:52  jey

	* trunk/AUTHORS: - fixed Olaf's e-mail address in AUTHORS =)

2003-04-21 12:45  jey

	* trunk/bootstrap: - trimmed bootstrap script a bit as suggested
	  by Andreas

2003-04-21 12:39  jey

	* trunk/src/signer/opensc-crypto.c: - fixed a typo

2003-04-21 12:36  jey

	* trunk/src/openscd/Makefile.am: - Do not install openscd for now

2003-04-21 12:29  jey

	* trunk/src/libopensc/pkcs15-sec.c: - fixed add_padding() in the
	  case where padding is request, but input isn't a hash.

2003-04-21 12:01  jey

	* trunk/NEWS: - NEWS entry for 0.8.0

2003-04-21 11:40  jey

	* trunk/src/libopensc/card-flex.c: - fixed CHV changing with a
	  CryptoFlex

2003-04-18 15:42  sth

	* trunk/src/pkcs11/framework-pkcs15.c: Allow non-repudation as a
	  signature usage

2003-04-18 14:57  sth

	* trunk, trunk/.cvsignore, trunk/src/common,
	  trunk/src/common/.cvsignore, trunk/src/libopensc,
	  trunk/src/libopensc/.cvsignore, trunk/src/pkcs11,
	  trunk/src/pkcs11/.cvsignore, trunk/src/pkcs15init,
	  trunk/src/pkcs15init/.cvsignore, trunk/src/scconf,
	  trunk/src/scconf/.cvsignore, trunk/src/scrandom,
	  trunk/src/scrandom/.cvsignore, trunk/src/tests,
	  trunk/src/tests/.cvsignore, trunk/src/tools,
	  trunk/src/tools/.cvsignore, trunk/src/usbtoken,
	  trunk/src/usbtoken/.cvsignore: Added some files to ignore, also
	  for Windows

2003-04-18 11:58  sth

	* trunk/src/pkcs11/pkcs11-global.c, trunk/src/pkcs11/sc-pkcs11.h:
	  Have a sec delay in C_GetSlotInfo() per reader instead of a
	  global delay

2003-04-18 11:55  sth

	* trunk/src/pkcs11/libpkcs11.c: Added code for MacOSX

2003-04-17 14:39  okir

	* trunk/src/tools/pkcs11-tool.c: - added tests for key unwrap

2003-04-17 14:38  okir

	* trunk/src/pkcs11/framework-pkcs15.c: - bugfix for unwrap -
	  support getattr(CKA_VALUE) for public key objects

2003-04-17 14:35  sth

	* trunk/src/libopensc/reader-pcsc.c: More robust detection of
	  removal/insertion events

2003-04-17 13:25  okir

	* trunk/configure.in: - another fix to the engine test

2003-04-17 13:23  okir

	* trunk/configure.in: - fixed test clause

2003-04-17 13:13  okir

	* trunk/src/pkcs11/framework-pkcs15.c: - fixed signing and
	  hopefully unwrap for split keys

2003-04-17 13:03  okir

	* trunk/src/pkcs11/framework-pkcs15.c: - fix for the previous
	  change

2003-04-17 12:47  okir

	* trunk/configure.in: - only build sslengine if OpenSSL supports it

2003-04-17 12:38  okir

	* trunk/src/libopensc/pkcs15-sec.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/pkcs15.h,
	  trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c, trunk/src/scam/p15_eid.c,
	  trunk/src/scam/p15_ldap.c, trunk/src/signer/opensc-crypto.c,
	  trunk/src/tools/pkcs15-crypt.c, trunk/src/tools/pkcs15-init.c: -
	  implemented split-key support for CardOS

2003-04-17 11:04  okir

	* trunk/src/pkcs11/pkcs11-object.c: - fixed compiler warning

2003-04-17 09:39  okir

	* trunk/src/tools/pkcs15-init.c: - Allow command line --key-usage
	  to be more restrictive than the usage given by the certificate
	  (pkcs12)

2003-04-17 09:37  okir

	* trunk/src/scam/p15_eid.c: - when no specific reader is required,
	  just select the first one that holds a card - when computing RSA
	  signatures, don't assume the card supports raw RSA - the it the
	  challenge is a sha1 digest instead.

2003-04-16 20:52  okir

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/asn1.h,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-pubkey.c,
	  trunk/src/libopensc/pkcs15.c: - fixed endianness problem with
	  encoding/deconding of bit fields

2003-04-16 19:50  sth

	* trunk/src/pkcs11/Makefile.mak: Added debug.obj

2003-04-16 19:49  sth

	* trunk/src/libopensc/Makefile.mak: Added card-starcos

2003-04-16 19:03  okir

	* trunk/configure.in, trunk/src/Makefile.am: - merged SSL ENGINE
	  patch from Kevin Stefanik

2003-04-16 17:00  okir

	* trunk/src/scam/Makefile.am: - removed SCIDI stuff

2003-04-16 16:59  okir

	* trunk/src/libopensc/ctx.c, trunk/src/libopensc/opensc.h: -
	  integrate starcos driver

2003-04-16 16:01  okir

	* trunk/src/libopensc/card-gpk.c: - fixed some compiler warnings

2003-04-16 15:58  okir

	* trunk/src/libopensc/opensc.h: - added
	  SC_SEC_OPERATION_AUTHENTICATE for starcos driver

2003-04-16 15:56  okir

	* trunk/src/libopensc/reader-pcsc.c: - get rid of warning

2003-04-16 15:53  okir

	* trunk/src/tools/pkcs11-tool.c: - getting CKA_LABEL would not
	  0-terminate the string

2003-04-16 14:38  okir

	* trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/tools/pkcs15-init.c: - moved the lifecycle stuff to
	  libpkcs15init

2003-04-16 14:27  okir

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/card-starcos.c: - Added starcos driver

2003-04-16 14:20  okir

	* trunk/src/openscd/Makefile.am, trunk/src/pam/Makefile.am,
	  trunk/src/pkcs11/Makefile.am, trunk/src/pkcs15init/Makefile.am,
	  trunk/src/scam/Makefile.am, trunk/src/sia/Makefile.am,
	  trunk/src/tests/Makefile.am, trunk/src/tools/Makefile.am: -
	  backed out AM_LDFLAGS change

2003-04-16 14:18  okir

	* trunk/src/pkcs11/Makefile.am, trunk/src/pkcs11/debug.c,
	  trunk/src/pkcs11/misc.c, trunk/src/pkcs11/pkcs11-object.c,
	  trunk/src/pkcs11/sc-pkcs11.h: - improved debugging output of
	  CK_ATTRIBUTE data

2003-04-16 14:17  okir

	* trunk/src/pkcs11/framework-pkcs15.c: - in getattr(CKA_LABEL), do
	  not include trailing NUL

2003-04-16 14:16  okir

	* trunk/src/tools/pkcs15-init.c: - when getting certs from a p12
	  file, put the subject name into the cert labels

2003-04-16 12:01  sth

	* trunk/src/libopensc/reader-pcsc.c: Correction of the previous
	  patch for MacOSX

2003-04-16 11:50  okir

	* trunk/src/tools/pkcs15-init.c: - import all certs from a pkcs12
	  file

2003-04-16 10:20  okir

	* trunk/src/libopensc/errors.c, trunk/src/libopensc/errors.h: -
	  new error code SC_ERROR_CANNOT_LOAD_KEY

2003-04-16 10:19  okir

	* trunk/src/libopensc/card.c: - don't complain about
	  read/write/update binary with a length of 0

2003-04-16 08:33  okir

	* trunk/src/libopensc/reader-openct.c: - dont return error in
	  detect_card_presence if there is no reader

2003-04-15 20:06  okir

	* trunk/src/tools/cardos-info.c, trunk/src/usbtoken/etoken.c,
	  trunk/src/usbtoken/main.c: - a few more changes from Andreas

2003-04-15 17:10  sth

	* trunk/src/libopensc/ctx.c: First thing written in the debug log
	  will be ==========

2003-04-15 15:59  sth

	* trunk/src/libopensc/reader-pcsc.c: include for MacOSX added

2003-04-14 17:29  sth

	* trunk/src/pkcs11/framework-pkcs15.c: Have allways a label in
	  CK_TOKEN_INFO

2003-04-14 15:19  okir

	* trunk/src/libopensc/card-etoken.c: - fix pkcs11 signatures with
	  etoken

2003-04-14 14:51  okir

	* trunk/docs/pkcs15-tool.1, trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15.h, trunk/src/tools/pkcs15-tool.c: -
	  added pkcs15 unblock functionality

2003-04-14 14:49  okir

	* trunk/AUTHORS: Update

2003-04-14 10:57  okir

	* trunk/configure.in: - changed version to CVS

2003-04-14 10:33  okir

	* trunk/src/libopensc/card-etoken.c: - explicitly mention we do
	  raw RSA

2003-04-14 08:17  okir

	* trunk/src/libopensc/card-gpk.c, trunk/src/libopensc/card.c: -
	  suppress "not supported" error messages from sc_card_ctl

2003-04-14 07:44  okir

	* trunk/src/tools/opensc-explorer.c: - fixed unblock command when
	  puk given in hex notation

2003-04-11 15:29  okir

	* trunk/configure.in, trunk/docs/usbtoken.xml,
	  trunk/src/libopensc/Makefile.am, trunk/src/tools/Makefile.am,
	  trunk/src/tools/cardos-info.c, trunk/src/usbtoken/etoken.c: -
	  more fixes from Andreas

2003-04-11 15:26  sth

	* trunk/src/tools/Makefile.mak: Added cardos-info.exe

2003-04-11 14:48  okir

	* trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-etoken.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-miocos.c: - reverted previous patch

2003-04-11 14:42  okir

	* trunk/src/libopensc/reader-openct.c: - try to deal more
	  gracefully with hotplug events
	* trunk/src/libopensc/ctx.c: - include config.h
	* trunk/src/libopensc/errors.c, trunk/src/libopensc/errors.h: -
	  added hotplug errors

2003-04-11 14:22  sth

	* trunk/src/pkcs11/pkcs11-global.c: Removed some errors that
	  occured with unsupported cards

2003-04-11 13:55  okir

	* trunk/src/tools/cardos-info.c: - added

2003-04-11 11:48  okir

	* trunk/src/tools/Makefile.am: - new tool cardos-info from Andreas

2003-04-11 11:47  okir

	* trunk/src/libopensc/card-etoken.c,
	  trunk/src/libopensc/cardctl.h, trunk/src/tools/pkcs15-init.c: -
	  support for lifecycle cardctl; cardos lifecycle support

2003-04-11 11:46  okir

	* trunk/AUTHORS, trunk/docs/usbtoken.xml,
	  trunk/src/libopensc/reader-usbtoken.c, trunk/src/usbtoken/atr.c,
	  trunk/src/usbtoken/etoken.c, trunk/src/usbtoken/eutron.c,
	  trunk/src/usbtoken/ikey2k.c, trunk/src/usbtoken/ikey3k.c,
	  trunk/src/usbtoken/main.c, trunk/src/usbtoken/pid.c,
	  trunk/src/usbtoken/socket.c, trunk/src/usbtoken/t1.c,
	  trunk/src/usbtoken/usb.c, trunk/src/usbtoken/usbtoken.h: -
	  usbtoken fixes from Andreas
	* trunk/src/openscd/Makefile.am, trunk/src/pam/Makefile.am,
	  trunk/src/pkcs11/Makefile.am, trunk/src/pkcs15init/Makefile.am,
	  trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-etoken.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-miocos.c,
	  trunk/src/scam/Makefile.am, trunk/src/sia/Makefile.am,
	  trunk/src/tests/Makefile.am, trunk/src/tools/Makefile.am: -
	  build fixes from Andreas

2003-04-11 11:42  okir

	* trunk/configure.in: - added --enable-usbtoken - added
	  --with-openct

2003-04-11 11:41  okir

	* trunk/src/libopensc/Makefile.am, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/reader-openct.c: - Added OpenCT reader
	  support

2003-04-11 11:28  okir

	* trunk/src/tools/opensc-tool.c, trunk/src/tools/pkcs11-tool.c,
	  trunk/src/tools/pkcs15-crypt.c, trunk/src/tools/pkcs15-tool.c: -
	  getopt cleanup from aj

2003-04-11 11:19  okir

	* trunk/src/scconf/lex-parse.l: - fix for newer flex versions

2003-04-11 10:32  okir

	* trunk/src/tests/print.c: - Textual representation of PIN
	  encoding instead of "Type: 1"
	* trunk/src/pkcs15init/profile.c: - Don't set PIN defaults until
	  after we've parsed _all_ cardinfo blocks

2003-04-11 10:31  okir

	* trunk/src/pkcs15init/flex.profile,
	  trunk/src/pkcs15init/pkcs15-cflex.c: - fix for 2048 bit keys on
	  cflex

2003-04-11 10:30  okir

	* trunk/src/libopensc/pkcs15.h: - added SC_PKCS15_PIN_TYPE_*
	  defines for weirdo encodings

2003-04-10 09:16  okir

	* trunk/src/libopensc/card-flex.c,
	  trunk/src/libopensc/reader-pcsc.c: - fixes for le=00/lc=00
	  problems

2003-04-09 20:19  sth

	* trunk/src/libopensc/pkcs15.c: better fix then the previous for
	  the assertion failed bug

2003-04-07 10:44  sth

	* trunk/win32/makedef.pl: Dont include DllMain in the exports

2003-04-04 09:52  sth

	* trunk/src/libopensc/pkcs15.c: Fix: assertion failed
	  (lock_count>=0) in sc_pkcs15_bind()

2003-04-03 18:19  okir

	* trunk/src/libopensc/card.c: - fix sc_transmit_apdu to properly
	  deal with le=00

2003-04-03 14:38  okir

	* trunk/docs/Makefile.am: - added *.3 manpages

2003-04-03 14:34  okir

	* trunk/docs/sc_connect_card.3,
	  trunk/docs/sc_detect_card_presence.3,
	  trunk/docs/sc_disconnect_card.3,
	  trunk/docs/sc_establish_context.3, trunk/docs/sc_file.3,
	  trunk/docs/sc_file_free.3, trunk/docs/sc_file_new.3,
	  trunk/docs/sc_list_files.3, trunk/docs/sc_lock.3,
	  trunk/docs/sc_read_binary.3, trunk/docs/sc_read_record.3,
	  trunk/docs/sc_release_context.3, trunk/docs/sc_select_file.3: -
	  wrote a bunch of manual pages

2003-04-03 13:18  okir

	* trunk/src/libopensc/opensc.h: - added sc_reader_t

2003-04-03 09:53  okir

	* trunk/docs/usbtoken.xml, trunk/src/usbtoken/Makefile.am,
	  trunk/src/usbtoken/atr.c, trunk/src/usbtoken/eutron.c,
	  trunk/src/usbtoken/main.c, trunk/src/usbtoken/socket.c: -
	  usbtoken fixes from Andreas
	* trunk/src/libopensc/card-etoken.c: - changed description

2003-04-03 09:52  okir

	* trunk/src/tools/opensc-tool.c: - opensc-tool -f: don't crash on
	  large or record structured files

2003-04-03 09:51  okir

	* trunk/src/tools/pkcs15-tool.c: - minor printf fix

2003-04-03 09:46  okir

	* trunk/src/libopensc/pkcs15.c: - stubs for "synthetic" pkcs15
	  tokens

2003-04-02 06:59  sth

	* trunk/src/pkcs11/pkcs11-global.c: Fix: card detection in
	  C_GetSlotInfo is done at most once a second

2003-04-02 06:58  sth

	* trunk/src/libopensc/opensc.h, trunk/src/libopensc/portability.c:
	  Added sc_current_time

2003-03-28 13:28  okir

	* trunk/src/tools/opensc-tool.c: - opensc-tool -f should handle
	  files > 2K gracefully

2003-03-28 13:26  okir

	* trunk/src/libopensc/card-etoken.c: - Remove workaround for t=1
	  bug in etoken driver.

2003-03-27 16:08  sth

	* trunk/src/pkcs11/framework-pkcs15.c: Fix: root certs could be
	  shown more then once

2003-03-27 12:40  okir

	* trunk/docs/Makefile.am: - add usbtoken.html to dist files

2003-03-27 10:20  okir

	* trunk/docs/Makefile.am: - usbtoken.html was listed twice
	* trunk/configure.in: - autoconf fixes from Andreas J

2003-03-27 10:19  okir

	* trunk/docs/Makefile.am, trunk/docs/usbtoken.xml: - added
	  usbtoken docs

2003-03-27 10:14  okir

	* trunk/src/libopensc/Makefile.am, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/reader-usbtoken.c: - added reader driver for
	  usbtoken

2003-03-27 10:12  okir

	* trunk/src/pkcs11/rsaref/Makefile.am: - added missing win32.h

2003-03-27 10:08  okir

	* trunk/src/Makefile.am, trunk/src/include/opensc/Makefile.am,
	  trunk/src/include/opensc/rsaref/Makefile.am,
	  trunk/src/pam/Makefile.am: - top_srcdir/top_builddir fixes (aj)

2003-03-27 10:06  okir

	* trunk/src/libopensc/libopensc.pc.in: - added

2003-03-27 10:05  okir

	* trunk/src/pkcs15init/profile.c: - properly set max pin length
	  attr

2003-03-27 10:02  okir

	* trunk/src/usbtoken, trunk/src/usbtoken/Makefile.am,
	  trunk/src/usbtoken/atr.c, trunk/src/usbtoken/etoken.c,
	  trunk/src/usbtoken/eutron.c, trunk/src/usbtoken/ikey2k.c,
	  trunk/src/usbtoken/ikey3k.c, trunk/src/usbtoken/main.c,
	  trunk/src/usbtoken/pid.c, trunk/src/usbtoken/socket.c,
	  trunk/src/usbtoken/t1.c, trunk/src/usbtoken/usb.c,
	  trunk/src/usbtoken/usbtoken.h: - Merged Andreas' usbtoken code

2003-03-25 11:19  okir

	* trunk/src/tools/opensc-tool.c: - make sure all APDU fields are
	  zero when processing -s option

2003-03-20 12:52  sth

	* trunk/src/libopensc/reader-pcsc.c: card remove/insert dection
	  for Win32

2003-03-12 10:20  okir

	* trunk/src/libopensc/card-gpk.c: - use OPENSSL_cleanse instead of
	  memset to zap DES key (Nils Larsch)

2003-03-11 12:41  okir

	* trunk/configure.in: - libdir -> pcsc_libdir to avoid name clashes

2003-03-11 11:00  okir

	* trunk/src/libopensc/ctx.c: - changed HAVE_LIBPCSCLITE ->
	  HAVE_PCSCLITE

2003-03-11 10:59  okir

	* trunk/configure.in: - Updated PCSC test code; allow building
	  --without-pcsc

2003-03-11 10:52  okir

	* trunk/bootstrap: - abort on errors

2003-03-10 21:35  okir

	* trunk/src/pkcs11/Makefile.am: - dont install
	  rsaref/{unix.h,win32.h}

2003-03-10 21:23  okir

	* trunk/src/libopensc/reader-pcsc.c: - minor cosmetic change

2003-03-10 21:22  okir

	* trunk/src/libopensc/opensc.h: - bump SC_MAX_READERS to 16

2003-03-10 11:44  okir

	* trunk/Makefile.am, trunk/src/include/opensc/Makefile.am,
	  trunk/src/pkcs15init/Makefile.am, trunk/src/tests/Makefile.am: -
	  makefile cleanups

2003-03-07 14:18  sth

	* trunk/src/pkcs11/slot.c: remove/insert fix: restore the
	  slot->reader in slot_token_removed

2003-03-06 12:13  sth

	* trunk/win32/readme.txt: Corrections/additions for compiling with
	  OpenSSL on Windows

2003-03-06 12:08  sth

	* trunk/win32/Make.rules.mak: Compile with /MD (multithreaded)
	  instead of /ML

2003-03-04 15:47  sth

	* trunk/src/libopensc/card.c: bug fix in sc_connect_card: only the
	  first ATR in a config file was accepted

2003-03-04 09:38  okir

	* trunk/src/libopensc/card-etoken.c: - fixed ATR

2003-03-03 21:07  sth

	* trunk/src/pkcs11/misc.c: added error msg SC_ERROR_KEYPAD_TIMEOUT

2003-03-03 13:07  okir

	* trunk/src/pkcs11/pkcs11-global.c: - more robust handling of
	  concurrent WaitForSlotEvent vs Finalize

2003-03-03 13:03  sth

	* trunk/src/pkcs11/slot.c: fix: clear the CK_SLOT_INFO flags in
	  slot_token_removed

2003-02-28 15:16  sth

	* trunk/src/pkcs11/framework-pkcs15.c: take the last 8 bytes of
	  the card as the pkcs11 serialNumber

2003-02-28 12:47  sth

	* trunk/src/pkcs11/pkcs11-global.c, trunk/src/pkcs11/slot.c: fix
	  in C_GetSlotInfo that previously cleared the slotDescription and
	  didnt clear the CKF_TOKEN_PRESENT flag

2003-02-28 11:07  okir

	* trunk/src/tools/pkcs15-init.c: - renamed connect() to
	  open_reader_and_card()

2003-02-26 07:27  sth

	* trunk/src/pkcs11/misc.c: added error code CKR_PIN_INVALID

2003-02-23 20:10  sth

	* trunk/src/pkcs11/pkcs11-global.c: fixed wrong return value in
	  C_Finalize

2003-02-23 19:38  sth

	* trunk/src/pkcs11/pkcs11-global.c: fixed some thread dead-lock
	  bugs

2003-02-23 17:50  okir

	* trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/sc-pkcs11.h: - new pkcs15 object creation stuff

2003-02-22 21:27  sth

	* trunk/src/libopensc/card.c: buf fix in sc_connect_card

2003-02-21 15:40  sth

	* trunk/src/pkcs11/pkcs11-global.c: little fix in C_GetInfo

2003-02-21 12:47  okir

	* trunk/src/pkcs11/pkcs11-session.c: - prevent compiler warning

2003-02-21 12:29  sth

	* trunk/src/pkcs11/pkcs11-session.c: extra check in C_Logout

2003-02-21 12:27  sth

	* trunk/src/pkcs11/framework-pkcs15.c: login should return
	  CKR_ARGUMENTS_BAD if wrong pin length

2003-02-20 23:20  sth

	* trunk/src/tools/pkcs11-tool.c: removed unnecessary debugging

2003-02-20 23:19  sth

	* trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15.h,
	  trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs15init/pkcs15-lib.c, trunk/src/signer/dialog.c,
	  trunk/src/tests/pintest.c, trunk/src/tests/print.c,
	  trunk/src/tools/pkcs15-crypt.c, trunk/src/tools/pkcs15-init.c,
	  trunk/src/tools/pkcs15-tool.c: added support for max pin length

2003-02-20 18:55  sth

	* trunk/src/pkcs11/pkcs11-session.c: NULL_PTR check added

2003-02-20 18:54  sth

	* trunk/src/pkcs11/pkcs11-object.c: Let C_FindObjectsInit return
	  correctly

2003-02-20 13:03  sth

	* trunk/src/libopensc/opensc.h: little fix of the previous commit

2003-02-20 12:51  sth

	* trunk/src/libopensc/card-default.c,
	  trunk/src/libopensc/card-emv.c,
	  trunk/src/libopensc/card-etoken.c,
	  trunk/src/libopensc/card-flex.c, trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/card-mcrd.c,
	  trunk/src/libopensc/card-miocos.c,
	  trunk/src/libopensc/card-setcos.c,
	  trunk/src/libopensc/card-tcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/iso7816.c, trunk/src/libopensc/opensc.h:
	  removed const in sc_card_driver (caused win32 crash)

2003-02-19 21:10  sth

	* trunk/src/pkcs11/pkcs11-global.c,
	  trunk/src/pkcs11/pkcs11-session.c: more parameter checks + fix
	  in previous checks

2003-02-19 13:44  sth

	* trunk/src/pkcs11/pkcs11-global.c,
	  trunk/src/pkcs11/pkcs11-object.c,
	  trunk/src/pkcs11/pkcs11-session.c, trunk/src/pkcs11/sc-pkcs11.h:
	  added check for NULL pointers and uninitialized pkcs11 lib

2003-02-19 13:36  sth

	* trunk/src/libopensc/errors.c, trunk/src/libopensc/errors.h,
	  trunk/src/libopensc/reader-pcsc.c: added error: unresponsive card

2003-02-17 16:53  sth

	* trunk/src/pkcs11/pkcs11-global.c: correct behaviour of
	  C_GetSlotInfo at empty slots

2003-02-17 14:57  okir

	* trunk/src/pkcs11/pkcs11-global.c, trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/pkcs11/slot.c: - made card_detect() available to
	  everyone - C_GetSlotInfo now always does card detection, but
	  only for the reader which which the slot is associated

2003-02-17 14:21  okir

	* trunk/src/pkcs11/pkcs11-global.c,
	  trunk/src/pkcs11/pkcs11-object.c,
	  trunk/src/pkcs11/pkcs11-session.c, trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/pkcs11/slot.c: - Introduce locks around all pkcs11
	  operations, in case the caller is multithreaded and wants to
	  access us from different threads.

2003-02-17 11:09  sth

	* trunk/src/tools/pkcs11-tool.c: some cleared messages

2003-02-16 20:25  okir

	* trunk/src/libopensc/card-gpk.c: - fixed change/unblock pin for
	  GPK

2003-02-16 18:09  sth

	* trunk/src/pkcs11/misc.c: added error code CKR_USER_NOT_LOGGED_IN

2003-02-14 16:59  sth

	* trunk/src/pkcs11/pkcs11-global.c, trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/pkcs11/slot.c: reset first_free_slot during
	  C_Initialize

2003-02-12 14:20  sth

	* trunk/src/pkcs11/misc.c: added the CKR_DEVICE_REMOVED return code
	* trunk/src/libopensc/reader-pcsc.c: get the right error code on
	  card removal

2003-02-11 10:38  sth

	* trunk/src/pkcs11/misc.c: added p11 error CKR_PIN_LOCKED

2003-02-10 14:08  okir

	* trunk/src/tools/pkcs11-tool.c: - fixed minor compile warning
	* trunk/src/pkcs11/sc-pkcs11.h, trunk/src/pkcs11/slot.c: - Each
	  reader now gets a fixed range of slots - Each slot now shows the
	  reader name in the description field

2003-02-06 14:46  sth

	* trunk/src/libopensc/pkcs15-sec.c: added locking to
	  sc_pkcs15_decipher and sc_pkcs15_compute_signature

2003-02-05 15:43  okir

	* trunk/src/libopensc/dir.c, trunk/src/libopensc/pkcs15.c: - fixed
	  typo in previous patch

2003-02-05 15:39  okir

	* trunk/src/libopensc/pkcs15.c: - fixed typo in previous patch

2003-02-05 14:45  okir

	* trunk/src/libopensc/dir.c, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15.c: - Support Belgian eID - be less
	  pedantic about the AID listed in EF(DIR)

2003-02-05 13:55  sth

	* trunk/src/tools/pkcs11-tool.c: added support for pin pad readers
	  + change pin

2003-02-03 12:32  okir

	* trunk/src/pkcs11/slot.c: - suppress bogus insertion events

2003-02-03 12:23  okir

	* trunk/src/tools/pkcs11-tool.c: - Added test for WaitForSlotEvent
	  - fixed a bunch of compiler warnings

2003-02-03 12:20  okir

	* trunk/src/pkcs11/pkcs11-global.c, trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/pkcs11/slot.c: - merged Stef's WaitForSlotEvent patches
	* trunk/src/pkcs11/openssl.c: - fixed compiled warning

2003-02-03 12:17  okir

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/asn1.h,
	  trunk/src/libopensc/pkcs15-pubkey.c: - pubkey asn.1 encoding fix

2003-02-01 20:26  sth

	* trunk/src/tools/pkcs15-tool.c: now also caching if file->size
	  differs from what sc_read_binary() returns

2003-01-31 15:32  sth

	* trunk/src/tools/pkcs11-tool.c: added signature test for all keys

2003-01-31 12:50  sth

	* trunk/src/pkcs11/misc.c: added: opensc SC_ERROR_KEYPAD_CANCELLED
	  -> pkcs11 CKR_FUNCTION_CANCELED

2003-01-30 09:45  sth

	* trunk/src/libopensc/dir.c: file size fix + removed unnecessary
	  code from previous commit

2003-01-28 15:39  sth

	* trunk/src/pkcs11/slot.c: the slot's slotDescription is now the
	  reader name

2003-01-28 15:37  sth

	* trunk/src/pkcs11/framework-pkcs15.c: selection between SHA-1 and
	  RIPEMD160 sigs when 35 bytes supplied

2003-01-28 15:36  sth

	* trunk/src/libopensc/dir.c: made buf[1024] dynamic (malloc)

2003-01-27 13:43  sth

	* trunk/src/pkcs11/slot.c: typo fix

2003-01-27 13:33  sth

	* trunk/src/tools/pkcs11-tool.c: some fixes + added cert viewing
	  for -O option

2003-01-27 13:17  sth

	* trunk/src/pkcs11/slot.c: added return value + fix (needed if
	  hide_empty_slots = true

2003-01-27 13:01  sth

	* trunk/src/libopensc/reader-pcsc.c: Fixes for Windows, who's
	  PC/SC has more events that interfere with insert/removal events

2003-01-24 15:24  jey

	* trunk/configure.in: - Remove openscd for now

2003-01-22 08:34  okir

	* trunk/src/libopensc/card-flex.c: - cflex 32k v4 supports keygen

2003-01-21 15:29  okir

	* trunk/src/tools/pkcs11-tool.c: - fixed two minor issues in p11
	  test code

2003-01-20 12:09  okir

	* trunk/src/libopensc/ctx.c: - fixed previous %windir% change

2003-01-20 11:40  okir

	* trunk/src/libopensc/card-etoken.c: - new ATR for eToken PRO 32k
	  reported by Kevin Stefanik

2003-01-20 10:22  okir

	* trunk/src/libopensc/pkcs15.c: - sc_pkcs15_read_file: gracefully
	  deal with short reads

2003-01-20 10:12  okir

	* trunk/src/include/winconfig.h, trunk/src/libopensc/ctx.c: - Get
	  opensc.conf from %windir% rather than hard-coded C:\\WINNT (Stef)

2003-01-20 10:02  okir

	* trunk/src/tools/pkcs11-tool.c: - a few minor changes from Stef

2003-01-20 09:57  okir

	* trunk/src/pkcs11/Makefile.am: - link against libscrandom.a, no
	  libscrandom.la

2003-01-20 09:56  okir

	* trunk/src/pkcs11/mechanism.c: - fixed typo in previous patch
	* trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-pubkey.c,
	  trunk/src/libopensc/pkcs15.c: - slightly more verbose error
	  messages when ASN.1 parsing fails

2003-01-20 09:53  okir

	* trunk/src/libopensc/asn1.c: - do not encode zero length sequences

2003-01-20 09:52  okir

	* trunk/src/pkcs11/mechanism.c: - fix sc_pkcs11_signature_size to
	  return modulus size in bytes, not bits (Stef)

2003-01-20 09:50  okir

	* trunk/src/pkcs11/pkcs11-global.c, trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/pkcs11/slot.c: - added card_detect_all

2003-01-19 17:47  okir

	* trunk/TODO, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/libopensc/reader-pcsc.c, trunk/src/pkcs11/Makefile.am,
	  trunk/src/pkcs11/slot.c, trunk/src/scam/scam.c,
	  trunk/src/tests/sc-test.c, trunk/src/tools/cryptoflex-tool.c,
	  trunk/src/tools/pkcs11-tool.c, trunk/src/tools/util.c: - add
	  some support for card removal in pkcs11

2003-01-16 20:10  okir

	* trunk/src/pkcs11/Makefile.mak,
	  trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/framework-pkcs15init.c,
	  trunk/src/pkcs11/openssl.c, trunk/src/pkcs11/pkcs11-object.c,
	  trunk/src/pkcs11/sc-pkcs11.h, trunk/src/scrandom/Makefile.mak,
	  trunk/src/tools/pkcs11-tool.c: - Patches from Stef implementing
	  PKCS11 RNG related functions

2003-01-15 13:20  okir

	* trunk/src/tools/opensc-explorer.c: - added command "random"
	* trunk/src/libopensc/card-flex.c, trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/card-setcos.c, trunk/src/libopensc/opensc.h:
	  - added SC_CARD_CAP_RNG

2003-01-14 19:55  aet

	* trunk/src/libopensc/card-flex.c, trunk/src/libopensc/ctbcs.c,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-data.c,
	  trunk/src/libopensc/pkcs15.c, trunk/src/pkcs11/openssl.c,
	  trunk/src/tests/base64.c, trunk/src/tools/pkcs11-tool.c,
	  trunk/src/tools/pkcs15-init.c: C++ warning fixes (assuan
	  excluded)

2003-01-14 16:49  okir

	* trunk/src/libopensc/card-flex.c: - mask out additional flags in
	  the card type byte when asked for the AAK

2003-01-14 16:44  okir

	* trunk/src/libopensc/card-flex.c: - added ATR for Cryptoflex 32k
	  v4

2003-01-14 14:26  okir

	* trunk/src/libopensc/Makefile.mak,
	  trunk/src/libopensc/portability.c: - win32 fixes for mutex change

2003-01-14 13:31  aet

	* trunk/src/libopensc/portability.c: A small warning / compile fix

2003-01-14 11:22  okir

	* trunk/src/libopensc/Makefile.am, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/ctx.c, trunk/src/libopensc/internal.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/portability.c:
	  - merged mutex patches from Serge Koganovitsch (Zetes) - created
	  new file portability.c and moved the whole mutex stuff there (so
	  we don't pollute public header files with #ifdef HAVE_XXX
	  anymore)

2003-01-13 21:38  okir

	* trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/framework-pkcs15init.c,
	  trunk/src/pkcs11/misc.c, trunk/src/pkcs11/pkcs11-global.c,
	  trunk/src/pkcs11/sc-pkcs11.h, trunk/src/pkcs11/slot.c: - Another
	  go at the empty slot/empty token issue

2003-01-09 12:33  okir

	* trunk/src/libopensc/pkcs15.c: - fix to previous patch: if
	  use_cache is given in both the default and the application conf
	  block, use the latter

2003-01-09 12:31  okir

	* trunk/src/libopensc/pkcs15.c: - actually honor the use_cache
	  config option

2003-01-09 11:41  okir

	* trunk/src/include/winconfig.h: - PATH_MAX fix for win32 (Stef)

2003-01-09 09:18  okir

	* trunk/src/libopensc/ctx.c, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15-cache.c: - when caching pkcs15 files,
	  transparently create the cache dir if not there

2003-01-09 09:14  okir

	* trunk/src/tools/pkcs15-tool.c: - learn_card: the cache directory
	  is now created by libopensc

2003-01-09 09:09  okir

	* trunk/src/tools/pkcs15-init.c: - reordered options for help
	  message
	* trunk/src/tools/util.c: - fix the help message for
	  --very-long-options

2003-01-09 08:46  okir

	* trunk/src/libopensc/pkcs15-cache.c: - use "wb" rather than "w"
	  in fopen (Stef)

2003-01-09 08:45  okir

	* trunk/src/tools/pkcs15-tool.c: - fixed message in --learn-card

2003-01-09 07:31  okir

	* trunk/src/libopensc/card-gpk.c: - prevent segfault in
	  opensc-explorer create command

2003-01-06 23:47  aet

	* trunk/src/tools, trunk/src/tools/.cvsignore: Add pkcs11-tool

2003-01-06 23:46  aet

	* trunk/src/libopensc/sec.c, trunk/src/pkcs11/mechanism.c,
	  trunk/src/pkcs11/sc-pkcs11.h, trunk/src/tests/base64.c,
	  trunk/src/tools/pkcs11-tool.c: Fix compiler warnings

2003-01-06 21:46  aet

	* trunk/src/libopensc/log.c, trunk/src/libopensc/log.h: Cleanups
	  and logging improvements for non-GCC compilers

2003-01-06 19:52  okir

	* trunk/win32/readme.txt: Update from Stef
	* trunk/src/pkcs11/Makefile.mak, trunk/src/pkcs11/openssl.c,
	  trunk/src/tools/pkcs11-tool.c: - Win32 fixes in case openssl is
	  not present (Stef)

2003-01-06 19:37  okir

	* trunk/src/libopensc/iso7816.c: - fixed minor pin pad bug

2003-01-06 19:36  okir

	* trunk/src/libopensc/pkcs15-pin.c: - sc_pkcs15_change_pin: small
	  pin pad change from Stef

2003-01-06 19:28  okir

	* trunk/src/pkcs11/framework-pkcs15.c, trunk/src/pkcs11/misc.c: -
	  pin pad changes from Stef

2003-01-06 17:45  okir

	* trunk/src/libopensc/reader-pcsc.c: - DEF_APDU_FIX wasn't used
	  unless you install a config file.

2003-01-06 12:06  aet

	* trunk/src/tools/pkcs15-init.c: Add missing case 'w' to
	  handle_option

2003-01-06 11:03  okir

	* trunk/src/tools/util.c: - Tools did not work unless -w switch
	  was given

2003-01-06 10:53  aet

	* trunk/configure.in, trunk/src/openscd/Makefile.am: Minor cleanups

2003-01-06 10:48  aet

	* trunk/src/include/opensc/rsaref,
	  trunk/src/include/opensc/rsaref/.cvsignore, trunk/src/openscd,
	  trunk/src/openscd/.cvsignore: Add .cvsignore

2003-01-05 18:06  okir

	* trunk/src/libopensc/reader-pcsc.c: - vertain platforms need
	  time.h to understand time_t

2003-01-05 17:59  okir

	* trunk/src/libopensc/opensc.h: - fixed comment before
	  sc_wait_for_event
	* trunk/src/libopensc/reader-pcsc.c: - fixed problem with infinite
	  tiemout in sc_wait_for_event

2003-01-04 13:17  aet

	* trunk/src/libopensc/errors.c: canelled -> cancelled

2003-01-03 17:07  okir

	* trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/pkcs15-crypt.c, trunk/src/tools/pkcs15-tool.c: -
	  fixed help messages broken by previous patch
	* trunk/src/tools/pkcs15-init.c: - instead of calling
	  sc_connect_card, use new function connect_card from util.c This
	  function will take care of the fine print and optionally wait
	  for card insertion too.

2003-01-03 16:58  okir

	* trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/pkcs15-crypt.c,
	  trunk/src/tools/pkcs15-tool.c: - instead of calling
	  sc_connect_card, use new function connect_card from util.c This
	  function will take care of the fine print and optionally wait
	  for card insertion too.

2003-01-03 16:57  okir

	* trunk/src/tools/util.c, trunk/src/tools/util.h: - New function
	  connect_card() - this does all the work of connecting to the
	  card, optionally waiting for card insertion using
	  sc_wait_for_event

2003-01-03 16:32  okir

	* trunk/src/libopensc/opensc.h, trunk/src/libopensc/reader-pcsc.c,
	  trunk/src/libopensc/sc.c: - Patch from Stef to implement
	  sc_wait_for_event, slightly enhanced by yours truly.

2003-01-03 16:30  okir

	* trunk/src/libopensc/errors.c, trunk/src/libopensc/errors.h: -
	  new error code (wait_for_event timeout)

2003-01-03 14:33  okir

	* trunk/src/tools/pkcs11-tool.c: - Patch from Stef: add support
	  for --pin and --test

2003-01-03 14:28  okir

	* trunk/src/pkcs11/mechanism.c, trunk/src/pkcs11/pkcs11-object.c,
	  trunk/src/pkcs11/sc-pkcs11.h: - C_Sign* and C_Digest* now return
	  the proper codes when the output buffer is too small, or when
	  the caller is doing and output buffer size query

2003-01-03 13:27  okir

	* trunk/src/libopensc/reader-pcsc.c: - default apdu_fix=1 on win32

2003-01-03 13:26  okir

	* trunk/src/libopensc/ctx.c: - allow hard-coded config options

2003-01-03 11:54  okir

	* trunk/src/scconf/internal.h, trunk/src/scconf/lex-parse.l,
	  trunk/src/scconf/parse.c, trunk/src/scconf/scconf.h: - added
	  support for parsing a static configuration string

2003-01-03 11:40  okir

	* trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/pkcs11-global.c: - Try to fix
	  pkcs11.hide_empty_slots

2003-01-03 11:39  okir

	* trunk/src/pkcs11/sc-pkcs11.h: - sc_pkcs11_slot_t typedef added

2003-01-03 11:09  okir

	* trunk/etc/opensc.conf.example,
	  trunk/src/pkcs11/framework-pkcs15.c, trunk/src/pkcs11/misc.c,
	  trunk/src/pkcs11/sc-pkcs11.h: - Added run-time option
	  pkcs11.cache_pins, default false

2003-01-03 10:49  okir

	* trunk/etc/opensc.conf.example,
	  trunk/src/pkcs11/framework-pkcs15.c, trunk/src/pkcs11/misc.c,
	  trunk/src/pkcs11/sc-pkcs11.h: - Added run-time option
	  pkcs11.lock_login

2003-01-02 15:31  okir

	* trunk/src/libopensc/Makefile.mak,
	  trunk/src/libopensc/reader-pcsc.c: - win32 fixes from stef

2003-01-02 15:23  okir

	* trunk/src/pkcs11/framework-pkcs15.c: - Getattr(CKA_MODULUS_BITS)
	  would fail for keys w/o certificate

2002-12-23 19:17  okir

	* trunk/TODO: Update

2002-12-23 18:47  okir

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/card-etoken.c,
	  trunk/src/libopensc/card-flex.c, trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/card-mcrd.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/ctbcs.c, trunk/src/libopensc/ctbcs.h,
	  trunk/src/libopensc/errors.c, trunk/src/libopensc/errors.h,
	  trunk/src/libopensc/iso7816.c, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/libopensc/reader-pcsc.c, trunk/src/libopensc/sec.c,
	  trunk/src/libopensc/types.h: - Implemented new PIN
	  verify/change/unblock framework. All PIN operations are routed
	  through sc_pin_cmd(), which builds the APDU and either passes it
	  to the card directly, or to the card reader along with a request
	  to read the PIN(s) from the reader's keypad. Currently, entering
	  PIN in the standard way (i.e. via the application) should still
	  work - I have verified GPK and eToken; Cryptoflex verify should
	  work as well. Anything else needs additional testing, and
	  support for keypad input in particular (I cannot test this at
	  the moment for lack of a suitable reader).

2002-12-23 18:43  okir

	* trunk/src/pkcs15init/pkcs15-etoken.c: - the AC CHANGE condition
	  of the PIN objects we created referenced the PUK, rather than
	  the PIN. This caused the standard sc_change_reference_data
	  operation to fail.

2002-12-23 17:02  okir

	* trunk/src/pkcs11/framework-pkcs15.c: - NUL-terminate strings
	  returned by getattr(CKA_LABEL)

2002-12-22 23:16  okir

	* trunk/src/tools/pkcs11-tool.c: - Added --hash/-h to hash data
	  (Stef Hoeben) - Added function to translate CKR_* error codes to
	  strings.

2002-12-22 20:50  okir

	* trunk/src/pkcs11/sc-pkcs11.h: - define enough reader slots

2002-12-22 14:43  aet

	* trunk/src/include/winconfig.h, trunk/src/pkcs15init/profile.c,
	  trunk/src/tools/pkcs11-tool.c, trunk/src/tools/pkcs15-init.c,
	  trunk/src/tools/pkcs15-tool.c: - Add access, mkdir and getpass
	  wrappers into winconfig.h

2002-12-22 11:50  okir

	* trunk/etc/opensc.conf.example,
	  trunk/src/pkcs11/framework-pkcs15.c, trunk/src/pkcs11/misc.c,
	  trunk/src/pkcs11/pkcs11-global.c, trunk/src/pkcs11/sc-pkcs11.h:
	  - slightly changed previous patch; new flag hide_empty_slots

2002-12-21 16:45  okir

	* trunk/etc/opensc.conf.example,
	  trunk/src/pkcs11/framework-pkcs15.c, trunk/src/pkcs11/misc.c,
	  trunk/src/pkcs11/pkcs11-global.c, trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/pkcs11/slot.c: - Allow the admin to configure how many
	  slots are used per card (opensc.conf; pkcs11.num_slots)

2002-12-21 14:10  okir

	* trunk/src/libopensc/ctx.c: - clarified use of conf_blocks in
	  process_config_file

2002-12-20 14:55  okir

	* trunk/src/libopensc/card.c: - prevent buffer overflow

2002-12-19 21:17  okir

	* trunk/src/libopensc/sc.c: - minor signedness issue

2002-12-19 19:42  okir

	* trunk/src/tools/opensc-explorer.c: - implemented unblock command

2002-12-19 16:16  okir

	* trunk/src/libopensc/ctx.c, trunk/src/libopensc/opensc.h: - get
	  rid of warnings when calling load_card_driver_options

2002-12-19 14:26  okir

	* trunk/src/libopensc/pkcs15-data.c, trunk/src/libopensc/pkcs15.h:
	  - attempt to fix DODF encoding/decoding

2002-12-19 10:49  okir

	* trunk/src/tools/pkcs11-tool.c: - add missing help message for
	  --module

2002-12-19 09:34  okir

	* trunk/TODO: Update

2002-12-19 09:27  okir

	* trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/framework-pkcs15init.c,
	  trunk/src/pkcs11/mechanism.c, trunk/src/pkcs11/sc-pkcs11.h: -
	  Another fix to mechanism handling: ripemd160 signatures should
	  work now - Got rid of get_mechanism_{list,info} in
	  framework_ops, as they're not needed anymore.

2002-12-19 09:24  okir

	* trunk/src/tools/pkcs11-tool.c: - fixed rsa-ripemd160 signatures
	  - Added new option --module

2002-12-18 19:28  okir

	* trunk/win32/Make.rules.mak: Compile fix from Serge Koganovitsch

2002-12-18 19:26  okir

	* trunk/src/pkcs11/framework-pkcs15.c: - Values of CKA_SIGN and
	  similar attributes now based on the pkcs15 usage flags rather
	  than on some hardwired defaults.

2002-12-18 12:15  okir

	* trunk/src/libopensc/pkcs15-sec.c: - fixed pkcs1-ripemd160
	  signature header

2002-12-18 11:40  okir

	* trunk/TODO: Update

2002-12-18 11:34  okir

	* trunk/src/tools/pkcs15-init.c: - Added helpful comment about
	  --use-default-transport-keys

2002-12-18 10:17  okir

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak,
	  trunk/src/libopensc/pkcs15-data.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/pkcs15.h, trunk/src/pkcs15init/gpk.profile,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15.profile, trunk/src/tests/p15dump.c,
	  trunk/src/tests/print.c, trunk/src/tools/pkcs15-init.c,
	  trunk/src/tools/pkcs15-tool.c: - First shot at pkcs15 data
	  objects from Danny De Cock

2002-12-18 09:23  okir

	* trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c: - removed some dead code

2002-12-17 22:13  okir

	* trunk/TODO: Update

2002-12-17 20:44  okir

	* trunk/src/pkcs11/Makefile.mak, trunk/src/pkcs11/libpkcs11.c,
	  trunk/win32/readme.txt: - More win32 fixes from Stef

2002-12-17 20:20  okir

	* trunk/TODO: Update

2002-12-17 20:16  okir

	* trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/mechanism.c, trunk/src/pkcs11/sc-pkcs11.h: -
	  Register only those mechanisms the card actually supports

2002-12-17 20:15  okir

	* trunk/src/tools/pkcs11-tool.c: - Added shorthand rsa-ripemd160
	* trunk/src/libopensc/pkcs15-sec.c: - Added support for
	  SC_ALGORITHM_RSA_HASH_RIPEMD160 in sc_pkcs15_compute_signature -
	  rewrote add_padding

2002-12-17 20:14  okir

	* trunk/src/libopensc/opensc.h: - Added
	  SC_ALGORITHM_RSA_HASH_RIPEMD160

2002-12-17 16:00  okir

	* trunk/src/Makefile.mak, trunk/src/pkcs11/Makefile.mak,
	  trunk/src/pkcs11/libpkcs11.c, trunk/src/tools/Makefile.mak,
	  trunk/src/tools/pkcs11-tool.c, trunk/win32/Make.rules.mak: -
	  more win32 fixes from Stef

2002-12-17 12:37  okir

	* trunk/configure.in, trunk/src/include/opensc/Makefile.am,
	  trunk/src/include/opensc/rsaref,
	  trunk/src/include/opensc/rsaref/Makefile.am: - generate header
	  symlinks for libpkcs11

2002-12-17 11:51  okir

	* trunk/src/Makefile.am: - build pkcs11 before tools, as
	  pkcs11-tool needs libpkcs11

2002-12-17 11:50  okir

	* trunk/src/tools/Makefile.am, trunk/src/tools/pkcs11-tool.c: -
	  New application: pkcs11-tool

2002-12-17 11:49  okir

	* trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/mechanism.c, trunk/src/pkcs11/misc.c,
	  trunk/src/pkcs11/openssl.c, trunk/src/pkcs11/pkcs11-global.c,
	  trunk/src/pkcs11/pkcs11-object.c, trunk/src/pkcs11/sc-pkcs11.h:
	  - New mechanism framework

2002-12-17 11:48  okir

	* trunk/src/pkcs11/Makefile.am: - New mechanism framework - New
	  libpkcs11 utility library
	* trunk/src/pkcs11/libpkcs11.c, trunk/src/pkcs11/pkcs11.h: - New
	  utility library libpkcs11 - supposed to provide easy loading and
	  unloading of modules, and possibly a few other features in the
	  future. Needed by pkcs11-tool

2002-12-12 10:08  okir

	* trunk/src/Makefile.mak, trunk/src/pkcs15init/Makefile.mak,
	  trunk/src/tests/Makefile.mak, trunk/src/tools/Makefile.mak: -
	  more Makefile.mak fixes from Stef

2002-12-11 08:54  okir

	* trunk/src/libopensc/pkcs15.c: - do not segfault when we fail to
	  parse a pkcs15 DF

2002-12-10 17:53  okir

	* trunk/src/pkcs15init/Makefile.mak,
	  trunk/src/scrandom/Makefile.mak, trunk/src/tests/Makefile.mak,
	  trunk/win32/readme.txt: - win32 patch from Stef Hoeben

2002-12-10 17:47  okir

	* trunk/src/Makefile.mak, trunk/src/pkcs11/Makefile.mak,
	  trunk/src/pkcs11/framework-pkcs15init.c,
	  trunk/src/pkcs15init/profile.c, trunk/src/scrandom/scrandom.c,
	  trunk/src/tools/Makefile.mak, trunk/src/tools/pkcs15-init.c,
	  trunk/src/tools/pkcs15-tool.c: - win32 patch from Stef Hoeben
	* trunk/src/pkcs11/framework-pkcs15.c: - Added support for
	  CKM_RSA_X_509 (Stef Hoeben)

2002-12-10 14:44  jey

	* trunk/src/libopensc/opensc.h, trunk/src/libopensc/sc.c,
	  trunk/src/openscd/commands.c: - Added support for separator
	  characters in sc_bin_to_hex()

2002-12-10 14:31  okir

	* trunk/bootstrap: - rm -rf autom4te.cache - it's a directory

2002-12-10 14:22  okir

	* trunk/src/tools/pkcs15-tool.c: - When exporting the public key,
	  fall back to the certificate object if there's no public key
	  with the given ID.

2002-12-10 14:14  jey

	* trunk/src/tests/base64.c: - Modified base64 test so it actually
	  tests base64 stuff

2002-12-10 13:43  jey

	* trunk/configure.in, trunk/src/Makefile.am, trunk/src/openscd,
	  trunk/src/openscd/Makefile.am, trunk/src/openscd/commands.c,
	  trunk/src/openscd/mkdtemp.c, trunk/src/openscd/openscd.c,
	  trunk/src/openscd/openscd.h, trunk/src/openscd/test.c: - Added
	  openscd and Assuan

2002-12-10 13:41  jey

	* trunk/src/scrandom/scrandom.c: - Small bugfix

2002-12-10 13:27  jey

	* trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h: -
	  Keep the DER encoding of each PKCS #15 object in memory

2002-12-10 13:26  jey

	* trunk/src/libopensc/opensc.h, trunk/src/libopensc/sc.c: -
	  Changed sc_bin_to_hex() prototype a bit and removed the ':'
	  characters

2002-12-09 13:33  okir

	* trunk/src/pkcs11/misc.c: - translate SC_ERROR_WRONG_LENGTH to
	  CKR_DATA_RANGE

2002-12-06 21:40  okir

	* trunk/src/libopensc/reader-pcsc.c: - changed
	  pcsc_detect_card_presence to call refresh_slot_attributes. This
	  eliminates duplicate code, and that we also pick up the new ATR
	  if another card was inserted in the meanwhil.

2002-12-06 12:49  okir

	* trunk/src/libopensc/opensc.h, trunk/src/libopensc/sc.c: - added
	  sc_bin_to_hex

2002-12-05 09:34  okir

	* trunk/src/libopensc/sc.c: - sc_parse_atr: initialize
	  slot->atr_info.hist_bytes even if the ATR is bad

2002-12-05 08:58  okir

	* trunk/src/scam/p15_eid.c: - we expect an RSA key, so better make
	  sure it _is_ RSA

2002-12-04 15:36  okir

	* trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/sc.c: -
	  Parsing pkcs11 IDs and paths with an odd number of bytes would
	  scan past the end of the string. Made sc_hex_to_bin more robust
	  and change various place to use it rather than doing it on their
	  own with scanf(%02x)

2002-12-04 14:56  okir

	* trunk/src/tools/pkcs15-init.c: - pass the --label argument as
	  the token label when creating the pkcs15 app
	* trunk/src/pkcs15init/pkcs15-lib.c: - properly set the TokenInfo
	  label from user input

2002-12-04 14:28  okir

	* trunk/src/pkcs15init/README: - added comment on pkcs12 files

2002-12-04 13:50  okir

	* trunk/src/pkcs11/framework-pkcs15.c: - Fixed CKM_SHA1_RSA_PKCS:
	  if OpenSSL is available, use it to hash the supplied data. If
	  OpenSSL is unavailable, CKM_SHA1_RSA_PKCS is not advertised to
	  the user.

2002-12-04 13:25  okir

	* trunk/src/pkcs15init/pkcs15-lib.c: - make sure we don't assign
	  the same ID more than once

2002-12-04 13:24  okir

	* trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-init.h: - Added
	  sc_pkcs15init_get_secret so that the GPK driver can get the MF
	  secure messaging key.

2002-12-04 12:33  okir

	* trunk/src/libopensc/errors.c, trunk/src/libopensc/errors.h: -
	  updated pkcs15init error codes

2002-12-04 12:09  okir

	* trunk/src/libopensc/card-flex.c: - fixed ATR for Cryptoflex 32K
	  e-gate

2002-12-04 11:57  okir

	* trunk/src/pkcs15init/flex.profile,
	  trunk/src/pkcs15init/gpk.profile: - got rid of default transport
	  keys

2002-12-04 11:56  okir

	* trunk/src/tools/pkcs15-init.c, trunk/src/tools/pkcs15-tool.c: -
	  implement get_key callback
	* trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c: - Change the way we handle
	  default transport keys, attempt to reduce the risk of users
	  entering the wrong keys and locking their cards. Here's how we
	  do it: - ask the card driver (via cardctl GET_DEFAULT_KEY) for
	  default key - invoke the front-end's get_key callback. If the
	  card driver gave us a default key, pass it as default value -
	  front end is free to use default key as-is, or prompt user

2002-12-04 09:59  okir

	* trunk/src/libopensc/card-flex.c: - implemented
	  SC_CARDCTL_GET_DEFAULT_KEY for the flex driver; will return the
	  default AAKs for Cryptoflex and Cyberflex Access. Hope I got
	  them right.

2002-12-04 09:26  okir

	* trunk/src/libopensc/card-gpk.c, trunk/src/libopensc/cardctl.h,
	  trunk/src/libopensc/errors.h: - added new cardctl
	  SC_CARDCTL_GET_DEFAULT_KEY to get default transport keys

2002-12-04 09:24  okir

	* trunk/src/libopensc/asn1.c: - fixed asn1_encode_path - include
	  length value if given

2002-12-03 15:40  okir

	* trunk/etc/opensc.conf.example: - "document" new card_driver.atr
	  feature
	* trunk/src/libopensc/card.c, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/internal.h, trunk/src/libopensc/opensc.h: -
	  support ATR maps in /etc/opensc.conf, e.g. card_driver flex {
	  atr = 11:22:33:44; atr = 55:66:77:88; }

2002-12-03 12:44  okir

	* trunk/src/pkcs15init/flex.profile: - disabled default AAK for now

2002-12-03 12:27  okir

	* trunk/src/libopensc/card-flex.c: - added Cryptoflex 32k e-gate

2002-12-02 14:40  okir

	* trunk/src/pkcs11/framework-pkcs15.c: - Avoid segfaults: if we
	  cannot parse the certificate, do not create a cert object.

2002-12-02 13:42  okir

	* trunk/src/libopensc/types.h: - added length value to sc_path

2002-12-02 13:39  okir

	* trunk/src/libopensc/pkcs15-cert.c: - sc_pkcs15_read_certificate
	  now uses sc_pkcs15_read_file

2002-12-02 13:38  okir

	* trunk/src/libopensc/pkcs15-cache.c,
	  trunk/src/libopensc/pkcs15.c: sc_pkcs15_read{,_cached}_file now
	  honor the index/length parameters from Path
	* trunk/src/libopensc/asn1.c: - When decoding Path, decode
	  "length" value as well (if present) - a few int -> size_t
	  changes to suppress gcc3 warnings.

2002-11-29 10:54  okir

	* trunk/src/pkcs11/pkcs11-session.c: - do not crash if the
	  application tries to log into a token w/o PIN

2002-11-29 08:56  okir

	* trunk/src/pam/Makefile.am, trunk/src/pkcs11/Makefile.am,
	  trunk/src/sia/Makefile.am: - use @libdir@ instead of
	  ${exec_prefix}/lib - some platforms (such as s390x and ppc64)
	  put libraries into /usr/lib64

2002-11-28 16:38  okir

	* trunk/src/tools/pkcs15-tool.c: - fixed typo

2002-11-28 15:58  okir

	* trunk/docs/Makefile.am, trunk/docs/cryptoflex-tool.1,
	  trunk/docs/opensc-config.1, trunk/docs/opensc-explorer.1,
	  trunk/docs/opensc-tool.1, trunk/docs/opensc.7,
	  trunk/docs/pkcs15-profile.5.in, trunk/docs/pkcs15-tool.1: - lots
	  of new manpages from Joe Phillips

2002-11-28 15:44  okir

	* trunk/src/tools/opensc-explorer.c: - Fix from Joe Phillips: fix
	  help message

2002-11-28 15:43  okir

	* trunk/src/tools/opensc-tool.c: - Fix from Joe Phillips: option
	  mismatch in --help message

2002-11-28 15:38  okir

	* trunk/src/tools/pkcs15-tool.c: - Fix from Stef Hoeben for win32

2002-11-27 14:27  okir

	* trunk/src/libopensc/ctx.c: - Fix from Stef Hoeben to get the
	  eid-cache stuff working on win32

2002-11-25 09:03  okir

	* trunk/src/tools/opensc-explorer.c: - --card-driver was mapped to
	  -D, but should have been -c.

2002-11-22 09:10  okir

	* trunk/src/pkcs11/misc.c, trunk/src/pkcs11/pkcs11-global.c,
	  trunk/src/pkcs11/sc-pkcs11.h, trunk/src/pkcs11/slot.c: - in case
	  of an invalid session/object handle, return
	  OBJECT_HANDLE_INVALID or SESSION_HANDLE_INVALID instead of
	  FUNCTION_DAILED

2002-11-22 09:09  okir

	* trunk/src/pkcs11/pkcs11-object.c: - Return correct error codes
	  in GetAttributeValue in case of ATTRIBUTE_TYPE_INVALID and
	  ATTRIBUTE_SENSITIVE

2002-11-22 09:07  okir

	* trunk/src/pkcs11/framework-pkcs15.c: - get_mechanism_list now
	  reports correct number of mechanisms

2002-11-18 09:05  aet

	* trunk/src/libopensc/log.c, trunk/src/libopensc/log.h: Duh,
	  revert previous patch.

2002-11-17 20:26  aet

	* trunk/src/Makefile.mak: Build PKCS#11 module for win32 port.

2002-11-17 20:23  aet

	* trunk/src/libopensc/log.c, trunk/src/libopensc/log.h: Add usage
	  of __FILE__, __LINE__ and __FUNCTION__ macros for non-GCC
	  compilers too, where available. (Based on patch by Stef Hoeben)

2002-11-12 14:32  aet

	* trunk/src/scconf/scconf.c: Merge with dvbsak.sf.net

2002-11-12 11:35  aet

	* trunk/src/scconf/lex-parse.l: Free yy_current_buffer since lex
	  doesn't do it, take 2.

2002-11-12 10:33  aet

	* trunk/src/tests/sc-test.c: add HAVE_GETOPT_H

2002-11-11 22:40  aet

	* trunk/src/tests/Makefile.am: Add @GETOPTSRC@

2002-11-11 22:26  aet

	* trunk/src/scconf/parse.c, trunk/src/scconf/scconf.c,
	  trunk/src/scconf/scconf.h, trunk/src/scconf/test-conf.c: Added
	  new functions: scconf_put_{str,int,bool} scconf_write_entries
	  TODO: - Cleanups, add more sanity checks - Rewrite parts of the
	  API for LDAP support

2002-11-11 14:27  aet

	* trunk/src/scconf/scconf.c: Oops

2002-11-11 14:08  aet

	* trunk/src/scconf/parse.c, trunk/src/scconf/scconf.c,
	  trunk/src/scconf/scconf.h, trunk/src/scconf/test-conf.c,
	  trunk/src/scconf/write.c: Checkpoint commit. Added new
	  functions: scconf_block_{add,copy}
	  scconf_item_{add,copy,destroy} scconf_list_copy

2002-11-11 08:22  fabled

	* trunk/src/include/winconfig.h, trunk/src/libopensc/Makefile.mak:
	  Updated win32 port for recent updates. Noticed by Stef Hoeben.

2002-11-08 14:14  okir

	* trunk/src/libopensc/opensc.h: - added SC_ALGORITHM_NEED_USAGE
	* trunk/src/pkcs15init/pkcs15-lib.c: - handle
	  SC_ALGORITHM_NEED_USAGE flag
	* trunk/src/libopensc/card-etoken.c: - set SC_ALGORITHM_NEED_USAGE
	  flag in algo info

2002-11-08 13:50  okir

	* trunk/src/libopensc/card-gpk.c, trunk/src/libopensc/cardctl.h,
	  trunk/src/pkcs15init/pkcs15-gpk.c: - detect when a GPK card is
	  already personalized

2002-11-08 13:04  okir

	* trunk/README.cards: added
	* trunk/src/libopensc/card-etoken.c: - make sc_get_driver static

2002-11-08 12:10  okir

	* trunk/src/libopensc/card-gpk.c: - GemSafe cards have a directory
	  0200 with an AIDF file in it, and will return a 0x6F file info
	  block when selecting this DF. Try to parse it, as far as we
	  understand it.

2002-11-07 14:48  okir

	* trunk/src/tools/opensc-explorer.c: - fixed segfault in
	  mkdir/create - minor cosmetic change in do_verify

2002-11-05 13:47  okir

	* trunk/src/tests/sc-test.c: - added getopt option parsing (-r
	  reader -c driver -dddd) What's a test app when you can't enable
	  debugging?!

2002-10-20 09:20  aet

	* trunk/src/pkcs15init/pkcs15-etoken.c: Another build fix

2002-10-19 16:51  aet

	* trunk/src/libopensc/card-mcrd.c,
	  trunk/src/libopensc/pkcs15-wrap.c, trunk/src/pam/misc_conv.c,
	  trunk/src/pkcs15init/pkcs15-etoken.c,
	  trunk/src/signer/opensc-crypto.c, trunk/src/signer/signer.c,
	  trunk/src/tests/base64.c, trunk/src/tests/lottery.c,
	  trunk/src/tests/p15dump.c, trunk/src/tests/pintest.c,
	  trunk/src/tests/print.c, trunk/src/tests/prngtest.c,
	  trunk/src/tests/sc-test.c: Various build fixes

2002-10-19 14:04  aet

	* trunk/configure.in, trunk/src/Makefile.am,
	  trunk/src/include/winconfig.h,
	  trunk/src/libopensc/card-default.c, trunk/src/libopensc/log.c,
	  trunk/src/libopensc/module.c,
	  trunk/src/libopensc/pkcs15-cache.c,
	  trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-sec.c,
	  trunk/src/libopensc/reader-pcsc.c, trunk/src/libopensc/sc.c,
	  trunk/src/libopensc/sec.c, trunk/src/pam/misc_conv.c,
	  trunk/src/pam/pam_opensc.c, trunk/src/pam/pam_support.c,
	  trunk/src/pkcs11/rsaref/pkcs11.h, trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/profile.c, trunk/src/scam/p15_eid.c,
	  trunk/src/scam/p15_ldap.c, trunk/src/scldap/scldap.c,
	  trunk/src/scldap/test-ldap.c, trunk/src/scrandom/scrandom.c,
	  trunk/src/tests/lottery.c, trunk/src/tests/prngtest.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/pkcs15-crypt.c,
	  trunk/src/tools/util.h: Cleanups for initial win32 port,
	  untested.

2002-10-02 10:55  okir

	* trunk/src/tools/pkcs15-init.c: - fixed typos in help output

2002-10-02 10:50  okir

	* trunk/src/tools/pkcs15-init.c: - added --reader, --key-usage
	  command line args
	* trunk/src/pkcs15init/pkcs15-etoken.c: - allow to generate/store
	  decryption keys

2002-10-02 10:49  okir

	* trunk/src/libopensc/iso7816.c: - fixed deciphering (apdu.le was
	  not set)

2002-09-30 20:24  okir

	* trunk/src/tools/pkcs15-init.c: - during card initialization,
	  allow to enter SO PIN interactively

2002-09-30 20:03  okir

	* trunk/src/tools/pkcs15-init.c: - when entering new PINs on
	  stdin, make the user re-type the PIN to avoid typos

2002-08-21 10:34  jey

	* trunk/src/libopensc/pkcs15-pin.c: - Also removed the ref variable
	* trunk/src/libopensc/pkcs15-pin.c: - Removed the last goof I made

2002-08-21 10:22  jey

	* trunk/src/libopensc/pkcs15.h: - Fixed prototype for
	  sc_pkcs15_card_new()
	* trunk/src/libopensc/pkcs15-cert.c: - Used cert->key instead of
	  key in parse_x509_cert()

2002-08-21 10:20  jey

	* trunk/src/libopensc/pkcs15-pin.c: - Set bit 8 in key reference,
	  if PIN_FLAG_LOCAL is set

2002-08-21 10:16  jey

	* trunk/src/libopensc/iso7816.c: - Brown paper-bag fix

2002-08-21 10:15  jey

	* trunk/src/libopensc/card-mcrd.c,
	  trunk/src/libopensc/card-tcos.c: - Removed error list

2002-08-21 10:14  jey

	* trunk/src/libopensc/Makefile.am: - Added card-mcrd.c

2002-08-21 10:13  jey

	* trunk/src/libopensc/card-mcrd.c, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/opensc.h: - Added driver for MICARDO 2 cards

2002-08-21 10:06  jey

	* trunk/src/libopensc/iso7816.c: - Added some new error codes to
	  sc_iso7816_check_sw()

2002-08-21 10:02  jey

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/internal.h: -
	  Renamed read_tag to sc_asn1_read_tag and made it a non-static
	  function

2002-08-20 08:59  okir

	* trunk/src/libopensc/card-gpk.c: - Merged GPK patches from Steve
	  Henson (signing fixes) and Joe Phillips (GPK16K ATR matching
	  code).

2002-08-20 08:39  okir

	* trunk/src/tools/opensc-tool.c: - Accessed file->type after
	  freeing file (S. Henson)

2002-08-20 08:28  okir

	* trunk/src/libopensc/card-gpk.c: - GPK16K: wildcard RSA exponent
	  is 0 not -1

2002-08-19 17:13  okir

	* trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/framework-pkcs15init.c,
	  trunk/src/pkcs11/sc-pkcs11.h, trunk/src/pkcs11/slot.c: - put the
	  definition of USE_PKCS15_INIT into a place where it can actually
	  work

2002-08-08 20:53  jey

	* trunk/src/pkcs11/framework-pkcs15init.c,
	  trunk/src/pkcs11/slot.c: - Fixed functionality when pkcs15init
	  is not compiled

2002-08-06 13:51  okir

	* trunk/src/libopensc/pkcs15-cert.c: - certificate version is
	  optional (v1)

2002-07-28 18:22  jey

	* trunk/src/libopensc/card-gpk.c: - Added ATR for GPK16000

2002-07-10 06:28  fabled

	* trunk/src/pkcs11/rsaref/win32.h: - PKCS#11 module definitions;
	  not PKCS#11 application. Removes compiler and linker warnings.

2002-06-20 13:16  fabled

	* trunk/src/pkcs11/Makefile.mak,
	  trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/framework-pkcs15init.c,
	  trunk/src/pkcs11/rsaref/pkcs11.h,
	  trunk/src/pkcs11/rsaref/win32.h, trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/pkcs11/slot.c: - Ported pkcs11 module to win32.

2002-06-20 12:14  fabled

	* trunk/src/common/Makefile.mak, trunk/src/libopensc/Makefile.mak,
	  trunk/src/scconf/Makefile.mak, trunk/win32/Make.rules.mak: -
	  Win32 build fixes. Should work now.

2002-06-20 12:08  fabled

	* trunk/src/common/getpass.c: - Added missing getpass.c for win32
	  compatibility

2002-06-18 18:18  okir

	* trunk/src/pkcs15init/pkcs15-etoken.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c: - implemented generic
	  erase_card functionality
	* trunk/src/pkcs15init/pkcs15-cflex.c: - implemented erase_card

2002-06-18 15:17  okir

	* trunk/src/libopensc/errors.c: - error message fixup

2002-06-18 12:20  okir

	* trunk/src/libopensc/card-gpk.c: - fixed compute_signature for
	  gpk8000

2002-06-17 15:26  okir

	* trunk/src/pkcs15init/pkcs15-gpk.c: - fixed pkcs15init for GPK
	  8000

2002-06-17 15:24  okir

	* trunk/src/libopensc/card-gpk.c, trunk/src/libopensc/cardctl.h: -
	  added cardctl SC_CARDCTL_GPK_VARIANT

2002-06-17 11:18  okir

	* trunk/src/tests/regression/crypt0003,
	  trunk/src/tests/regression/crypt0004,
	  trunk/src/tests/regression/functions: - more tests

2002-06-17 11:17  okir

	* trunk/src/tools/pkcs15-crypt.c: - allow output of signature to
	  stdout

2002-06-17 10:58  okir

	* trunk/src/pkcs15init/etoken.profile,
	  trunk/src/pkcs15init/pkcs15-etoken.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c: - various changes for
	  on-board key generation - key download and key generation for
	  eToken works now

2002-06-17 10:55  okir

	* trunk/src/libopensc/card-etoken.c: - more eToken fixes

2002-06-17 10:54  okir

	* trunk/src/libopensc/pkcs15-sec.c: - RSA padding header for sha1
	  was still broken

2002-06-16 21:19  jey

	* trunk/src/libopensc/card.c: - Renamed sc_transceive_t0 to
	  sc_transceive to avoid confusion =)

2002-06-16 21:18  jey

	* trunk/src/libopensc/pkcs15-sec.c: -
	  sc_pkcs15_compute_signature() and sc_pkcs15_decipher() now
	  select the whole path specified in a private key object

2002-06-14 12:52  fabled

	* trunk/Makefile.mak, trunk/README.Win32, trunk/src/Makefile.am,
	  trunk/src/Makefile.mak, trunk/src/common/Makefile.am,
	  trunk/src/common/Makefile.mak, trunk/src/include/Makefile.mak,
	  trunk/src/include/winconfig.h, trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/Makefile.mak, trunk/src/libopensc/asn1.c,
	  trunk/src/libopensc/card-default.c,
	  trunk/src/libopensc/card-etoken.c,
	  trunk/src/libopensc/card-flex.c,
	  trunk/src/libopensc/card-miocos.c,
	  trunk/src/libopensc/card-tcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/ctx.c, trunk/src/libopensc/log.c,
	  trunk/src/libopensc/log.h, trunk/src/libopensc/module.c,
	  trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15-cache.c,
	  trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-sec.c,
	  trunk/src/libopensc/reader-pcsc.c, trunk/src/libopensc/sc.c,
	  trunk/src/libopensc/sec.c, trunk/src/scconf/Makefile.am,
	  trunk/src/scconf/Makefile.mak, trunk/src/scconf/parse.c,
	  trunk/src/scconf/scconf.c, trunk/src/tests/Makefile.am,
	  trunk/src/tests/pintest.c, trunk/src/tests/sc-test.c,
	  trunk/src/tools/Makefile.am, trunk/src/tools/Makefile.mak,
	  trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/pkcs15-crypt.c,
	  trunk/src/tools/util.h, trunk/win32, trunk/win32/Make.rules.mak,
	  trunk/win32/makedef.pl: - Initial support for win32

2002-06-14 12:29  jey

	* trunk/src/libopensc/iso7816.c: - Fix apdu->le in
	  sc_compute_signature()

2002-06-14 12:18  jey

	* trunk/src/libopensc/pkcs15-sec.c: - Reverted Olaf's patch in
	  sc_compute_signature(). It breaks government issued (e.g.
	  FINEID) cards.

2002-06-14 11:52  jey

	* trunk/etc/opensc.conf.example: - Added template for PC/SC
	  'apdu_fix'

2002-06-14 11:43  jey

	* trunk/src/libopensc/reader-pcsc.c: - Fix for last commit. It now
	  compiles, at least.

2002-06-14 11:33  jey

	* trunk/src/libopensc/reader-pcsc.c: - Preliminary fix for Case 4
	  APDU sending on Win32

2002-06-13 11:20  okir

	* trunk/src/libopensc/pkcs15-sec.c: - added comment/question

2002-06-13 11:18  okir

	* trunk/src/libopensc/iso7816.c: - changed APDU base from 3 to 4
	  on sign/decipher

2002-06-11 18:17  okir

	* trunk/src/tools/opensc-explorer.c: - corrected info output for
	  Linear variable TLV EFs

2002-06-11 18:16  okir

	* trunk/src/tools/pkcs15-init.c: - added switch to force software
	  key generation

2002-06-11 18:15  okir

	* trunk/src/pkcs15init/pkcs15-etoken.c: - more code towards signing

2002-06-11 18:14  okir

	* trunk/src/libopensc/card-etoken.c: - support for security
	  environment create/restore/set - support for signature
	  computation (non functional yet)

2002-06-11 18:13  okir

	* trunk/src/libopensc/cardctl.h: - added support for PUT_SECI
	* trunk/src/libopensc/pkcs15-sec.c: - experimental: support for
	  cards such as eToken that store keys in "objects" below the DF

2002-06-07 20:29  okir

	* trunk/src/pkcs15init/etoken.profile,
	  trunk/src/pkcs15init/pkcs15-etoken.c,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15.profile: - first steps toward eToken
	  key download

2002-06-07 20:28  okir

	* trunk/src/libopensc/card-etoken.c: - properly identify supported
	  algorithms

2002-06-07 20:21  okir

	* trunk/src/tools/pkcs15-crypt.c: - do not try to check PIN if key
	  isn't pin-protected at all

2002-06-06 13:38  jey

	* trunk/src/pkcs15init/pkcs15-lib.c: - Protected OpenSSL includes
	  with #ifdef HAVE_OPENSSL

2002-06-06 09:18  okir

	* trunk/src/pkcs15init/etoken.profile,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c: - started to implement
	  on-token key gen support

2002-06-06 09:17  okir

	* trunk/src/libopensc/card-etoken.c,
	  trunk/src/libopensc/cardctl.h,
	  trunk/src/pkcs15init/pkcs15-etoken.c: - started to implement
	  eToken key generation

2002-06-05 17:51  okir

	* trunk/src/tools/pkcs15-init.c: - fix a few error messages

2002-06-05 15:08  okir

	* trunk/src/pkcs15init/Makefile.am: - install etoken profile, too

2002-06-05 15:02  okir

	* trunk/src/pkcs15init/pkcs15-etoken.c: - implemented --erase for
	  etoken through a recursive remove
	* trunk/src/pkcs15init/etoken.profile: - set ERASE=$SOPIN for AODF

2002-06-05 12:53  okir

	* trunk/src/pkcs15init/pkcs15-etoken.c: - implemented setting of
	  user pins; minor pin code cleanup

2002-06-04 20:11  okir

	* trunk/src/pkcs15init/pkcs15-etoken.c: - p15 PIN entries should
	  now have a valid path

2002-06-04 20:07  okir

	* trunk/src/pkcs15init/etoken.profile: - whoops, forgot to check
	  this in

2002-06-04 20:06  okir

	* trunk/src/pkcs15init/pkcs15-etoken.c: - setting an SO pin works
	  now

2002-06-04 19:43  okir

	* trunk/src/pkcs15init/pkcs15-etoken.c: - first stage of pkcs15
	  initialization sort of functional

2002-06-04 19:42  okir

	* trunk/src/pkcs15init/pkcs15-lib.c: - fixed bad return value in
	  do_init_app
	* trunk/src/libopensc/card-etoken.c: - pin verification works now

2002-06-04 09:38  aet

	* trunk/configure.in: LDAP detection fix, require ldap.h.

2002-06-04 08:51  okir

	* trunk/src/pkcs15init/Makefile.am,
	  trunk/src/pkcs15init/pkcs15-etoken.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c: - added some eToken code (not
	  functional yet)

2002-06-04 08:50  okir

	* trunk/src/libopensc/cardctl.h: - added eToken specific cardctls
	* trunk/src/libopensc/card-etoken.c: - fixed some minor glitches
	  (potential buffer overflow in read_dir; missing SW check) -
	  added card_ctl for put_data_fci - added some debug output

2002-06-03 15:28  aet

	* trunk/src/pkcs11/sc-pkcs11.h: Fix for previous commit

2002-06-03 15:18  aet

	* trunk/src/libopensc/reader-pcsc.c,
	  trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/framework-pkcs15init.c,
	  trunk/src/pkcs11/misc.c, trunk/src/pkcs11/pkcs11-object.c,
	  trunk/src/pkcs11/pkcs11-session.c, trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/pkcs11/secretkey.c: Preliminary MacOS X build support,
	  untested so far.

2002-06-03 15:05  jey

	* trunk/src/libopensc/card-miocos.c,
	  trunk/src/libopensc/card-setcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/iso7816.c, trunk/src/libopensc/log.c: -
	  iso7816_set_security_env now has correct values for P1 -
	  Improved detection of SetCOS cards - Changed the default CLA
	  byte in card-setcos.c to 0x80

2002-06-02 21:43  jey

	* trunk/NEWS, trunk/README, trunk/TODO, trunk/configure.in: -
	  Preparation for version 0.7.0

2002-06-02 21:39  okir

	* trunk/src/libopensc/card-etoken.c: - do our own chunking in
	  read/write binary

2002-06-02 21:04  aet

	* trunk/src/openssh/README: Upgrade for the OpenSSH 3.2.x release

2002-06-02 20:46  aet

	* trunk/src/scam/scam.c: Disable pkcs15-ldap until it's working.

2002-05-27 10:03  aet

	* trunk/src/pam/Makefile.am, trunk/src/scam/p15_eid.c,
	  trunk/src/scam/p15_ldap.c, trunk/src/scam/scam.c: Minor build
	  fixes

2002-05-27 06:41  aet

	* trunk/src/libopensc/asn1.c: Build fix for previous commit

2002-05-26 12:31  jey

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-pubkey.c,
	  trunk/src/libopensc/pkcs15.c,
	  trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/tools/pkcs15-crypt.c: - Several patches to fix
	  behaviour on 64-bit architectures (by Jochen Friedrich) - Fixed
	  one bug in sc_copy_asn1_entry(), one in
	  sc_pkcs15init_add_object() and one in pkcs15-crypt (patches also
	  by Jochen)

2002-05-21 19:41  jey

	* trunk/src/pkcs15init/profile.c: - Fixed parsing of AUT keys in
	  pkcs15init (patch by Jochen Friedrich <jochen@scram.de>)

2002-05-21 14:19  aet

	* trunk/configure.in: scidi merge

2002-05-20 09:19  aet

	* trunk/src/libopensc/base64.c, trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/profile.c, trunk/src/scconf/parse.c,
	  trunk/src/scconf/scconf.c, trunk/src/scldap/scldap.c,
	  trunk/src/signer/npinclude/npapi.h, trunk/src/tools/util.h:
	  Minor GCC warning fixes

2002-05-19 22:50  aet

	* trunk/aclocal/acx_pthread.m4: AIX gcc fix

2002-05-14 19:20  aet

	* trunk/configure.in: check readline.h fix

2002-05-13 12:23  aet

	* trunk/src/scrandom/scrandom.h: Add comments
	* trunk/src/libopensc/card-tcos.c: Warning fixes

2002-05-09 10:34  jey

	* trunk/src/libopensc/card-tcos.c, trunk/src/libopensc/cardctl.h,
	  trunk/src/libopensc/pkcs15-pin.c: - Applied a patch by Werner
	  Koch that brings the TCOS driver up-to-speed

2002-05-09 10:22  jey

	* trunk/src/libopensc/card-default.c,
	  trunk/src/libopensc/card-flex.c, trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/card-tcos.c, trunk/src/libopensc/card.c: -
	  Applied a patch by Matthias Bruestle <m@mbsks.franken.de>: -
	  Changed the case of GET RESPONSE in card-default.c to 2 short -
	  Added ATRs to Flex, GPK and TCOS drivers - Changed value of
	  maximum Lc in card.c to be 255

2002-05-08 08:15  aet

	* trunk/src/scrandom/scrandom.c: More cleanups

2002-05-08 07:04  aet

	* trunk/docs, trunk/docs/.cvsignore: Add pkcs15-profile.5

2002-05-08 06:50  aet

	* trunk/configure.in, trunk/docs/Makefile.am,
	  trunk/docs/pkcs15-profile.5, trunk/docs/pkcs15-profile.5.in:
	  pkcs15-profile.5 $(pkgdatadir) fix

2002-05-07 12:49  aet

	* trunk/src/pam/Makefile.am, trunk/src/pkcs11/Makefile.am,
	  trunk/src/sia/Makefile.am: Minor ${prefix} -> ${exec_prefix}
	  changes

2002-05-07 09:35  aet

	* trunk/src/openssh/Makefile.am, trunk/src/openssh/README,
	  trunk/src/openssh/opensc-ssh.c: Removed opensc-ssh Updated README

2002-05-06 14:06  aet

	* trunk/src/scldap/scldap.c: Add comments for previous fix

2002-05-06 06:36  aet

	* trunk/configure.in, trunk/src/scam/Makefile.am,
	  trunk/src/scam/p15_eid.c, trunk/src/scam/p15_ldap.c,
	  trunk/src/scrandom/Makefile.am, trunk/src/scrandom/scrandom.c:
	  Reworked scrandom ugliness, no longer builds a shared library
	  nor seeds OpenSSL internally, if available.

2002-04-30 13:35  okir

	* trunk/aclocal/libtool.m4: - another linux-gnu* => linux* fix

2002-04-30 11:55  okir

	* trunk/aclocal/libtool.m4: - make it compile on SuSE 8.0

2002-04-30 09:46  okir

	* trunk/src/pam/Makefile.am: - work around brain damage in
	  automake 1.6.1 (shouldn't they change the name to autobreak?)

2002-04-26 07:56  aet

	* trunk/src/scldap/scldap.c: Disable a sanity check that was
	  needed at least with OpenLDAP 1.2.x, it seems to block
	  certificate CRL fetches with more recent versions of OpenLDAP
	  (2.x)

2002-04-26 06:35  aet

	* trunk/configure.in: Fix SSL/TLS support for OpenLDAP

2002-04-23 09:17  aet

	* trunk/src/signer/opensc-crypto.c: API upgrade

2002-04-23 08:18  okir

	* trunk/src/tests/regression, trunk/src/tests/regression/README,
	  trunk/src/tests/regression/crypt0001,
	  trunk/src/tests/regression/crypt0002,
	  trunk/src/tests/regression/functions: - added two regression
	  test scripts

2002-04-23 08:17  okir

	* trunk/src/libopensc/errors.h, trunk/src/libopensc/pkcs15-sec.c,
	  trunk/src/libopensc/pkcs15.h,
	  trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/tools/pkcs15-crypt.c: - sc_pkcs15_decipher now takes a
	  flags argument, so we know when to strip off any pkcs#1 padding.

2002-04-22 23:01  jey

	* trunk/src/libopensc/card-etoken.c: - Applied a patch to
	  card-etoken.c that gives ACL support; patch by Markus Frield

2002-04-22 18:37  okir

	* trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/tools/pkcs15-init.c: - allow setting the cert_info
	  authority flag

2002-04-22 18:03  okir

	* trunk/src/libopensc/pkcs15-sec.c: - fixed pkcs1 padding for
	  rsa-md5 signatures

2002-04-22 08:00  okir

	* trunk/src/pkcs15init/pkcs15-lib.c: - changed do_select_parent
	  per request from Juha. Hope this doesn't break anything... :)

2002-04-21 18:54  aet

	* trunk/src/libopensc/pkcs15-cert.c, trunk/src/libopensc/pkcs15.h:
	  Extract certificate crlDistributionPoints and store it in
	  sc_pkcs15_cert

2002-04-19 20:07  jey

	* trunk/TODO, trunk/etc/opensc.conf.example,
	  trunk/src/libopensc/ctx.c: - Added 'force_card_driver' option

2002-04-19 18:01  jey

	* trunk/src/pkcs15init/miocos.profile,
	  trunk/src/pkcs15init/pkcs15-miocos.c: - Small update to MioCOS
	  pkcs15init driver

2002-04-19 17:24  jey

	* trunk/TODO: - Update TODO

2002-04-19 17:02  jey

	* trunk/src/libopensc/card-miocos.c,
	  trunk/src/pkcs15init/miocos.profile,
	  trunk/src/pkcs15init/pkcs15-miocos.c: - Some fixes to the MioCOS
	  driver
	* trunk/src/pkcs15init/flex.profile,
	  trunk/src/pkcs15init/pkcs15-cflex.c: - Added support for
	  extractable keys on the Cryptoflex

2002-04-19 14:23  aet

	* trunk/configure.in, trunk/src/libopensc/asn1.c,
	  trunk/src/libopensc/asn1.h, trunk/src/libopensc/base64.c,
	  trunk/src/libopensc/card-etoken.c,
	  trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/card-miocos.c,
	  trunk/src/libopensc/card-setcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/cardctl.h, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/dir.c, trunk/src/libopensc/emv.h,
	  trunk/src/libopensc/errors.h, trunk/src/libopensc/internal.h,
	  trunk/src/libopensc/iso7816.c, trunk/src/libopensc/log.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-algo.c,
	  trunk/src/libopensc/pkcs15-cache.c,
	  trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-pubkey.c,
	  trunk/src/libopensc/pkcs15-sec.c,
	  trunk/src/libopensc/pkcs15-wrap.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/pkcs15.h,
	  trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/libopensc/reader-pcsc.c, trunk/src/libopensc/sc.c,
	  trunk/src/libopensc/types.h, trunk/src/openssh/opensc-ssh.c,
	  trunk/src/pam/pam_opensc.c, trunk/src/pam/pam_support.c,
	  trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/pkcs11-global.c,
	  trunk/src/pkcs11/pkcs11-object.c, trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/pkcs11/secretkey.c,
	  trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/profile.h, trunk/src/scam,
	  trunk/src/scam/.cvsignore, trunk/src/scam/p15_eid.c,
	  trunk/src/scam/p15_ldap.c, trunk/src/scconf/parse.c,
	  trunk/src/scconf/scconf.c, trunk/src/scconf/write.c,
	  trunk/src/scldap/scldap.c, trunk/src/scldap/test-ldap.c,
	  trunk/src/scrandom/scrandom.c, trunk/src/scrandom/test-random.c,
	  trunk/src/signer/dialog.c, trunk/src/signer/opensc-crypto.c,
	  trunk/src/signer/opensc-support.c, trunk/src/signer/signer.c,
	  trunk/src/tests/p15dump.c, trunk/src/tests/print.c,
	  trunk/src/tests/sc-test.c, trunk/src/tests/sc-test.h,
	  trunk/src/tools/cryptoflex-tool.c,
	  trunk/src/tools/pkcs15-crypt.c, trunk/src/tools/pkcs15-init.c,
	  trunk/src/tools/pkcs15-tool.c, trunk/src/tools/util.c,
	  trunk/src/tools/util.h: - C++ support. Compiles with gcc/g++ for
	  Linux, otherwise completely untested.

2002-04-19 10:01  okir

	* trunk/src/pkcs15init/pkcs15-lib.c: - fixed DF handling

2002-04-19 09:22  jey

	* trunk/TODO, trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-pubkey.c,
	  trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/tools/cryptoflex-tool.c,
	  trunk/src/tools/pkcs15-tool.c: - PKCS #15 objects and DFs are
	  now stored with linked lists in struct sc_pkcs15_card; this way
	  we can have 'floating' objects that don't belong in any DF, for
	  e.g. generating public key objects from certificates - Removed
	  some unused function prototypes

2002-04-18 15:01  jey

	* trunk/src/libopensc/pkcs15.c: - sc_pkcs15_find_prkey_by_id and
	  sc_pkcs15_find_cert_by_id now return all private keys and
	  certificates instead of only RSA keys and X.509 certificates -
	  Removed some obsolete PKCS #15 initialization code

2002-04-18 14:59  jey

	* trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-pubkey.c: - Added a missing
	  SC_ASN1_CTX flag to DSA key ASN.1 entries

2002-04-18 11:59  aet

	* trunk/src/tools/pkcs15-crypt.c: Minor warning fixes

2002-04-18 11:00  okir

	* trunk/src/tools/pkcs15-crypt.c: - DSA signature support

2002-04-18 10:59  okir

	* trunk/src/libopensc/pkcs15.h: - added a bunch of prototypes
	* trunk/src/libopensc/pkcs15.c: - sc_pkcs15_find_pubkey_by_id

2002-04-18 10:58  okir

	* trunk/src/libopensc/pkcs15-pubkey.c: - fixed bug with DSA pubkey
	  de/encoding
	* trunk/src/libopensc/pkcs15-prkey.c: - small fix for reading the
	  private key file - added sc_pkcs15_{erase,free}_prkey

2002-04-18 09:13  okir

	* trunk/src/tests/print.c: - don't print modulus length for DSA
	  keys

2002-04-18 09:12  okir

	* trunk/src/tools/pkcs15-init.c: - fix for storing DSA public keys
	* trunk/src/pkcs15init/pkcs15-lib.c: - bug in
	  check_key_compatibility()

2002-04-18 09:11  okir

	* trunk/src/libopensc/pkcs15-wrap.c: - encryptedContent didn't
	  have proper ASN.1

2002-04-18 09:10  okir

	* trunk/src/libopensc/pkcs15-pubkey.c: - properly encode/decode
	  DSA public keys
	* trunk/src/libopensc/pkcs15-algo.c: - fix algorithm_id decoding

2002-04-17 20:47  okir

	* trunk/src/pkcs15init/gpk.profile,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/tools/pkcs15-init.c: - starting to support extractable
	  keys

2002-04-17 20:46  okir

	* trunk/src/tests/p15dump.c, trunk/src/tests/print.c: - display
	  non-RSA keys

2002-04-17 20:45  okir

	* trunk/src/libopensc/pkcs15.h: - missing prototypes for
	  {de,en}code_prkey

2002-04-17 20:44  okir

	* trunk/src/libopensc/pkcs15.c: - return objects when searching
	  for a generic type (e.g. all PRKEY objects)
	* trunk/src/libopensc/pkcs15-wrap.c: - correctly initialize PKCDF2
	  params
	* trunk/src/libopensc/pkcs15-prkey.c: - fixes for PrKDF
	  encoding/decoding for indirect-protected

2002-04-17 20:43  okir

	* trunk/src/libopensc/asn1.c: - fix for decoding CHOICE

2002-04-17 20:42  okir

	* trunk/src/libopensc/errors.h: - new error code
	  SC_ERROR_INCOMPATIBLE_KEY

2002-04-17 18:34  okir

	* trunk/src/pkcs11/framework-pkcs15.c: - handle non-RSA keys as
	  well

2002-04-17 18:33  okir

	* trunk/src/libopensc/pkcs15-pubkey.c,
	  trunk/src/libopensc/pkcs15.h: - eliminated RSA specific code to
	  support generic pubkeys instead

2002-04-17 18:32  okir

	* trunk/src/libopensc/pkcs15-cert.c: - use SC_ASN1_ALGORITHM_ID
	  when decoding x509 certs - handle certificates with non-RSA keys
	  as well

2002-04-17 13:36  okir

	* trunk/src/libopensc/card-etoken.c,
	  trunk/src/libopensc/iso7816.c, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/sc.c, trunk/src/libopensc/types.h: - eToken
	  patches from Markus Friedl

2002-04-17 13:34  okir

	* trunk/src/libopensc/pkcs15-wrap.c: - some fixes to the ASN.1 we
	  generate

2002-04-17 13:13  aet

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/pkcs15-wrap.c:
	  Minor warning fixes

2002-04-17 12:20  okir

	* trunk/src/tools/pkcs15-tool.c: - --read-public-key will work for
	  non-rsa keys too

2002-04-17 12:19  okir

	* trunk/src/libopensc/asn1.c: - support NULL tag for
	  encoding/decoding
	* trunk/src/libopensc/pkcs15-algo.c: - correctly encode
	  AlgorithmIdentifier w/o params as OID+NULL

2002-04-17 10:33  okir

	* trunk/src/libopensc/pkcs15-algo.c: - minor bugfix

2002-04-17 09:06  okir

	* trunk/src/libopensc/pkcs15-sec.c: - error out for non-native keys
	* trunk/src/libopensc/errors.h: - new error code
	  SC_ERROR_EXTRACTABLE_KEY

2002-04-17 09:01  okir

	* trunk/src/libopensc/Makefile.am: - added new files
	* trunk/src/libopensc/pkcs15-wrap.c: - functions for file content
	  protection
	* trunk/src/libopensc/types.h: - new file path type
	  SC_PATH_TYPE_PATH_PROT

2002-04-17 09:00  okir

	* trunk/src/libopensc/pkcs15.h: - new generic function
	  sc_pkcs15_read_file - structs and functions for data wrap/unwrap
	* trunk/src/libopensc/pkcs15.c: - new generic function
	  sc_pkcs15_read_file

2002-04-17 08:59  okir

	* trunk/src/libopensc/pkcs15-pubkey.c: - renamed
	  sc_pkcs15_parse_pubkey_rsa -> sc_pkcs15_decode_pubkey_rsa -
	  added sc_pkcs15_decode_pubkey_dsa - sc_pkcs15_read_pubkey now
	  uses sc_pkcs15_read_file

2002-04-17 08:58  okir

	* trunk/src/libopensc/pkcs15-prkey.c: - initial support for
	  non-native keys - implemented generic functions
	  sc_pkcs15_{encode,decode,read}_prkey

2002-04-17 08:57  okir

	* trunk/src/libopensc/pkcs15-cert.c: - renamed
	  sc_pkcs15_parse_pubkey_rsa -> sc_pkcs15_decode_pubkey_rsa

2002-04-17 08:56  okir

	* trunk/src/libopensc/opensc.h: - added
	  SC_ALGORITHM_{MD5,SHA1,PBKDF2,PBES2} and corresponding
	  AlgorithmIdentifier parameter structs - added params pointer to
	  struct sc_algorithm_id

2002-04-17 08:55  okir

	* trunk/src/libopensc/errors.h: - new error code
	  SC_ERROR_PASSPHRASE_REQUIRED
	* trunk/src/libopensc/pkcs15-algo.c: - Moved ASN.1 handling of
	  AlgorithmIdentifier to separate file

2002-04-17 08:54  okir

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/asn1.h: -
	  implemented encoding of OBJECT IDENTIFIER - enhanced support for
	  encoding/decoding of CHOICE - moved encoding/decoding of
	  AlgorithmIdentifier to separate file, and added
	  encoding/decoding of algorithm parameters

2002-04-16 10:33  aet

	* trunk/src/scldap/scldap.c: Minor Solaris fixes

2002-04-15 18:03  aet

	* trunk/src/pkcs15init/pkcs15-gpk.c: Add stdlib.h

2002-04-15 13:42  okir

	* trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-pubkey.c,
	  trunk/src/libopensc/pkcs15.h, trunk/src/pkcs11/Makefile.am,
	  trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/framework-pkcs15init.c,
	  trunk/src/pkcs11/sc-pkcs11.h, trunk/src/pkcs11/slot.c,
	  trunk/src/pkcs15init/Makefile.am,
	  trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-miocos.c,
	  trunk/src/pkcs15init/profile.c, trunk/src/pkcs15init/profile.h,
	  trunk/src/tools/pkcs15-init.c, trunk/src/tools/pkcs15-tool.c: -
	  pkcs15-init does not require openssl anymore

2002-04-14 13:52  aet

	* trunk/src/openssh/opensc-ssh.c,
	  trunk/src/signer/opensc-crypto.c: libsc -> opensc

2002-04-14 12:43  jey

	* trunk/src/libopensc/card-miocos.c: - Fixed ACL handling in
	  MioCOS driver

2002-04-13 19:00  okir

	* trunk/src/pkcs11/framework-pkcs15.c, trunk/src/pkcs11/misc.c: -
	  C_CreateObject now understands X509 certs (untested)

2002-04-11 15:53  okir

	* trunk/src/pkcs11/framework-pkcs15.c: - minor fix

2002-04-11 15:17  okir

	* trunk/src/pkcs11/framework-pkcs15.c, trunk/src/pkcs11/misc.c,
	  trunk/src/pkcs11/pkcs11-object.c, trunk/src/pkcs11/sc-pkcs11.h:
	  - implemented C_CreateObject for public and private key objects

2002-04-11 15:14  okir

	* trunk/src/tools/pkcs15-init.c: - changed to reflext
	  pkcs15init_store_foobar update
	* trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c: - all
	  sc_pkcs15init_store_foobar functions now take an additional
	  struct sc_pkcs15_object ** argument

2002-04-11 15:13  okir

	* trunk/src/libopensc/pkcs15-sec.c: - avoid unchecked memcpy

2002-04-11 15:12  okir

	* trunk/src/libopensc/card-gpk.c: - in set_security_env, select
	  the PK file prior to read_record

2002-04-11 14:31  aet

	* trunk/src/openssh/Makefile.am: Remove openssh-3.0.2p1-patch.diff

2002-04-10 23:10  jey

	* trunk/src/libopensc/card-etoken.c: - Added a missing file from a
	  previous commit

2002-04-10 23:00  jey

	* trunk/src/libopensc/iso7816.c: - Changed an error code as per
	  Andreas' suggestion

2002-04-10 22:25  jey

	* trunk/src/libopensc/Makefile.am, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/opensc.h: - Added support for Aladdin eToken
	  PRO; patch by Andreas Jellinghaus <aj@dungeon.inka.de>

2002-04-09 13:26  aet

	* trunk/src/scam/scam.c, trunk/src/scam/scam.h: Minor cleanups

2002-04-09 12:32  aet

	* trunk/src/openssh/README,
	  trunk/src/openssh/openssh-3.0.2p1-patch.diff: - Update ChangeLog
	  - Update src/openssh/README - Removed obsolete patch for
	  openssh-3.0.2p1

2002-04-09 12:20  aet

	* trunk/src/openssh/opensc-ssh.c: sc-ssh -> opensc-ssh

2002-04-09 11:34  aet

	* trunk/src/scldap/scldap.c: Free memory

2002-04-09 11:24  aet

	* trunk/src/scconf/lex-parse.l: - Revert previous patch since it
	  leads to a sigsegv if we parse file multiple times. Damn it, so
	  lex allocates a 16kB buffer that it won't free any time. At
	  least this could be solved some other time by rewriting a
	  separate line parser without lex.

2002-04-09 11:01  aet

	* trunk/src/scconf/lex-parse.l: Free yy_current_buffer since lex
	  doesn't do it

2002-04-09 10:59  jey

	* trunk/src/scam/scam.c: - Added a missing include file

2002-04-08 15:51  okir

	* trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/framework-pkcs15init.c,
	  trunk/src/pkcs11/pkcs11-global.c,
	  trunk/src/pkcs11/pkcs11-session.c, trunk/src/pkcs11/sc-pkcs11.h:
	  - implemented C_InitPIN (based on pkcs15init) - C_Login now
	  understands the SO PIN.

2002-04-08 15:50  okir

	* trunk/src/pkcs15init/profile.h: - cleanup
	* trunk/src/pkcs15init/profile.c: - free some more memory in
	  sc_profile_free

2002-04-08 15:49  okir

	* trunk/src/pkcs15init/pkcs15-lib.c: - SO PIN is now optionally:
	  if you want to use it, pass a PIN to sc_pkcs15init_add_app. If
	  you don't, don't. - sc_pkcs15init_erase_card checks whether the
	  erase_card funcion ptr is NULL - check SO pin len in
	  sc_pkcs15init_add_app - In sc_pkcs15init_store_pin, if the
	  caller didn't specify the auth_id, select one automatically -
	  added sc_pkcs15init_unbind

2002-04-08 15:46  okir

	* trunk/src/pkcs15init/pkcs15-init.h: - added sc_pkcs15init_unbind
	* trunk/src/pkcs15init/pkcs15-gpk.c: - SO PIN path was not
	  propagated to the caller

2002-04-08 15:45  okir

	* trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h: -
	  implemented sc_pkcs15_find_so_pin
	* trunk/src/libopensc/card-gpk.c: - When the application selected
	  the EF, then the container DF, all PIN info would be lost.

2002-04-08 14:57  aet

	* trunk/src/scam/p15_eid.c, trunk/src/scam/p15_ldap.c,
	  trunk/src/scam/scam.h: Remove scam_framework_ops->atrs

2002-04-08 09:29  okir

	* trunk/src/pkcs15init/pkcs15-lib.c: - store SO PIN entry in AODF
	* trunk/src/pkcs15init/profile.c, trunk/src/pkcs15init/profile.h:
	  - textual pin flags; defer pin file lookup until
	  sc_profile_finish

2002-04-08 09:28  okir

	* trunk/src/pkcs15init/pkcs15-gpk.c: - implemented SO PIN handling
	* trunk/src/pkcs15init/gpk.profile: - enable SO PIN

2002-04-08 09:27  okir

	* trunk/src/pkcs15init/pkcs15.profile: - add pin descriptions

2002-04-08 09:23  okir

	* trunk/src/libopensc/pkcs15-pin.c: - pin flags were not encoded
	  correctly

2002-04-08 08:27  aet

	* trunk/src/pam/pam_opensc.c, trunk/src/scam/p15_eid.c,
	  trunk/src/scam/p15_ldap.c, trunk/src/scam/scam.c,
	  trunk/src/scam/scam.h, trunk/src/sia/sia_opensc.c: - Upgrade all
	  modules to store method specific internal data to
	  scam_context->method_data

2002-04-07 19:36  aet

	* trunk/src/pam/Makefile.am, trunk/src/pam/pam_opensc.c,
	  trunk/src/pam/pam_support.c, trunk/src/pam/pam_support.h,
	  trunk/src/scam/Makefile.am, trunk/src/scam/p15_eid.c,
	  trunk/src/scam/p15_ldap.c, trunk/src/scam/scam.c,
	  trunk/src/scam/scam.h, trunk/src/sia/Makefile.am,
	  trunk/src/sia/sia_opensc.c: Started to rewrite parts of scam: -
	  Combine lib{pam,sia}scam into libscam - Get rid of the need for
	  handles, printmsg and logmsg in the scam_framework_ops structure.

2002-04-07 13:15  jey

	* trunk/src/pkcs15init/flex.profile,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/profile.c, trunk/src/tools/pkcs15-init.c: -
	  Added support for user-defined serial numbers in pkcs15-init and
	  PIN flags in profiles

2002-04-07 10:21  aet

	* trunk/src/libopensc/errors.c: Warning fixes

2002-04-06 15:04  jey

	* trunk/src/libopensc/card-miocos.c: - Changed CLA byte to 0xA0 in
	  miocos_delete_file()

2002-04-06 14:52  jey

	* trunk/src/pkcs15init/pkcs15-lib.c: - Added user PIN finding to
	  sc_pkcs15init_store_certificate()

2002-04-06 14:21  jey

	* trunk/src/pkcs15init/flex.profile,
	  trunk/src/pkcs15init/miocos.profile: - Added certificate
	  templates

2002-04-06 12:14  jey

	* trunk/docs/Makefile.am, trunk/docs/pkcs-15v1_1.asn: - Added PCKS
	  #15 ASN.1 module

2002-04-06 12:02  jey

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/card-flex.c, trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/card.c, trunk/src/libopensc/errors.c,
	  trunk/src/libopensc/errors.h, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/reader-pcsc.c, trunk/src/libopensc/sc.c,
	  trunk/src/libopensc/types.h, trunk/src/pkcs11/misc.c: - Divided
	  errors into different groups, added new ones and renamed some -
	  Moved sc_strerror() to errors.c - Added a 'sensitive' flag to
	  struct sc_apdu

2002-04-06 08:21  aet

	* trunk/src/libopensc/emv.h, trunk/src/libopensc/log.h: Fix some
	  typos

2002-04-06 08:02  aet

	* trunk/src/libopensc/Makefile.am: Add errors.h and types.h

2002-04-05 18:49  okir

	* trunk/src/tools/opensc-explorer.c: - include/opensc fix

2002-04-05 18:19  okir

	* trunk/src/pkcs11/framework-pkcs15init.c: - C_InitToken: after
	  creating the application DF, switch to the normal pkcs15
	  framework on the fly and mark all tokens as initialized.

2002-04-05 18:10  aet

	* trunk/src/libopensc/internal.h, trunk/src/libopensc/module.c,
	  trunk/src/libopensc/reader-ctapi.c: Change calling convention
	  for sc_module_close()

2002-04-05 15:51  aet

	* trunk/src/pkcs11/framework-pkcs15init.c,
	  trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-miocos.c: Minor warning fixes

2002-04-05 15:06  jey

	* trunk/src/include/opensc/Makefile.am,
	  trunk/src/libopensc/errors.h, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/types.h: - Started to split opensc.h into
	  smaller parts

2002-04-05 15:04  okir

	* trunk/src/tools/opensc-explorer.c: - added erase command

2002-04-05 15:03  okir

	* trunk/src/pkcs11/Makefile.am,
	  trunk/src/pkcs11/framework-pkcs15init.c,
	  trunk/src/pkcs11/slot.c: - added new pkcs15init framework that
	  implements C_InitToken

2002-04-05 15:02  okir

	* trunk/src/pkcs11/sc-pkcs11.h: - added initialize() function to
	  card ops vector
	* trunk/src/pkcs11/pkcs11-global.c: - Added C_Initialize - Minor
	  bugfix in C_Finalize

2002-04-05 15:01  okir

	* trunk/src/pkcs11/framework-pkcs15.c: - add CKF_TOKEN_INITIALIZED
	  flag

2002-04-05 14:56  okir

	* trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c: - implemented
	  sc_pkcs15init_get_{serial,amnufacturer}, fixed bug

2002-04-05 14:55  okir

	* trunk/src/pkcs15init/profile.c: - try to free all memory we
	  allocated
	* trunk/src/pkcs15init/pkcs15-gpk.c: - during add_app, just
	  complain about SO PINs but don't error out

2002-04-05 14:46  jey

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/asn1.h,
	  trunk/src/libopensc/base64.c,
	  trunk/src/libopensc/card-default.c,
	  trunk/src/libopensc/card-emv.c, trunk/src/libopensc/card-flex.c,
	  trunk/src/libopensc/card-miocos.c,
	  trunk/src/libopensc/card-setcos.c,
	  trunk/src/libopensc/card-tcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/ctx.c, trunk/src/libopensc/dir.c,
	  trunk/src/libopensc/emv.c, trunk/src/libopensc/emv.h,
	  trunk/src/libopensc/internal.h, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/log.c, trunk/src/libopensc/log.h,
	  trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15-cache.c,
	  trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-sec.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/pkcs15.h,
	  trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/libopensc/reader-pcsc.c, trunk/src/libopensc/sc.c,
	  trunk/src/libopensc/sec.c: - Added SC_ERROR_FILE_ALREADY_EXISTS
	  - Changed call convention for reader finish() - CT-API driver
	  now frees its resources correctly - Added year 2002 to some of
	  the copyright statements - sc_pkcs15_decipher() and
	  sc_pkcs15_compute_signature() now select only the parent DF of
	  the private key file

2002-04-05 14:23  aet

	* trunk/src/include/opensc/Makefile.am: Symlink all necessary
	  headers

2002-04-05 14:00  jey

	* trunk/src/pkcs15init/pkcs15-lib.c: - Fixed a bug in
	  sc_pkcs15init_bind() - Added PIN code padding in do_verify_pin()

2002-04-05 13:49  aet

	* trunk/src/Makefile.am: Add missing directory

2002-04-05 13:48  aet

	* trunk/configure.in, trunk/src/include,
	  trunk/src/include/.cvsignore, trunk/src/include/Makefile.am,
	  trunk/src/include/opensc, trunk/src/include/opensc/.cvsignore,
	  trunk/src/include/opensc/Makefile.am,
	  trunk/src/libopensc/asn1.h, trunk/src/libopensc/emv.c,
	  trunk/src/libopensc/emv.h, trunk/src/libopensc/log.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15.h,
	  trunk/src/openssh/opensc-ssh.c,
	  trunk/src/openssh/openssh-3.0.2p1-patch.diff,
	  trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-miocos.c,
	  trunk/src/pkcs15init/profile.c, trunk/src/pkcs15init/profile.h,
	  trunk/src/scam/Makefile.am, trunk/src/scam/p15_eid.c,
	  trunk/src/scam/p15_ldap.c, trunk/src/scam/scam.c,
	  trunk/src/scldap/scldap.h, trunk/src/scldap/test-ldap.c,
	  trunk/src/signer/opensc-crypto.h, trunk/src/signer/signer.h,
	  trunk/src/tests/base64.c, trunk/src/tests/lottery.c,
	  trunk/src/tests/p15dump.c, trunk/src/tests/pintest.c,
	  trunk/src/tests/print.c, trunk/src/tests/prngtest.c,
	  trunk/src/tests/sc-test.c, trunk/src/tools/Makefile.am,
	  trunk/src/tools/cryptoflex-tool.c,
	  trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/pkcs15-crypt.c,
	  trunk/src/tools/pkcs15-init.c, trunk/src/tools/pkcs15-tool.c,
	  trunk/src/tools/util.h: Rework the header structure Currently
	  fails to compile, unless you symlink all the necessary headers
	  to src/include/opensc by yourself.

2002-04-05 10:44  aet

	* trunk/src/libopensc/Makefile.am, trunk/src/libopensc/asn1.c,
	  trunk/src/libopensc/asn1.h, trunk/src/libopensc/base64.c,
	  trunk/src/libopensc/card-default.c,
	  trunk/src/libopensc/card-emv.c, trunk/src/libopensc/card-flex.c,
	  trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/card-miocos.c,
	  trunk/src/libopensc/card-setcos.c,
	  trunk/src/libopensc/card-tcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/ctx.c, trunk/src/libopensc/dir.c,
	  trunk/src/libopensc/emv.c, trunk/src/libopensc/internal.h,
	  trunk/src/libopensc/iso7816.c, trunk/src/libopensc/log.c,
	  trunk/src/libopensc/log.h, trunk/src/libopensc/module.c,
	  trunk/src/libopensc/pkcs15-cache.c,
	  trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-pubkey.c,
	  trunk/src/libopensc/pkcs15-sec.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/pkcs15.h,
	  trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/libopensc/reader-pcsc.c, trunk/src/libopensc/sc.c,
	  trunk/src/libopensc/sec.c, trunk/src/openssh/opensc-ssh.c,
	  trunk/src/openssh/openssh-3.0.2p1-patch.diff,
	  trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/profile.h, trunk/src/scam/p15_eid.c,
	  trunk/src/scam/p15_ldap.c, trunk/src/signer/opensc-crypto.h,
	  trunk/src/signer/signer.h, trunk/src/tests/base64.c,
	  trunk/src/tests/p15dump.c, trunk/src/tests/pintest.c,
	  trunk/src/tests/print.c, trunk/src/tools/cryptoflex-tool.c,
	  trunk/src/tools/pkcs15-crypt.c, trunk/src/tools/pkcs15-init.c,
	  trunk/src/tools/pkcs15-tool.c: Upgrade sources to use new
	  headers, part #1

2002-04-05 10:37  aet

	* trunk/src/libopensc/opensc-emv.h,
	  trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/sc-asn1.h,
	  trunk/src/libopensc/sc-internal.h, trunk/src/libopensc/sc-log.h:
	  Obsolete. opensc-emv.h, opensc-pkcs15.h --> emv.h, pkcs15.h
	  sc-asn1.h, sc-internal.h, sc-log.h --> asn1.h, internal.h, log.h

2002-04-05 10:25  aet

	* trunk/src/libopensc/Makefile.am, trunk/src/pam/Makefile.am,
	  trunk/src/pkcs11/Makefile.am, trunk/src/pkcs15init/Makefile.am,
	  trunk/src/scconf/Makefile.am, trunk/src/scldap/Makefile.am,
	  trunk/src/scrandom/Makefile.am, trunk/src/sia/Makefile.am,
	  trunk/src/signer/Makefile.am: Install headers to
	  ${prefix}/include/opensc

2002-04-05 10:06  okir

	* trunk/src/tools/pkcs15-init.c: - don't include profile.h anymore

2002-04-05 10:05  okir

	* trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/profile.c, trunk/src/pkcs15init/profile.h:
	  - miniscule API changes so that applications don't need to
	  include profile.h anymore

2002-04-05 08:45  okir

	* trunk/src/pkcs15init/profile.c: - file type is now also a struct
	  map

2002-04-04 22:10  jey

	* trunk/src/pkcs15init/Makefile.am,
	  trunk/src/pkcs15init/flex.profile,
	  trunk/src/pkcs15init/miocos.profile,
	  trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-miocos.c: - Cryptoflex now works
	  with the new pkcs15init stuff

2002-04-04 20:49  jey

	* trunk/configure.in: - Small typos corrected

2002-04-04 20:42  jey

	* trunk/src/pkcs15init/Makefile.am,
	  trunk/src/pkcs15init/miocos.profile,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-miocos.c: - Partial support for PKCS
	  #15 generation on MioCOS cards - Some other small fixes to the
	  pkcs15init code

2002-04-04 20:40  jey

	* trunk/src/libopensc/card-miocos.c,
	  trunk/src/libopensc/cardctl.h, trunk/src/libopensc/pkcs15.c: -
	  Cleaned up MioCOS driver and added PIN code creation - Added an
	  error message in case ODF parsing fails

2002-04-04 20:38  jey

	* trunk/src/libopensc/asn1.c: - DER decoder now treats 0xFF tags
	  the same way as 0x00 tags

2002-04-04 20:37  jey

	* trunk/src/tools/opensc-explorer.c: - Made clearer the error
	  message resulting from an incorrect PIN code entry

2002-04-04 19:58  okir

	* trunk/src/pkcs15init/pkcs15-lib.c: - the previous fix broke
	  do_verify_pin

2002-04-04 15:06  aet

	* trunk/src/pkcs15init/pkcs15-lib.c: Minor warning fix

2002-04-04 15:02  aet

	* trunk/src/libopensc/pkcs15-cert.c: Workaround for a compiler
	  problem (Sun WorkShop 6 update 2 C 5.3 Patch 111679-05
	  2002/02/07) Still lots of bogus warnings, but at least
	  everything compiles

2002-04-04 14:34  okir

	* trunk/src/pkcs15init/profile.c: - added internal-ef for juha

2002-04-04 14:21  aet

	* trunk/src/scam/p15_eid.c, trunk/src/scam/p15_ldap.c,
	  trunk/src/sia/sia_opensc.c, trunk/src/sia/sia_support.h:
	  Checkpoint commit for SIA support, doesn't work yet

2002-04-04 12:44  aet

	* trunk/src/libopensc/card-gpk.c, trunk/src/libopensc/cardctl.h:
	  Fix minor compiler warnings

2002-04-04 11:14  aet

	* trunk/Makefile.am, trunk/README.signer, trunk/TODO,
	  trunk/src/libopensc/Makefile.am: Update TODO and Changelog 'make
	  dist' fixes Add missing README for OpenSC-Signer

2002-04-04 10:56  aet

	* trunk/configure.in: OpenSC-Signer merge complete.

2002-04-04 10:40  aet

	* trunk/configure.in, trunk/src/Makefile.am,
	  trunk/src/signer/Makefile.am: Merge opensc-signer to
	  opensc/src/signer, part #1

2002-04-04 09:20  jey

	* trunk/src/libopensc/reader-ctapi.c: - ctapi_release() now calls
	  CT_close(), as it should
	* trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/pkcs15.h: - Added typedefs for the most
	  common structs

2002-04-03 14:16  jey

	* trunk/src/libopensc/ctx.c: - fixed a typo

2002-04-03 14:15  okir

	* trunk/src/pkcs15init/pkcs15-lib.c: - shouldn't set key_reference

2002-04-03 12:59  aet

	* trunk/src/libopensc/card-setcos.c: Minor warning fix

2002-04-03 12:53  okir

	* trunk/src/pkcs15init/pkcs15.profile,
	  trunk/src/pkcs15init/profile.c: - renamed PKCS15-DIR to DIR per
	  juha's request

2002-04-03 12:46  okir

	* trunk/src/pkcs15init/gpk.profile,
	  trunk/src/pkcs15init/pkcs15.profile: - moved gpk specific MF ACL
	  to the gpk profile, where it belongs

2002-04-03 11:57  okir

	* trunk/src/pkcs15init/TODO: - updated TODO list

2002-04-03 11:56  okir

	* trunk/src/tools/pkcs15-init.c: - fixed exit code

2002-04-03 11:55  okir

	* trunk/src/pkcs15init/gpk.profile,
	  trunk/src/pkcs15init/pkcs15.profile: - rewrote config files to
	  match new parser

2002-04-03 11:52  okir

	* trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/profile.c, trunk/src/pkcs15init/profile.h:
	  - rewrote parser to use Antti's scconf

2002-04-03 11:51  okir

	* trunk/src/libopensc/opensc.h, trunk/src/libopensc/sc.c: - added
	  two new error codes for pkcs15init

2002-04-02 21:26  jey

	* trunk/src/libopensc/card-setcos.c: - fixed a small bug regarding
	  prop_attr in the SetCOS driver

2002-04-02 20:58  aet

	* trunk/src/pkcs15init/profile.c, trunk/src/tools/pkcs15-init.c:
	  Minor compiler warning fixes

2002-04-02 14:46  okir

	* trunk/src/tools/pkcs15-init.c: - support for SO pin during app
	  initialization

2002-04-02 14:45  okir

	* trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c: pkcs15-gpk.c

2002-04-02 14:27  okir

	* trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c: - added
	  sc_pkcs15init_present_pin for juha

2002-04-02 13:43  aet

	* trunk/src/pkcs15init, trunk/src/pkcs15init/.cvsignore: Add
	  .cvsignore

2002-04-02 13:38  aet

	* trunk/configure.in, trunk/src/pkcs15init/Makefile.am: Generate
	  src/pkcs15init/Makefile

2002-04-02 13:30  okir

	* trunk/src/Makefile.am: - added new subdir pkcs15init

2002-04-02 13:29  okir

	* trunk/src/tools/flex.profile, trunk/src/tools/gpk.profile,
	  trunk/src/tools/miocos.profile, trunk/src/tools/pkcs15-cflex.c,
	  trunk/src/tools/pkcs15-gpk.c, trunk/src/tools/pkcs15-init.h,
	  trunk/src/tools/pkcs15-miocos.c, trunk/src/tools/pkcs15.profile,
	  trunk/src/tools/profile.c, trunk/src/tools/profile.h: - moved
	  most of the pkcs15init stuff to libpkcs15init

2002-04-02 13:28  okir

	* trunk/src/tools/Makefile.am, trunk/src/tools/pkcs15-init.c: -
	  rewrote pkcs15-init; much of the init stuff moved to separate
	  library

2002-04-02 13:26  okir

	* trunk/src/pkcs15init, trunk/src/pkcs15init/Makefile.am,
	  trunk/src/pkcs15init/README, trunk/src/pkcs15init/TODO,
	  trunk/src/pkcs15init/flex.profile,
	  trunk/src/pkcs15init/gpk.profile,
	  trunk/src/pkcs15init/miocos.profile,
	  trunk/src/pkcs15init/pkcs15-cflex.c,
	  trunk/src/pkcs15init/pkcs15-gpk.c,
	  trunk/src/pkcs15init/pkcs15-init.h,
	  trunk/src/pkcs15init/pkcs15-lib.c,
	  trunk/src/pkcs15init/pkcs15-miocos.c,
	  trunk/src/pkcs15init/pkcs15.profile,
	  trunk/src/pkcs15init/profile.c, trunk/src/pkcs15init/profile.h:
	  - rewrite of the pkcs15-init stuff

2002-04-02 12:58  okir

	* trunk/src/libopensc/pkcs15.c: - sc_pkcs15_get_objects() now lets
	  you search for generic types (e.g. SC_PKCS15_TYPE_PRKEY) too.

2002-04-02 12:57  okir

	* trunk/src/libopensc/opensc.h: - added SC_AC_SYMBOLIC for
	  pkcs15init support

2002-04-02 11:41  okir

	* trunk/src/tests/print.c: - indentation fix

2002-04-02 09:38  aet

	* trunk/Makefile.am, trunk/aclocal/Makefile.am,
	  trunk/docs/Makefile.am, trunk/etc/Makefile.am,
	  trunk/src/Makefile.am, trunk/src/common/Makefile.am,
	  trunk/src/libopensc/Makefile.am, trunk/src/openssh/Makefile.am,
	  trunk/src/pam/Makefile.am, trunk/src/pkcs11/Makefile.am,
	  trunk/src/pkcs11/rsaref/Makefile.am, trunk/src/scam/Makefile.am,
	  trunk/src/scconf/Makefile.am, trunk/src/scldap/Makefile.am,
	  trunk/src/scrandom/Makefile.am, trunk/src/sia/Makefile.am,
	  trunk/src/signer/Makefile.am,
	  trunk/src/signer/npinclude/Makefile.am,
	  trunk/src/tests/Makefile.am, trunk/src/tools/Makefile.am: Add
	  maintainer-clean patch by Andreas Jellinghaus
	  <aj@dungeon.inka.de>

2002-03-31 19:15  aet

	* trunk/src/scconf/scconf.c, trunk/src/scconf/scconf.h,
	  trunk/src/scconf/test-conf.c, trunk/src/scldap/scldap.c: Remove
	  flag SCCONF_OPTIONAL, add SCCONF_MANDATORY

2002-03-31 16:32  aet

	* trunk/src/libopensc/ctx.c, trunk/src/libopensc/module.c,
	  trunk/src/libopensc/sc.c: Remove #include "config.h",
	  sc-internal.h already does that

2002-03-31 16:00  aet

	* trunk/src/scconf/scconf.c: Include header stdio.h

2002-03-31 15:26  aet

	* trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/scconf/test-conf.c, trunk/src/scldap/scldap.c: -
	  Upgrade scldap to use scconf_parse_entries(); - Fix compiler
	  warnings for ct-api driver, untested.

2002-03-31 13:00  aet

	* trunk/src/scconf/scconf.c, trunk/src/scconf/test-conf.c: Upgrade
	  test-conf to use scconf_parse_entries(); NOTE: Handles ldap/card
	  blocks for scldap.conf

2002-03-31 11:30  aet

	* trunk/src/scconf/parse.c, trunk/src/scconf/scconf.c,
	  trunk/src/scconf/scconf.h: Add functions scconf_list_add and
	  scconf_parse_entries, getting the values in user code is now
	  pretty much the same as it is in ASN.1 decoder.

2002-03-28 14:13  jey

	* trunk/src/libopensc/card-miocos.c,
	  trunk/src/libopensc/card-setcos.c, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/iso7816.c, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/sc.c: - sec_attr and prop_attr are now
	  dynamically allocated in struct sc_file

2002-03-28 13:34  aet

	* trunk/src/libopensc/ctx.c, trunk/src/tests/sc-test.c: - Added
	  sanity check for sc_establish_context. If no readers are found,
	  fail and return SC_ERROR_NO_READERS_FOUND.

2002-03-28 13:10  aet

	* trunk/src/libopensc/Makefile.am: Add missing @LIBDL@ to
	  libopensc linking

2002-03-27 13:13  aet

	* trunk/configure.in, trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/ctx.c, trunk/src/libopensc/internal.h,
	  trunk/src/libopensc/module.c,
	  trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/libopensc/sc-internal.h,
	  trunk/src/openssh/Makefile.am, trunk/src/pam/Makefile.am,
	  trunk/src/scam/Makefile.am, trunk/src/scldap/Makefile.am,
	  trunk/src/scldap/scldap.c, trunk/src/scrandom/Makefile.am,
	  trunk/src/sia/Makefile.am, trunk/src/signer/Makefile.am: - Minor
	  cleanups to build process - Add header check for dlfcn.h - Add
	  internal functions sc_module_{open,close,get_address} - Use
	  environ instead __environ for scldap_search, should be more
	  portable. - Fix compiler warnings noticed by Tru64 / AIX cc

2002-03-26 23:06  aet

	* trunk/src/scam/p15_eid.c, trunk/src/scam/p15_ldap.c: Reduce the
	  scidi specific code to bare minimum

2002-03-26 20:59  aet

	* trunk/src/scldap/scldap.h: Add missing character

2002-03-26 20:56  aet

	* trunk/src/libopensc/ctx.c, trunk/src/scconf/scconf.c,
	  trunk/src/scconf/scconf.h, trunk/src/scconf/test-conf.c,
	  trunk/src/scldap/scldap.c, trunk/src/scldap/scldap.h: Rename
	  scconf_init to scconf_new Rename scconf_deinit to scconf_free
	  Add initial comments to scldap.h

2002-03-26 20:05  okir

	* trunk/src/pkcs11/framework-pkcs15.c: - fix signing of raw
	  md5/sha1 hash w/o pkcs1 gunk prefix

2002-03-26 11:38  jey

	* trunk/etc/opensc.conf.example, trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/ctbcs.h, trunk/src/libopensc/ctx.c,
	  trunk/src/libopensc/internal.h, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/reader-ctapi.c,
	  trunk/src/libopensc/reader-pcsc.c,
	  trunk/src/libopensc/sc-internal.h, trunk/src/libopensc/sc.c: -
	  Added support for CT-API - Improved config file loading -
	  Implemented ATR parsing

2002-03-25 22:39  aet

	* trunk/src/libopensc/ctx.c, trunk/src/scconf/scconf.c,
	  trunk/src/scconf/scconf.h, trunk/src/scconf/test-conf.c,
	  trunk/src/scldap/scldap.c: Rename scconf_find_value to
	  scconf_find_list Rename scconf_find_value_first to
	  scconf_get_str Add functions scconf_get_int and scconf_get_bool

2002-03-25 21:23  aet

	* trunk/src/libopensc/ctx.c, trunk/src/scconf/parse.c,
	  trunk/src/scconf/scconf.c, trunk/src/scconf/test-conf.c,
	  trunk/src/scldap/scldap.c: Always allocate scconf_list for block
	  structure

2002-03-25 20:10  aet

	* trunk/src/libopensc/ctx.c, trunk/src/scconf/scconf.c,
	  trunk/src/scconf/scconf.h, trunk/src/scconf/test-conf.c,
	  trunk/src/scldap/scldap.c: Add sanity checks and more comments
	  Add new parameter for scconf_find_blocks

2002-03-25 12:39  aet

	* trunk/src/pkcs11/framework-pkcs15.c, trunk/src/pkcs11/misc.c,
	  trunk/src/pkcs11/pkcs11-global.c,
	  trunk/src/pkcs11/pkcs11-object.c,
	  trunk/src/pkcs11/pkcs11-session.c, trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/pkcs11/secretkey.c, trunk/src/pkcs11/slot.c: Add
	  support for config.h Remove old, obsolete and dead code

2002-03-25 11:54  aet

	* trunk/configure.in, trunk/etc/scldap.conf.example,
	  trunk/src/scldap/scldap.c: Still changes for libreadline checks
	  output Clear environment before calling ldap_init, as suggested
	  by Olaf

2002-03-25 10:19  okir

	* trunk/configure.in: - pick up -lresolv on systems with glibc
	  2.2.4 (needed by openldap 2.x)

2002-03-24 23:20  jey

	* trunk/TODO: - updated TODO

2002-03-24 22:54  jey

	* trunk/src/libopensc/ctx.c: - fixed some memory leaks in
	  sc_establish_context

2002-03-24 22:47  jey

	* trunk/etc/opensc.conf.example, trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/ctx.c, trunk/src/libopensc/reader-pcsc.c,
	  trunk/src/libopensc/sc.c: - Moved functions from sc.c to ctx.c -
	  Card and reader drivers are now configurable

2002-03-24 21:56  aet

	* trunk/src/pkcs11/pkcs11-global.c, trunk/src/scam/p15_eid.c,
	  trunk/src/scam/p15_ldap.c, trunk/src/tests/sc-test.c,
	  trunk/src/tools/cryptoflex-tool.c,
	  trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/pkcs15-crypt.c,
	  trunk/src/tools/pkcs15-init.c, trunk/src/tools/pkcs15-tool.c:
	  Don't hardcode initial debugging level and error/debug_file
	  pointers to the code, get the values from opensc.conf instead.

2002-03-24 20:30  aet

	* trunk/configure.in: Add missing AC_MSG_RESULT texts to
	  libreadline check

2002-03-24 20:04  aet

	* trunk/src/scconf/test-conf.c: Allow user to specify input/output
	  filenames

2002-03-24 17:50  aet

	* trunk/etc/opensc.conf.example: Fix syntax errors

2002-03-24 17:09  aet

	* trunk/src/libopensc/sc.c: Oops, scconf_parse was called twice.
	  Fixed.

2002-03-24 16:57  aet

	* trunk/etc/opensc.conf.example, trunk/src/libopensc/sc.c: - Fix a
	  potential segfault for the new sc_establish_context - Keep the
	  variable names in opensc.conf the same as they are in code
	  structs. Always try to parse app default { } first, then upgrade
	  the settings with the application specific configuration block.

2002-03-24 15:41  aet

	* trunk/Makefile.am, trunk/configure.in, trunk/etc,
	  trunk/etc/.cvsignore, trunk/etc/Makefile.am,
	  trunk/etc/scldap.conf.example, trunk/src/libopensc/Makefile.am,
	  trunk/src/openssh/openssh-3.0.2p1-patch.diff,
	  trunk/src/pkcs11/pkcs11-global.c, trunk/src/scam/Makefile.am,
	  trunk/src/scam/p15_ldap.c, trunk/src/scam/scam.c,
	  trunk/src/scldap/Makefile.am, trunk/src/scldap/scldap.h,
	  trunk/src/scldap/test-ldap.c, trunk/src/signer/opensc-crypto.c,
	  trunk/src/signer/opensc-support.c: Move opensc/src/scldap/etc to
	  opensc/etc SCLDAP_CONFIG -> SCLDAP_CONF_PATH Upgrade the rest of
	  the programs to use new core API

2002-03-24 14:15  jey

	* trunk/etc/opensc.conf.example: - second version of the default
	  config file

2002-03-24 14:12  jey

	* trunk/configure.in, trunk/etc, trunk/etc/opensc.conf.example,
	  trunk/src/libopensc/Makefile.am, trunk/src/libopensc/internal.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/sc-internal.h,
	  trunk/src/libopensc/sc.c, trunk/src/openssh/opensc-ssh.c,
	  trunk/src/pkcs11/pkcs11-global.c, trunk/src/scam/p15_eid.c,
	  trunk/src/scam/p15_ldap.c, trunk/src/scam/scam.c,
	  trunk/src/tests/sc-test.c, trunk/src/tools/cryptoflex-tool.c,
	  trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/pkcs15-crypt.c,
	  trunk/src/tools/pkcs15-gpk.c, trunk/src/tools/pkcs15-init.c,
	  trunk/src/tools/pkcs15-tool.c, trunk/src/tools/profile.c,
	  trunk/src/tools/util.c, trunk/src/tools/util.h: - Started to add
	  configuration file support to libopensc - Added typedefs for
	  some basic structs (e.g. struct sc_card --> sc_card_t) - Added a
	  second argument to sc_establish_context() to identify the
	  calling application - Renamed sc_destroy_context() to
	  sc_release_context()

2002-03-24 14:06  jey

	* trunk/src/libopensc/card-setcos.c: - fixed a typo in one ATR
	  string

2002-03-24 12:14  aet

	* trunk/src/pam/pam_opensc.c, trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/pkcs15-init.c, trunk/src/tools/profile.c: - Fix
	  compiler warnings for Solaris - Use of PAM_MODULE_UNKNOWN broke
	  pam_opensc for Sun based PAM implementations, fixed.

2002-03-24 10:03  aet

	* trunk/src/scam/p15_eid.c, trunk/src/scam/p15_ldap.c,
	  trunk/src/scam/scam.c: Make sure everything compiles even if we
	  don't have an LDAP implementation and/or OpenSSL library.

2002-03-23 19:37  aet

	* trunk/configure.in: Restructuring and merges with scidi

2002-03-23 16:28  aet

	* trunk/src/pam/README, trunk/src/scam/p15_eid.c,
	  trunk/src/scam/p15_ldap.c: Strip off "opensc-" prefix from the
	  p15 module names

2002-03-22 13:56  aet

	* trunk/src/tools/Makefile.am: 'make dist' fixes

2002-03-22 09:50  aet

	* trunk/bootstrap: Test if Makefile exists before doing make
	  distclean Remove --gnu from autoreconf

2002-03-22 01:14  aet

	* trunk/src/scldap/scldap.c: Disable a debugging message that got
	  activated because of log_messagex -> fprintf renames.

2002-03-22 00:13  aet

	* trunk/src/tests/base64.c, trunk/src/tests/lottery.c,
	  trunk/src/tests/p15dump.c, trunk/src/tests/pintest.c,
	  trunk/src/tests/print.c, trunk/src/tests/prngtest.c,
	  trunk/src/tests/sc-test.c, trunk/src/tests/sc-test.h: Fix memory
	  leaks Indent lines

2002-03-21 23:45  aet

	* trunk/src/libopensc/pkcs15-cert.c, trunk/src/scam/p15_eid.c,
	  trunk/src/scam/p15_ldap.c: Remove bogus "len = len;" statement
	  from pkcs15-cert Other minor cleanups

2002-03-21 19:12  aet

	* trunk/src/pam/README: Merge bits of information from
	  pam_pkcs15's README for opensc-pkcs15-eid

2002-03-21 18:37  aet

	* trunk/configure.in: Fix a typo Add missing conditional

2002-03-21 18:02  aet

	* trunk/src/pam/pam_opensc.c, trunk/src/pam/pam_support.c,
	  trunk/src/pam/pam_support.h: Move get_login() to pam_support.c

2002-03-21 17:41  aet

	* trunk/configure.in, trunk/src/pam/Makefile.am,
	  trunk/src/pam/README, trunk/src/pam/pam_opensc.c,
	  trunk/src/scam/Makefile.am, trunk/src/scam/p15_eid.c,
	  trunk/src/scam/p15_ldap.c, trunk/src/scam/scam.c,
	  trunk/src/scam/scam.h, trunk/src/sia/Makefile.am,
	  trunk/src/sia/sia_opensc.c, trunk/src/sia/sia_support.c:
	  Cleanups for PAM and SIA build process

2002-03-21 14:05  aet

	* trunk/Makefile.am, trunk/configure.in,
	  trunk/src/pam/Makefile.am, trunk/src/pam/pam_opensc.c,
	  trunk/src/pam/pam_support.c, trunk/src/scam/Makefile.am,
	  trunk/src/scam/p15_eid.c, trunk/src/scam/p15_ldap.c,
	  trunk/src/scam/scam.c, trunk/src/scldap/scldap.c,
	  trunk/src/scldap/test-ldap.c, trunk/src/scrandom/scrandom.c,
	  trunk/src/sia/Makefile.am: Merge configure.ac stuff from SCIDI,
	  needs some cleanups Add missing functions Replace
	  log_message{x}() calls with fprintf, for now Everything compiles
	  with vanilla opensc tree, yet untested.

2002-03-21 13:11  aet

	* trunk/src/scconf/parse.c, trunk/src/scconf/write.c: Build fixes

2002-03-21 11:56  aet

	* trunk/src/sia, trunk/src/sia/.cvsignore,
	  trunk/src/sia/Makefile.am, trunk/src/sia/sia_opensc.c,
	  trunk/src/sia/sia_support.c, trunk/src/sia/sia_support.h,
	  trunk/src/sia/test-sia.c: Add preliminary version of SIA module
	  for Tru64 Compiles, doesn't work yet. To be finished when
	  someone returns my development alpha. :)

2002-03-21 11:35  aet

	* trunk/src/pam/pam_support.h: Oops, indent fixes

2002-03-21 10:43  aet

	* trunk/src/Makefile.am, trunk/src/pam/Makefile.am,
	  trunk/src/scam/p15_eid.c, trunk/src/scam/p15_ldap.c,
	  trunk/src/scldap/Makefile.am, trunk/src/scldap/test-ldap.c,
	  trunk/src/scrandom/Makefile.am,
	  trunk/src/scrandom/test-random.c: Build fixes

2002-03-21 09:36  okir

	* trunk/src/libopensc/card-emv.c, trunk/src/libopensc/card-flex.c,
	  trunk/src/libopensc/card-tcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/iso7816.c, trunk/src/openssh/opensc-ssh.c,
	  trunk/src/pkcs11/misc.c, trunk/src/pkcs11/pkcs11-global.c,
	  trunk/src/pkcs11/pkcs11-session.c, trunk/src/pkcs11/slot.c,
	  trunk/src/tests/pintest.c: - added some #include string.h
	  statements for RH 7.2

2002-03-20 23:21  aet

	* trunk/src/pam, trunk/src/pam/.cvsignore,
	  trunk/src/pam/Makefile.am, trunk/src/pam/README,
	  trunk/src/pam/misc_conv.c, trunk/src/pam/pam_opensc.c,
	  trunk/src/pam/pam_pkcs15.c, trunk/src/pam/pam_support.c,
	  trunk/src/pam/pam_support.h, trunk/src/scam,
	  trunk/src/scam/.cvsignore, trunk/src/scam/Makefile.am,
	  trunk/src/scam/p15_eid.c, trunk/src/scam/p15_ldap.c,
	  trunk/src/scam/scam.c, trunk/src/scam/scam.h, trunk/src/scconf,
	  trunk/src/scconf/.cvsignore, trunk/src/scconf/Makefile.am,
	  trunk/src/scconf/internal.h, trunk/src/scconf/lex-parse.l,
	  trunk/src/scconf/parse.c, trunk/src/scconf/scconf.c,
	  trunk/src/scconf/scconf.h, trunk/src/scconf/test-conf.c,
	  trunk/src/scconf/write.c, trunk/src/scldap,
	  trunk/src/scldap/.cvsignore, trunk/src/scldap/Makefile.am,
	  trunk/src/scldap/scldap.c, trunk/src/scldap/scldap.h,
	  trunk/src/scldap/test-ldap.c, trunk/src/scrandom,
	  trunk/src/scrandom/.cvsignore, trunk/src/scrandom/Makefile.am,
	  trunk/src/scrandom/scrandom.c, trunk/src/scrandom/scrandom.h,
	  trunk/src/scrandom/test-random.c: Start merging various sources
	  from project SCIDI - smart card identification infrastructure by
	  Helsinki University of Technology. Breaks current PAM build,
	  lot's of stuff from configure.ac missing, some references to
	  unknown sources and functions. Time to get some sleep, i'll
	  continue merging tomorrow.

2002-03-20 19:37  jey

	* trunk/NEWS, trunk/configure.in: - Bumped up version number to
	  0.6.1 - Wrote a NEWS entry

2002-03-20 19:33  aet

	* trunk/src/pkcs11/framework-pkcs15.c, trunk/src/pkcs11/misc.c,
	  trunk/src/pkcs11/pkcs11-object.c,
	  trunk/src/pkcs11/pkcs11-session.c, trunk/src/pkcs11/secretkey.c:
	  #include cleanups to get rid of compiler warnings

2002-03-20 19:31  jey

	* trunk/src/pkcs11/framework-pkcs15.c: - Added Olaf's ASN.1
	  wrapping magic

2002-03-20 17:17  jey

	* trunk/src/pkcs11/framework-pkcs15.c: - Fixed debug output in
	  pkcs15_create_slot()

2002-03-20 15:04  okir

	* trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/pkcs11-session.c, trunk/src/pkcs11/sc-pkcs11.h:
	  - implemented C_ChangePIN

2002-03-20 13:08  okir

	* trunk/src/pkcs11/framework-pkcs15.c: - implemented CKA_SUBJECT
	* trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/pkcs15-cert.c, trunk/src/libopensc/pkcs15.h:
	  - now extracting issuer from certificate

2002-03-19 10:04  jey

	* trunk/src/libopensc/card-setcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/pkcs15-cert.c, trunk/src/libopensc/pkcs15.c:
	  - Fixed a couple of memory leaks - Fixed a bug in decoding
	  EF(TokenInfo)

2002-03-18 13:24  okir

	* trunk/src/tools/opensc-explorer.c: - make it compile with
	  readline versions that declare readline(char *);

2002-03-18 12:49  okir

	* trunk/src/pkcs11/framework-pkcs15.c: - by default, the token is
	  marked write_protected - fixed debug output when creating a slot
	  with no PIN
	* trunk/src/pkcs11/README: - do not enable the RSA flag n netscape

2002-03-18 11:05  okir

	* trunk/src/pkcs11/README, trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/misc.c, trunk/src/pkcs11/pkcs11-object.c,
	  trunk/src/pkcs11/pkcs11-session.c, trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/pkcs11/secretkey.c: - made email decryption work in
	  netscape

2002-03-15 15:22  okir

	* trunk/src/pkcs11/Makefile.am,
	  trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/pkcs11-object.c, trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/pkcs11/secretkey.c: - first stab at C_Unwrap

2002-03-15 15:19  okir

	* trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/pkcs15-cert.c, trunk/src/libopensc/pkcs15.h:
	  - extract certificate issuer and store it in sc_pkcs15_cert

2002-03-15 12:48  jey

	* trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15.h: - started adding support for DSA
	  private keys

2002-03-15 12:37  okir

	* trunk/src/pkcs11/framework-pkcs15.c: - email signing now works
	  from navigator

2002-03-15 11:41  okir

	* trunk/src/pkcs11/pkcs11-global.c: - set debug log file and
	  libopensc debug level via environment vars

2002-03-15 10:40  jey

	* trunk/src/tools/opensc-explorer.c: *** empty log message ***

2002-03-15 10:10  jey

	* trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/pkcs15-cert.c, trunk/src/libopensc/pkcs15.h:
	  - Added support for big serial numbers in certificates

2002-03-15 10:05  okir

	* trunk/src/tools/pkcs15-tool.c: - now uses sc_pkcs15_free_pubkey

2002-03-15 10:01  okir

	* trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/pkcs15-pubkey.c,
	  trunk/src/libopensc/pkcs15.h: - implemented sc_pkcs15_free_pubkey

2002-03-15 09:43  okir

	* trunk/src/libopensc/cardctl.h: - removed
	  SC_CARDCTL_GET_PK_ALGORITHMS card_ctl
	* trunk/src/libopensc/card-gpk.c: - implemented decipher()
	  operation - removed SC_CARDCTL_GET_PK_ALGORITHMS card_ctl -
	  minor signing fixes

2002-03-15 09:42  okir

	* trunk/src/libopensc/iso7816.c, trunk/src/libopensc/sec.c: -
	  moved sc_decipher implementation to iso7816.c

2002-03-15 09:01  okir

	* trunk/src/tools/pkcs15-tool.c: - fixed PEM public key header

2002-03-14 17:02  okir

	* trunk/src/tools/pkcs15-crypt.c: - add option --md5

2002-03-14 16:57  okir

	* trunk/src/tools/pkcs15-tool.c: - list and extract public keys

2002-03-14 11:50  aet

	* trunk/src/libopensc/pkcs15.c: Add missing static for
	  parse_tokeninfo();

2002-03-14 11:50  okir

	* trunk/src/libopensc/pkcs15.c: - fixed a typo that caused bad
	  auth_id's

2002-03-13 23:11  aet

	* trunk/src/tools/pkcs15-cflex.c, trunk/src/tools/pkcs15-init.c:
	  Fix minor compiler warnings

2002-03-13 20:25  okir

	* trunk/src/libopensc/card-gpk.c: - if the offset shift is 2 in
	  update binary et al, make sure the application provided offset
	  is a multiple of 4.

2002-03-13 20:24  okir

	* trunk/src/libopensc/opensc.h: - make sure SC_APDU_CHOP_SIZE is a
	  multiple of 4 (otherwise, update binary et al of large files
	  will fail on the GPK)

2002-03-13 20:23  okir

	* trunk/src/tools/pkcs15-init.c: - fixed certificate download

2002-03-13 15:18  aet

	* trunk/docs, trunk/docs/.cvsignore: Add missing files

2002-03-13 13:21  jey

	* trunk/configure.in: - added docs/Makefile to AC_OUTPUT

2002-03-13 13:17  jey

	* trunk/Makefile.am: - removed README.Cryptoflex from EXTRA_DIST

2002-03-13 13:09  okir

	* trunk/Makefile.am: - added docs subdirectory so that manpages
	  get installed
	* trunk/docs/Makefile.am: - added Makefile.am for manpages
	* trunk/docs/pkcs15-crypt.1, trunk/docs/pkcs15-init.1,
	  trunk/docs/pkcs15-profile.5, trunk/docs/pkcs15.7: - added a
	  bunch of manpages

2002-03-13 12:42  aet

	* trunk/src/signer/dialog.c: - Ahem, decrease the version number a
	  bit - assuan_transact is now API compatible with the latest
	  version of Assuan (newpg/assuan)

2002-03-13 11:36  jey

	* trunk/src/signer/opensc-crypto.c: - fixed a small core-dumping
	  bug

2002-03-13 10:51  jey

	* trunk/README.Cryptoflex: - Preparation for release 0.6.0 -
	  Removed obsolete README.Cryptoflex

2002-03-13 10:48  jey

	* trunk/NEWS, trunk/src/openssh/README,
	  trunk/src/openssh/openssh-3.0.2p1-patch.diff,
	  trunk/src/tools/miocos.profile, trunk/src/tools/pkcs15-cflex.c,
	  trunk/src/tools/pkcs15-miocos.c: *** empty log message ***

2002-03-13 10:34  jey

	* trunk/src/pkcs11/framework-pkcs15.c: - some autodetection magic
	  in pkcs15_prkey_sign()

2002-03-13 09:51  jey

	* trunk/src/pkcs11/framework-pkcs15.c: - reverted a change in
	  pkcs15_prkey_sign

2002-03-13 08:54  jey

	* trunk/src/signer/dialog.c, trunk/src/signer/opensc-crypto.c: -
	  Fixed signature generation - Assuan API is now compatible with
	  newer versions

2002-03-12 16:27  okir

	* trunk/src/tools/pkcs15-init.c, trunk/src/tools/pkcs15-init.h: -
	  added pkcs12 support
	* trunk/src/tools/pkcs15.profile: - Make the default size for DF
	  files 128 bytes (FIXME: we need to be able to set this on a per
	  card basis in $cardname.profile

2002-03-12 14:36  okir

	* trunk/src/pkcs11/framework-pkcs15.c: - add support for PuKDF
	  objects. - lock the card in C_Login, and unlock it in C_Logout.
	* trunk/src/pkcs11/sc-pkcs11.h: - keep track of number of sessions

2002-03-12 14:35  okir

	* trunk/src/pkcs11/pkcs11-session.c: - keep track of the number of
	  sessions per slot, and do a C_Logout when the last session is
	  closed.

2002-03-12 13:41  okir

	* trunk/src/tools/Makefile.am: - Make sure profiles get installed
	  in $(pkgdatadir), and propagate this directory name to profile.c
	  (icky automake stuff)

2002-03-12 13:00  jey

	* trunk/configure.in, trunk/src/libopensc/card-flex.c,
	  trunk/src/libopensc/card-miocos.c, trunk/src/libopensc/dir.c,
	  trunk/src/libopensc/iso7816.c, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/sc.c, trunk/src/tools/flex.profile,
	  trunk/src/tools/pkcs15-cflex.c, trunk/src/tools/pkcs15-init.c,
	  trunk/src/tools/profile.c, trunk/src/tools/profile.h: - Fixed
	  PKCS #15 structure generation on Cryptoflex cards and
	  implemented a default profile - Cryptoflex now reports its
	  supported PK algorithms correctly - Various pkcs15-init fixes

2002-03-12 10:08  okir

	* trunk/src/tools/gpk.profile, trunk/src/tools/pkcs15-gpk.c,
	  trunk/src/tools/pkcs15-init.c, trunk/src/tools/pkcs15-init.h,
	  trunk/src/tools/pkcs15.profile, trunk/src/tools/profile.c,
	  trunk/src/tools/profile.h: - Implemented download of public keys
	  and X509 certificates

2002-03-11 14:13  okir

	* trunk/src/tools/pkcs15-init.c: - now creating EF(DIR)

2002-03-11 14:12  okir

	* trunk/src/libopensc/opensc.h: - exporting sc_update_dir to
	  applications

2002-03-11 12:41  okir

	* trunk/src/libopensc/card-gpk.c: - we cache just the DF portion
	  of the currently selected file path, excluding the EF's FID -
	  when sending the hash to the card (as part of
	  compute_signature), revert the sequence of hashed bytes

2002-03-11 11:52  okir

	* trunk/src/tools/pkcs15-init.c: - When storing a private key,
	  always store the public portion as well

2002-03-11 11:40  jey

	* trunk/src/libopensc/log.c: *** empty log message ***

2002-03-11 10:18  okir

	* trunk/src/tools/profile.c: - forgot to add DFs to the profile's
	  file list

2002-03-11 09:14  okir

	* trunk/src/tools/gpk.profile, trunk/src/tools/pkcs15-init.c,
	  trunk/src/tools/pkcs15.profile, trunk/src/tools/profile.c,
	  trunk/src/tools/profile.h: - Implemented Parent/FileID stuff
	  according to Juha's proposal

2002-03-10 11:48  jey

	* trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/card-miocos.c,
	  trunk/src/libopensc/card-setcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/internal.h, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/sc-internal.h: - GPK now reports it's PK
	  abilities correctly

2002-03-09 17:54  aet

	* trunk/src/libopensc/card-miocos.c,
	  trunk/src/libopensc/card-setcos.c,
	  trunk/src/libopensc/pkcs15-sec.c,
	  trunk/src/tools/pkcs15-cflex.c, trunk/src/tools/pkcs15-init.c,
	  trunk/src/tools/profile.c: Include stdlib.h where needed Warning
	  fixes for various OS's mcheck.h is not portable, so remove it

2002-03-09 17:27  aet

	* trunk/src/tools/flex.profile, trunk/src/tools/gpk.profile,
	  trunk/src/tools/miocos.profile: Standardize the first header
	  comment a bit between various profiles

2002-03-09 17:21  aet

	* trunk/src/tools/Makefile.am: Add flex.profile to EXTRA_DIST
	  Rename miocos-rw.profile to miocos.profile

2002-03-09 15:11  jey

	* trunk/src/libopensc/card-flex.c,
	  trunk/src/libopensc/card-miocos.c, trunk/src/libopensc/opensc.h,
	  trunk/src/tools/Makefile.am, trunk/src/tools/cryptoflex-tool.c,
	  trunk/src/tools/flex.profile, trunk/src/tools/miocos-rw.profile,
	  trunk/src/tools/miocos.profile,
	  trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/pkcs15-cflex.c, trunk/src/tools/pkcs15-init.c,
	  trunk/src/tools/pkcs15-init.h, trunk/src/tools/profile.c: -
	  Improved support for MioCOS cards - Removed PKCS #15 creation
	  from cryptoflex-tool - Added PIN pad character option to
	  profile.c

2002-03-08 19:47  okir

	* trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-pubkey.c,
	  trunk/src/libopensc/pkcs15.h: - added sc_pkcs15_read_pubkey to
	  retrieve public key from a public key file

2002-03-08 19:46  okir

	* trunk/src/libopensc/card-gpk.c: - specify sc_algorithm_info

2002-03-08 16:06  aet

	* trunk/Makefile.am, trunk/src/tools/Makefile.am,
	  trunk/src/tools/profile.h, trunk/src/tools/util.h: 'make dist'
	  fixes Minor cleanups

2002-03-08 15:18  aet

	* trunk/src/signer/opensc-crypto.c: SC_PKCS15_HASH_SHA1 ->
	  SC_ALGORITHM_RSA_HASH_SHA1

2002-03-08 14:47  aet

	* trunk/src/openssh/opensc-ssh.c: Fixed opensc-ssh to work with
	  recent p15 API changes

2002-03-08 05:59  jey

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/asn1.h,
	  trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/card-miocos.c,
	  trunk/src/libopensc/card-setcos.c,
	  trunk/src/libopensc/card-tcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/internal.h,
	  trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-sec.c,
	  trunk/src/libopensc/pkcs15.h, trunk/src/libopensc/sc-asn1.h,
	  trunk/src/libopensc/sc-internal.h, trunk/src/pam/pam_pkcs15.c,
	  trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/tools/pkcs15-crypt.c: - Added X.509 algorithm id
	  decoding and encoding to asn1.c - Implemented a generic ATR
	  matching helper function - Made signing much smarter (should
	  even work now) - Added info about supported crypto algorithms to
	  struct sc_card

2002-03-07 13:06  okir

	* trunk/src/tools/pkcs15-init.c, trunk/src/tools/profile.c: -
	  fixed attributes etc of PuKDF entry

2002-03-07 13:03  okir

	* trunk/src/tests/p15dump.c: - moved object printing stuff to
	  separate file - dump public key info if present
	* trunk/src/tests/Makefile.am, trunk/src/tests/print.c,
	  trunk/src/tests/sc-test.h: - moved object printing stuff to
	  separate file

2002-03-07 13:02  okir

	* trunk/src/tests/pintest.c: - fixed pintest to work with p15 API
	  changes

2002-03-07 12:33  okir

	* trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h: -
	  sc_pkcs15_parse_df now understands PuKDFs

2002-03-07 12:26  okir

	* trunk/src/tools/pkcs15-init.c: - fixed error code handling

2002-03-07 12:25  okir

	* trunk/src/tools/pkcs15-gpk.c: - fixed memory corruption problem

2002-03-07 11:57  fabled

	* trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/pkcs11-session.c: - Patch from Olaf Kirch to
	  implement of RSA exponent and modulus retrievel in pkcs11 code -
	  Fixed the checking of PIN length in pkcs11 login

2002-03-06 17:49  okir

	* trunk/src/tools/gpk-rw.profile, trunk/src/tools/gpk.profile,
	  trunk/src/tools/pkcs15-gpk.c, trunk/src/tools/pkcs15-init.c,
	  trunk/src/tools/pkcs15-init.h, trunk/src/tools/pkcs15-miocos.c,
	  trunk/src/tools/pkcs15.profile, trunk/src/tools/profile.c,
	  trunk/src/tools/profile.h: - Rewrote large parts of pkcs15-init
	  for greater flexibility, and with an eye towards separating some
	  of the stuff into a library that can be used by pkcs11.

2002-03-06 13:22  okir

	* trunk/src/libopensc/card.c: - in sc_select_file, remember the
	  file path in the returned struct sc_file

2002-03-06 13:21  okir

	* trunk/src/libopensc/pkcs15.c: - another buffer overflow

2002-03-06 12:33  okir

	* trunk/src/libopensc/card-gpk.c: - Added
	  {read,write,update}_binary handlers that shift the offset

2002-03-06 12:32  okir

	* trunk/src/libopensc/pkcs15.c: - SECURITY: Fixed buffer overflow

2002-03-05 16:52  jey

	* trunk/src/signer/dialog.c, trunk/src/signer/opensc-crypto.c,
	  trunk/src/signer/opensc-support.c: - now works with the new API

2002-03-05 13:26  okir

	* trunk/configure.in: - make sure HAVE_OPENSSL is defined even
	  when reading openssldir from config.cache

2002-03-05 13:16  okir

	* trunk/configure.in: - make sure HAVE_LIBPCSCLITE is defined when
	  using --with-pcsclite

2002-03-05 09:30  okir

	* trunk/src/libopensc/pkcs15-pubkey.c: - small typo

2002-03-04 10:33  okir

	* trunk/src/tools/gpk-rw.profile, trunk/src/tools/pkcs15-init.c,
	  trunk/src/tools/profile.c, trunk/src/tools/profile.h: - started
	  to work on PuKDF stuff

2002-03-04 09:33  okir

	* trunk/src/tools/profile.h: - Added support for Juha's latest API
	  changes

2002-03-04 09:32  okir

	* trunk/src/tools/profile.c: - Fixes for Juha's rewrite of
	  sc_pkcs15_object and friends - changes some names - allow
	  profile to set private key access flags

2002-03-04 09:31  okir

	* trunk/src/tools/gpk-rw.profile: - Added default access_flags for
	  private key objects

2002-03-04 08:35  okir

	* trunk/src/tests/p15dump.c: - adapted to juha's latest changes

2002-03-04 06:58  fabled

	* trunk/src/pkcs11/pkcs11-object.c, trunk/src/pkcs11/sc-pkcs11.h:
	  - Fixed buffer overflow in C_FindObjectsInit (patch from Olaf
	  Kirch <okir@caldera.de>)

2002-03-03 17:36  fabled

	* trunk/src/pkcs11/framework-pkcs15.c: - Fixed PKCS #11 module to
	  use the new PKCS #15 API

2002-03-03 00:32  jey

	* trunk/src/libopensc/Makefile.am, trunk/src/libopensc/asn1.c,
	  trunk/src/libopensc/asn1.h, trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-pubkey.c,
	  trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h,
	  trunk/src/libopensc/sc-asn1.h, trunk/src/libopensc/sc.c,
	  trunk/src/tools/Makefile.am, trunk/src/tools/cryptoflex-tool.c,
	  trunk/src/tools/pkcs15-crypt.c, trunk/src/tools/pkcs15-tool.c: -
	  Reworked PKCS #15 structure a bit (MANY THINGS WILL BREAK) -
	  Added support for public key DFs (not tested yet)

2002-03-02 14:03  okir

	* trunk/src/tools/pkcs15-init.c: - if required, read pin from
	  stdin (fixed key download)

2002-03-01 11:52  jey

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/card-miocos.c,
	  trunk/src/libopensc/card-setcos.c,
	  trunk/src/libopensc/card-tcos.c, trunk/src/libopensc/internal.h,
	  trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-sec.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/sc-internal.h,
	  trunk/src/tools/opensc-tool.c: - intermediary checkin

2002-02-27 22:15  okir

	* trunk/src/libopensc/card-gpk.c: - Implemented GET_PK_ALGORITHMS
	  card_ctl
	* trunk/src/libopensc/cardctl.h: - Fixed typo on _CTL_PREFIX -
	  Added SC_CARDCTL_GET_PK_ALGORITHMS

2002-02-26 21:15  okir

	* trunk/configure.in: - some platforms need -ltermcap to go with
	  -lreadline

2002-02-26 21:11  okir

	* trunk/src/tools/opensc-explorer.c: - we may have readline.h but
	  may still not be able to link the lib

2002-02-26 16:34  okir

	* trunk/src/libopensc/card-gpk.c: - implemented change/unblock pin

2002-02-26 11:27  jey

	* trunk/docs, trunk/docs/.cvsignore,
	  trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/card-setcos.c,
	  trunk/src/libopensc/card-tcos.c, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/sc.c, trunk/src/tools/miocos-rw.profile,
	  trunk/src/tools/pkcs15-miocos.c: - added some missing files -
	  renamed card-setec.c to card-setcos.c

2002-02-26 11:23  jey

	* trunk/AUTHORS, trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/card-default.c,
	  trunk/src/libopensc/card-miocos.c,
	  trunk/src/libopensc/card-setcos.c, trunk/src/libopensc/dir.c,
	  trunk/src/libopensc/iso7816.c, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15-sec.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/sc.c, trunk/src/tools/Makefile.am,
	  trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/pkcs15-init.c, trunk/src/tools/pkcs15-init.h: -
	  added a driver for MioCOS cards by Miotec - implemented EF(DIR)
	  updating

2002-02-25 22:42  okir

	* trunk/src/libopensc/card-gpk.c: - fixed sc_card_driver
	  initalization

2002-02-25 18:58  okir

	* trunk/TODO: - test commit

2002-02-25 18:50  okir

	* trunk/src/tools/pkcs15-gpk.c, trunk/src/tools/pkcs15-init.c,
	  trunk/src/tools/profile.c, trunk/src/tools/profile.h: - cleanup
	  and misc minor fixes

2002-02-25 18:48  okir

	* trunk/src/libopensc/card-gpk.c: - first stab at signatures

2002-02-25 18:47  okir

	* trunk/src/libopensc/pkcs15-sec.c: - avoid integer underflow for
	  outlen < 11

2002-02-25 18:43  aet

	* trunk/configure.in, trunk/src/tools/opensc-explorer.c: Minor
	  fixes to libreadline checking

2002-02-25 16:30  aet

	* trunk/configure.in, trunk/src/tools/Makefile.am,
	  trunk/src/tools/cryptoflex-tool.c,
	  trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/pkcs15-crypt.c,
	  trunk/src/tools/pkcs15-gpk.c, trunk/src/tools/pkcs15-init.c,
	  trunk/src/tools/pkcs15-tool.c, trunk/src/tools/profile.c,
	  trunk/src/tools/util.c: Added support for checking libreadline
	  and use it for opensc-explorer if one is found.

2002-02-25 15:40  aet

	* trunk/configure.in: Minor fix for HAVE_PCSCLITE conditional

2002-02-25 14:13  jey

	* trunk/src/libopensc/asn1.c: - small bug fixed in
	  encode_bit_string; patch by Olaf Kirch

2002-02-25 13:51  aet

	* trunk/src/tools/pkcs15-init.c: Add missing help text for
	  --passphrase

2002-02-25 12:37  aet

	* trunk/src/tests/filetest.c, trunk/src/tests/hst-test.c: Obsolete

2002-02-25 12:04  aet

	* trunk/src/openssh/opensc-ssh.c, trunk/src/pam/pam_pkcs15.c,
	  trunk/src/pkcs11/framework-pkcs15.c, trunk/src/pkcs11/slot.c,
	  trunk/src/signer/opensc-crypto.c,
	  trunk/src/signer/opensc-support.c, trunk/src/signer/signer.h,
	  trunk/src/tests/hst-test.c, trunk/src/tests/lottery.c,
	  trunk/src/tests/p15dump.c, trunk/src/tests/pintest.c,
	  trunk/src/tests/prngtest.c, trunk/src/tests/sc-test.c: Upgrade
	  to current OpenSC API Compiles, so far untested

2002-02-25 11:50  aet

	* trunk/src/tools, trunk/src/tools/.cvsignore: Add pkcs15-init

2002-02-25 11:13  aet

	* trunk/src/libopensc/Makefile.am, trunk/src/tools/Makefile.am:
	  HAVE_SSL cleanups

2002-02-25 11:06  aet

	* trunk/src/signer/Makefile.am: Get rid of PC/SC specific flags
	  (thank god)

2002-02-25 11:05  aet

	* trunk/configure.in, trunk/src/libopensc/Makefile.am,
	  trunk/src/openssh/Makefile.am, trunk/src/pam/Makefile.am,
	  trunk/src/pkcs11/Makefile.am, trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/tests/Makefile.am, trunk/src/tools/Makefile.am:
	  winscard.h / CFLAGS_PCSC cleanups Merge OpenSSL configure
	  changes with SCIDI Build process changes for future CT-API
	  support

2002-02-24 21:14  aet

	* trunk/src/libopensc/reader-pcsc.c: Fix segfault for pcsc_finish

2002-02-24 20:16  aet

	* trunk/src/libopensc/reader-pcsc.c: Add missing SC_STATUS_TIMEOUT
	  that was removed from sc-internal.h

2002-02-24 19:32  jey

	* trunk/CodingStyle, trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/card-default.c,
	  trunk/src/libopensc/card-emv.c, trunk/src/libopensc/card-flex.c,
	  trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/card-setcos.c,
	  trunk/src/libopensc/card-tcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/internal.h, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/reader-pcsc.c,
	  trunk/src/libopensc/sc-internal.h, trunk/src/libopensc/sc.c,
	  trunk/src/libopensc/sec.c, trunk/src/tools/cryptoflex-tool.c,
	  trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/pkcs15-crypt.c,
	  trunk/src/tools/pkcs15-init.c, trunk/src/tools/pkcs15-tool.c: -
	  implemented reader abstraction layer; now it's easier to add
	  support for e.g. CT-API - renamed ops_data field to drv_data in
	  struct sc_card - copied coding style document from Linux kernel

2002-02-24 16:50  aet

	* trunk/src/libopensc/card-gpk.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/tools/pkcs15-gpk.c, trunk/src/tools/pkcs15-init.c,
	  trunk/src/tools/profile.c, trunk/src/tools/profile.h: Minor
	  changes to get rid of compiler warnings for various OS's

2002-02-23 13:38  jey

	* trunk/src/libopensc/card-gpk.c, trunk/src/libopensc/cardctl.h,
	  trunk/src/tools/gpk-rw.profile, trunk/src/tools/pkcs15-gpk.c,
	  trunk/src/tools/pkcs15-init.c, trunk/src/tools/pkcs15-init.h,
	  trunk/src/tools/profile.c, trunk/src/tools/profile.h: -
	  implemented RSA and DSA key downloading to GPK cards

2002-02-22 20:46  jey

	* trunk/src/tools/opensc-explorer.c: - a small fix

2002-02-22 07:18  jey

	* trunk/src/libopensc/cardctl.h, trunk/src/tools/gpk-rw.profile,
	  trunk/src/tools/pkcs15-gpk.c, trunk/src/tools/pkcs15-init.c,
	  trunk/src/tools/pkcs15-init.h, trunk/src/tools/profile.c,
	  trunk/src/tools/profile.h: - added some missing files from last
	  commits, whoops

2002-02-21 19:23  jey

	* trunk/src/libopensc/card.c, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/opensc.h: - added sc_update_binary(),
	  sc_append_binary() and sc_write_binary() with their
	  corresponding ISO 7816-4 reference functions

2002-02-21 18:53  jey

	* trunk/src/libopensc/Makefile.am, trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/card-setcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/pkcs15.h, trunk/src/libopensc/sc.c,
	  trunk/src/tools/Makefile.am, trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/util.c, trunk/src/tools/util.h: - added ATR for
	  RSA SecurID 3100 - exported pkcs15_encode_* functions - minor
	  modification to sc_file_add_acl_entry() - boosted up
	  opensc-explorer - added error(), warn() and fatal() -
	  implemented a generic PKCS #15 structure generation tool

2002-02-20 18:42  aet

	* trunk/src/libopensc/sc.c: Fix memory leak for
	  sc_establish_context

2002-02-20 09:56  jey

	* trunk/src/libopensc/Makefile.am, trunk/src/libopensc/card-emv.c,
	  trunk/src/libopensc/card-flex.c, trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/card-setcos.c,
	  trunk/src/libopensc/card-tcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/dir.c, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-sec.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/pkcs15.h, trunk/src/libopensc/sc.c,
	  trunk/src/tests/Makefile.am, trunk/src/tools/cryptoflex-tool.c,
	  trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/pkcs15-tool.c,
	  trunk/src/tools/util.c, trunk/src/tools/util.h: - all instances
	  struct sc_file should now be dynamically allocated with
	  sc_file_new() and released with sc_file_free() - improved ACL's
	  - moved struct sc_card_error to opensc.h - moved EF(DIR) parsing
	  and encoding to dir.c (encoding is not working yet) - removed
	  hst-test.c and filetest.c

2002-02-17 21:55  aet

	* trunk/src/libopensc/sc.c: Bugfix for sc_destroy_context,
	  pcsc_ctx was never released

2002-02-15 23:17  jey

	* trunk/src/libopensc/card-flex.c, trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/card-tcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/internal.h, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/sc-internal.h,
	  trunk/src/libopensc/sc.c, trunk/src/libopensc/sec.c: - added
	  error reporting for several new SWs - added check_sw function to
	  sc_card_operations

2002-02-11 15:55  jey

	* trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/card-default.c,
	  trunk/src/libopensc/card-setcos.c,
	  trunk/src/libopensc/card-tcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/iso7816.c, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/sc.c, trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/opensc-tool.c: - added partial support for TCOS
	  2.0 cards - default card driver now tries to do a GET RESPONSE
	  instead of SELECT FILE to detect the correct CLA byte - moved
	  security attribute parsing from iso7816.c to card-setec.c -
	  added some more sanity checking to sc_check_apdu - added 'debug'
	  command line option to opensc-explorer

2002-02-11 11:01  aet

	* trunk/src/libopensc/card-gpk.c: AIX cc fixes

2002-02-11 10:49  aet

	* trunk/src/libopensc/card-gpk.c: Portability fixes

2002-02-10 18:09  jey

	* trunk/src/libopensc/card-gpk.c: - added a license notice to
	  card-gpk.c

2002-02-10 18:04  jey

	* trunk/src/libopensc/Makefile.am, trunk/src/libopensc/card-gpk.c,
	  trunk/src/libopensc/iso7816.c, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15-pin.c, trunk/src/libopensc/sc.c,
	  trunk/src/libopensc/sec.c, trunk/src/tools/Makefile.am,
	  trunk/src/tools/opensc-explorer.c: - added partial support for
	  GPK 4000 - made line parsing in opensc-explorer saner - moved
	  change_reference_data and reset_retry_counter to iso7816.c,
	  where they belong - added partial libreadline support to
	  opensc-explorer

2002-02-07 13:10  aet

	* trunk/configure.in: small #define HAVE_OPENSSL fixes

2002-02-06 12:32  aet

	* trunk/src/pkcs11/Makefile.am: Add install-exec-local and remove
	  opensc-pkcs11.{la,a}, like we do with opensc-signer

2002-02-06 10:36  aet

	* trunk/aclocal/acx_pthread.m4: Tru64: Fix for
	  PTHREAD_CREATE_JOINABLE $ok

2002-01-29 14:38  aet

	* trunk/src/signer/Makefile.am: Add install-exec-local and remove
	  opensc-signer.{la,a}, any better way to do this?

2002-01-28 21:04  jey

	* trunk/src/libopensc/card.c, trunk/src/libopensc/opensc.h: -
	  added support for T=1 protocol

2002-01-28 19:29  fabled

	* trunk/src/pkcs11/opensc_pkcs11_install.js: Testing version. Use
	  if you dare.

2002-01-28 12:16  aet

	* trunk/README: Change OpenSC web site url to
	  http://www.opensc.org/

2002-01-26 21:16  aet

	* trunk/src/libopensc, trunk/src/libopensc/.cvsignore: Add
	  opensc-config

2002-01-26 16:03  jey

	* trunk/configure.in, trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/card-flex.c,
	  trunk/src/libopensc/opensc-config.in: - added opensc-config
	  script - added ATR string for Cryptoflex 8k

2002-01-26 12:16  aet

	* trunk/src/libopensc/pkcs15-cache.c,
	  trunk/src/pkcs11/framework-pkcs15.c: Fix compiler warnings

2002-01-24 18:37  jey

	* trunk/Makefile.am, trunk/NEWS, trunk/README.Cryptoflex,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15.c, trunk/src/tests/sc-test.c,
	  trunk/src/tools/cryptoflex-tool.c: - last minute changes before
	  the new release

2002-01-24 16:27  fabled

	* trunk/src/pkcs11/Makefile.am,
	  trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/pkcs11-object.c,
	  trunk/src/pkcs11/pkcs11-session.c, trunk/src/pkcs11/slot.c: -
	  many bug fixes in pkcs #11 module - pkcs #11 module now creates
	  public key objects too

2002-01-24 16:24  jey

	* trunk/README.Cryptoflex, trunk/configure.in,
	  trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/pkcs15-pin.c, trunk/src/libopensc/pkcs15.h:
	  - added README.Cryptoflex - modified ChangeLog - _really_ bumped
	  up the version number this time

2002-01-24 16:02  jey

	* trunk/src/libopensc/Makefile.am, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/log.c, trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15-cache.c,
	  trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h,
	  trunk/src/libopensc/sc.c, trunk/src/pam/pam_pkcs15.c,
	  trunk/src/pkcs11/pkcs11-global.c,
	  trunk/src/tools/cryptoflex-tool.c,
	  trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/pkcs15-crypt.c,
	  trunk/src/tools/pkcs15-tool.c, trunk/src/tools/util.c,
	  trunk/src/tools/util.h: - bumped up version number in
	  preparation of the new release - unified PKCS #15 DF decoding -
	  added PKCS #15 file caching

2002-01-24 12:56  aet

	* trunk/src/pkcs11/README, trunk/src/pkcs11/pkcs11-global.c:
	  Silence debug messages by default for upcoming release README
	  update

2002-01-22 17:41  aet

	* trunk/aclocal/acx_pthread.m4: Fix pthread.h checking for recent
	  releases of Tru64

2002-01-22 16:43  jey

	* trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/pkcs11-global.c: - fixed a few typos

2002-01-22 16:26  aet

	* trunk/src/libopensc/card-flex.c,
	  trunk/src/tools/cryptoflex-tool.c: Fix compiler warnings, for
	  digital cc this time

2002-01-22 14:54  fabled

	* trunk/src/pkcs11/misc.c: * many bugfixes in pkcs11 module *
	  memory corruption fix in pkcs15 framework * pool node deletion
	  fixed in misc.c * now detects smartcards in C_GetSlotInfo too

2002-01-22 14:44  fabled

	* trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/pkcs11-global.c, trunk/src/pkcs11/slot.c: Many
	  bugfixes including segfault in card detection and C_GetSlotInfo
	  now detects the cards too.

2002-01-21 15:37  jey

	* trunk/src/tools/cryptoflex-tool.c: - changed PIN1 path in PKCS
	  #15 structure

2002-01-21 15:11  jey

	* trunk/src/libopensc/card-flex.c: - added KEY verification to
	  Cryptoflex driver

2002-01-21 12:49  jey

	* trunk/src/libopensc/card-flex.c, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/sc.c,
	  trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/tools/cryptoflex-tool.c: - added PKCS #15 structure
	  generation to cryptoflex-tool

2002-01-21 11:22  aet

	* trunk/src/signer, trunk/src/signer/.cvsignore: Add *.u

2002-01-21 10:56  aet

	* trunk/src/libopensc/log.h, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/sc-log.h, trunk/src/tools/cryptoflex-tool.c,
	  trunk/src/tools/opensc-explorer.c: Compiler warning fixups for
	  various compilers
	* trunk/src/libopensc, trunk/src/libopensc/.cvsignore,
	  trunk/src/tools, trunk/src/tools/.cvsignore: Add *.u and
	  cryptoflex-tool to .cvsignore

2002-01-21 09:05  jey

	* trunk/src/libopensc/card-flex.c, trunk/src/libopensc/card.c,
	  trunk/src/pkcs11/framework-pkcs15.c,
	  trunk/src/pkcs11/pkcs11-global.c,
	  trunk/src/tools/pkcs15-crypt.c: - improved file selection on
	  Cryptoflex cards - fixed an incompatability in PKCS #11 module

2002-01-20 21:20  jey

	* trunk/src/libopensc/Makefile.am, trunk/src/libopensc/asn1.c,
	  trunk/src/libopensc/card-flex.c,
	  trunk/src/libopensc/card-setcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/defaults.c, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/log.h, trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15-defaults.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-sec.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/pkcs15.h, trunk/src/libopensc/sc-log.h,
	  trunk/src/libopensc/sc.c, trunk/src/libopensc/sec.c,
	  trunk/src/pam/pam_pkcs15.c, trunk/src/tools/Makefile.am,
	  trunk/src/tools/cryptoflex-tool.c,
	  trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/pkcs15-crypt.c,
	  trunk/src/tools/pkcs15-tool.c: - fixed a bug with file
	  permissions in flex_create_file() - added RSA signature
	  generation with Cryptoflex cards - improved security environment
	  handling - implemented cryptoflex-tool

2002-01-20 18:24  aet

	* trunk/src/openssh/README, trunk/src/pam/README,
	  trunk/src/tests/hst-test.c: README updates after not so recent
	  filename changes sc-log.h cleanup for hst-test

2002-01-17 23:47  jey

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/card-flex.c,
	  trunk/src/libopensc/log.c, trunk/src/libopensc/log.h,
	  trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h,
	  trunk/src/libopensc/sc-log.h, trunk/src/tools/pkcs15-crypt.c: -
	  PKCS #15 generation is now in a semi-working state - started
	  coding crypto support for Cryptoflexes

2002-01-17 12:05  aet

	* trunk/src/pkcs11/README, trunk/src/pkcs11/misc.c,
	  trunk/src/pkcs11/pkcs11-global.c, trunk/src/pkcs11/sc-pkcs11.h:
	  README cleanups Fix compiler warnings

2002-01-17 12:04  aet

	* trunk/src/pkcs11/Makefile.am, trunk/src/tools/Makefile.am:
	  Remove gcc-specific options
	* trunk/src/libopensc/log.c, trunk/src/libopensc/log.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/sc-log.h: int
	  error -> int sc_error, since it conflicts with error() and
	  results to compiler error with various compilers.

2002-01-17 11:50  jey

	* trunk/src/tools/opensc-explorer.c: - small bugfix

2002-01-17 11:44  jey

	* trunk/src/libopensc/card-flex.c,
	  trunk/src/libopensc/card-setcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/iso7816.c, trunk/src/libopensc/log.c,
	  trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h,
	  trunk/src/libopensc/sec.c: - improved PKCS #15 generation

2002-01-17 09:37  aet

	* trunk/src/pkcs11/rsaref, trunk/src/pkcs11/rsaref/.cvsignore: Add
	  missing .cvsignore

2002-01-17 00:25  jey

	* trunk/src/tools/Makefile.am: - fixed a goof in last commit

2002-01-16 23:59  jey

	* trunk/THANKS, trunk/src/libopensc/asn1.c,
	  trunk/src/libopensc/asn1.h, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/log.c, trunk/src/libopensc/log.h,
	  trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-sec.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/pkcs15.h, trunk/src/libopensc/sc-asn1.h,
	  trunk/src/libopensc/sc-log.h, trunk/src/libopensc/sc.c,
	  trunk/src/libopensc/sec.c, trunk/src/tools/Makefile.am,
	  trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/pkcs15-crypt.c: - continued to improve PKCS #15
	  generation - fixed a few problems in sc_set_security_env -
	  started to implement Better (tm) object handling for PKCS #15
	  objects

2002-01-16 22:52  fabled

	* trunk/configure.in: Changed pkcs11 header directory to rsaref.

2002-01-16 22:50  fabled

	* trunk/src/pkcs11/rsaref, trunk/src/pkcs11/rsaref/Makefile.am,
	  trunk/src/pkcs11/rsaref/pkcs11.h,
	  trunk/src/pkcs11/rsaref/pkcs11f.h,
	  trunk/src/pkcs11/rsaref/pkcs11t.h,
	  trunk/src/pkcs11/rsaref/unix.h: RSA header files.

2002-01-16 22:49  fabled

	* trunk/src/pkcs11/Makefile.am, trunk/src/pkcs11/README,
	  trunk/src/pkcs11/framework-pkcs15.c, trunk/src/pkcs11/misc.c,
	  trunk/src/pkcs11/pkcs11-global.c,
	  trunk/src/pkcs11/pkcs11-object.c,
	  trunk/src/pkcs11/pkcs11-session.c, trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/pkcs11/slot.c: Rewritten implementation of pkcs#11
	  module. Semiworking.

2002-01-16 22:43  fabled

	* trunk/src/pkcs11/Makefile.am, trunk/src/pkcs11/README,
	  trunk/src/pkcs11/digestsign.c, trunk/src/pkcs11/endecrypt.c,
	  trunk/src/pkcs11/function_table.c, trunk/src/pkcs11/generic.c,
	  trunk/src/pkcs11/misc.c, trunk/src/pkcs11/object.c,
	  trunk/src/pkcs11/sc-pkcs11.h, trunk/src/pkcs11/session.c,
	  trunk/src/pkcs11/slot.c, trunk/src/pkcs11/verify.c: Preparing to
	  commit new implementation of pkcs#11 module.

2002-01-16 20:20  jey

	* trunk/src/libopensc/pkcs15-sec.c, trunk/src/libopensc/sec.c: -
	  better ISO 7816-8 compatibility with various cards

2002-01-15 18:54  aet

	* trunk/src/libopensc/pkcs15.c, trunk/src/tools/opensc-explorer.c:
	  Fix compiler warnings

2002-01-13 23:56  jey

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/card-flex.c,
	  trunk/src/libopensc/card.c, trunk/src/libopensc/internal.h,
	  trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h,
	  trunk/src/libopensc/sc-internal.h,
	  trunk/src/tools/opensc-explorer.c, trunk/src/tools/util.c: -
	  pretty much finished the DER encoder - added delete and create
	  file support for 'flex cards - PKCS #15 DF's are now stored more
	  flexibly; this makes adding new types of DF's (such as PuKDF's)
	  easier - added 'get' and 'put' commands to opensc-explorer

2002-01-10 23:14  jey

	* trunk/docs, trunk/docs/doxygen.conf: - added doxygen.conf

2002-01-10 23:02  jey

	* trunk/src/libopensc/card-emv.c,
	  trunk/src/libopensc/card-setcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/iso7816.c, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15-pin.c, trunk/src/libopensc/sec.c,
	  trunk/src/tools/opensc-explorer.c: - added PIN verification,
	  file creation and file deletion to opensc-explorer - documented
	  the core API a bit using doxygen

2002-01-10 13:49  aet

	* trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/pkcs15-cert.c, trunk/src/tests/hst-test.c,
	  trunk/src/tools/opensc-explorer.c: Fix compiler warnings

2002-01-10 12:33  jey

	* trunk/src/libopensc/Makefile.am, trunk/src/libopensc/asn1.c,
	  trunk/src/libopensc/asn1.h, trunk/src/libopensc/card-default.c,
	  trunk/src/libopensc/card-flex.c,
	  trunk/src/libopensc/card-multiflex.c,
	  trunk/src/libopensc/card.c, trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-sec.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/pkcs15.h, trunk/src/libopensc/sc-asn1.h,
	  trunk/src/libopensc/sc.c, trunk/src/libopensc/sec.c,
	  trunk/src/pam/pam_pkcs15.c, trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/opensc-tool.c: - added preliminary ASN.1
	  encoding support - modified ASN.1 decoding to make it easier to
	  port decoder structures to the encoder - fixed a recently
	  introduced bug in card driver handling - opensc-explorer will
	  now allow only DF's to be cd'd into

2002-01-09 22:15  aet

	* trunk/configure.in: Oops, fixed --with-pcsclite multiple
	  directory probing to actually work.

2002-01-09 18:28  aet

	* trunk/src/pkcs11/README: libsc -> opensc

2002-01-09 13:50  aet

	* trunk/src/tools, trunk/src/tools/.cvsignore: Add opensc-explorer

2002-01-09 01:03  jey

	* trunk/src/libopensc/card-multiflex.c,
	  trunk/src/libopensc/card.c, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/log.c, trunk/src/libopensc/opensc.h,
	  trunk/src/tools/Makefile.am, trunk/src/tools/opensc-explorer.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/util.c,
	  trunk/src/tools/util.h: - created opensc-explorer tool -
	  increased support for CryptoFlex cards

2002-01-08 20:03  aet

	* trunk/src/tests, trunk/src/tests/.cvsignore, trunk/src/tools,
	  trunk/src/tools/.cvsignore: Add missing executables to .cvsignore

2002-01-08 13:56  jey

	* trunk/src/libopensc/Makefile.am, trunk/src/libopensc/asn1.c,
	  trunk/src/libopensc/base64.c,
	  trunk/src/libopensc/card-default.c,
	  trunk/src/libopensc/card-emv.c,
	  trunk/src/libopensc/card-multiflex.c,
	  trunk/src/libopensc/card-setcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/defaults.c, trunk/src/libopensc/emv.c,
	  trunk/src/libopensc/emv.h, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/log.c, trunk/src/libopensc/log.h,
	  trunk/src/libopensc/opensc-emv.h,
	  trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-defaults.c,
	  trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h,
	  trunk/src/libopensc/sc-log.h, trunk/src/libopensc/sc.c,
	  trunk/src/tests/Makefile.am, trunk/src/tests/filetest.c,
	  trunk/src/tests/hst-test.c, trunk/src/tests/sc-test.c,
	  trunk/src/tools/Makefile.am, trunk/src/tools/opensc-crypt.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/pkcs15-crypt.c,
	  trunk/src/tools/pkcs15-tool.c, trunk/src/tools/util.c,
	  trunk/src/tools/util.h: - added preliminary CryptoFlex 16k
	  support - added short names to card drivers - moved various ISO
	  7816-9 functions to their correct places - added write binary
	  support - renamed opensc-crypt to pkcs15-crypt - split a part
	  opensc-tool to pkcs15-tool

2002-01-07 18:32  jey

	* trunk/src/libopensc/Makefile.am, trunk/src/libopensc/asn1.c,
	  trunk/src/libopensc/log.c, trunk/src/libopensc/opensc.h: -
	  finished removing sc- prefix from the .c files

2002-01-07 18:23  jey

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/asn1.h,
	  trunk/src/libopensc/card.c, trunk/src/libopensc/log.c,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/sc-asn1.h,
	  trunk/src/libopensc/sc.c, trunk/src/tools/opensc-tool.c: -
	  renamed sc_asn1_parse to sc_asn1_decode - added capabilities and
	  flags fields to struct sc_card - added a mutex to sc_context for
	  future use

2002-01-07 16:24  aet

	* trunk/configure.in: Oops, accidently removed all pc/sc related
	  stuff while merging changes to opensc-signer/configure.ac, fixed.

2002-01-07 12:41  aet

	* trunk/src/signer/Makefile.am: Add npinclude to SUBDIRS

2002-01-06 23:41  aet

	* trunk/src/common/getopt.c: Fix another compiler warning

2002-01-06 22:17  aet

	* trunk/src/signer/opensc-crypto.c: #include fixup

2002-01-06 21:26  aet

	* trunk/src/signer/dialog.c, trunk/src/signer/signer.c: Fix few
	  compiler warnings on Tru64

2002-01-06 20:35  aet

	* trunk/configure.in: Sync with opensc-signer's configure.ac

2002-01-06 20:06  aet

	* trunk/configure.in: Add CFLAGS_PCSC, CFLAGS_OPENSC, LIBOPENSC

2002-01-06 19:40  aet

	* trunk/src/signer/Makefile.am, trunk/src/signer/dialog.c,
	  trunk/src/signer/opensc-crypto.c,
	  trunk/src/signer/opensc-crypto.h,
	  trunk/src/signer/opensc-support.c,
	  trunk/src/signer/opensc-support.h, trunk/src/signer/signer.c,
	  trunk/src/signer/signer.h, trunk/src/signer/testprog.c: Add
	  CFLAGS_PCSC, CFLAGS_OPENSC, CFLAGS_ASSUAN, LIBOPENSC Add
	  PIN_ENTRY instead of hardcoding it to "/usr/local/bin/gpinentry"
	* trunk/src/libopensc/Makefile.am, trunk/src/openssh/Makefile.am,
	  trunk/src/pam/Makefile.am, trunk/src/pkcs11/Makefile.am,
	  trunk/src/tests/Makefile.am, trunk/src/tools/Makefile.am: Add
	  CFLAGS_PCSC, CFLAGS_OPENSC and LIBOPENSC, use them instead of
	  hardcoding paths into ../libopensc.la, -I../libopensc, etc.

2002-01-05 22:24  aet

	* trunk/src/signer/npinclude/Makefile.am: Syncing with OpenSC's
	  source tree

2002-01-05 21:46  aet

	* trunk/src/signer, trunk/src/signer/.cvsignore,
	  trunk/src/signer/npinclude,
	  trunk/src/signer/npinclude/.cvsignore: Add .cvsignore

2002-01-05 19:05  aet

	* trunk/src/libopensc/internal.h,
	  trunk/src/libopensc/sc-internal.h: Fix typo

2002-01-05 19:01  aet

	* trunk/src/libopensc/card.c, trunk/src/libopensc/internal.h,
	  trunk/src/libopensc/sc-internal.h, trunk/src/libopensc/sc.c:
	  SCardGetStatusChange/rgReaderStates changes for compatibility
	  with older and/or modified pcsc-lite releases.

2002-01-05 14:56  jey

	* trunk/src/pkcs11/generic.c: - added new versions of PKCS #11
	  header files - fixed a typo in generic.c

2002-01-05 14:47  jey

	* trunk/src/pkcs11/generic.c: - blank padding added to some string
	  values - changed a few hardcoded values

2002-01-03 08:47  aet

	* trunk/src/common/getopt.c: Warning fixes

2002-01-03 07:33  aet

	* trunk/src/tools/opensc-tool.c: AIX cc fix

2002-01-03 07:32  aet

	* trunk/configure.in: Slight fixes for getopt_long hack, so it
	  will work for systems without getopt.h at all.

2002-01-02 22:15  aet

	* trunk/configure.in, trunk/src/Makefile.am, trunk/src/common,
	  trunk/src/common/.cvsignore, trunk/src/common/Makefile.am,
	  trunk/src/common/getopt.c, trunk/src/common/getopt.h,
	  trunk/src/common/getopt1.c, trunk/src/openssh/Makefile.am,
	  trunk/src/tools/Makefile.am: Add getopt/getopt_long sources from
	  GNU C Library. Use them only if platform lacks support for
	  getopt_long, like most commercial operating systems do.

2002-01-01 19:56  aet

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15.c: More size_t fixes

2002-01-01 19:54  aet

	* trunk/src/libopensc/log.c: Use \33 instead of \e.

2002-01-01 18:25  jey

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/asn1.h,
	  trunk/src/libopensc/card-multiflex.c, trunk/src/libopensc/log.c,
	  trunk/src/libopensc/sc-asn1.h: - changed \\e back to \e in
	  sc_log.c - changed function prototypes in sc-asn1.c (int -->
	  size_t)

2002-01-01 17:25  jey

	* trunk/src/libopensc/card-multiflex.c,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/sc.c, trunk/src/pkcs11/generic.c,
	  trunk/src/pkcs11/slot.c: - some fixes to the PKCS #11 module

2001-12-31 14:47  aet

	* trunk/src/pkcs11/Makefile.am: Use -avoid-version, as we do with
	  pam module.

2001-12-31 14:39  aet

	* trunk/src/pam/Makefile.am: Remove unneeded install-exec-local

2001-12-31 13:30  jey

	* trunk/src/pkcs11/slot.c: - a small bugfix

2001-12-30 21:30  aet

	* trunk/src/tools/opensc-crypt.c, trunk/src/tools/opensc-tool.c:
	  sc- -> opensc-

2001-12-30 21:17  aet

	* trunk/src/libopensc/Makefile.am, trunk/src/libopensc/asn1.c,
	  trunk/src/libopensc/base64.c,
	  trunk/src/libopensc/card-multiflex.c,
	  trunk/src/libopensc/card-setcos.c,
	  trunk/src/libopensc/internal.h, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/log.c, trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-defaults.c,
	  trunk/src/libopensc/pkcs15-pin.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/pkcs15.h, trunk/src/libopensc/sc-internal.h,
	  trunk/src/openssh/Makefile.am, trunk/src/openssh/opensc-ssh.c,
	  trunk/src/pam/Makefile.am, trunk/src/pam/pam_pkcs15.c,
	  trunk/src/pkcs11/Makefile.am, trunk/src/pkcs11/session.c,
	  trunk/src/tests/Makefile.am, trunk/src/tests/base64.c,
	  trunk/src/tests/hst-test.c, trunk/src/tests/pintest.c,
	  trunk/src/tools/Makefile.am, trunk/src/tools/opensc-crypt.c,
	  trunk/src/tools/opensc-tool.c, trunk/src/tools/util.c: Merges
	  with SCIDI to help integrating build process with it Remove some
	  gcc specific flags from Makefile.am Rename some header defines
	  size_t vs. int fixups opensc.h: Define inline as null for other
	  compilers than gcc, for now Port pam_pkcs15 to compile for
	  Solaris and HP-UX, untested Fix compiler warnings OpenSC now
	  compiles cleanly for Tru64, AIX and HP-UX. The only problem is
	  the tools using getopt_long() (GNU extension), to be fixed
	  later..

2001-12-29 19:03  jey

	* trunk/NEWS, trunk/src/libopensc/asn1.c,
	  trunk/src/libopensc/asn1.h, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/pkcs15-cert.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/sc-asn1.h: - ported certificate reading to
	  new ASN.1 code

2001-12-29 18:14  jey

	* trunk/src/libopensc/Makefile.am: - renamed LIBPCSCLITE to LIBPCSC

2001-12-29 12:44  jey

	* trunk/src/libopensc/Makefile.am, trunk/src/libopensc/card-emv.c,
	  trunk/src/libopensc/iso7816.c, trunk/src/libopensc/sc-emv.c: -
	  another portability fix - renamed sc-emv.c to sc-card-emv.c

2001-12-29 12:39  jey

	* trunk/src/libopensc/iso7816.c: - fixed a portability problem

2001-12-29 12:26  aet

	* trunk/configure.in: Use -Werror if compiling with gcc Add check
	  for getopt.h

2001-12-29 12:03  jey

	* trunk/src/tools/util.c, trunk/src/tools/util.h: - added missing
	  files

2001-12-29 11:57  jey

	* trunk/src/libopensc/sec.c: - fixed resplen values in sc_decipher
	  and sc_compute_signature

2001-12-29 02:07  jey

	* trunk/NEWS, trunk/configure.in, trunk/src/libopensc/asn1.c,
	  trunk/src/libopensc/card-default.c,
	  trunk/src/libopensc/card-multiflex.c,
	  trunk/src/libopensc/card.c, trunk/src/libopensc/internal.h,
	  trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h,
	  trunk/src/libopensc/sc-emv.c, trunk/src/libopensc/sc-internal.h,
	  trunk/src/libopensc/sc.c, trunk/src/tests/hst-test.c,
	  trunk/src/tools/Makefile.am, trunk/src/tools/opensc-crypt.c,
	  trunk/src/tools/opensc-tool.c: - added preliminary support for
	  EMV cards - changed a few function prototypes - implemented
	  access control lists to files - added sc_read_record() function
	  - updated the NEWS file

2001-12-28 14:24  aet

	* trunk/src/pkcs11/digestsign.c,
	  trunk/src/pkcs11/function_table.c, trunk/src/pkcs11/generic.c,
	  trunk/src/pkcs11/object.c, trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/pkcs11/session.c, trunk/src/pkcs11/slot.c: Move
	  hex_dump() to generic.c Convert all C++-style comments to
	  C-style Fix compiler warnings for various platforms

2001-12-28 14:23  jey

	* trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/pkcs15-pin.c, trunk/src/libopensc/pkcs15.h:
	  - sc_pkcs15_change_pin() prototype changed

2001-12-28 14:19  jey

	* trunk/TODO, trunk/src/openssh/opensc-ssh.c,
	  trunk/src/tests/Makefile.am, trunk/src/tests/base64.c,
	  trunk/src/tests/hst-test.c, trunk/src/tests/p15dump.c,
	  trunk/src/tests/pintest.c, trunk/src/tools/opensc-crypt.c,
	  trunk/src/tools/opensc-tool.c: - fixed some compile warnings -
	  updated TODO

2001-12-27 17:25  jey

	* trunk/src/libopensc/Makefile.am, trunk/src/libopensc/internal.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/sc-emv.c,
	  trunk/src/libopensc/sc-internal.h, trunk/src/libopensc/sc.c,
	  trunk/src/tools/opensc-tool.c: - added preliminary EMV support -
	  made a few bug fixes relating to select_file operation

2001-12-25 20:45  jey

	* trunk/src/libopensc/Makefile.am, trunk/src/libopensc/asn1.c,
	  trunk/src/libopensc/base64.c,
	  trunk/src/libopensc/card-default.c,
	  trunk/src/libopensc/card-multiflex.c,
	  trunk/src/libopensc/card-setcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/defaults.c, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-sec.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/sc.c, trunk/src/libopensc/sec.c,
	  trunk/src/pam/Makefile.am, trunk/src/pkcs11/Makefile.am,
	  trunk/src/tools/opensc-crypt.c, trunk/src/tools/opensc-tool.c: -
	  added default driver for unidentified cards - added select_file
	  operation in Multiflex driver - added 'list-drivers' command to
	  opensc-tool - moved stuff from opensc.h to sc-internal.h -
	  improved locking behaviour

2001-12-25 20:38  jey

	* trunk/src/signer/signer.c: - added plugin description strings

2001-12-24 15:48  jey

	* trunk/src/pam/Makefile.am: - added "-avoid-version" to LDFLAGS

2001-12-23 15:48  jey

	* trunk/src/signer/dialog.c, trunk/src/signer/opensc-crypto.c,
	  trunk/src/signer/opensc-support.c: - updated to support latest
	  version of OpenSC

2001-12-23 14:33  jey

	* trunk/NEWS, trunk/README: - updated NEWS and README

2001-12-23 14:17  aet

	* trunk/configure.in, trunk/src/openssh/Makefile.am,
	  trunk/src/pam/Makefile.am: Add HAVE_SSL_AND_SSL conditional
	  because automake isn't flexible enough Minor fixes for
	  libpcsclite probe

2001-12-22 23:51  jey

	* trunk, trunk/.cvsignore, trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/card-multiflex.c,
	  trunk/src/libopensc/card.c, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-sec.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/tests/hst-test.c: - changed call convention of
	  sc_select_file() - begun to add support for Multiflex cards

2001-12-22 23:14  aet

	* trunk/src/openssh/Makefile.am, trunk/src/tests/Makefile.am:
	  'make dist' fixes

2001-12-22 23:13  aet

	* trunk/bootstrap: Disable --force for automake

2001-12-22 23:07  jey

	* trunk, trunk/.cvsignore: - added some filenames to .cvsignore

2001-12-22 23:06  jey

	* trunk/AUTHORS: - added authors Anssi Tapaninen and Timo Ter&#65533;s

2001-12-22 22:55  aet

	* trunk/bootstrap, trunk/configure.in, trunk/src/pam/Makefile.am:
	  Fix LIBPCSCLITE Rename COMPILE_PAM conditional to HAVE_PAM
	  Remove lex check from configure.ac

2001-12-22 22:27  aet

	* trunk/Makefile.am, trunk/bootstrap, trunk/configure.in,
	  trunk/src/Makefile.am, trunk/src/libopensc/Makefile.am,
	  trunk/src/openssh/Makefile.am, trunk/src/pam/Makefile.am,
	  trunk/src/pkcs11/Makefile.am, trunk/src/tests/Makefile.am,
	  trunk/src/tools/Makefile.am: Autotools update. Add bunch of
	  stuff to configure.in to make building of libopensc more
	  portable to various operating systems. Requires autoconf 2.52
	  and automake 1.5. Add all necessary files except Makefile.in, so
	  you still need to run ./bootstrap though. There's not much point
	  adding config.guess and friends without them, maybe later.

2001-12-22 22:20  aet

	* trunk/aclocal/Makefile.am, trunk/aclocal/acx_pthread.m4,
	  trunk/aclocal/libtool.m4: Add directory aclocal for m4 macros.
	* trunk/src/openssh, trunk/src/openssh/.cvsignore, trunk/src/pam,
	  trunk/src/pam/.cvsignore, trunk/src/tests,
	  trunk/src/tests/.cvsignore, trunk/src/tools,
	  trunk/src/tools/.cvsignore: Add opensc-ssh, pam_pkcs15-test,
	  bas64, hst-test, lottery, p15dump, pintest, prngtest,
	  opensc-crypt and opensc-tool binary to .cvsignore.

2001-12-22 22:11  aet

	* trunk, trunk/.cvsignore, trunk/aclocal,
	  trunk/aclocal/.cvsignore, trunk/src, trunk/src/.cvsignore,
	  trunk/src/libopensc, trunk/src/libopensc/.cvsignore,
	  trunk/src/openssh, trunk/src/openssh/.cvsignore, trunk/src/pam,
	  trunk/src/pam/.cvsignore, trunk/src/pkcs11,
	  trunk/src/pkcs11/.cvsignore, trunk/src/tests,
	  trunk/src/tests/.cvsignore, trunk/src/tools,
	  trunk/src/tools/.cvsignore: Add .cvsignore skeleton

2001-12-22 20:52  jey

	* trunk/src/openssh/opensc-ssh.c,
	  trunk/src/openssh/openssh-3.0.2p1-patch.diff,
	  trunk/src/pam/pam_pkcs15.c, trunk/src/pkcs11/slot.c,
	  trunk/src/tests/hst-test.c, trunk/src/tests/lottery.c,
	  trunk/src/tests/p15dump.c, trunk/src/tests/pintest.c,
	  trunk/src/tests/prngtest.c, trunk/src/tools/opensc-crypt.c,
	  trunk/src/tools/opensc-tool.c: - updated to work with latest
	  library version

2001-12-22 20:43  jey

	* trunk/src/libopensc/Makefile.am, trunk/src/libopensc/asn1.c,
	  trunk/src/libopensc/card-setcos.c, trunk/src/libopensc/card.c,
	  trunk/src/libopensc/defaults.c, trunk/src/libopensc/iso7816.c,
	  trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-sec.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/pkcs15.h, trunk/src/libopensc/sc.c: - added
	  card abstraction layer support - pretty much finished migrating
	  to new ASN.1 code - changed call semantics for sc_select_file()
	  - moved functions around

2001-12-22 13:38  jey

	* trunk/src/libopensc/base64.c, trunk/src/libopensc/log.c,
	  trunk/src/libopensc/log.h, trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15.h,
	  trunk/src/libopensc/sc-log.h, trunk/src/libopensc/sc.c,
	  trunk/src/libopensc/sec.c: - LINT fixes

2001-12-21 23:34  jey

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/log.c,
	  trunk/src/libopensc/log.h, trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-sec.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/pkcs15.h, trunk/src/libopensc/sc-log.h,
	  trunk/src/libopensc/sc.c, trunk/src/libopensc/sec.c: - continued
	  improving ASN.1 decoding - improved debug levels - added some
	  PC/SC Lite workarounds

2001-12-20 13:57  jey

	* trunk/src/libopensc/Makefile.am, trunk/src/libopensc/asn1.c,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-sec.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/sc.c, trunk/src/libopensc/sec.c: - paving
	  way for dynamic card modules - fixed a few memory leaks

2001-12-20 12:22  jey

	* trunk/src/libopensc/pkcs15-sec.c: - added basic logging to
	  sc-pkcs15-sec.c

2001-12-20 12:16  jey

	* trunk/src/tests/base64.c, trunk/src/tests/hst-test.c,
	  trunk/src/tests/sc-test.c, trunk/src/tools/opensc-crypt.c,
	  trunk/src/tools/opensc-tool.c: - added base64 conversion tool -
	  updated to work with latest version of OpenSC library

2001-12-19 21:58  jey

	* trunk/src/libopensc/Makefile.am, trunk/src/libopensc/asn1.c,
	  trunk/src/libopensc/asn1.h, trunk/src/libopensc/log.c,
	  trunk/src/libopensc/log.h, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15-cert.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/sc-asn1.h, trunk/src/libopensc/sc-log.h,
	  trunk/src/libopensc/sc.c: - remembered ChangeLog - moved some
	  functions from sc.c to sc-iso7816-4.c - added fancy colors to
	  log output =) - removed global sc_debug variable, moved it to
	  sc_context - fixed new ASN.1 code (possibly still unstable)

2001-12-17 21:36  jey

	* trunk/src/pkcs11/slot.c: - applied a patch by Antti Tapaninen
	  that fixes a memory leak

2001-12-16 20:30  jey

	* trunk/src/libopensc/pkcs15-cert.c: - added a small fix. Swedish
	  Posten eID cards are now supported.

2001-12-16 18:46  jey

	* trunk/configure.in, trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/asn1.c, trunk/src/libopensc/asn1.h,
	  trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-defaults.c,
	  trunk/src/libopensc/pkcs15-pin.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/pkcs15.h, trunk/src/libopensc/sc-asn1.h,
	  trunk/src/libopensc/sc.c: - bumped version number up to 0.4.0 -
	  improved ASN.1 decoding _lots_

2001-12-15 01:48  jey

	* trunk/NEWS: - latest breaking news

2001-12-15 01:44  jey

	* trunk/TODO, trunk/src/openssh/README,
	  trunk/src/openssh/openssh-3.0.2p1-patch.diff: - updated OpenSSH
	  support

2001-12-15 01:29  jey

	* trunk/README, trunk/configure.in,
	  trunk/src/libopensc/Makefile.am, trunk/src/libopensc/log.c,
	  trunk/src/libopensc/log.h, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15-sec.c, trunk/src/libopensc/sc-log.h,
	  trunk/src/libopensc/sc.c, trunk/src/libopensc/sec.c: - paving
	  way for version 0.3.5

2001-12-15 01:27  jey

	* trunk/src/tools/opensc-crypt.c: - meddled with command
	  abbreviations

2001-12-15 01:10  jey

	* trunk/src/signer/Makefile.am, trunk/src/signer/dialog.h: - fixed
	  distribution tarball generation

2001-12-15 01:08  jey

	* trunk/src/signer/npinclude/npunix.c, trunk/src/signer/npunix.c:
	  - moved npunix.c

2001-12-15 00:57  jey

	* trunk/src/signer/Makefile.am: - fixed changed "include" to
	  "npinclude" - added a note about assuan to README

2001-12-15 00:46  jey

	* trunk/src/signer/dialog.c: - removed unnecessary assuan cruft

2001-12-15 00:39  jey

	* trunk/src/signer/Makefile, trunk/src/signer/Makefile.am,
	  trunk/src/signer/dialog.c, trunk/src/signer/dialog.cpp,
	  trunk/src/signer/dialog.h, trunk/src/signer/npinclude,
	  trunk/src/signer/npinclude/jri.h,
	  trunk/src/signer/npinclude/jri_md.h,
	  trunk/src/signer/npinclude/jritypes.h,
	  trunk/src/signer/npinclude/npapi.h,
	  trunk/src/signer/npinclude/npupp.h,
	  trunk/src/signer/opensc-crypto.c, trunk/src/signer/signer.c,
	  trunk/src/signer/signer.h: - added include files from Netscape
	  plugin SDK - removed hardcoded PIN - added PIN dialog through
	  assuan

2001-12-14 16:37  jey

	* trunk/src/tests/sc-test.c, trunk/src/tools/opensc-crypt.c,
	  trunk/src/tools/opensc-tool.c: - updated tools to support latest
	  version of the library

2001-12-13 21:19  jey

	* trunk/src/libopensc/Makefile.am, trunk/src/libopensc/base64.c,
	  trunk/src/libopensc/log.c, trunk/src/libopensc/log.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/sc-log.h,
	  trunk/src/libopensc/sc.c, trunk/src/libopensc/sec.c: - improved
	  logging facilities - removed a few compiler warnings

2001-12-11 14:53  jey

	* trunk/src/tools/opensc-tool.c: - added "learn-card" command to
	  opensc-tool

2001-12-11 14:52  jey

	* trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/pkcs15-cert.c, trunk/src/libopensc/pkcs15.h:
	  - improved certificate caching

2001-12-08 15:35  jey

	* trunk/Makefile.am: - added depcomp to AUX_DIST

2001-12-08 15:27  jey

	* trunk/Makefile.am, trunk/bootstrap, trunk/configure.in,
	  trunk/src/libopensc/defaults.c,
	  trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15.h,
	  trunk/src/libopensc/sc.c: - removed config directory - fixed
	  compiling with C++ - added error SC_ERROR_CARD_RESET

2001-12-08 14:19  jey

	* trunk/src/signer/Makefile, trunk/src/signer/dialog.cpp,
	  trunk/src/signer/dialog.h, trunk/src/signer/signer.c,
	  trunk/src/signer/signer.h, trunk/src/signer/testprog.c: - begun
	  to implement PIN dialog

2001-12-07 00:57  jey

	* trunk/src/signer/Makefile, trunk/src/signer/opensc-crypto.c,
	  trunk/src/signer/opensc-crypto.h,
	  trunk/src/signer/opensc-support.c,
	  trunk/src/signer/opensc-support.h, trunk/src/signer/signer.c,
	  trunk/src/signer/signer.h, trunk/src/signer/testprog.c: - first
	  working version of signer plugin

2001-12-02 19:21  jey

	* trunk/configure.in, trunk/src/libopensc/Makefile.am,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/sec.c: - fixed sc_pkcs15_change_pin()

2001-12-02 19:17  jey

	* trunk/src/libopensc/base64.c, trunk/src/libopensc/opensc.h: -
	  added support for Base64 decoding

2001-11-30 11:57  jey

	* trunk/src/pkcs11/digestsign.c, trunk/src/signer/signer.c,
	  trunk/src/tools/opensc-tool.c: - added PIN changing support -
	  started to work on nsplugin

2001-11-27 23:37  jey

	* trunk/README: - small changes in README

2001-11-27 21:25  jey

	* trunk/src/pkcs11/sc-pkcs11.h, trunk/src/tests/hst-test.c,
	  trunk/src/tests/p15dump.c: - a few fixes for libopensc 0.3.2
	  support

2001-11-27 21:11  jey

	* trunk/Makefile.am, trunk/NEWS, trunk/README, trunk/configure.in,
	  trunk/src/libopensc/Makefile.am, trunk/src/libopensc/sc.c: -
	  fixed a few bugs in Autotools support

2001-11-26 20:14  jey

	* trunk/AUTHORS, trunk/INSTALL, trunk/Makefile.am, trunk/NEWS,
	  trunk/README, trunk/THANKS, trunk/bootstrap, trunk/configure.in,
	  trunk/src/libopensc/Makefile.am, trunk/src/libopensc/sc.c: -
	  started to migrate to GNU Autotools

2001-11-26 16:14  jey

	* trunk/src/libopensc/defaults.c,
	  trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-defaults.c,
	  trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h,
	  trunk/src/libopensc/sc.c, trunk/src/libopensc/sec.c,
	  trunk/src/pam/pam_pkcs15.c: - added defaults for FINEID S4-2
	  (organization) cards - fixed a few typos - renamed
	  _sc_sw_to_errorcode() to sc_sw_to_errorcode() - PAM module now
	  uses RSA_sign instead of RSA_public_encrypt

2001-11-24 15:12  jey

	* trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/pkcs15.h: - changed "sc.h" to "opensc.h"

2001-11-24 13:34  jey

	* trunk/src/openssh/opensc-ssh.c: - changed project name to OpenSC
	  - removed obsolete rsa_libsc.c

2001-11-24 13:32  jey

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/base64.c,
	  trunk/src/libopensc/defaults.c,
	  trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-sec.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/pkcs15.h, trunk/src/libopensc/sc.c,
	  trunk/src/libopensc/sec.c, trunk/src/pam/pam_pkcs15.c,
	  trunk/src/pkcs11/generic.c, trunk/src/tests/hst-test.c,
	  trunk/src/tests/lottery.c, trunk/src/tests/p15dump.c,
	  trunk/src/tests/pintest.c, trunk/src/tests/prngtest.c,
	  trunk/src/tests/sc-test.c, trunk/src/tools/opensc-crypt.c,
	  trunk/src/tools/opensc-tool.c: - changed project name to OpenSC

2001-11-22 15:40  jey

	* trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15.h, trunk/src/libopensc/sc.c,
	  trunk/src/libopensc/sec.c, trunk/src/tools/opensc-crypt.c,
	  trunk/src/tools/opensc-tool.c: - added sc-crypt program

2001-11-21 23:28  jey

	* trunk/src/pkcs11/digestsign.c: - converted C_Sign() to use the
	  new API

2001-11-21 22:40  jey

	* trunk/src/tools/opensc-tool.c: - small fix in sc-tool.c

2001-11-21 21:19  jey

	* trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-sec.c, trunk/src/libopensc/pkcs15.h,
	  trunk/src/libopensc/sc.c, trunk/src/openssh/README,
	  trunk/src/openssh/opensc-ssh.c: - added install target to libsc
	  Makefile - added a few functions - added a patch against OpenSSH
	  3.0.1p1 to enable libsc support

2001-11-20 22:21  jey

	* trunk/src/libopensc/defaults.c,
	  trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-sec.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/pkcs15.h, trunk/src/libopensc/sc.c,
	  trunk/src/libopensc/sec.c, trunk/src/openssh,
	  trunk/src/openssh/opensc-ssh.c, trunk/src/pam/README,
	  trunk/src/pam/pam_pkcs15.c, trunk/src/signer/Makefile,
	  trunk/src/signer/signer.c, trunk/src/tests/hst-test.c,
	  trunk/src/tests/pintest.c, trunk/src/tools/opensc-tool.c: -
	  added very partial SSH support - rearranged some functions -
	  added several new functions - fixed handling of SW's

2001-11-18 20:36  jey

	* trunk/src/tools/opensc-tool.c: - small bug fixed

2001-11-18 01:52  jey

	* trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/sc.c, trunk/src/tests/hst-test.c,
	  trunk/src/tests/sc-test.c, trunk/src/tools,
	  trunk/src/tools/opensc-tool.c: - added sc-tool - removed
	  certtest.c

2001-11-17 15:48  jey

	* trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-pin.c, trunk/src/libopensc/sc.c,
	  trunk/src/pam/README, trunk/src/pam/pam_pkcs15.c,
	  trunk/src/tests/p15dump.c: - added README for PAM module - added
	  a few error messages - fixed certificate caching (which is still
	  kludgy)

2001-11-17 14:55  jey

	* trunk/src/libopensc/defaults.c,
	  trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15.c, trunk/src/libopensc/pkcs15.h,
	  trunk/src/libopensc/sc.c, trunk/src/pam/pam_pkcs15.c,
	  trunk/src/tests/p15dump.c: - added defaults; full PKCS#15
	  parsing is no-longer required at startup

2001-11-17 00:11  jey

	* trunk/src/libopensc/asn1.c, trunk/src/libopensc/asn1.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/sc-asn1.h,
	  trunk/src/libopensc/sc.c, trunk/src/pam/pam_pkcs15.c,
	  trunk/src/tests/hst-test.c, trunk/src/tests/lottery.c: - PAM
	  module is semi-working now - added sc_asn1_put_tag() and
	  sc_restore_security_env() functions - preliminary support for
	  CREATE FILE and DELETE FILE commands

2001-11-15 14:44  jey

	* trunk/src/pam, trunk/src/pam/pam_pkcs15.c: - added a PAM module
	  playground directory

2001-11-14 13:43  jey

	* trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-sec.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/sc.c: - committed a patch from Antti
	  Tapaninen <aet@cc.hut.fi>

2001-11-07 14:36  jey

	* trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/sc.c, trunk/src/tests/hst-test.c: - moved
	  sc_list_files() to sc.c

2001-11-07 13:45  jey

	* trunk/src/libopensc/opensc.h, trunk/src/libopensc/sc.c,
	  trunk/src/tests/sc-test.c: - fixed sc_get_random() - added ATR
	  to struct sc_card

2001-11-06 18:43  fabled

	* trunk/src/pkcs11/digestsign.c, trunk/src/pkcs11/endecrypt.c,
	  trunk/src/pkcs11/function_table.c, trunk/src/pkcs11/generic.c,
	  trunk/src/pkcs11/misc.c, trunk/src/pkcs11/object.c,
	  trunk/src/pkcs11/sc-pkcs11.h, trunk/src/pkcs11/session.c,
	  trunk/src/pkcs11/slot.c, trunk/src/pkcs11/verify.c: Updated
	  license to LGPL. Added short description.

2001-11-06 18:34  jey

	* trunk/COPYING, trunk/src/libopensc/asn1.c,
	  trunk/src/libopensc/asn1.h, trunk/src/libopensc/base64.c,
	  trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-sec.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/pkcs15.h, trunk/src/libopensc/sc-asn1.h,
	  trunk/src/libopensc/sc.c, trunk/src/pkcs11/README,
	  trunk/src/tests/p15dump.c: - changed license to LGPL - moved
	  ASN.1 function definitions from sc.h to sc-asn1.h

2001-11-05 19:39  jey

	* trunk/src/libopensc/base64.c,
	  trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15.h, trunk/src/libopensc/sc.c,
	  trunk/src/tests/hst-test.c, trunk/src/tests/lottery.c,
	  trunk/src/tests/prngtest.c: - fixed base64 encoding function -
	  added file listing test to hst-test.c

2001-11-04 14:08  jey

	* trunk/src/libopensc/opensc.h, trunk/src/libopensc/sc.c,
	  trunk/src/tests/lottery.c, trunk/src/tests/p15dump.c,
	  trunk/src/tests/pintest.c, trunk/src/tests/sc-test.c: assorted
	  small fixes

2001-11-04 13:57  jey

	* trunk/src/libopensc/base64.c, trunk/src/libopensc/opensc.h,
	  trunk/src/libopensc/pkcs15-cert.c, trunk/src/libopensc/sc.c,
	  trunk/src/tests/prngtest.c: - added support for base64 encoding
	  - added certtest tool

2001-11-01 15:44  jey

	* trunk/src/tests/sc-test.c: - added a 'return 0' statement

2001-11-01 15:43  jey

	* trunk/src/libopensc, trunk/src/libopensc/asn1.c,
	  trunk/src/libopensc/asn1.h, trunk/src/libopensc/opensc-pkcs15.h,
	  trunk/src/libopensc/opensc.h, trunk/src/libopensc/pkcs15-cert.c,
	  trunk/src/libopensc/pkcs15-pin.c,
	  trunk/src/libopensc/pkcs15-prkey.c,
	  trunk/src/libopensc/pkcs15-sec.c, trunk/src/libopensc/pkcs15.c,
	  trunk/src/libopensc/pkcs15.h, trunk/src/libopensc/sc-asn1.h,
	  trunk/src/libopensc/sc.c, trunk/src/libopensc/sec.c,
	  trunk/src/pkcs11/generic.c, trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/signer, trunk/src/signer/Makefile,
	  trunk/src/signer/npunix.c, trunk/src/signer/stubs.c,
	  trunk/src/tests/hst-test.c, trunk/src/tests/lottery.c,
	  trunk/src/tests/p15dump.c, trunk/src/tests/pintest.c,
	  trunk/src/tests/prngtest.c, trunk/src/tests/sc-test.c,
	  trunk/src/tests/sc-test.h: - moved libsc to its own directory -
	  added non-working MIME plugin for "text/x-text-to-sign" - added
	  pseudo-random number generator support - split hst-test.c into
	  smaller files

2001-10-30 16:16  fabled

	* trunk/src/pkcs11/digestsign.c, trunk/src/pkcs11/endecrypt.c,
	  trunk/src/pkcs11/function_table.c, trunk/src/pkcs11/generic.c,
	  trunk/src/pkcs11/misc.c, trunk/src/pkcs11/object.c,
	  trunk/src/pkcs11/sc-pkcs11.h, trunk/src/pkcs11/session.c,
	  trunk/src/pkcs11/slot.c, trunk/src/pkcs11/verify.c: Added
	  copyright notes.

2001-10-29 15:52  jey

	* trunk/src/tests/hst-test.c: - updated README.decrypt - fixed a
	  few compiler warnings

2001-10-25 11:56  jey

	* trunk/src/pkcs11/generic.c, trunk/src/pkcs11/session.c,
	  trunk/src/pkcs11/slot.c, trunk/src/tests/hst-test.c: added: -
	  certificate parsing - support for reading RSA public key modulus
	  on the fly - support for ASN.1 object id decoding and printing -
	  fixed a lot of u8 * --> const u8 *

2001-10-24 14:48  jey

	* trunk/src/tests/hst-test.c: removed hard-coded PIN code... =)

2001-10-24 14:02  jey

	* trunk/src/pkcs11/generic.c, trunk/src/pkcs11/object.c,
	  trunk/src/pkcs11/slot.c, trunk/src/tests/hst-test.c: latest
	  version

2001-10-24 09:31  jey

	* trunk/COPYING: added COPYING file

2001-10-22 21:09  fabled

	* trunk/src/pkcs11/digestsign.c, trunk/src/pkcs11/sc-pkcs11.h,
	  trunk/src/pkcs11/slot.c: Implementid basic signing functionality.

2001-10-22 21:05  jey

	* trunk/src/tests/hst-test.c: dirty fix

2001-10-22 20:43  jey

	* trunk/src/tests/hst-test.c: - quick and dirty fix applied

2001-10-22 20:07  jey

	* trunk/src/tests/hst-test.c: - added ability to compute digital
	  signatures - split functions to different files

2001-10-22 14:51  jey

	* trunk/src/tests/hst-test.c: - implemented decrypt support -
	  split PIN related functions to a separate file

2001-10-21 22:25  fabled

	* trunk/src/pkcs11/README, trunk/src/pkcs11/generic.c,
	  trunk/src/pkcs11/object.c, trunk/src/pkcs11/session.c,
	  trunk/src/pkcs11/slot.c, trunk/src/pkcs11/verify.c: Updates.

2001-10-21 21:26  jey

	* trunk/src/tests/hst-test.c: small bug-fix in
	  sc_enum_certificates()

2001-10-21 21:22  jey

	* trunk/src/tests/hst-test.c: - added struct sc_path - implemented
	  private key enumeration

2001-10-21 19:42  jey

	* trunk/src/pkcs11/generic.c, trunk/src/pkcs11/session.c,
	  trunk/src/pkcs11/slot.c, trunk/src/tests/hst-test.c: fixed PIN
	  info reading

2001-10-21 19:06  jey

	* trunk/src/tests/hst-test.c: sc_pkcs15_read_certificate now
	  dynamically allocates output buffer

2001-10-21 18:55  jey

	* trunk/src/tests/hst-test.c: - implemented certificate reading -
	  started to implement private key enumeration

2001-10-21 18:12  jey

	* trunk/src/pkcs11/slot.c, trunk/src/tests/hst-test.c: - given
	  ASN.1 decoding routines a facelift - implemented certificate
	  enumeration

2001-10-21 16:26  fabled

	* trunk/src/pkcs11/object.c, trunk/src/pkcs11/session.c: Minor bug
	  fixes. Implemented the object finding properly.

2001-10-21 16:01  fabled

	* trunk/src/pkcs11/digestsign.c, trunk/src/pkcs11/endecrypt.c,
	  trunk/src/pkcs11/generic.c, trunk/src/pkcs11/object.c,
	  trunk/src/pkcs11/sc-pkcs11.h, trunk/src/pkcs11/session.c,
	  trunk/src/pkcs11/slot.c: Basic skeleton for object manipulation.
	  Some testing stuff.

2001-10-21 15:42  jey

	* trunk/src/pkcs11/generic.c, trunk/src/tests/hst-test.c: fixed
	  tokenInfo parsing

2001-10-20 23:51  fabled

	* trunk/src/pkcs11/function_table.c, trunk/src/pkcs11/generic.c,
	  trunk/src/pkcs11/sc-pkcs11.h, trunk/src/pkcs11/session.c: Added
	  basic session management. Implemented login, logout and change
	  pin functions. Improved card management.

2001-10-20 20:33  jey

	* trunk/src/tests/hst-test.c: fixed a weird escaping bug in
	  sc_read_binary(). this could affect other functions too. needs
	  more research.

2001-10-20 16:54  jey

	* trunk/src/tests/hst-test.c: lots and lots of changes.

2001-10-20 16:53  jey

	* trunk/src/pkcs11/generic.c: modified to use latest SC API

2001-10-19 23:23  jey

	* trunk/src/tests/hst-test.c: Major additions and fixes to core API

2001-10-19 19:52  fabled

	* trunk/src/pkcs11, trunk/src/pkcs11/README,
	  trunk/src/pkcs11/digestsign.c, trunk/src/pkcs11/endecrypt.c,
	  trunk/src/pkcs11/function_table.c, trunk/src/pkcs11/generic.c,
	  trunk/src/pkcs11/misc.c, trunk/src/pkcs11/object.c,
	  trunk/src/pkcs11/sc-pkcs11.h, trunk/src/pkcs11/session.c,
	  trunk/src/pkcs11/verify.c: Implemented dummy functions for
	  PKCS#15 module with functionality to read card reader names.

2001-10-19 17:30  jey

	* trunk/src/tests/hst-test.c: some structural changes; might not
	  even compile

2001-10-19 17:26  jey

	* trunk/src, trunk/src/tests, trunk/src/tests/hst-test.c: initial
	  commit

2001-10-19 17:26  

	* branches, releases, trunk: New repository initialized by cvs2svn.

